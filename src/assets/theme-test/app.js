/*! For license information please see app.js.LICENSE.txt */
(()=>{var t,n={9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),i=n(6026),o=n(4372),a=n(5327),s=n(4097),l=n(4109),c=n(7985),d=n(5061);e.exports=function(e){return new Promise((function(t,n){var u=e.data,h=e.headers;r.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(f+":"+m)}var _=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};i(t,n,o),p=null}},p.onabort=function(){p&&(n(d("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(d("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||c(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;g&&(h[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&r.forEach(h,(function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),n(e),p=null)})),u||(u=null),p.send(u)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),i=n(1849),o=n(321),a=n(7185);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var l=s(n(6419));l.Axios=o,l.create=function(e){return s(a(l.defaults,e))},l.Cancel=n(5263),l.CancelToken=n(4972),l.isCancel=n(6502),l.all=function(e){return Promise.all(e)},l.spread=n(8713),l.isAxiosError=n(6268),e.exports=l,e.exports.default=l},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),i=n(5327),o=n(782),a=n(3572),s=n(7185);function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},782:(e,t,n)=>{"use strict";var r=n(4867);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},4097:(e,t,n)=>{"use strict";var r=n(9699),i=n(7303);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},3572:(e,t,n)=>{"use strict";var r=n(4867),i=n(8527),o=n(6502),a=n(6419);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(o,c),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var d=i.concat(o).concat(a).concat(s),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===d.indexOf(e)}));return r.forEach(u,c),n}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},6419:(e,t,n)=>{"use strict";var r=n(4155),i=n(4867),o=n(6016),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(l=n(5448)),l),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){c.headers[e]=i.merge(a)})),e.exports=c},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9699:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},6268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4867:(e,t,n)=>{"use strict";var r=n(1849),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function d(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)d(arguments[r],n);return t},extend:function(e,t,n){return d(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},5737:(t,n,r)=>{"use strict";var o={};r.r(o),r.d(o,{afterMain:()=>O,afterRead:()=>R,afterWrite:()=>I,applyStyles:()=>z,arrow:()=>ae,auto:()=>g,basePlacements:()=>b,beforeMain:()=>M,beforeRead:()=>x,beforeWrite:()=>N,bottom:()=>f,clippingParents:()=>E,computeStyles:()=>ce,createPopper:()=>Ue,createPopperBase:()=>He,createPopperLite:()=>ze,detectOverflow:()=>Ce,end:()=>y,eventListeners:()=>ue,flip:()=>xe,hide:()=>Me,left:()=>_,main:()=>D,modifierPhases:()=>P,offset:()=>De,placements:()=>C,popper:()=>S,popperGenerator:()=>Ye,popperOffsets:()=>Oe,preventOverflow:()=>Ne,read:()=>A,reference:()=>T,right:()=>m,start:()=>v,top:()=>p,variationPlacements:()=>k,viewport:()=>w,write:()=>L});var a=r(5553),s=r.n(a),l=r(7484),c=r.n(l);const d={cutText:function(e,t){if(e.split(" ").length>1){var n=e.substring(0,t).split(" ");return n.pop(),n.join(" ")+"..."}return e},formatDate:function(e,t){return c()(e).format(t)},capitalizeFirstLetter:function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)},onlyNumber:function(e){return e?e.replace(/\D/g,""):""},formatCurrency:function(e){if(e){var t=e.toString().replace(/\D/g,""),n=t.length%3,r=t.substr(0,n),i=t.substr(n).match(/\d{3}/g);return i&&(r+=(n?".":"")+i.join(".")),r}return""},timeAgo:function(e){var t=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),n=((new Date).getTime()-t.getTime())/1e3,r=Math.floor(n/86400);return isNaN(r)||r<0||r>=31?c()(e).format("MMMM DD, YYYY"):0==r&&((n<60?"just now":n<120&&"1 minute ago")||n<3600&&Math.floor(n/60)+" minutes ago"||n<7200&&"1 hour ago"||n<86400&&Math.floor(n/3600)+" hours ago")||1==r&&"Yesterday"||r<7&&r+" days ago"||r<31&&Math.ceil(r/7)+" weeks ago"},diffTimeByNow:function(e){var t=c()(c()().format("YYYY-MM-DD HH:mm:ss").toString()),n=c()(c()(e).format("YYYY-MM-DD HH:mm:ss").toString()),r=c().duration(n.diff(t)),i=Math.floor(r.asMilliseconds()),o=Math.round(i/864e5),a=Math.round(i%864e5/36e5),s=Math.round(i%864e5%36e5/6e4),l=Math.round(i%864e5%36e5%6e4/1e3);return l<30&&l>=0&&(s+=1),{days:o.toString().length<2?"0"+o:o,hours:a.toString().length<2?"0"+a:a,minutes:s.toString().length<2?"0"+s:s,seconds:l.toString().length<2?"0"+l:l}},isset:function(e){return Object.keys(e).length},assign:function(e){return JSON.parse(JSON.stringify(e))},delay:function(e){return new Promise((function(t,n){setTimeout((function(){t()}),e)}))},randomNumbers:function(e,t,n){for(var r=[0],i=1;i<n;i++)r.push(Math.ceil(Math.random()*(e-t)+t));return r},replaceAll:function(e,t,n){return e.replace(new RegExp(t,"g"),n)}};var u=r(2641),h=r.n(u),p="top",f="bottom",m="right",_="left",g="auto",b=[p,f,m,_],v="start",y="end",E="clippingParents",w="viewport",S="popper",T="reference",k=b.reduce((function(e,t){return e.concat([t+"-"+v,t+"-"+y])}),[]),C=[].concat(b,[g]).reduce((function(e,t){return e.concat([t,t+"-"+v,t+"-"+y])}),[]),x="beforeRead",A="read",R="afterRead",M="beforeMain",D="main",O="afterMain",N="beforeWrite",L="write",I="afterWrite",P=[x,A,R,M,D,O,N,L,I];function F(e){return e?(e.nodeName||"").toLowerCase():null}function B(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Y(e){return e instanceof B(e).Element||e instanceof Element}function H(e){return e instanceof B(e).HTMLElement||e instanceof HTMLElement}function U(e){return"undefined"!=typeof ShadowRoot&&(e instanceof B(e).ShadowRoot||e instanceof ShadowRoot)}const z={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];H(i)&&F(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});H(r)&&F(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function j(e){return e.split("-")[0]}function V(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function G(e){var t=V(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function W(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&U(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function q(e){return B(e).getComputedStyle(e)}function $(e){return["table","td","th"].indexOf(F(e))>=0}function K(e){return((Y(e)?e.ownerDocument:e.document)||window.document).documentElement}function Q(e){return"html"===F(e)?e:e.assignedSlot||e.parentNode||(U(e)?e.host:null)||K(e)}function X(e){return H(e)&&"fixed"!==q(e).position?e.offsetParent:null}function Z(e){for(var t=B(e),n=X(e);n&&$(n)&&"static"===q(n).position;)n=X(n);return n&&("html"===F(n)||"body"===F(n)&&"static"===q(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&H(e)&&"fixed"===q(e).position)return null;for(var n=Q(e);H(n)&&["html","body"].indexOf(F(n))<0;){var r=q(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function J(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var ee=Math.max,te=Math.min,ne=Math.round;function re(e,t,n){return ee(e,te(t,n))}function ie(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function oe(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const ae={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=j(n.placement),l=J(s),c=[_,m].indexOf(s)>=0?"height":"width";if(o&&a){var d=function(e,t){return ie("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:oe(e,b))}(i.padding,n),u=G(o),h="y"===l?p:_,g="y"===l?f:m,v=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],y=a[l]-n.rects.reference[l],E=Z(o),w=E?"y"===l?E.clientHeight||0:E.clientWidth||0:0,S=v/2-y/2,T=d[h],k=w-u[c]-d[g],C=w/2-u[c]/2+S,x=re(T,C,k),A=l;n.modifiersData[r]=((t={})[A]=x,t.centerOffset=x-C,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&W(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};var se={top:"auto",right:"auto",bottom:"auto",left:"auto"};function le(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.offsets,a=e.position,s=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,d=!0===c?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:ne(ne(t*r)/r)||0,y:ne(ne(n*r)/r)||0}}(o):"function"==typeof c?c(o):o,u=d.x,h=void 0===u?0:u,g=d.y,b=void 0===g?0:g,v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),E=_,w=p,S=window;if(l){var T=Z(n),k="clientHeight",C="clientWidth";T===B(n)&&"static"!==q(T=K(n)).position&&(k="scrollHeight",C="scrollWidth"),T=T,i===p&&(w=f,b-=T[k]-r.height,b*=s?1:-1),i===_&&(E=m,h-=T[C]-r.width,h*=s?1:-1)}var x,A=Object.assign({position:a},l&&se);return s?Object.assign({},A,((x={})[w]=y?"0":"",x[E]=v?"0":"",x.transform=(S.devicePixelRatio||1)<2?"translate("+h+"px, "+b+"px)":"translate3d("+h+"px, "+b+"px, 0)",x)):Object.assign({},A,((t={})[w]=y?b+"px":"",t[E]=v?h+"px":"",t.transform="",t))}const ce={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:j(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,le(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,le(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var de={passive:!0};const ue={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=B(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach((function(e){e.addEventListener("scroll",n.update,de)})),s&&l.addEventListener("resize",n.update,de),function(){o&&c.forEach((function(e){e.removeEventListener("scroll",n.update,de)})),s&&l.removeEventListener("resize",n.update,de)}},data:{}};var he={left:"right",right:"left",bottom:"top",top:"bottom"};function pe(e){return e.replace(/left|right|bottom|top/g,(function(e){return he[e]}))}var fe={start:"end",end:"start"};function me(e){return e.replace(/start|end/g,(function(e){return fe[e]}))}function _e(e){var t=B(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ge(e){return V(K(e)).left+_e(e).scrollLeft}function be(e){var t=q(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ve(e){return["html","body","#document"].indexOf(F(e))>=0?e.ownerDocument.body:H(e)&&be(e)?e:ve(Q(e))}function ye(e,t){var n;void 0===t&&(t=[]);var r=ve(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=B(r),a=i?[o].concat(o.visualViewport||[],be(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(ye(Q(a)))}function Ee(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function we(e,t){return t===w?Ee(function(e){var t=B(e),n=K(e),r=t.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+ge(e),y:s}}(e)):H(t)?function(e){var t=V(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):Ee(function(e){var t,n=K(e),r=_e(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=ee(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ee(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+ge(e),l=-r.scrollTop;return"rtl"===q(i||n).direction&&(s+=ee(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(K(e)))}function Se(e,t,n){var r="clippingParents"===t?function(e){var t=ye(Q(e)),n=["absolute","fixed"].indexOf(q(e).position)>=0&&H(e)?Z(e):e;return Y(n)?t.filter((function(e){return Y(e)&&W(e,n)&&"body"!==F(e)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=we(e,n);return t.top=ee(r.top,t.top),t.right=te(r.right,t.right),t.bottom=te(r.bottom,t.bottom),t.left=ee(r.left,t.left),t}),we(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Te(e){return e.split("-")[1]}function ke(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?j(i):null,a=i?Te(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case p:t={x:s,y:n.y-r.height};break;case f:t={x:s,y:n.y+n.height};break;case m:t={x:n.x+n.width,y:l};break;case _:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=o?J(o):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case v:t[c]=t[c]-(n[d]/2-r[d]/2);break;case y:t[c]=t[c]+(n[d]/2-r[d]/2)}}return t}function Ce(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?E:o,s=n.rootBoundary,l=void 0===s?w:s,c=n.elementContext,d=void 0===c?S:c,u=n.altBoundary,h=void 0!==u&&u,_=n.padding,g=void 0===_?0:_,v=ie("number"!=typeof g?g:oe(g,b)),y=d===S?T:S,k=e.elements.reference,C=e.rects.popper,x=e.elements[h?y:d],A=Se(Y(x)?x:x.contextElement||K(e.elements.popper),a,l),R=V(k),M=ke({reference:R,element:C,strategy:"absolute",placement:i}),D=Ee(Object.assign({},C,M)),O=d===S?D:R,N={top:A.top-O.top+v.top,bottom:O.bottom-A.bottom+v.bottom,left:A.left-O.left+v.left,right:O.right-A.right+v.right},L=e.modifiersData.offset;if(d===S&&L){var I=L[i];Object.keys(N).forEach((function(e){var t=[m,f].indexOf(e)>=0?1:-1,n=[p,f].indexOf(e)>=0?"y":"x";N[e]+=I[n]*t}))}return N}const xe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,y=n.flipVariations,E=void 0===y||y,w=n.allowedAutoPlacements,S=t.options.placement,T=j(S),x=l||(T===S||!E?[pe(S)]:function(e){if(j(e)===g)return[];var t=pe(e);return[me(e),t,me(t)]}(S)),A=[S].concat(x).reduce((function(e,n){return e.concat(j(n)===g?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?C:l,d=Te(r),u=d?s?k:k.filter((function(e){return Te(e)===d})):b,h=u.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=Ce(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[j(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:E,allowedAutoPlacements:w}):n)}),[]),R=t.rects.reference,M=t.rects.popper,D=new Map,O=!0,N=A[0],L=0;L<A.length;L++){var I=A[L],P=j(I),F=Te(I)===v,B=[p,f].indexOf(P)>=0,Y=B?"width":"height",H=Ce(t,{placement:I,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),U=B?F?m:_:F?f:p;R[Y]>M[Y]&&(U=pe(U));var z=pe(U),V=[];if(o&&V.push(H[P]<=0),s&&V.push(H[U]<=0,H[z]<=0),V.every((function(e){return e}))){N=I,O=!1;break}D.set(I,V)}if(O)for(var G=function(e){var t=A.find((function(t){var n=D.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return N=t,"break"},W=E?3:1;W>0;W--){if("break"===G(W))break}t.placement!==N&&(t.modifiersData[r]._skip=!0,t.placement=N,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Ae(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Re(e){return[p,m,f,_].some((function(t){return e[t]>=0}))}const Me={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=Ce(t,{elementContext:"reference"}),s=Ce(t,{altBoundary:!0}),l=Ae(a,r),c=Ae(s,i,o),d=Re(l),u=Re(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}};const De={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=C.reduce((function(e,n){return e[n]=function(e,t,n){var r=j(e),i=[_,p].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[_,m].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};const Oe={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ke({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};const Ne={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,g=void 0===h||h,b=n.tetherOffset,y=void 0===b?0:b,E=Ce(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),w=j(t.placement),S=Te(t.placement),T=!S,k=J(w),C="x"===k?"y":"x",x=t.modifiersData.popperOffsets,A=t.rects.reference,R=t.rects.popper,M="function"==typeof y?y(Object.assign({},t.rects,{placement:t.placement})):y,D={x:0,y:0};if(x){if(o||s){var O="y"===k?p:_,N="y"===k?f:m,L="y"===k?"height":"width",I=x[k],P=x[k]+E[O],F=x[k]-E[N],B=g?-R[L]/2:0,Y=S===v?A[L]:R[L],H=S===v?-R[L]:-A[L],U=t.elements.arrow,z=g&&U?G(U):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=V[O],q=V[N],$=re(0,A[L],z[L]),K=T?A[L]/2-B-$-W-M:Y-$-W-M,Q=T?-A[L]/2+B+$+q+M:H+$+q+M,X=t.elements.arrow&&Z(t.elements.arrow),ne=X?"y"===k?X.clientTop||0:X.clientLeft||0:0,ie=t.modifiersData.offset?t.modifiersData.offset[t.placement][k]:0,oe=x[k]+K-ie-ne,ae=x[k]+Q-ie;if(o){var se=re(g?te(P,oe):P,I,g?ee(F,ae):F);x[k]=se,D[k]=se-I}if(s){var le="x"===k?p:_,ce="x"===k?f:m,de=x[C],ue=de+E[le],he=de-E[ce],pe=re(g?te(ue,oe):ue,de,g?ee(he,ae):he);x[C]=pe,D[C]=pe-de}}t.modifiersData[r]=D}},requiresIfExists:["offset"]};function Le(e,t,n){void 0===n&&(n=!1);var r,i,o=K(t),a=V(e),s=H(t),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&(("body"!==F(t)||be(o))&&(l=(r=t)!==B(r)&&H(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:_e(r)),H(t)?((c=V(t)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=ge(o))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function Ie(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Pe(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Fe={placement:"bottom",modifiers:[],strategy:"absolute"};function Be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Ye(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Fe:i;return function(e,t,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fe,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],s=!1,l={state:i,setOptions:function(n){c(),i.options=Object.assign({},o,i.options,n),i.scrollParents={reference:Y(e)?ye(e):e.contextElement?ye(e.contextElement):[],popper:ye(t)};var s=function(e){var t=Ie(e);return P.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=s.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var s=o({state:i,name:t,instance:l,options:r}),c=function(){};a.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(Be(t,n)){i.rects={reference:Le(t,Z(n),"fixed"===i.options.strategy),popper:G(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],a=o.fn,c=o.options,d=void 0===c?{}:c,u=o.name;"function"==typeof a&&(i=a({state:i,options:d,name:u,instance:l})||i)}else i.reset=!1,r=-1}}},update:Pe((function(){return new Promise((function(e){l.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!Be(e,t))return l;function c(){a.forEach((function(e){return e()})),a=[]}return l.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var He=Ye(),Ue=Ye({defaultModifiers:[ue,Oe,ce,z,De,xe,Ne,ae,Me]}),ze=Ye({defaultModifiers:[ue,Oe,ce,z]});window.cash=s(),window.helper=d,window.Velocity=h(),window.Popper=o,function(e){let t=function t(n){return e("[data-loading-icon]").each((function(){let t=void 0!==e(this).data("color")?e(this).data("color"):e("body").css("color"),n=void 0!==e(this).attr("class")?e(this).attr("class"):"";[{name:"audio",svg:`\n                    <svg width="15" viewBox="0 0 55 80" xmlns="http://www.w3.org/2000/svg" fill="${t}" class="${n}">\n                        <g transform="matrix(1 0 0 -1 0 80)">\n                            <rect width="10" height="20" rx="3">\n                                <animate attributeName="height"\n                                    begin="0s" dur="4.3s"\n                                    values="20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </rect>\n                            <rect x="15" width="10" height="80" rx="3">\n                                <animate attributeName="height"\n                                    begin="0s" dur="2s"\n                                    values="80;55;33;5;75;23;73;33;12;14;60;80" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </rect>\n                            <rect x="30" width="10" height="50" rx="3">\n                                <animate attributeName="height"\n                                    begin="0s" dur="1.4s"\n                                    values="50;34;78;23;56;23;34;76;80;54;21;50" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </rect>\n                            <rect x="45" width="10" height="30" rx="3">\n                                <animate attributeName="height"\n                                    begin="0s" dur="2s"\n                                    values="30;45;13;80;56;72;45;76;34;23;67;30" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </rect>\n                        </g>\n                    </svg>\n                `},{name:"ball-triangle",svg:`\n                    <svg width="20" viewBox="0 0 57 57" xmlns="http://www.w3.org/2000/svg" class="${n}">\n                        <g fill="none" fill-rule="evenodd">\n                            <g transform="translate(1 1)">\n                                <circle cx="5" cy="50" r="5" fill="${t}">\n                                    <animate attributeName="cy"\n                                        begin="0s" dur="2.2s"\n                                        values="50;5;50;50"\n                                        calcMode="linear"\n                                        repeatCount="indefinite" />\n                                    <animate attributeName="cx"\n                                        begin="0s" dur="2.2s"\n                                        values="5;27;49;5"\n                                        calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="27" cy="5" r="5" fill="${t}">\n                                    <animate attributeName="cy"\n                                        begin="0s" dur="2.2s"\n                                        from="5" to="5"\n                                        values="5;50;50;5"\n                                        calcMode="linear"\n                                        repeatCount="indefinite" />\n                                    <animate attributeName="cx"\n                                        begin="0s" dur="2.2s"\n                                        from="27" to="27"\n                                        values="27;49;5;27"\n                                        calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="49" cy="50" r="5" fill="${t}">\n                                    <animate attributeName="cy"\n                                        begin="0s" dur="2.2s"\n                                        values="50;50;5;50"\n                                        calcMode="linear"\n                                        repeatCount="indefinite" />\n                                    <animate attributeName="cx"\n                                        from="49" to="49"\n                                        begin="0s" dur="2.2s"\n                                        values="49;5;27;49"\n                                        calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                            </g>\n                        </g>\n                    </svg>\n                `},{name:"bars",svg:`\n                    <svg width="20" viewBox="0 0 135 140" xmlns="http://www.w3.org/2000/svg" fill="${t}" class="${n}">\n                        <rect y="10" width="15" height="120" rx="6">\n                            <animate attributeName="height"\n                                begin="0.5s" dur="1s"\n                                values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n                                repeatCount="indefinite" />\n                            <animate attributeName="y"\n                                begin="0.5s" dur="1s"\n                                values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n                                repeatCount="indefinite" />\n                        </rect>\n                        <rect x="30" y="10" width="15" height="120" rx="6">\n                            <animate attributeName="height"\n                                begin="0.25s" dur="1s"\n                                values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n                                repeatCount="indefinite" />\n                            <animate attributeName="y"\n                                begin="0.25s" dur="1s"\n                                values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n                                repeatCount="indefinite" />\n                        </rect>\n                        <rect x="60" width="15" height="140" rx="6">\n                            <animate attributeName="height"\n                                begin="0s" dur="1s"\n                                values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n                                repeatCount="indefinite" />\n                            <animate attributeName="y"\n                                begin="0s" dur="1s"\n                                values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n                                repeatCount="indefinite" />\n                        </rect>\n                        <rect x="90" y="10" width="15" height="120" rx="6">\n                            <animate attributeName="height"\n                                begin="0.25s" dur="1s"\n                                values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n                                repeatCount="indefinite" />\n                            <animate attributeName="y"\n                                begin="0.25s" dur="1s"\n                                values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n                                repeatCount="indefinite" />\n                        </rect>\n                        <rect x="120" y="10" width="15" height="120" rx="6">\n                            <animate attributeName="height"\n                                begin="0.5s" dur="1s"\n                                values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear"\n                                repeatCount="indefinite" />\n                            <animate attributeName="y"\n                                begin="0.5s" dur="1s"\n                                values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear"\n                                repeatCount="indefinite" />\n                        </rect>\n                    </svg>\n                `},{name:"circles",svg:`\n                    <svg width="20" viewBox="0 0 135 135" xmlns="http://www.w3.org/2000/svg" fill="${t}" class="${n}">\n                        <path d="M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z">\n                            <animateTransform\n                                attributeName="transform"\n                                type="rotate"\n                                from="0 67 67"\n                                to="-360 67 67"\n                                dur="2.5s"\n                                repeatCount="indefinite"/>\n                        </path>\n                        <path d="M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z">\n                            <animateTransform\n                                attributeName="transform"\n                                type="rotate"\n                                from="0 67 67"\n                                to="360 67 67"\n                                dur="8s"\n                                repeatCount="indefinite"/>\n                        </path>\n                    </svg>\n                `},{name:"grid",svg:`\n                    <svg width="20" viewBox="0 0 105 105" xmlns="http://www.w3.org/2000/svg" fill="${t}" class="${n}">\n                        <circle cx="12.5" cy="12.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="0s" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5">\n                            <animate attributeName="fill-opacity"\n                            begin="100ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="52.5" cy="12.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="300ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="52.5" cy="52.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="600ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="92.5" cy="12.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="800ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="92.5" cy="52.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="400ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="12.5" cy="92.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="700ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="52.5" cy="92.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="500ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="92.5" cy="92.5" r="12.5">\n                            <animate attributeName="fill-opacity"\n                            begin="200ms" dur="1s"\n                            values="1;.2;1" calcMode="linear"\n                            repeatCount="indefinite" />\n                        </circle>\n                    </svg>\n                `},{name:"hearts",svg:`\n                    <svg width="30" viewBox="0 0 140 64" xmlns="http://www.w3.org/2000/svg" fill="${t}" class="${n}">\n                        <path d="M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.717-6.002 11.47-7.65 17.305-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z" fill-opacity=".5">\n                            <animate attributeName="fill-opacity"\n                                begin="0s" dur="1.4s"\n                                values="0.5;1;0.5"\n                                calcMode="linear"\n                                repeatCount="indefinite" />\n                        </path>\n                        <path d="M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.592-2.32 17.307 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z" fill-opacity=".5">\n                            <animate attributeName="fill-opacity"\n                                begin="0.7s" dur="1.4s"\n                                values="0.5;1;0.5"\n                                calcMode="linear"\n                                repeatCount="indefinite" />\n                        </path>\n                        <path d="M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z" />\n                    </svg>\n                `},{name:"oval",svg:`\n                    <svg width="25" viewBox="-2 -2 42 42" xmlns="http://www.w3.org/2000/svg" stroke="${t}" class="${n}">\n                        <g fill="none" fill-rule="evenodd">\n                            <g transform="translate(1 1)" stroke-width="4">\n                                <circle stroke-opacity=".5" cx="18" cy="18" r="18"/>\n                                <path d="M36 18c0-9.94-8.06-18-18-18">\n                                    <animateTransform\n                                        attributeName="transform"\n                                        type="rotate"\n                                        from="0 18 18"\n                                        to="360 18 18"\n                                        dur="1s"\n                                        repeatCount="indefinite"/>\n                                </path>\n                            </g>\n                        </g>\n                    </svg>\n                `},{name:"puff",svg:`\n                    <svg width="25" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" stroke="${t}" class="${n}">\n                        <g fill="none" fill-rule="evenodd" stroke-width="4">\n                            <circle cx="22" cy="22" r="1">\n                                <animate attributeName="r"\n                                    begin="0s" dur="1.8s"\n                                    values="1; 20"\n                                    calcMode="spline"\n                                    keyTimes="0; 1"\n                                    keySplines="0.165, 0.84, 0.44, 1"\n                                    repeatCount="indefinite" />\n                                <animate attributeName="stroke-opacity"\n                                    begin="0s" dur="1.8s"\n                                    values="1; 0"\n                                    calcMode="spline"\n                                    keyTimes="0; 1"\n                                    keySplines="0.3, 0.61, 0.355, 1"\n                                    repeatCount="indefinite" />\n                            </circle>\n                            <circle cx="22" cy="22" r="1">\n                                <animate attributeName="r"\n                                    begin="-0.9s" dur="1.8s"\n                                    values="1; 20"\n                                    calcMode="spline"\n                                    keyTimes="0; 1"\n                                    keySplines="0.165, 0.84, 0.44, 1"\n                                    repeatCount="indefinite" />\n                                <animate attributeName="stroke-opacity"\n                                    begin="-0.9s" dur="1.8s"\n                                    values="1; 0"\n                                    calcMode="spline"\n                                    keyTimes="0; 1"\n                                    keySplines="0.3, 0.61, 0.355, 1"\n                                    repeatCount="indefinite" />\n                            </circle>\n                        </g>\n                    </svg>\n                `},{name:"rings",svg:`\n                    <svg width="30" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg" stroke="${t}" class="${n}">\n                        <g fill="none" fill-rule="evenodd" transform="translate(1 1)" stroke-width="3">\n                            <circle cx="22" cy="22" r="6" stroke-opacity="0">\n                                <animate attributeName="r"\n                                    begin="1.5s" dur="3s"\n                                    values="6;22"\n                                    calcMode="linear"\n                                    repeatCount="indefinite" />\n                                <animate attributeName="stroke-opacity"\n                                    begin="1.5s" dur="3s"\n                                    values="1;0" calcMode="linear"\n                                    repeatCount="indefinite" />\n                                <animate attributeName="stroke-width"\n                                    begin="1.5s" dur="3s"\n                                    values="2;0" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </circle>\n                            <circle cx="22" cy="22" r="6" stroke-opacity="0">\n                                <animate attributeName="r"\n                                    begin="3s" dur="3s"\n                                    values="6;22"\n                                    calcMode="linear"\n                                    repeatCount="indefinite" />\n                                <animate attributeName="stroke-opacity"\n                                    begin="3s" dur="3s"\n                                    values="1;0" calcMode="linear"\n                                    repeatCount="indefinite" />\n                                <animate attributeName="stroke-width"\n                                    begin="3s" dur="3s"\n                                    values="2;0" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </circle>\n                            <circle cx="22" cy="22" r="8">\n                                <animate attributeName="r"\n                                    begin="0s" dur="1.5s"\n                                    values="6;1;2;3;4;5;6"\n                                    calcMode="linear"\n                                    repeatCount="indefinite" />\n                            </circle>\n                        </g>\n                    </svg>\n                `},{name:"spinning-circles",svg:`\n                    <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg" class="${n}">\n                        <g fill="none" fill-rule="evenodd">\n                            <g transform="translate(2 1)" stroke="${t}" stroke-width="1.5">\n                                <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="1;0;0;0;0;0;0;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;1;0;0;0;0;0;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;0;1;0;0;0;0;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;0;0;1;0;0;0;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;0;0;0;1;0;0;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;0;0;0;0;1;0;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;0;0;0;0;0;1;0" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                                <circle cx="27" cy="5" r="5" fill-opacity="0" fill="${t}">\n                                    <animate attributeName="fill-opacity"\n                                        begin="0s" dur="1.3s"\n                                        values="0;0;0;0;0;0;0;1" calcMode="linear"\n                                        repeatCount="indefinite" />\n                                </circle>\n                            </g>\n                        </g>\n                    </svg>\n                `},{name:"tail-spin",svg:`\n                    <svg width="20" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" class="${n}">\n                        <defs>\n                            <linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a">\n                                <stop stop-color="${t}" stop-opacity="0" offset="0%"/>\n                                <stop stop-color="${t}" stop-opacity=".631" offset="63.146%"/>\n                                <stop stop-color="${t}" offset="100%"/>\n                            </linearGradient>\n                        </defs>\n                        <g fill="none" fill-rule="evenodd">\n                            <g transform="translate(1 1)">\n                                <path d="M36 18c0-9.94-8.06-18-18-18" id="Oval-2" stroke="url(#a)" stroke-width="3">\n                                    <animateTransform\n                                        attributeName="transform"\n                                        type="rotate"\n                                        from="0 18 18"\n                                        to="360 18 18"\n                                        dur="0.9s"\n                                        repeatCount="indefinite" />\n                                </path>\n                                <circle fill="${t}" cx="36" cy="18" r="1">\n                                    <animateTransform\n                                        attributeName="transform"\n                                        type="rotate"\n                                        from="0 18 18"\n                                        to="360 18 18"\n                                        dur="0.9s"\n                                        repeatCount="indefinite" />\n                                </circle>\n                            </g>\n                        </g>\n                    </svg>\n                `},{name:"three-dots",svg:`\n                    <svg width="25" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg" fill="${t}" class="${n}">\n                        <circle cx="15" cy="15" r="15">\n                            <animate attributeName="r" from="15" to="15"\n                                    begin="0s" dur="0.8s"\n                                    values="15;9;15" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            <animate attributeName="fill-opacity" from="1" to="1"\n                                    begin="0s" dur="0.8s"\n                                    values="1;.5;1" calcMode="linear"\n                                    repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="60" cy="15" r="9" fill-opacity="0.3">\n                            <animate attributeName="r" from="9" to="9"\n                                    begin="0s" dur="0.8s"\n                                    values="9;15;9" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            <animate attributeName="fill-opacity" from="0.5" to="0.5"\n                                    begin="0s" dur="0.8s"\n                                    values=".5;1;.5" calcMode="linear"\n                                    repeatCount="indefinite" />\n                        </circle>\n                        <circle cx="105" cy="15" r="15">\n                            <animate attributeName="r" from="15" to="15"\n                                    begin="0s" dur="0.8s"\n                                    values="15;9;15" calcMode="linear"\n                                    repeatCount="indefinite" />\n                            <animate attributeName="fill-opacity" from="1" to="1"\n                                    begin="0s" dur="0.8s"\n                                    values="1;.5;1" calcMode="linear"\n                                    repeatCount="indefinite" />\n                        </circle>\n                    </svg>\n                `}].forEach((t=>{e(this).data("loading-icon")==t.name&&e(this).replaceWith(t.svg)}))})),t}();e.fn.svgLoader=function(){t()}}(s()),function(e){e("body").on("click",".accordion-button",(function(){h()(e(this).closest(".accordion").find(".accordion-collapse"),"slideUp",{duration:300,complete:function(t){e(t).removeClass("show"),e(t).closest(".accordion-item").find(".accordion-button").addClass("collapsed").attr("aria-expanded",!1)}}),e(this).hasClass("collapsed")?h()(e(this).closest(".accordion-item").find(".accordion-collapse"),"slideDown",{duration:300,complete:function(t){e(t).addClass("show"),e(t).closest(".accordion-item").find(".accordion-button").removeClass("collapsed").attr("aria-expanded",!0)}}):h()(e(this).closest(".accordion-item").find(".accordion-collapse"),"slideUp",{duration:300,complete:function(t){e(t).removeClass("show"),e(t).closest(".accordion-item").find(".accordion-button").addClass("collapsed").attr("aria-expanded",!1)}})}))}(s()),function(e){e("body").on("click",".btn-close",(function(){h()(e(this).closest(".alert"),"fadeOut",{duration:300,complete:function(t){e(t).removeClass("show")}})}))}(s()),function(e){function t(){e(".dropdown-menu").each((async function(){if(void 0!==e(this).attr("id")&&e('[data-dropdown-replacer="'+e(this).attr("id")+'"]').length&&void 0===e(this).data("dropdown-programmatically")){let t=e(this).attr("id"),n=e('[data-dropdown-replacer="'+t+'"]').parent().find(".dropdown-toggle");e(this).removeClass("show"),await setTimeout((()=>{e('[data-dropdown-replacer="'+t+'"]').replaceWith(this),e(this).removeAttr("style"),e(this).removeAttr("data-popper-placement"),e(n).attr("aria-expanded",!1)}),200)}else void 0!==e(this).attr("id")&&!e('[data-dropdown-replacer="'+e(this).attr("id")+'"]').length&&e(this).hasClass("show")&&void 0===e(this).data("dropdown-programmatically")?e(this).remove():"initiate"==e(this).data("dropdown-programmatically")?e(this).attr("data-dropdown-programmatically","showed"):"showed"==e(this).data("dropdown-programmatically")&&e(this).removeAttr("data-dropdown-programmatically")}))}function n(n){let r=e(n).find(".dropdown-menu").first(),i=function(e){return e.filter(((e,t)=>null!==t.offsetParent))}(e(n).find(".dropdown-toggle")),o=e(n).data("placement")?e(n).data("placement"):"bottom-end",a="_"+Math.random().toString(36).substr(2,9);t(),e(r).length&&(e(i).attr("aria-expanded",!0),"static"==e(n).css("position")&&e(n).css("position","relative"),e(r).css("width",e(r).css("width")),e('<div data-dropdown-replacer="'+a+'"></div>').insertAfter(r),e(r).attr("id",a).appendTo("body"),Ue(i[0],r[0],{placement:o}),e(r).addClass("show"))}function r(t){if(e(t).find(".dropdown-menu").length)e(t).find(".dropdown-menu").attr("data-dropdown-programmatically","initiate");else{let t=e("[data-dropdown-replacer]").data("dropdown-replacer");e("#"+t).attr("data-dropdown-programmatically","initiate")}n(t)}e("body").on("click",(function(r){let i=e(r.target).closest(".dropdown"),o=e(i).find(".dropdown-toggle"),a=e(i).find(".dropdown-menu").first(),s=e(r.target).closest(".dropdown-menu").first(),l=e(r.target).data("dismiss");!e(i).length&&!e(s).length||e(o).length&&!e(a).length||"dropdown"==l?t():e(s).length||n(i)})),document.addEventListener("keydown",(function(e){"Escape"==e.code&&t()})),e.fn.dropdown=function(n){"show"==n?r(this):"hide"==n?t():"toggle"==n&&function(n){let i=e(n).find(".dropdown-menu").first();e(i).length?r(n):t()}(this)}}(s()),function(e){let t=[];function n(){let t=9999;return e(".modal").each((function(){"auto"!==e(this).css("z-index")&&e(this).css("z-index")>t&&(t=parseInt(e(this).css("z-index")))})),t}function r(t){return window.innerWidth-e(t)[0].clientWidth}function i(i){e("[data-modal-replacer='"+e(i).attr("id")+"']").length||(e('<div data-modal-replacer="'+e(i).attr("id")+'"></div>').insertAfter(i),e(i).css({"margin-top":0,"margin-left":0}),e(i).attr("aria-hidden",!1).appendTo("body"),setTimeout((()=>{e(i).addClass("show").css("z-index",n()+1)}),200),e("body").css("padding-right",parseInt(e("body").css("padding-right"))+r("html")+"px").addClass("overflow-y-hidden"),e(".modal").removeClass("overflow-y-auto").css("padding-left","0px"),e(i).addClass("overflow-y-auto").css("padding-left",r(i)+"px").addClass(e(".modal.show").length?"modal-overlap":""),t.forEach((function(n,r){e(i).attr("id")==e(n.el).attr("id")&&"on.show"==n.event&&(t[r].triggerCallback=!0)})))}function o(i){if(e(i).hasClass("modal")&&e(i).hasClass("show")){let o=1e3*parseFloat(e(i).css("transition-duration").split(",")[1]);e(i).attr("aria-hidden",!0).removeClass("show"),setTimeout((()=>{e(i).removeAttr("style").removeClass("modal-overlap").removeClass("overflow-y-auto"),e(".modal").each((function(){parseInt(e(this).css("z-index"))===n()&&e(this).addClass("overflow-y-auto").css("padding-left",r(this)+"px")})),9999==n()&&e("body").removeClass("overflow-y-hidden").css("padding-right",""),e('[data-modal-replacer="'+e(i).attr("id")+'"]').replaceWith(i)}),o),t.forEach((function(n,r){e(i).attr("id")==e(n.el).attr("id")&&"on.hide"==n.event&&(t[r].triggerCallback=!0)}))}}e("body").on("click",'a[data-toggle="modal"]',(function(){i(e(this).attr("data-target"))})),e("body").on("click",(function(t){e(t.target).hasClass("modal")&&e(t.target).hasClass("show")&&(void 0===e(t.target).data("backdrop")?o(t.target):(e(t.target).addClass("modal-static"),setTimeout((()=>{e(t.target).removeClass("modal-static")}),600)))})),e("body").on("click",'[data-dismiss="modal"]',(function(){o(e(this).closest(".modal")[0])})),setInterval((function(){t.forEach((function(e,n){("on.show"==e.event&&e.triggerCallback||"on.hide"==e.event&&e.triggerCallback)&&(e.callback(),t[n].triggerCallback=!1)}))}),300),document.addEventListener("keydown",(function(t){if("Escape"==t.code){let t=e(".modal.show").last();e(t).hasClass("modal")&&e(t).hasClass("show")&&(void 0===e(t).data("backdrop")?o(t):(e(t).addClass("modal-static"),setTimeout((()=>{e(t).removeClass("modal-static")}),600)))}})),e.fn.modal=function(n,r){var a;"show"==n?i(this):"hide"==n?o(this):"toggle"==n?e(a=this).hasClass("modal")&&e(a).hasClass("show")?o(a):i(a):"on.show"==n?function(e,n){t[t.length]={el:e,event:"on.show",triggerCallback:!1,callback:n}}(this,r):"on.hide"==n&&function(e,n){t[t.length]={el:e,event:"on.hide",triggerCallback:!1,callback:n}}(this,r)}}(s()),function(e){e("body").on("click",'a[data-toggle="tab"]',(function(t,n){e(this).closest(".nav-tabs").find('a[data-toggle="tab"]').removeClass("active").attr("aria-selected",!1),e(this).addClass("active").attr("aria-selected",!0);let r=e(this).attr("data-target"),i=e(r).closest(".tab-content").width();e(r).closest(".tab-content").children(".tab-pane").removeAttr("style").removeClass("active"),e(r).width(i+"px").addClass("active")}))}(s());var je=r(7757),Ve=r.n(je);function Ge(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){if(e("#report-line-chart").length){var t=e("#report-line-chart")[0].getContext("2d");new(Ve())(t,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"# of Votes",data:[0,200,250,200,500,450,850,1050,950,1100,900,1200],borderWidth:2,borderColor:"#203f90",backgroundColor:"transparent",pointBorderColor:"transparent"},{label:"# of Votes",data:[0,300,400,560,320,600,720,850,690,805,1200,1010],borderWidth:2,borderDash:[2,2],borderColor:"#a0afbf",backgroundColor:"transparent",pointBorderColor:"transparent"}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{fontSize:"12",fontColor:e("html").hasClass("dark")?"#718096":"#777777"},gridLines:{display:!1}}],yAxes:[{ticks:{fontSize:"12",fontColor:e("html").hasClass("dark")?"#718096":"#777777",callback:function(e,t,n){return"$"+e}},gridLines:{color:e("html").hasClass("dark")?"#718096":"#D8D8D8",zeroLineColor:e("html").hasClass("dark")?"#718096":"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#report-pie-chart").length){var n=e("#report-pie-chart")[0].getContext("2d");new(Ve())(n,{type:"pie",data:{labels:["Yellow","Dark"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:5,borderColor:e("html").hasClass("dark")?"#303953":"#fff"}]},options:{legend:{display:!1}}})}if(e("#report-donut-chart").length){var r=e("#report-donut-chart")[0].getContext("2d");new(Ve())(r,{type:"doughnut",data:{labels:["Yellow","Dark"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:5,borderColor:e("html").hasClass("dark")?"#303953":"#fff"}]},options:{legend:{display:!1},cutoutPercentage:80}})}if(e("#report-bar-chart").length){var i=new Array(40).fill(0).map((function(e,t){return t%3==0||t%5==0?Math.ceil(-20*Math.random()+20):Math.ceil(-7*Math.random()+7)})),o=i.map((function(e){return e>=8&&e<=14?"#1c3faaa6":e>=15?"#1C3FAA":"#1c3faa59"})),a=e("#report-bar-chart")[0].getContext("2d"),s=new(Ve())(a,{type:"bar",data:{labels:i,datasets:[{label:"Html Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,data:i,backgroundColor:o}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{display:!1},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1},gridLines:{display:!1}}]}}});setInterval((function(){var e=i[0];i.shift(),i.push(e);var t=o[0];o.shift(),o.push(t),s.update()}),1e3)}if(e("#report-bar-chart-1").length){var l=e("#report-bar-chart-1")[0].getContext("2d");new(Ve())(l,{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Html Template",borderWidth:2,borderColor:"transparent",barPercentage:.5,barThickness:8,maxBarThickness:6.5,minBarLength:2,data:[60,150,30,200,180,50,180,120,230,180,250,270],backgroundColor:"#1c3faa"},{label:"VueJs Template",borderWidth:2,borderColor:"transparent",barPercentage:.5,barThickness:8,maxBarThickness:6.5,minBarLength:2,data:[50,135,40,180,190,60,150,90,250,170,240,250],backgroundColor:e("html").hasClass("dark")?"#303a53":"#ccd7e2"}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{fontSize:11,fontColor:"#718096"},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1},gridLines:{color:"#D8D8D8",zeroLineColor:"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#report-donut-chart-1").length){var c=e("#report-donut-chart-1")[0].getContext("2d");new(Ve())(c,{type:"doughnut",data:{labels:["Yellow","Dark"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:2,borderColor:e("html").hasClass("dark")?"#303953":"#fff"}]},options:{legend:{display:!1},cutoutPercentage:83}})}if(e("#report-donut-chart-2").length){var u=e("#report-donut-chart-2")[0].getContext("2d");new(Ve())(u,{type:"doughnut",data:{labels:["Yellow","Dark"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:2,borderColor:e("html").hasClass("dark")?"#303953":"#fff"}]},options:{legend:{display:!1},cutoutPercentage:83}})}if(e("#report-donut-chart-3").length){var h=e("#report-donut-chart-3")[0].getContext("2d");new(Ve())(h,{type:"doughnut",data:{labels:["Yellow","Dark"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:5,borderColor:e("html").hasClass("dark")?"#303953":"#e3eaf2"}]},options:{legend:{display:!1},cutoutPercentage:82}})}if(e(".simple-line-chart-1").length&&e(".simple-line-chart-1").each((function(){var t=e(this)[0].getContext("2d");new(Ve())(t,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"# of Votes",data:void 0!==e(this).data("random")?d.randomNumbers(0,5,12):[0,200,250,200,500,450,850,1050,950,1100,900,1200],borderWidth:2,borderColor:void 0!==e(this).data("line-color")?e(this).data("line-color"):"#203f90",backgroundColor:"transparent",pointBorderColor:"transparent"}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{display:!1},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1},gridLines:{display:!1}}]}}})})),e(".simple-line-chart-2").length&&e(".simple-line-chart-2").each((function(){var t=e(this)[0].getContext("2d");new(Ve())(t,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"# of Votes",data:void 0!==e(this).data("random")?d.randomNumbers(0,5,12):[0,300,400,560,320,600,720,850,690,805,1200,1010],borderWidth:2,borderDash:[2,2],borderColor:void 0!==e(this).data("line-color")?e(this).data("line-color"):"#cbd5e0",backgroundColor:"transparent",pointBorderColor:"transparent"}]},options:{maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{ticks:{display:!1},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1},gridLines:{display:!1}}]}}})})),e(".simple-line-chart-3").length){var p=e(".simple-line-chart-3")[0].getContext("2d");new(Ve())(p,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"# of Votes",data:[0,200,250,200,500,450,850,1050,950,1100,900,1200],borderWidth:2,borderColor:"#1c3faa",backgroundColor:"transparent",pointBorderColor:"transparent"},{label:"# of Votes",data:[0,300,400,560,320,600,720,850,690,805,1200,1010],borderWidth:2,borderDash:[2,2],borderColor:"#98a8b9",backgroundColor:"transparent",pointBorderColor:"transparent"}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{display:!1},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1},gridLines:{display:!1}}]}}})}if(e(".simple-line-chart-4").length){var f=e(".simple-line-chart-4")[0].getContext("2d");new(Ve())(f,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"# of Votes",data:[0,200,250,200,500,450,850,1050,950,1100,900,1200],borderWidth:2,borderColor:"#1c3faa",backgroundColor:"transparent",pointBorderColor:"transparent"},{label:"# of Votes",data:[0,300,400,560,320,600,720,850,690,805,1200,1010],borderWidth:2,borderDash:[2,2],borderColor:"#98a8b9",backgroundColor:"transparent",pointBorderColor:"transparent"}]},options:{legend:{display:!1},scales:{xAxes:[{ticks:{display:!1},gridLines:{display:!1}}],yAxes:[{ticks:{display:!1},gridLines:{display:!1}}]}}})}if(e("#vertical-bar-chart-widget").length){var m=e("#vertical-bar-chart-widget")[0].getContext("2d");new(Ve())(m,{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug"],datasets:[{label:"Html Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,data:[0,200,250,200,500,450,850,1050],backgroundColor:"#203f90"},{label:"VueJs Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,data:[0,300,400,560,320,600,720,850],backgroundColor:"#cbd5e0"}]},options:{scales:{xAxes:[{ticks:{fontSize:"12",fontColor:"#777777"},gridLines:{display:!1}}],yAxes:[{ticks:{fontSize:"12",fontColor:"#777777",callback:function(e,t,n){return"$"+e}},gridLines:{color:"#D8D8D8",zeroLineColor:"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#horizontal-bar-chart-widget").length){var _=e("#horizontal-bar-chart-widget")[0].getContext("2d");new(Ve())(_,{type:"horizontalBar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug"],datasets:[{label:"Html Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,data:[0,200,250,200,500,450,850,1050],backgroundColor:"#203f90"},{label:"VueJs Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,data:[0,300,400,560,320,600,720,850],backgroundColor:"#cbd5e0"}]},options:{scales:{xAxes:[{ticks:{fontSize:"12",fontColor:"#777777",callback:function(e,t,n){return"$"+e}},gridLines:{display:!1}}],yAxes:[{ticks:{fontSize:"12",fontColor:"#777777"},gridLines:{color:"#D8D8D8",zeroLineColor:"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#stacked-bar-chart-widget").length){var g=e("#stacked-bar-chart-widget")[0].getContext("2d");new(Ve())(g,{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Html Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,backgroundColor:"#203f90",data:d.randomNumbers(-100,100,12)},{label:"VueJs Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,backgroundColor:"#cbd5e0",data:d.randomNumbers(-100,100,12)}]},options:{scales:{xAxes:[{stacked:!0,ticks:{fontSize:"12",fontColor:"#777777"},gridLines:{display:!1}}],yAxes:[{stacked:!0,ticks:{fontSize:"12",fontColor:"#777777",callback:function(e,t,n){return"$"+e}},gridLines:{color:"#D8D8D8",zeroLineColor:"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#stacked-bar-chart-1").length){var b=e("#stacked-bar-chart-1")[0].getContext("2d");new(Ve())(b,{type:"bar",data:{labels:Ge(Array(16).keys()),datasets:[{label:"Html Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,backgroundColor:"#203f90",data:d.randomNumbers(-100,100,16)},{label:"VueJs Template",barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,backgroundColor:"#cbd5e0",data:d.randomNumbers(-100,100,16)}]},options:{legend:{display:!1},scales:{xAxes:[{stacked:!0,ticks:{fontSize:"12",fontColor:"#777777"},gridLines:{display:!1}}],yAxes:[{stacked:!0,ticks:{fontSize:"12",fontColor:"#777777",callback:function(e,t,n){return"$"+e}},gridLines:{color:"#D8D8D8",zeroLineColor:"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#line-chart-widget").length){var v=e("#line-chart-widget")[0].getContext("2d");new(Ve())(v,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Html Template",data:[0,200,250,200,500,450,850,1050,950,1100,900,1200],borderWidth:2,borderColor:"#203f90",backgroundColor:"transparent",pointBorderColor:"transparent"},{label:"VueJs Template",data:[0,300,400,560,320,600,720,850,690,805,1200,1010],borderWidth:2,borderDash:[2,2],borderColor:"#cbd5e0",backgroundColor:"transparent",pointBorderColor:"transparent"}]},options:{scales:{xAxes:[{ticks:{fontSize:"12",fontColor:"#777777"},gridLines:{display:!1}}],yAxes:[{ticks:{fontSize:"12",fontColor:"#777777",callback:function(e,t,n){return"$"+e}},gridLines:{color:"#D8D8D8",zeroLineColor:"#D8D8D8",borderDash:[2,2],zeroLineBorderDash:[2,2],drawBorder:!1}}]}}})}if(e("#donut-chart-widget").length){var y=e("#donut-chart-widget")[0].getContext("2d");new(Ve())(y,{type:"doughnut",data:{labels:["Html","Vuejs","Laravel"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:5,borderColor:e("html").hasClass("dark")?"#303953":"#fff"}]},options:{cutoutPercentage:80}})}if(e("#pie-chart-widget").length){var E=e("#pie-chart-widget")[0].getContext("2d");new(Ve())(E,{type:"pie",data:{labels:["Html","Vuejs","Laravel"],datasets:[{data:[15,10,65],backgroundColor:["#2BB6D0","#E63b1f","#203f90"],hoverBackgroundColor:["#2BB6D0","#E63b1f","#203f90"],borderWidth:5,borderColor:e("html").hasClass("dark")?"#303953":"#fff"}]}})}}(r(5553));var qe=r(7869),$e=r.n(qe),Ke=r(4204),Qe=r.n(Ke);!function(e){e(".source-preview").each((function(){var t=e(this).find("code").html(),n=d.replaceAll(t,"HTMLOpenTag","<");n=d.replaceAll(n,"HTMLCloseTag",">");var r=e('<textarea style="margin-left: 1000000px;" class="fixed w-1 h-1"></textarea>').val(n);e(this).append(r),n=e(this).find("code").hasClass("javascript")?Qe()(n):Qe().html(n),n=d.replaceAll(n,"<","&lt;"),n=d.replaceAll(n,">","&gt;"),e(this).find("code").html(n)})),$e().highlightAll()}(r(5553));var Xe=r(8508),Ze=r.n(Xe);Ze().replace({"stroke-width":1.5}),window.feather=Ze();var Je=window,et=Je.requestAnimationFrame||Je.webkitRequestAnimationFrame||Je.mozRequestAnimationFrame||Je.msRequestAnimationFrame||function(e){return setTimeout(e,16)},tt=window,nt=tt.cancelAnimationFrame||tt.mozCancelAnimationFrame||function(e){clearTimeout(e)};function rt(){for(var e,t,n,r=arguments[0]||{},i=1,o=arguments.length;i<o;i++)if(null!==(e=arguments[i]))for(t in e)r!==(n=e[t])&&void 0!==n&&(r[t]=n);return r}function it(e){return["true","false"].indexOf(e)>=0?JSON.parse(e):e}function ot(e,t,n,r){if(r)try{e.setItem(t,n)}catch(e){}return n}function at(){var e=document,t=e.body;return t||((t=e.createElement("body")).fake=!0),t}var st=document.documentElement;function lt(e){var t="";return e.fake&&(t=st.style.overflow,e.style.background="",e.style.overflow=st.style.overflow="hidden",st.appendChild(e)),t}function ct(e,t){e.fake&&(e.remove(),st.style.overflow=t,st.offsetHeight)}function dt(e,t,n,r){"insertRule"in e?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r)}function ut(e){return("insertRule"in e?e.cssRules:e.rules).length}function ht(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)}var pt="classList"in document.createElement("_"),ft=pt?function(e,t){return e.classList.contains(t)}:function(e,t){return e.className.indexOf(t)>=0},mt=pt?function(e,t){ft(e,t)||e.classList.add(t)}:function(e,t){ft(e,t)||(e.className+=" "+t)},_t=pt?function(e,t){ft(e,t)&&e.classList.remove(t)}:function(e,t){ft(e,t)&&(e.className=e.className.replace(t,""))};function gt(e,t){return e.hasAttribute(t)}function bt(e,t){return e.getAttribute(t)}function vt(e){return void 0!==e.item}function yt(e,t){if(e=vt(e)||e instanceof Array?e:[e],"[object Object]"===Object.prototype.toString.call(t))for(var n=e.length;n--;)for(var r in t)e[n].setAttribute(r,t[r])}function Et(e,t){e=vt(e)||e instanceof Array?e:[e];for(var n=(t=t instanceof Array?t:[t]).length,r=e.length;r--;)for(var i=n;i--;)e[r].removeAttribute(t[i])}function wt(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t}function St(e,t){"none"!==e.style.display&&(e.style.display="none")}function Tt(e,t){"none"===e.style.display&&(e.style.display="")}function kt(e){return"none"!==window.getComputedStyle(e).display}function Ct(e){if("string"==typeof e){var t=[e],n=e.charAt(0).toUpperCase()+e.substr(1);["Webkit","Moz","ms","O"].forEach((function(r){"ms"===r&&"transform"!==e||t.push(r+n)})),e=t}for(var r=document.createElement("fakeelement"),i=(e.length,0);i<e.length;i++){var o=e[i];if(void 0!==r.style[o])return o}return!1}function xt(e,t){var n=!1;return/^Webkit/.test(e)?n="webkit"+t+"End":/^O/.test(e)?n="o"+t+"End":e&&(n=t.toLowerCase()+"end"),n}var At=!1;try{var Rt=Object.defineProperty({},"passive",{get:function(){At=!0}});window.addEventListener("test",null,Rt)}catch(e){}var Mt=!!At&&{passive:!0};function Dt(e,t,n){for(var r in t){var i=["touchstart","touchmove"].indexOf(r)>=0&&!n&&Mt;e.addEventListener(r,t[r],i)}}function Ot(e,t){for(var n in t){var r=["touchstart","touchmove"].indexOf(n)>=0&&Mt;e.removeEventListener(n,t[n],r)}}function Nt(){return{topics:{},on:function(e,t){this.topics[e]=this.topics[e]||[],this.topics[e].push(t)},off:function(e,t){if(this.topics[e])for(var n=0;n<this.topics[e].length;n++)if(this.topics[e][n]===t){this.topics[e].splice(n,1);break}},emit:function(e,t){t.type=e,this.topics[e]&&this.topics[e].forEach((function(n){n(t,e)}))}}}Object.keys||(Object.keys=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var Lt=function(e){e=rt({container:".slider",mode:"carousel",axis:"horizontal",items:1,gutter:0,edgePadding:0,fixedWidth:!1,autoWidth:!1,viewportMax:!1,slideBy:1,center:!1,controls:!0,controlsPosition:"top",controlsText:["prev","next"],controlsContainer:!1,prevButton:!1,nextButton:!1,nav:!0,navPosition:"top",navContainer:!1,navAsThumbnails:!1,arrowKeys:!1,speed:300,autoplay:!1,autoplayPosition:"top",autoplayTimeout:5e3,autoplayDirection:"forward",autoplayText:["start","stop"],autoplayHoverPause:!1,autoplayButton:!1,autoplayButtonOutput:!0,autoplayResetOnVisibility:!0,animateIn:"tns-fadeIn",animateOut:"tns-fadeOut",animateNormal:"tns-normal",animateDelay:!1,loop:!0,rewind:!1,autoHeight:!1,responsive:!1,lazyload:!1,lazyloadSelector:".tns-lazy-img",touch:!0,mouseDrag:!1,swipeAngle:15,nested:!1,preventActionWhenRunning:!1,preventScrollOnTouch:!1,freezable:!0,onInit:!1,useLocalStorage:!0,nonce:!1},e||{});var t=document,n=window,r={ENTER:13,SPACE:32,LEFT:37,RIGHT:39},i={},o=e.useLocalStorage;if(o){var a=navigator.userAgent,s=new Date;try{(i=n.localStorage)?(i.setItem(s,s),o=i.getItem(s)==s,i.removeItem(s)):o=!1,o||(i={})}catch(e){o=!1}o&&(i.tnsApp&&i.tnsApp!==a&&["tC","tPL","tMQ","tTf","t3D","tTDu","tTDe","tADu","tADe","tTE","tAE"].forEach((function(e){i.removeItem(e)})),localStorage.tnsApp=a)}var l=i.tC?it(i.tC):ot(i,"tC",function(){var e=document,t=at(),n=lt(t),r=e.createElement("div"),i=!1;t.appendChild(r);try{for(var o,a="(10px * 10)",s=["calc"+a,"-moz-calc"+a,"-webkit-calc"+a],l=0;l<3;l++)if(o=s[l],r.style.width=o,100===r.offsetWidth){i=o.replace(a,"");break}}catch(e){}return t.fake?ct(t,n):r.remove(),i}(),o),c=i.tPL?it(i.tPL):ot(i,"tPL",function(){var e,t=document,n=at(),r=lt(n),i=t.createElement("div"),o=t.createElement("div"),a="";i.className="tns-t-subp2",o.className="tns-t-ct";for(var s=0;s<70;s++)a+="<div></div>";return o.innerHTML=a,i.appendChild(o),n.appendChild(i),e=Math.abs(i.getBoundingClientRect().left-o.children[67].getBoundingClientRect().left)<2,n.fake?ct(n,r):i.remove(),e}(),o),d=i.tMQ?it(i.tMQ):ot(i,"tMQ",function(){if(window.matchMedia||window.msMatchMedia)return!0;var e,t=document,n=at(),r=lt(n),i=t.createElement("div"),o=t.createElement("style"),a="@media all and (min-width:1px){.tns-mq-test{position:absolute}}";return o.type="text/css",i.className="tns-mq-test",n.appendChild(o),n.appendChild(i),o.styleSheet?o.styleSheet.cssText=a:o.appendChild(t.createTextNode(a)),e=window.getComputedStyle?window.getComputedStyle(i).position:i.currentStyle.position,n.fake?ct(n,r):i.remove(),"absolute"===e}(),o),u=i.tTf?it(i.tTf):ot(i,"tTf",Ct("transform"),o),h=i.t3D?it(i.t3D):ot(i,"t3D",function(e){if(!e)return!1;if(!window.getComputedStyle)return!1;var t,n=document,r=at(),i=lt(r),o=n.createElement("p"),a=e.length>9?"-"+e.slice(0,-9).toLowerCase()+"-":"";return a+="transform",r.insertBefore(o,null),o.style[e]="translate3d(1px,1px,1px)",t=window.getComputedStyle(o).getPropertyValue(a),r.fake?ct(r,i):o.remove(),void 0!==t&&t.length>0&&"none"!==t}(u),o),p=i.tTDu?it(i.tTDu):ot(i,"tTDu",Ct("transitionDuration"),o),f=i.tTDe?it(i.tTDe):ot(i,"tTDe",Ct("transitionDelay"),o),m=i.tADu?it(i.tADu):ot(i,"tADu",Ct("animationDuration"),o),_=i.tADe?it(i.tADe):ot(i,"tADe",Ct("animationDelay"),o),g=i.tTE?it(i.tTE):ot(i,"tTE",xt(p,"Transition"),o),b=i.tAE?it(i.tAE):ot(i,"tAE",xt(m,"Animation"),o),v=n.console&&"function"==typeof n.console.warn,y=["container","controlsContainer","prevButton","nextButton","navContainer","autoplayButton"],E={};if(y.forEach((function(n){if("string"==typeof e[n]){var r=e[n],i=t.querySelector(r);if(E[n]=r,!i||!i.nodeName)return void(v&&console.warn("Can't find",e[n]));e[n]=i}})),!(e.container.children.length<1)){var w=e.responsive,S=e.nested,T="carousel"===e.mode;if(w){0 in w&&(e=rt(e,w[0]),delete w[0]);var k={};for(var C in w){var x=w[C];x="number"==typeof x?{items:x}:x,k[C]=x}w=k,k=null}if(T||function e(t){for(var n in t)T||("slideBy"===n&&(t[n]="page"),"edgePadding"===n&&(t[n]=!1),"autoHeight"===n&&(t[n]=!1)),"responsive"===n&&e(t[n])}(e),!T){e.axis="horizontal",e.slideBy="page",e.edgePadding=!1;var A=e.animateIn,R=e.animateOut,M=e.animateDelay,D=e.animateNormal}var O,N,L="horizontal"===e.axis,I=t.createElement("div"),P=t.createElement("div"),F=e.container,B=F.parentNode,Y=F.outerHTML,H=F.children,U=H.length,z=Nn(),j=!1;w&&er(),T&&(F.className+=" tns-vpfix");var V,G,W,q,$,K,Q,X,Z,J=e.autoWidth,ee=Bn("fixedWidth"),te=Bn("edgePadding"),ne=Bn("gutter"),re=Pn(),ie=Bn("center"),oe=J?1:Math.floor(Bn("items")),ae=Bn("slideBy"),se=e.viewportMax||e.fixedWidthViewportWidth,le=Bn("arrowKeys"),ce=Bn("speed"),de=e.rewind,ue=!de&&e.loop,he=Bn("autoHeight"),pe=Bn("controls"),fe=Bn("controlsText"),me=Bn("nav"),_e=Bn("touch"),ge=Bn("mouseDrag"),be=Bn("autoplay"),ve=Bn("autoplayTimeout"),ye=Bn("autoplayText"),Ee=Bn("autoplayHoverPause"),we=Bn("autoplayResetOnVisibility"),Se=(Q=null,X=Bn("nonce"),Z=document.createElement("style"),Q&&Z.setAttribute("media",Q),X&&Z.setAttribute("nonce",X),document.querySelector("head").appendChild(Z),Z.sheet?Z.sheet:Z.styleSheet),Te=e.lazyload,ke=e.lazyloadSelector,Ce=[],xe=ue?($=function(){if(J||ee&&!se)return U-1;var t=ee?"fixedWidth":"items",n=[];if((ee||e[t]<U)&&n.push(e[t]),w)for(var r in w){var i=w[r][t];i&&(ee||i<U)&&n.push(i)}return n.length||n.push(0),Math.ceil(ee?se/Math.min.apply(null,n):Math.max.apply(null,n))}(),K=T?Math.ceil((5*$-U)/2):4*$-U,K=Math.max($,K),Fn("edgePadding")?K+1:K):0,Ae=T?U+2*xe:U+xe,Re=!(!ee&&!J||ue),Me=ee?Cr():null,De=!T||!ue,Oe=L?"left":"top",Ne="",Le="",Ie=ee?function(){return ie&&!ue?U-1:Math.ceil(-Me/(ee+ne))}:J?function(){for(var e=0;e<Ae;e++)if(V[e]>=-Me)return e}:function(){return ie&&T&&!ue?U-1:ue||T?Math.max(0,Ae-Math.ceil(oe)):Ae-1},Pe=Mn(Bn("startIndex")),Fe=Pe,Be=(Rn(),0),Ye=J?null:Ie(),He=e.preventActionWhenRunning,Ue=e.swipeAngle,ze=!Ue||"?",je=!1,Ve=e.onInit,Ge=new Nt,We=" tns-slider tns-"+e.mode,qe=F.id||(q=window.tnsId,window.tnsId=q?q+1:1,"tns"+window.tnsId),$e=Bn("disable"),Ke=!1,Qe=e.freezable,Xe=!(!Qe||J)&&Jn(),Ze=!1,Je={click:Ir,keydown:function(e){e=jr(e);var t=[r.LEFT,r.RIGHT].indexOf(e.keyCode);t>=0&&(0===t?Kt.disabled||Ir(e,-1):Qt.disabled||Ir(e,1))}},tt={click:function(e){if(je){if(He)return;Nr()}var t=Vr(e=jr(e));for(;t!==en&&!gt(t,"data-nav");)t=t.parentNode;if(gt(t,"data-nav")){var n=on=Number(bt(t,"data-nav")),r=ee||J?n*U/nn:n*oe;Lr(Pt?n:Math.min(Math.ceil(r),U-1),e),an===n&&(hn&&Hr(),on=-1)}},keydown:function(e){e=jr(e);var n=t.activeElement;if(!gt(n,"data-nav"))return;var i=[r.LEFT,r.RIGHT,r.ENTER,r.SPACE].indexOf(e.keyCode),o=Number(bt(n,"data-nav"));i>=0&&(0===i?o>0&&zr(Jt[o-1]):1===i?o<nn-1&&zr(Jt[o+1]):(on=o,Lr(o,e)))}},st={mouseover:function(){hn&&(Fr(),pn=!0)},mouseout:function(){pn&&(Pr(),pn=!1)}},pt={visibilitychange:function(){t.hidden?hn&&(Fr(),mn=!0):mn&&(Pr(),mn=!1)}},vt={keydown:function(e){e=jr(e);var t=[r.LEFT,r.RIGHT].indexOf(e.keyCode);t>=0&&Ir(e,0===t?-1:1)}},At={touchstart:$r,touchmove:Kr,touchend:Xr,touchcancel:Xr},Rt={mousedown:$r,mousemove:Kr,mouseup:Xr,mouseleave:Xr},Mt=Fn("controls"),It=Fn("nav"),Pt=!!J||e.navAsThumbnails,Ft=Fn("autoplay"),Bt=Fn("touch"),Yt=Fn("mouseDrag"),Ht="tns-slide-active",Ut="tns-slide-cloned",zt="tns-complete",jt={load:function(e){cr(Vr(e))},error:function(e){t=Vr(e),mt(t,"failed"),dr(t);var t}},Vt="force"===e.preventScrollOnTouch;if(Mt)var Gt,Wt,qt=e.controlsContainer,$t=e.controlsContainer?e.controlsContainer.outerHTML:"",Kt=e.prevButton,Qt=e.nextButton,Xt=e.prevButton?e.prevButton.outerHTML:"",Zt=e.nextButton?e.nextButton.outerHTML:"";if(It)var Jt,en=e.navContainer,tn=e.navContainer?e.navContainer.outerHTML:"",nn=J?U:Jr(),rn=0,on=-1,an=On(),sn=an,ln="tns-nav-active",cn="Carousel Page ",dn=" (Current Slide)";if(Ft)var un,hn,pn,fn,mn,_n="forward"===e.autoplayDirection?1:-1,gn=e.autoplayButton,bn=e.autoplayButton?e.autoplayButton.outerHTML:"",vn=["<span class='tns-visually-hidden'>"," animation</span>"];if(Bt||Yt)var yn,En,wn={},Sn={},Tn=!1,kn=L?function(e,t){return e.x-t.x}:function(e,t){return e.y-t.y};J||An($e||Xe),u&&(Oe=u,Ne="translate",h?(Ne+=L?"3d(":"3d(0px, ",Le=L?", 0px, 0px)":", 0px)"):(Ne+=L?"X(":"Y(",Le=")")),T&&(F.className=F.className.replace("tns-vpfix","")),function(){Fn("gutter");I.className="tns-outer",P.className="tns-inner",I.id=qe+"-ow",P.id=qe+"-iw",""===F.id&&(F.id=qe);We+=c||J?" tns-subpixel":" tns-no-subpixel",We+=l?" tns-calc":" tns-no-calc",J&&(We+=" tns-autowidth");We+=" tns-"+e.axis,F.className+=We,T?((O=t.createElement("div")).id=qe+"-mw",O.className="tns-ovh",I.appendChild(O),O.appendChild(P)):I.appendChild(P);if(he){(O||P).className+=" tns-ah"}if(B.insertBefore(I,F),P.appendChild(F),ht(H,(function(e,t){mt(e,"tns-item"),e.id||(e.id=qe+"-item"+t),!T&&D&&mt(e,D),yt(e,{"aria-hidden":"true",tabindex:"-1"})})),xe){for(var n=t.createDocumentFragment(),r=t.createDocumentFragment(),i=xe;i--;){var o=i%U,a=H[o].cloneNode(!0);if(mt(a,Ut),Et(a,"id"),r.insertBefore(a,r.firstChild),T){var s=H[U-1-o].cloneNode(!0);mt(s,Ut),Et(s,"id"),n.appendChild(s)}}F.insertBefore(n,F.firstChild),F.appendChild(r),H=F.children}}(),function(){if(!T)for(var t=Pe,r=Pe+Math.min(U,oe);t<r;t++){var i=H[t];i.style.left=100*(t-Pe)/oe+"%",mt(i,A),_t(i,D)}L&&(c||J?(dt(Se,"#"+qe+" > .tns-item","font-size:"+n.getComputedStyle(H[0]).fontSize+";",ut(Se)),dt(Se,"#"+qe,"font-size:0;",ut(Se))):T&&ht(H,(function(e,t){e.style.marginLeft=function(e){return l?l+"("+100*e+"% / "+Ae+")":100*e/Ae+"%"}(t)})));if(d){if(p){var o=O&&e.autoHeight?Vn(e.speed):"";dt(Se,"#"+qe+"-mw",o,ut(Se))}o=Yn(e.edgePadding,e.gutter,e.fixedWidth,e.speed,e.autoHeight),dt(Se,"#"+qe+"-iw",o,ut(Se)),T&&(o=L&&!J?"width:"+Hn(e.fixedWidth,e.gutter,e.items)+";":"",p&&(o+=Vn(ce)),dt(Se,"#"+qe,o,ut(Se))),o=L&&!J?Un(e.fixedWidth,e.gutter,e.items):"",e.gutter&&(o+=zn(e.gutter)),T||(p&&(o+=Vn(ce)),m&&(o+=Gn(ce))),o&&dt(Se,"#"+qe+" > .tns-item",o,ut(Se))}else{T&&he&&(O.style[p]=ce/1e3+"s"),P.style.cssText=Yn(te,ne,ee,he),T&&L&&!J&&(F.style.width=Hn(ee,ne,oe));o=L&&!J?Un(ee,ne,oe):"";ne&&(o+=zn(ne)),o&&dt(Se,"#"+qe+" > .tns-item",o,ut(Se))}if(w&&d)for(var a in w){a=parseInt(a);var s=w[a],u=(o="",""),h="",f="",_="",g=J?null:Bn("items",a),b=Bn("fixedWidth",a),v=Bn("speed",a),y=Bn("edgePadding",a),E=Bn("autoHeight",a),S=Bn("gutter",a);p&&O&&Bn("autoHeight",a)&&"speed"in s&&(u="#"+qe+"-mw{"+Vn(v)+"}"),("edgePadding"in s||"gutter"in s)&&(h="#"+qe+"-iw{"+Yn(y,S,b,v,E)+"}"),T&&L&&!J&&("fixedWidth"in s||"items"in s||ee&&"gutter"in s)&&(f="width:"+Hn(b,S,g)+";"),p&&"speed"in s&&(f+=Vn(v)),f&&(f="#"+qe+"{"+f+"}"),("fixedWidth"in s||ee&&"gutter"in s||!T&&"items"in s)&&(_+=Un(b,S,g)),"gutter"in s&&(_+=zn(S)),!T&&"speed"in s&&(p&&(_+=Vn(v)),m&&(_+=Gn(v))),_&&(_="#"+qe+" > .tns-item{"+_+"}"),(o=u+h+f+_)&&Se.insertRule("@media (min-width: "+a/16+"em) {"+o+"}",Se.cssRules.length)}}(),Wn();var Cn=ue?T?function(){var e=Be,t=Ye;e+=ae,t-=ae,te?(e+=1,t-=1):ee&&(re+ne)%(ee+ne)&&(t-=1),xe&&(Pe>t?Pe-=U:Pe<e&&(Pe+=U))}:function(){if(Pe>Ye)for(;Pe>=Be+U;)Pe-=U;else if(Pe<Be)for(;Pe<=Ye-U;)Pe+=U}:function(){Pe=Math.max(Be,Math.min(Ye,Pe))},xn=T?function(){var e,t,n,r,i,o,a,s,l,c,d;Tr(F,""),p||!ce?(Rr(),ce&&kt(F)||Nr()):(e=F,t=Oe,n=Ne,r=Le,i=xr(),o=ce,a=Nr,s=Math.min(o,10),l=i.indexOf("%")>=0?"%":"px",i=i.replace(l,""),c=Number(e.style[t].replace(n,"").replace(r,"").replace(l,"")),d=(i-c)/o*s,setTimeout((function i(){o-=s,c+=d,e.style[t]=n+c+l+r,o>0?setTimeout(i,s):a()}),s)),L||Zr()}:function(){Ce=[];var e={};e[g]=e[b]=Nr,Ot(H[Fe],e),Dt(H[Pe],e),Mr(Fe,A,R,!0),Mr(Pe,D,A),g&&b&&ce&&kt(F)||Nr()};return{version:"2.9.3",getInfo:ti,events:Ge,goTo:Lr,play:function(){be&&!hn&&(Yr(),fn=!1)},pause:function(){hn&&(Hr(),fn=!0)},isOn:j,updateSliderHeight:_r,refresh:Wn,destroy:function(){if(Se.disabled=!0,Se.ownerNode&&Se.ownerNode.remove(),Ot(n,{resize:Xn}),le&&Ot(t,vt),qt&&Ot(qt,Je),en&&Ot(en,tt),Ot(F,st),Ot(F,pt),gn&&Ot(gn,{click:Ur}),be&&clearInterval(un),T&&g){var r={};r[g]=Nr,Ot(F,r)}_e&&Ot(F,At),ge&&Ot(F,Rt);var i=[Y,$t,Xt,Zt,tn,bn];for(var o in y.forEach((function(t,n){var r="container"===t?I:e[t];if("object"==typeof r&&r){var o=!!r.previousElementSibling&&r.previousElementSibling,a=r.parentNode;r.outerHTML=i[n],e[t]=o?o.nextElementSibling:a.firstElementChild}})),y=A=R=M=D=L=I=P=F=B=Y=H=U=N=z=J=ee=te=ne=re=oe=ae=se=le=ce=de=ue=he=Se=Te=V=Ce=xe=Ae=Re=Me=De=Oe=Ne=Le=Ie=Pe=Fe=Be=Ye=Ue=ze=je=Ve=Ge=We=qe=$e=Ke=Qe=Xe=Ze=Je=tt=st=pt=vt=At=Rt=Mt=It=Pt=Ft=Bt=Yt=Ht=zt=jt=G=pe=fe=qt=$t=Kt=Qt=Gt=Wt=me=en=tn=Jt=nn=rn=on=an=sn=ln=cn=dn=be=ve=_n=ye=Ee=gn=bn=we=vn=un=hn=pn=fn=mn=wn=Sn=yn=Tn=En=kn=_e=ge=null,this)"rebuild"!==o&&(this[o]=null);j=!1},rebuild:function(){return Lt(rt(e,E))}}}function An(e){e&&(pe=me=_e=ge=le=be=Ee=we=!1)}function Rn(){for(var e=T?Pe-xe:Pe;e<0;)e+=U;return e%U+1}function Mn(e){return e=e?Math.max(0,Math.min(ue?U-1:U-oe,e)):0,T?e+xe:e}function Dn(e){for(null==e&&(e=Pe),T&&(e-=xe);e<0;)e+=U;return Math.floor(e%U)}function On(){var e,t=Dn();return e=Pt?t:ee||J?Math.ceil((t+1)*nn/U-1):Math.floor(t/oe),!ue&&T&&Pe===Ye&&(e=nn-1),e}function Nn(){return n.innerWidth||t.documentElement.clientWidth||t.body.clientWidth}function Ln(e){return"top"===e?"afterbegin":"beforeend"}function In(e){if(null!=e){var n,r,i=t.createElement("div");return e.appendChild(i),r=(n=i.getBoundingClientRect()).right-n.left,i.remove(),r||In(e.parentNode)}}function Pn(){var e=te?2*te-ne:0;return In(B)-e}function Fn(t){if(e[t])return!0;if(w)for(var n in w)if(w[n][t])return!0;return!1}function Bn(t,n){if(null==n&&(n=z),"items"===t&&ee)return Math.floor((re+ne)/(ee+ne))||1;var r=e[t];if(w)for(var i in w)n>=parseInt(i)&&t in w[i]&&(r=w[i][t]);return"slideBy"===t&&"page"===r&&(r=Bn("items")),T||"slideBy"!==t&&"items"!==t||(r=Math.floor(r)),r}function Yn(e,t,n,r,i){var o="";if(void 0!==e){var a=e;t&&(a-=t),o=L?"margin: 0 "+a+"px 0 "+e+"px;":"margin: "+e+"px 0 "+a+"px 0;"}else if(t&&!n){var s="-"+t+"px";o="margin: 0 "+(L?s+" 0 0":"0 "+s+" 0")+";"}return!T&&i&&p&&r&&(o+=Vn(r)),o}function Hn(e,t,n){return e?(e+t)*Ae+"px":l?l+"("+100*Ae+"% / "+n+")":100*Ae/n+"%"}function Un(e,t,n){var r;if(e)r=e+t+"px";else{T||(n=Math.floor(n));var i=T?Ae:n;r=l?l+"(100% / "+i+")":100/i+"%"}return r="width:"+r,"inner"!==S?r+";":r+" !important;"}function zn(e){var t="";!1!==e&&(t=(L?"padding-":"margin-")+(L?"right":"bottom")+": "+e+"px;");return t}function jn(e,t){var n=e.substring(0,e.length-t).toLowerCase();return n&&(n="-"+n+"-"),n}function Vn(e){return jn(p,18)+"transition-duration:"+e/1e3+"s;"}function Gn(e){return jn(m,17)+"animation-duration:"+e/1e3+"s;"}function Wn(){if(Fn("autoHeight")||J||!L){var e=F.querySelectorAll("img");ht(e,(function(e){var t=e.src;Te||(t&&t.indexOf("data:image")<0?(e.src="",Dt(e,jt),mt(e,"loading"),e.src=t):cr(e))})),et((function(){pr(wt(e),(function(){G=!0}))})),Fn("autoHeight")&&(e=ur(Pe,Math.min(Pe+oe-1,Ae-1))),Te?qn():et((function(){pr(wt(e),qn)}))}else T&&Ar(),Kn(),Qn()}function qn(){if(J&&U>1){var e=ue?Pe:U-1;!function t(){var n=H[e].getBoundingClientRect().left,r=H[e-1].getBoundingClientRect().right;Math.abs(n-r)<=1?$n():setTimeout((function(){t()}),16)}()}else $n()}function $n(){L&&!J||(gr(),J?(Me=Cr(),Qe&&(Xe=Jn()),Ye=Ie(),An($e||Xe)):Zr()),T&&Ar(),Kn(),Qn()}function Kn(){if(br(),I.insertAdjacentHTML("afterbegin",'<div class="tns-liveregion tns-visually-hidden" aria-live="polite" aria-atomic="true">slide <span class="current">'+ar()+"</span>  of "+U+"</div>"),W=I.querySelector(".tns-liveregion .current"),Ft){var t=be?"stop":"start";gn?yt(gn,{"data-action":t}):e.autoplayButtonOutput&&(I.insertAdjacentHTML(Ln(e.autoplayPosition),'<button type="button" data-action="'+t+'">'+vn[0]+t+vn[1]+ye[0]+"</button>"),gn=I.querySelector("[data-action]")),gn&&Dt(gn,{click:Ur}),be&&(Yr(),Ee&&Dt(F,st),we&&Dt(F,pt))}if(It){if(en)yt(en,{"aria-label":"Carousel Pagination"}),ht(Jt=en.children,(function(e,t){yt(e,{"data-nav":t,tabindex:"-1","aria-label":cn+(t+1),"aria-controls":qe})}));else{for(var n="",r=Pt?"":'style="display:none"',i=0;i<U;i++)n+='<button type="button" data-nav="'+i+'" tabindex="-1" aria-controls="'+qe+'" '+r+' aria-label="'+cn+(i+1)+'"></button>';n='<div class="tns-nav" aria-label="Carousel Pagination">'+n+"</div>",I.insertAdjacentHTML(Ln(e.navPosition),n),en=I.querySelector(".tns-nav"),Jt=en.children}if(ei(),p){var o=p.substring(0,p.length-18).toLowerCase(),a="transition: all "+ce/1e3+"s";o&&(a="-"+o+"-"+a),dt(Se,"[aria-controls^="+qe+"-item]",a,ut(Se))}yt(Jt[an],{"aria-label":cn+(an+1)+dn}),Et(Jt[an],"tabindex"),mt(Jt[an],ln),Dt(en,tt)}Mt&&(qt||Kt&&Qt||(I.insertAdjacentHTML(Ln(e.controlsPosition),'<div class="tns-controls" aria-label="Carousel Navigation" tabindex="0"><button type="button" data-controls="prev" tabindex="-1" aria-controls="'+qe+'">'+fe[0]+'</button><button type="button" data-controls="next" tabindex="-1" aria-controls="'+qe+'">'+fe[1]+"</button></div>"),qt=I.querySelector(".tns-controls")),Kt&&Qt||(Kt=qt.children[0],Qt=qt.children[1]),e.controlsContainer&&yt(qt,{"aria-label":"Carousel Navigation",tabindex:"0"}),(e.controlsContainer||e.prevButton&&e.nextButton)&&yt([Kt,Qt],{"aria-controls":qe,tabindex:"-1"}),(e.controlsContainer||e.prevButton&&e.nextButton)&&(yt(Kt,{"data-controls":"prev"}),yt(Qt,{"data-controls":"next"})),Gt=yr(Kt),Wt=yr(Qt),Sr(),qt?Dt(qt,Je):(Dt(Kt,Je),Dt(Qt,Je))),tr()}function Qn(){if(T&&g){var r={};r[g]=Nr,Dt(F,r)}_e&&Dt(F,At,e.preventScrollOnTouch),ge&&Dt(F,Rt),le&&Dt(t,vt),"inner"===S?Ge.on("outerResized",(function(){Zn(),Ge.emit("innerLoaded",ti())})):(w||ee||J||he||!L)&&Dt(n,{resize:Xn}),he&&("outer"===S?Ge.on("innerLoaded",hr):$e||hr()),lr(),$e?ir():Xe&&rr(),Ge.on("indexChanged",fr),"inner"===S&&Ge.emit("innerLoaded",ti()),"function"==typeof Ve&&Ve(ti()),j=!0}function Xn(e){et((function(){Zn(jr(e))}))}function Zn(n){if(j){"outer"===S&&Ge.emit("outerResized",ti(n)),z=Nn();var r,i=N,o=!1;w&&(er(),(r=i!==N)&&Ge.emit("newBreakpointStart",ti(n)));var a,s,l=oe,c=$e,u=Xe,h=le,p=pe,f=me,m=_e,_=ge,g=be,b=Ee,v=we,y=Pe;if(r){var E=ee,k=he,C=fe,x=ie,M=ye;if(!d)var O=ne,I=te}if(le=Bn("arrowKeys"),pe=Bn("controls"),me=Bn("nav"),_e=Bn("touch"),ie=Bn("center"),ge=Bn("mouseDrag"),be=Bn("autoplay"),Ee=Bn("autoplayHoverPause"),we=Bn("autoplayResetOnVisibility"),r&&($e=Bn("disable"),ee=Bn("fixedWidth"),ce=Bn("speed"),he=Bn("autoHeight"),fe=Bn("controlsText"),ye=Bn("autoplayText"),ve=Bn("autoplayTimeout"),d||(te=Bn("edgePadding"),ne=Bn("gutter"))),An($e),re=Pn(),L&&!J||$e||(gr(),L||(Zr(),o=!0)),(ee||J)&&(Me=Cr(),Ye=Ie()),(r||ee)&&(oe=Bn("items"),ae=Bn("slideBy"),(s=oe!==l)&&(ee||J||(Ye=Ie()),Cn())),r&&$e!==c&&($e?ir():function(){if(!Ke)return;if(Se.disabled=!1,F.className+=We,Ar(),ue)for(var e=xe;e--;)T&&Tt(H[e]),Tt(H[Ae-e-1]);if(!T)for(var t=Pe,n=Pe+U;t<n;t++){var r=H[t],i=t<Pe+oe?A:D;r.style.left=100*(t-Pe)/oe+"%",mt(r,i)}nr(),Ke=!1}()),Qe&&(r||ee||J)&&(Xe=Jn())!==u&&(Xe?(Rr(xr(Mn(0))),rr()):(!function(){if(!Ze)return;te&&d&&(P.style.margin="");if(xe)for(var e="tns-transparent",t=xe;t--;)T&&_t(H[t],e),_t(H[Ae-t-1],e);nr(),Ze=!1}(),o=!0)),An($e||Xe),be||(Ee=we=!1),le!==h&&(le?Dt(t,vt):Ot(t,vt)),pe!==p&&(pe?qt?Tt(qt):(Kt&&Tt(Kt),Qt&&Tt(Qt)):qt?St(qt):(Kt&&St(Kt),Qt&&St(Qt))),me!==f&&(me?(Tt(en),ei()):St(en)),_e!==m&&(_e?Dt(F,At,e.preventScrollOnTouch):Ot(F,At)),ge!==_&&(ge?Dt(F,Rt):Ot(F,Rt)),be!==g&&(be?(gn&&Tt(gn),hn||fn||Yr()):(gn&&St(gn),hn&&Hr())),Ee!==b&&(Ee?Dt(F,st):Ot(F,st)),we!==v&&(we?Dt(t,pt):Ot(t,pt)),r){if(ee===E&&ie===x||(o=!0),he!==k&&(he||(P.style.height="")),pe&&fe!==C&&(Kt.innerHTML=fe[0],Qt.innerHTML=fe[1]),gn&&ye!==M){var B=be?1:0,Y=gn.innerHTML,V=Y.length-M[B].length;Y.substring(V)===M[B]&&(gn.innerHTML=Y.substring(0,V)+ye[B])}}else ie&&(ee||J)&&(o=!0);if((s||ee&&!J)&&(nn=Jr(),ei()),(a=Pe!==y)?(Ge.emit("indexChanged",ti()),o=!0):s?a||fr():(ee||J)&&(lr(),br(),or()),s&&!T&&function(){for(var e=Pe+Math.min(U,oe),t=Ae;t--;){var n=H[t];t>=Pe&&t<e?(mt(n,"tns-moving"),n.style.left=100*(t-Pe)/oe+"%",mt(n,A),_t(n,D)):n.style.left&&(n.style.left="",mt(n,D),_t(n,A)),_t(n,R)}setTimeout((function(){ht(H,(function(e){_t(e,"tns-moving")}))}),300)}(),!$e&&!Xe){if(r&&!d&&(te===I&&ne===O||(P.style.cssText=Yn(te,ne,ee,ce,he)),L)){T&&(F.style.width=Hn(ee,ne,oe));var G=Un(ee,ne,oe)+zn(ne);!function(e,t){"deleteRule"in e?e.deleteRule(t):e.removeRule(t)}(Se,ut(Se)-1),dt(Se,"#"+qe+" > .tns-item",G,ut(Se))}he&&hr(),o&&(Ar(),Fe=Pe)}r&&Ge.emit("newBreakpointEnd",ti(n))}}function Jn(){if(!ee&&!J)return U<=(ie?oe-(oe-1)/2:oe);var e=ee?(ee+ne)*U:V[U],t=te?re+2*te:re+ne;return ie&&(t-=ee?(re-ee)/2:(re-(V[Pe+1]-V[Pe]-ne))/2),e<=t}function er(){for(var e in N=0,w)e=parseInt(e),z>=e&&(N=e)}function tr(){!be&&gn&&St(gn),!me&&en&&St(en),pe||(qt?St(qt):(Kt&&St(Kt),Qt&&St(Qt)))}function nr(){be&&gn&&Tt(gn),me&&en&&Tt(en),pe&&(qt?Tt(qt):(Kt&&Tt(Kt),Qt&&Tt(Qt)))}function rr(){if(!Ze){if(te&&(P.style.margin="0px"),xe)for(var e="tns-transparent",t=xe;t--;)T&&mt(H[t],e),mt(H[Ae-t-1],e);tr(),Ze=!0}}function ir(){if(!Ke){if(Se.disabled=!0,F.className=F.className.replace(We.substring(1),""),Et(F,["style"]),ue)for(var e=xe;e--;)T&&St(H[e]),St(H[Ae-e-1]);if(L&&T||Et(P,["style"]),!T)for(var t=Pe,n=Pe+U;t<n;t++){var r=H[t];Et(r,["style"]),_t(r,A),_t(r,D)}tr(),Ke=!0}}function or(){var e=ar();W.innerHTML!==e&&(W.innerHTML=e)}function ar(){var e=sr(),t=e[0]+1,n=e[1]+1;return t===n?t+"":t+" to "+n}function sr(e){null==e&&(e=xr());var t,n,r,i=Pe;if(ie||te?(J||ee)&&(n=-(parseFloat(e)+te),r=n+re+2*te):J&&(n=V[Pe],r=n+re),J)V.forEach((function(e,o){o<Ae&&((ie||te)&&e<=n+.5&&(i=o),r-e>=.5&&(t=o))}));else{if(ee){var o=ee+ne;ie||te?(i=Math.floor(n/o),t=Math.ceil(r/o-1)):t=i+Math.ceil(re/o)-1}else if(ie||te){var a=oe-1;if(ie?(i-=a/2,t=Pe+a/2):t=Pe+a,te){var s=te*oe/re;i-=s,t+=s}i=Math.floor(i),t=Math.ceil(t)}else t=i+oe-1;i=Math.max(i,0),t=Math.min(t,Ae-1)}return[i,t]}function lr(){if(Te&&!$e){var e=sr();e.push(ke),ur.apply(null,e).forEach((function(e){if(!ft(e,zt)){var t={};t[g]=function(e){e.stopPropagation()},Dt(e,t),Dt(e,jt),e.src=bt(e,"data-src");var n=bt(e,"data-srcset");n&&(e.srcset=n),mt(e,"loading")}}))}}function cr(e){mt(e,"loaded"),dr(e)}function dr(e){mt(e,zt),_t(e,"loading"),Ot(e,jt)}function ur(e,t,n){var r=[];for(n||(n="img");e<=t;)ht(H[e].querySelectorAll(n),(function(e){r.push(e)})),e++;return r}function hr(){var e=ur.apply(null,sr());et((function(){pr(e,_r)}))}function pr(e,t){return G?t():(e.forEach((function(t,n){!Te&&t.complete&&dr(t),ft(t,zt)&&e.splice(n,1)})),e.length?void et((function(){pr(e,t)})):t())}function fr(){lr(),br(),or(),Sr(),function(){if(me&&(an=on>=0?on:On(),on=-1,an!==sn)){var e=Jt[sn],t=Jt[an];yt(e,{tabindex:"-1","aria-label":cn+(sn+1)}),_t(e,ln),yt(t,{"aria-label":cn+(an+1)+dn}),Et(t,"tabindex"),mt(t,ln),sn=an}}()}function mr(e,t){for(var n=[],r=e,i=Math.min(e+t,Ae);r<i;r++)n.push(H[r].offsetHeight);return Math.max.apply(null,n)}function _r(){var e=he?mr(Pe,oe):mr(xe,U),t=O||P;t.style.height!==e&&(t.style.height=e+"px")}function gr(){V=[0];var e=L?"left":"top",t=L?"right":"bottom",n=H[0].getBoundingClientRect()[e];ht(H,(function(r,i){i&&V.push(r.getBoundingClientRect()[e]-n),i===Ae-1&&V.push(r.getBoundingClientRect()[t]-n)}))}function br(){var e=sr(),t=e[0],n=e[1];ht(H,(function(e,r){r>=t&&r<=n?gt(e,"aria-hidden")&&(Et(e,["aria-hidden","tabindex"]),mt(e,Ht)):gt(e,"aria-hidden")||(yt(e,{"aria-hidden":"true",tabindex:"-1"}),_t(e,Ht))}))}function vr(e){return e.nodeName.toLowerCase()}function yr(e){return"button"===vr(e)}function Er(e){return"true"===e.getAttribute("aria-disabled")}function wr(e,t,n){e?t.disabled=n:t.setAttribute("aria-disabled",n.toString())}function Sr(){if(pe&&!de&&!ue){var e=Gt?Kt.disabled:Er(Kt),t=Wt?Qt.disabled:Er(Qt),n=Pe<=Be,r=!de&&Pe>=Ye;n&&!e&&wr(Gt,Kt,!0),!n&&e&&wr(Gt,Kt,!1),r&&!t&&wr(Wt,Qt,!0),!r&&t&&wr(Wt,Qt,!1)}}function Tr(e,t){p&&(e.style[p]=t)}function kr(e){return null==e&&(e=Pe),J?(re-(te?ne:0)-(V[e+1]-V[e]-ne))/2:ee?(re-ee)/2:(oe-1)/2}function Cr(){var e=re+(te?ne:0)-(ee?(ee+ne)*Ae:V[Ae]);return ie&&!ue&&(e=ee?-(ee+ne)*(Ae-1)-kr():kr(Ae-1)-V[Ae-1]),e>0&&(e=0),e}function xr(e){var t;if(null==e&&(e=Pe),L&&!J)if(ee)t=-(ee+ne)*e,ie&&(t+=kr());else{var n=u?Ae:oe;ie&&(e-=kr()),t=100*-e/n}else t=-V[e],ie&&J&&(t+=kr());return Re&&(t=Math.max(t,Me)),t+=!L||J||ee?"px":"%"}function Ar(e){Tr(F,"0s"),Rr(e)}function Rr(e){null==e&&(e=xr()),F.style[Oe]=Ne+e+Le}function Mr(e,t,n,r){var i=e+oe;ue||(i=Math.min(i,Ae));for(var o=e;o<i;o++){var a=H[o];r||(a.style.left=100*(o-Pe)/oe+"%"),M&&f&&(a.style[f]=a.style[_]=M*(o-e)/1e3+"s"),_t(a,t),mt(a,n),r&&Ce.push(a)}}function Dr(e,t){De&&Cn(),(Pe!==Fe||t)&&(Ge.emit("indexChanged",ti()),Ge.emit("transitionStart",ti()),he&&hr(),hn&&e&&["click","keydown"].indexOf(e.type)>=0&&Hr(),je=!0,xn())}function Or(e){return e.toLowerCase().replace(/-/g,"")}function Nr(e){if(T||je){if(Ge.emit("transitionEnd",ti(e)),!T&&Ce.length>0)for(var t=0;t<Ce.length;t++){var n=Ce[t];n.style.left="",_&&f&&(n.style[_]="",n.style[f]=""),_t(n,R),mt(n,D)}if(!e||!T&&e.target.parentNode===F||e.target===F&&Or(e.propertyName)===Or(Oe)){if(!De){var r=Pe;Cn(),Pe!==r&&(Ge.emit("indexChanged",ti()),Ar())}"inner"===S&&Ge.emit("innerLoaded",ti()),je=!1,Fe=Pe}}}function Lr(e,t){if(!Xe)if("prev"===e)Ir(t,-1);else if("next"===e)Ir(t,1);else{if(je){if(He)return;Nr()}var n=Dn(),r=0;if("first"===e?r=-n:"last"===e?r=T?U-oe-n:U-1-n:("number"!=typeof e&&(e=parseInt(e)),isNaN(e)||(t||(e=Math.max(0,Math.min(U-1,e))),r=e-n)),!T&&r&&Math.abs(r)<oe){var i=r>0?1:-1;r+=Pe+r-U>=Be?U*i:2*U*i*-1}Pe+=r,T&&ue&&(Pe<Be&&(Pe+=U),Pe>Ye&&(Pe-=U)),Dn(Pe)!==Dn(Fe)&&Dr(t)}}function Ir(e,t){if(je){if(He)return;Nr()}var n;if(!t){for(var r=Vr(e=jr(e));r!==qt&&[Kt,Qt].indexOf(r)<0;)r=r.parentNode;var i=[Kt,Qt].indexOf(r);i>=0&&(n=!0,t=0===i?-1:1)}if(de){if(Pe===Be&&-1===t)return void Lr("last",e);if(Pe===Ye&&1===t)return void Lr("first",e)}t&&(Pe+=ae*t,J&&(Pe=Math.floor(Pe)),Dr(n||e&&"keydown"===e.type?e:null))}function Pr(){un=setInterval((function(){Ir(null,_n)}),ve),hn=!0}function Fr(){clearInterval(un),hn=!1}function Br(e,t){yt(gn,{"data-action":e}),gn.innerHTML=vn[0]+e+vn[1]+t}function Yr(){Pr(),gn&&Br("stop",ye[1])}function Hr(){Fr(),gn&&Br("start",ye[0])}function Ur(){hn?(Hr(),fn=!0):(Yr(),fn=!1)}function zr(e){e.focus()}function jr(e){return Gr(e=e||n.event)?e.changedTouches[0]:e}function Vr(e){return e.target||n.event.srcElement}function Gr(e){return e.type.indexOf("touch")>=0}function Wr(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function qr(){return t=function(e,t){return Math.atan2(e,t)*(180/Math.PI)}(Sn.y-wn.y,Sn.x-wn.x),n=Ue,r=!1,(i=Math.abs(90-Math.abs(t)))>=90-n?r="horizontal":i<=n&&(r="vertical"),r===e.axis;var t,n,r,i}function $r(e){if(je){if(He)return;Nr()}be&&hn&&Fr(),Tn=!0,En&&(nt(En),En=null);var t=jr(e);Ge.emit(Gr(e)?"touchStart":"dragStart",ti(e)),!Gr(e)&&["img","a"].indexOf(vr(Vr(e)))>=0&&Wr(e),Sn.x=wn.x=t.clientX,Sn.y=wn.y=t.clientY,T&&(yn=parseFloat(F.style[Oe].replace(Ne,"")),Tr(F,"0s"))}function Kr(e){if(Tn){var t=jr(e);Sn.x=t.clientX,Sn.y=t.clientY,T?En||(En=et((function(){Qr(e)}))):("?"===ze&&(ze=qr()),ze&&(Vt=!0)),("boolean"!=typeof e.cancelable||e.cancelable)&&Vt&&e.preventDefault()}}function Qr(e){if(ze){if(nt(En),Tn&&(En=et((function(){Qr(e)}))),"?"===ze&&(ze=qr()),ze){!Vt&&Gr(e)&&(Vt=!0);try{e.type&&Ge.emit(Gr(e)?"touchMove":"dragMove",ti(e))}catch(e){}var t=yn,n=kn(Sn,wn);if(!L||ee||J)t+=n,t+="px";else t+=u?n*oe*100/((re+ne)*Ae):100*n/(re+ne),t+="%";F.style[Oe]=Ne+t+Le}}else Tn=!1}function Xr(t){if(Tn){En&&(nt(En),En=null),T&&Tr(F,""),Tn=!1;var n=jr(t);Sn.x=n.clientX,Sn.y=n.clientY;var r=kn(Sn,wn);if(Math.abs(r)){if(!Gr(t)){var i=Vr(t);Dt(i,{click:function e(t){Wr(t),Ot(i,{click:e})}})}T?En=et((function(){if(L&&!J){var e=-r*oe/(re+ne);e=r>0?Math.floor(e):Math.ceil(e),Pe+=e}else{var n=-(yn+r);if(n<=0)Pe=Be;else if(n>=V[Ae-1])Pe=Ye;else for(var i=0;i<Ae&&n>=V[i];)Pe=i,n>V[i]&&r<0&&(Pe+=1),i++}Dr(t,r),Ge.emit(Gr(t)?"touchEnd":"dragEnd",ti(t))})):ze&&Ir(t,r>0?-1:1)}}"auto"===e.preventScrollOnTouch&&(Vt=!1),Ue&&(ze="?"),be&&!hn&&Pr()}function Zr(){(O||P).style.height=V[Pe+oe]-V[Pe]+"px"}function Jr(){var e=ee?(ee+ne)*U/re:U/oe;return Math.min(Math.ceil(e),U)}function ei(){if(me&&!Pt&&nn!==rn){var e=rn,t=nn,n=Tt;for(rn>nn&&(e=nn,t=rn,n=St);e<t;)n(Jt[e]),e++;rn=nn}}function ti(e){return{container:F,slideItems:H,navContainer:en,navItems:Jt,controlsContainer:qt,hasControls:Mt,prevButton:Kt,nextButton:Qt,items:oe,slideBy:ae,cloneCount:xe,slideCount:U,slideCountNew:Ae,index:Pe,indexCached:Fe,displayIndex:Rn(),navCurrentIndex:an,navCurrentIndexCached:sn,pages:nn,pagesCached:rn,sheet:Se,isOn:j,event:e||{}}}v&&console.warn("No slides found in",e.container)};!function(e){e(".tiny-slider").length&&e(".tiny-slider").each((function(){this.tns=Lt({container:this,slideBy:"page",mouseDrag:!0,autoplay:!0,controls:!1,nav:!1,speed:500})})),e(".tiny-slider-navigator").length&&e(".tiny-slider-navigator").each((function(){e(this).on("click",(function(){"prev"==e(this).data("target")?e("#"+e(this).data("carousel"))[0].tns.goTo("prev"):e("#"+e(this).data("carousel"))[0].tns.goTo("next")}))})),e(".single-item").length&&e(".single-item").each((function(){Lt({container:this,slideBy:"page",mouseDrag:!0,autoplay:!1,controls:!0,nav:!1,speed:500})})),e(".multiple-items").length&&e(".multiple-items").each((function(){Lt({container:this,slideBy:"page",mouseDrag:!0,autoplay:!1,controls:!0,items:1,nav:!1,speed:500,responsive:{600:{items:3},480:{items:2}}})})),e(".responsive-mode").length&&e(".responsive-mode").each((function(){Lt({container:this,slideBy:"page",mouseDrag:!0,autoplay:!1,controls:!0,items:1,nav:!0,speed:500,responsive:{600:{items:3},480:{items:2}}})})),e(".center-mode").length&&e(".center-mode").each((function(){Lt({container:this,mouseDrag:!0,autoplay:!1,controls:!0,center:!0,items:1,nav:!1,speed:500,responsive:{600:{items:2}}})})),e(".fade-mode").length&&e(".fade-mode").each((function(){Lt({mode:"gallery",container:this,slideBy:"page",mouseDrag:!0,autoplay:!0,controls:!0,nav:!0,speed:500})}))}(r(5553));var It='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',Pt="tippy-content",Ft="tippy-backdrop",Bt="tippy-arrow",Yt="tippy-svg-arrow",Ht={passive:!0,capture:!0};function Ut(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function zt(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function jt(e,t){return"function"==typeof e?e.apply(void 0,t):e}function Vt(e,t){return 0===t?e:function(r){clearTimeout(n),n=setTimeout((function(){e(r)}),t)};var n}function Gt(e){return[].concat(e)}function Wt(e,t){-1===e.indexOf(t)&&e.push(t)}function qt(e){return e.split("-")[0]}function $t(e){return[].slice.call(e)}function Kt(){return document.createElement("div")}function Qt(e){return["Element","Fragment"].some((function(t){return zt(e,t)}))}function Xt(e){return zt(e,"MouseEvent")}function Zt(e){return!(!e||!e._tippy||e._tippy.reference!==e)}function Jt(e){return Qt(e)?[e]:function(e){return zt(e,"NodeList")}(e)?$t(e):Array.isArray(e)?e:$t(document.querySelectorAll(e))}function en(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function tn(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function nn(e){var t,n=Gt(e)[0];return(null==n||null==(t=n.ownerDocument)?void 0:t.body)?n.ownerDocument:document}function rn(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[r](t,n)}))}var on={isTouch:!1},an=0;function sn(){on.isTouch||(on.isTouch=!0,window.performance&&document.addEventListener("mousemove",ln))}function ln(){var e=performance.now();e-an<20&&(on.isTouch=!1,document.removeEventListener("mousemove",ln)),an=e}function cn(){var e=document.activeElement;if(Zt(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var dn="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",un=/MSIE |Trident\//.test(dn);var hn={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},pn=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},hn,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),fn=Object.keys(pn);function mn(e){var t=(e.plugins||[]).reduce((function(t,n){var r=n.name,i=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:i),t}),{});return Object.assign({},e,{},t)}function _n(e,t){var n=Object.assign({},t,{content:jt(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(mn(Object.assign({},pn,{plugins:t}))):fn).reduce((function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},pn.aria,{},n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}function gn(e,t){e.innerHTML=t}function bn(e){var t=Kt();return!0===e?t.className=Bt:(t.className=Yt,Qt(e)?t.appendChild(e):gn(t,e)),t}function vn(e,t){Qt(t.content)?(gn(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?gn(e,t.content):e.textContent=t.content)}function yn(e){var t=e.firstElementChild,n=$t(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(Pt)})),arrow:n.find((function(e){return e.classList.contains(Bt)||e.classList.contains(Yt)})),backdrop:n.find((function(e){return e.classList.contains(Ft)}))}}function En(e){var t=Kt(),n=Kt();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Kt();function i(n,r){var i=yn(t),o=i.box,a=i.content,s=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||vn(a,e.props),r.arrow?s?n.arrow!==r.arrow&&(o.removeChild(s),o.appendChild(bn(r.arrow))):o.appendChild(bn(r.arrow)):s&&o.removeChild(s)}return r.className=Pt,r.setAttribute("data-state","hidden"),vn(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props),{popper:t,onUpdate:i}}En.$$tippy=!0;var wn=1,Sn=[],Tn=[];function kn(e,t){var n,r,i,o,a,s,l,c,d,u=_n(e,Object.assign({},pn,{},mn((n=t,Object.keys(n).reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),e}),{}))))),h=!1,p=!1,f=!1,m=!1,_=[],g=Vt($,u.interactiveDebounce),b=wn++,v=(d=u.plugins).filter((function(e,t){return d.indexOf(e)===t})),y={id:b,reference:e,popper:Kt(),popperInstance:null,props:u,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)},setProps:function(t){0;if(y.state.isDestroyed)return;L("onBeforeUpdate",[y,t]),W();var n=y.props,r=_n(e,Object.assign({},y.props,{},t,{ignoreAttributes:!0}));y.props=r,G(),n.interactiveDebounce!==r.interactiveDebounce&&(F(),g=Vt($,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?Gt(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):r.triggerTarget&&e.removeAttribute("aria-expanded");P(),N(),S&&S(n,r);y.popperInstance&&(Z(),ee().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})));L("onAfterUpdate",[y,t])},setContent:function(e){y.setProps({content:e})},show:function(){0;var e=y.state.isVisible,t=y.state.isDestroyed,n=!y.state.isEnabled,r=on.isTouch&&!y.props.touch,i=Ut(y.props.duration,0,pn.duration);if(e||t||n||r)return;if(R().hasAttribute("disabled"))return;if(L("onShow",[y],!1),!1===y.props.onShow(y))return;y.state.isVisible=!0,A()&&(w.style.visibility="visible");N(),U(),y.state.isMounted||(w.style.transition="none");if(A()){var o=D(),a=o.box,s=o.content;en([a,s],0)}l=function(){var e;if(y.state.isVisible&&!m){if(m=!0,w.offsetHeight,w.style.transition=y.props.moveTransition,A()&&y.props.animation){var t=D(),n=t.box,r=t.content;en([n,r],i),tn([n,r],"visible")}I(),P(),Wt(Tn,y),null==(e=y.popperInstance)||e.forceUpdate(),y.state.isMounted=!0,L("onMount",[y]),y.props.animation&&A()&&function(e,t){j(e,t)}(i,(function(){y.state.isShown=!0,L("onShown",[y])}))}},function(){var e,t=y.props.appendTo,n=R();e=y.props.interactive&&t===pn.appendTo||"parent"===t?n.parentNode:jt(t,[n]);e.contains(w)||e.appendChild(w);Z(),!1}()},hide:function(){0;var e=!y.state.isVisible,t=y.state.isDestroyed,n=!y.state.isEnabled,r=Ut(y.props.duration,1,pn.duration);if(e||t||n)return;if(L("onHide",[y],!1),!1===y.props.onHide(y))return;y.state.isVisible=!1,y.state.isShown=!1,m=!1,h=!1,A()&&(w.style.visibility="hidden");if(F(),z(),N(),A()){var i=D(),o=i.box,a=i.content;y.props.animation&&(en([o,a],r),tn([o,a],"hidden"))}I(),P(),y.props.animation?A()&&function(e,t){j(e,(function(){!y.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&t()}))}(r,y.unmount):y.unmount()},hideWithInteractivity:function(e){0;M().addEventListener("mousemove",g),Wt(Sn,g),g(e)},enable:function(){y.state.isEnabled=!0},disable:function(){y.hide(),y.state.isEnabled=!1},unmount:function(){0;y.state.isVisible&&y.hide();if(!y.state.isMounted)return;J(),ee().forEach((function(e){e._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w);Tn=Tn.filter((function(e){return e!==y})),y.state.isMounted=!1,L("onHidden",[y])},destroy:function(){0;if(y.state.isDestroyed)return;y.clearDelayTimeouts(),y.unmount(),W(),delete e._tippy,y.state.isDestroyed=!0,L("onDestroy",[y])}};if(!u.render)return y;var E=u.render(y),w=E.popper,S=E.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+y.id,y.popper=w,e._tippy=y,w._tippy=y;var T=v.map((function(e){return e.fn(y)})),k=e.hasAttribute("aria-expanded");return G(),P(),N(),L("onCreate",[y]),u.showOnCreate&&te(),w.addEventListener("mouseenter",(function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(e){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&(M().addEventListener("mousemove",g),g(e))})),y;function C(){var e=y.props.touch;return Array.isArray(e)?e:[e,0]}function x(){return"hold"===C()[0]}function A(){var e;return!!(null==(e=y.props.render)?void 0:e.$$tippy)}function R(){return c||e}function M(){var e=R().parentNode;return e?nn(e):document}function D(){return yn(w)}function O(e){return y.state.isMounted&&!y.state.isVisible||on.isTouch||a&&"focus"===a.type?0:Ut(y.props.delay,e?0:1,pn.delay)}function N(){w.style.pointerEvents=y.props.interactive&&y.state.isVisible?"":"none",w.style.zIndex=""+y.props.zIndex}function L(e,t,n){var r;(void 0===n&&(n=!0),T.forEach((function(n){n[e]&&n[e].apply(void 0,t)})),n)&&(r=y.props)[e].apply(r,t)}function I(){var t=y.props.aria;if(t.content){var n="aria-"+t.content,r=w.id;Gt(y.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(y.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}}))}}function P(){!k&&y.props.aria.expanded&&Gt(y.props.triggerTarget||e).forEach((function(e){y.props.interactive?e.setAttribute("aria-expanded",y.state.isVisible&&e===R()?"true":"false"):e.removeAttribute("aria-expanded")}))}function F(){M().removeEventListener("mousemove",g),Sn=Sn.filter((function(e){return e!==g}))}function B(e){if(!(on.isTouch&&(f||"mousedown"===e.type)||y.props.interactive&&w.contains(e.target))){if(R().contains(e.target)){if(on.isTouch)return;if(y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else L("onClickOutside",[y,e]);!0===y.props.hideOnClick&&(y.clearDelayTimeouts(),y.hide(),p=!0,setTimeout((function(){p=!1})),y.state.isMounted||z())}}function Y(){f=!0}function H(){f=!1}function U(){var e=M();e.addEventListener("mousedown",B,!0),e.addEventListener("touchend",B,Ht),e.addEventListener("touchstart",H,Ht),e.addEventListener("touchmove",Y,Ht)}function z(){var e=M();e.removeEventListener("mousedown",B,!0),e.removeEventListener("touchend",B,Ht),e.removeEventListener("touchstart",H,Ht),e.removeEventListener("touchmove",Y,Ht)}function j(e,t){var n=D().box;function r(e){e.target===n&&(rn(n,"remove",r),t())}if(0===e)return t();rn(n,"remove",s),rn(n,"add",r),s=r}function V(t,n,r){void 0===r&&(r=!1),Gt(y.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,r),_.push({node:e,eventType:t,handler:n,options:r})}))}function G(){var e;x()&&(V("touchstart",q,{passive:!0}),V("touchend",K,{passive:!0})),(e=y.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(V(e,q),e){case"mouseenter":V("mouseleave",K);break;case"focus":V(un?"focusout":"blur",Q);break;case"focusin":V("focusout",Q)}}))}function W(){_.forEach((function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)})),_=[]}function q(e){var t,n=!1;if(y.state.isEnabled&&!X(e)&&!p){var r="focus"===(null==(t=a)?void 0:t.type);a=e,c=e.currentTarget,P(),!y.state.isVisible&&Xt(e)&&Sn.forEach((function(t){return t(e)})),"click"===e.type&&(y.props.trigger.indexOf("mouseenter")<0||h)&&!1!==y.props.hideOnClick&&y.state.isVisible?n=!0:te(e),"click"===e.type&&(h=!n),n&&!r&&ne(e)}}function $(e){var t=e.target,n=R().contains(t)||w.contains(t);"mousemove"===e.type&&n||function(e,t){var n=t.clientX,r=t.clientY;return e.every((function(e){var t=e.popperRect,i=e.popperState,o=e.props.interactiveBorder,a=qt(i.placement),s=i.modifiersData.offset;if(!s)return!0;var l="bottom"===a?s.top.y:0,c="top"===a?s.bottom.y:0,d="right"===a?s.left.x:0,u="left"===a?s.right.x:0,h=t.top-r+l>o,p=r-t.bottom-c>o,f=t.left-n+d>o,m=n-t.right-u>o;return h||p||f||m}))}(ee().concat(w).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:u}:null})).filter(Boolean),e)&&(F(),ne(e))}function K(e){X(e)||y.props.trigger.indexOf("click")>=0&&h||(y.props.interactive?y.hideWithInteractivity(e):ne(e))}function Q(e){y.props.trigger.indexOf("focusin")<0&&e.target!==R()||y.props.interactive&&e.relatedTarget&&w.contains(e.relatedTarget)||ne(e)}function X(e){return!!on.isTouch&&x()!==e.type.indexOf("touch")>=0}function Z(){J();var t=y.props,n=t.popperOptions,r=t.placement,i=t.offset,o=t.getReferenceClientRect,a=t.moveTransition,s=A()?yn(w).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||R()}:e,d=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(A()){var n=D().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];A()&&s&&d.push({name:"arrow",options:{element:s,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),y.popperInstance=Ue(c,w,Object.assign({},n,{placement:r,onFirstUpdate:l,modifiers:d}))}function J(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function ee(){return $t(w.querySelectorAll("[data-tippy-root]"))}function te(e){y.clearDelayTimeouts(),e&&L("onTrigger",[y,e]),U();var t=O(!0),n=C(),i=n[0],o=n[1];on.isTouch&&"hold"===i&&o&&(t=o),t?r=setTimeout((function(){y.show()}),t):y.show()}function ne(e){if(y.clearDelayTimeouts(),L("onUntrigger",[y,e]),y.state.isVisible){if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&h)){var t=O(!1);t?i=setTimeout((function(){y.state.isVisible&&y.hide()}),t):o=requestAnimationFrame((function(){y.hide()}))}}else z()}}function Cn(e,t){void 0===t&&(t={});var n=pn.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",sn,Ht),window.addEventListener("blur",cn);var r=Object.assign({},t,{plugins:n}),i=Jt(e).reduce((function(e,t){var n=t&&kn(t,r);return n&&e.push(n),e}),[]);return Qt(e)?i[0]:i}Cn.defaultProps=pn,Cn.setDefaultProps=function(e){Object.keys(e).forEach((function(t){pn[t]=e[t]}))},Cn.currentInput=on;Object.assign({},z,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}});Cn.setDefaultProps({render:En});const xn=Cn;function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e(".tooltip").each((function(){var t={content:e(this).attr("title")};void 0!==e(this).data("trigger")&&(t.trigger=e(this).data("trigger")),void 0!==e(this).data("placement")&&(t.placement=e(this).data("placement")),void 0!==e(this).data("theme")&&(t.theme=e(this).data("theme")),void 0!==e(this).data("tooltip-content")&&(t.content=e(e(this).data("tooltip-content"))[0]),e(this).removeAttr("title"),xn(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({arrow:It,animation:"shift-away"},t))}))}(r(5553));var Mn=r(7466),Dn=r.n(Mn);function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e(".datepicker").each((function(){var t={autoApply:!1,singleMode:!1,numberOfColumns:2,numberOfMonths:2,showWeekNumbers:!0,format:"D MMM, YYYY",dropdowns:{minYear:1990,maxYear:null,months:!0,years:!0}};if(e(this).data("single-mode")&&(t.singleMode=!0,t.numberOfColumns=1,t.numberOfMonths=1),e(this).data("format")&&(t.format=e(this).data("format")),!e(this).val()){var n=c()().format(t.format);n+=t.singleMode?"":" - "+c()().add(1,"month").format(t.format),e(this).val(n)}new(Dn())(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({element:this},t))}))}(r(5553));var Ln=r(4183),In=r.n(Ln);function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){Bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e(".tom-select").each((function(){var t={plugins:{dropdown_input:{}}};e(this).data("placeholder")&&(t.placeholder=e(this).data("placeholder")),void 0!==e(this).attr("multiple")&&(t=Fn(Fn({},t),{},{plugins:Fn(Fn({},t.plugins),{},{remove_button:{title:"Remove this item"}}),persist:!1,create:!0,onDelete:function(e){return confirm(e.length>1?"Are you sure you want to remove these "+e.length+" items?":'Are you sure you want to remove "'+e[0]+'"?')}})),e(this).data("header")&&(t=Fn(Fn({},t),{},{plugins:Fn(Fn({},t.plugins),{},{dropdown_header:{title:e(this).data("header")}})})),new(In())(this,t)}))}(r(5553));var Yn=r(2025),Hn=r.n(Yn);!function(e){Hn().autoDiscover=!1,e(".dropzone").each((function(){var t=this,n={accept:function(e,t){console.log("Uploaded"),t()}};e(this).data("single")&&(n.maxFiles=1),e(this).data("file-types")&&(n.accept=function(n,r){-1===e(t).data("file-types").split("|").indexOf(n.type)?(alert("Error! Files of this type are not accepted"),r("Error! Files of this type are not accepted")):(console.log("Uploaded"),r())}),new(Hn())(this,n).on("maxfilesexceeded",(function(e){alert("No more files please!")}))}))}(r(5553));const Un=function(){return function e(){e.called=!0}};class zn{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=Un(),this.off=Un()}}const jn=new Array(256).fill().map(((e,t)=>("0"+t.toString(16)).slice(-2)));function Vn(){const e=4294967296*Math.random()>>>0,t=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0;return"e"+jn[e>>0&255]+jn[e>>8&255]+jn[e>>16&255]+jn[e>>24&255]+jn[t>>0&255]+jn[t>>8&255]+jn[t>>16&255]+jn[t>>24&255]+jn[n>>0&255]+jn[n>>8&255]+jn[n>>16&255]+jn[n>>24&255]+jn[r>>0&255]+jn[r>>8&255]+jn[r>>16&255]+jn[r>>24&255]}const Gn={get(e){return"number"!=typeof e?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};class Wn extends Error{constructor(e,t,n){super(`${e}${n?` ${JSON.stringify(n)}`:""}${$n(e)}`),this.name="CKEditorError",this.context=t,this.data=n}is(e){return"CKEditorError"===e}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;const n=new Wn(e.message,t);throw n.stack=e.stack,n}}function qn(e,t){console.warn(...Kn(e,t))}function $n(e){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html#error-${e}`}function Kn(e,t){const n=$n(e);return t?[e,t,n]:[e,n]}const Qn="27.1.0",Xn="object"==typeof window?window:r.g;if(Xn.CKEDITOR_VERSION)throw new Wn("ckeditor-duplicated-modules",null);Xn.CKEDITOR_VERSION=Qn;const Zn=Symbol("listeningTo"),Jn=Symbol("emitterId"),er={on(e,t,n={}){this.listenTo(this,e,t,n)},once(e,t,n){let r=!1;this.listenTo(this,e,(function(e,...n){r||(r=!0,e.off(),t.call(this,e,...n))}),n)},off(e,t){this.stopListening(this,e,t)},listenTo(e,t,n,r={}){let i,o;this[Zn]||(this[Zn]={});const a=this[Zn];nr(e)||tr(e);const s=nr(e);(i=a[s])||(i=a[s]={emitter:e,callbacks:{}}),(o=i.callbacks[t])||(o=i.callbacks[t]=[]),o.push(n),function(e,t,n,r,i){t._addEventListener?t._addEventListener(n,r,i):e._addEventListener.call(t,n,r,i)}(this,e,t,n,r)},stopListening(e,t,n){const r=this[Zn];let i=e&&nr(e);const o=r&&i&&r[i],a=o&&t&&o.callbacks[t];if(!(!r||e&&!o||t&&!a))if(n){sr(this,e,t,n);-1!==a.indexOf(n)&&(1===a.length?delete o.callbacks[t]:sr(this,e,t,n))}else if(a){for(;n=a.pop();)sr(this,e,t,n);delete o.callbacks[t]}else if(o){for(t in o.callbacks)this.stopListening(e,t);delete r[i]}else{for(i in r)this.stopListening(r[i].emitter);delete this[Zn]}},fire(e,...t){try{const n=e instanceof zn?e:new zn(this,e),r=n.name;let i=or(this,r);if(n.path.push(this),i){const e=[n,...t];i=Array.from(i);for(let t=0;t<i.length&&(i[t].callback.apply(this,e),n.off.called&&(delete n.off.called,this._removeEventListener(r,i[t].callback)),!n.stop.called);t++);}if(this._delegations){const e=this._delegations.get(r),i=this._delegations.get("*");e&&ar(e,n,t),i&&ar(i,n,t)}return n.return}catch(e){Wn.rethrowUnexpectedError(e,this)}},delegate(...e){return{to:(t,n)=>{this._delegations||(this._delegations=new Map),e.forEach((e=>{const r=this._delegations.get(e);r?r.set(t,n):this._delegations.set(e,new Map([[t,n]]))}))}}},stopDelegating(e,t){if(this._delegations)if(e)if(t){const n=this._delegations.get(e);n&&n.delete(t)}else this._delegations.delete(e);else this._delegations.clear()},_addEventListener(e,t,n){!function(e,t){const n=rr(e);if(n[t])return;let r=t,i=null;const o=[];for(;""!==r&&!n[r];)n[r]={callbacks:[],childEvents:[]},o.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(""!==r){for(const e of o)e.callbacks=n[r].callbacks.slice();n[r].childEvents.push(i)}}(this,e);const r=ir(this,e),i=Gn.get(n.priority),o={callback:t,priority:i};for(const e of r){let t=!1;for(let n=0;n<e.length;n++)if(e[n].priority<i){e.splice(n,0,o),t=!0;break}t||e.push(o)}},_removeEventListener(e,t){const n=ir(this,e);for(const e of n)for(let n=0;n<e.length;n++)e[n].callback==t&&(e.splice(n,1),n--)}};function tr(e,t){e[Jn]||(e[Jn]=t||Vn())}function nr(e){return e[Jn]}function rr(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function ir(e,t){const n=rr(e)[t];if(!n)return[];let r=[n.callbacks];for(let t=0;t<n.childEvents.length;t++){const i=ir(e,n.childEvents[t]);r=r.concat(i)}return r}function or(e,t){let n;return e._events&&(n=e._events[t])&&n.callbacks.length?n.callbacks:t.indexOf(":")>-1?or(e,t.substr(0,t.lastIndexOf(":"))):null}function ar(e,t,n){for(let[r,i]of e){i?"function"==typeof i&&(i=i(t.name)):i=t.name;const e=new zn(t.source,i);e.path=[...t.path],r.fire(e,...n)}}function sr(e,t,n,r){t._removeEventListener?t._removeEventListener(n,r):e._removeEventListener.call(t,n,r)}const lr=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const cr="object"==typeof global&&global&&global.Object===Object&&global;var dr="object"==typeof self&&self&&self.Object===Object&&self;const ur=cr||dr||Function("return this")();const hr=ur.Symbol;var pr=Object.prototype,fr=pr.hasOwnProperty,mr=pr.toString,_r=hr?hr.toStringTag:void 0;const gr=function(e){var t=fr.call(e,_r),n=e[_r];try{e[_r]=void 0;var r=!0}catch(e){}var i=mr.call(e);return r&&(t?e[_r]=n:delete e[_r]),i};var br=Object.prototype.toString;const vr=function(e){return br.call(e)};var yr=hr?hr.toStringTag:void 0;const Er=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yr&&yr in Object(e)?gr(e):vr(e)};const wr=function(e){if(!lr(e))return!1;var t=Er(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const Sr=ur["__core-js_shared__"];var Tr=function(){var e=/[^.]+$/.exec(Sr&&Sr.keys&&Sr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const kr=function(e){return!!Tr&&Tr in e};var Cr=Function.prototype.toString;const xr=function(e){if(null!=e){try{return Cr.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var Ar=/^\[object .+?Constructor\]$/,Rr=Function.prototype,Mr=Object.prototype,Dr=Rr.toString,Or=Mr.hasOwnProperty,Nr=RegExp("^"+Dr.call(Or).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Lr=function(e){return!(!lr(e)||kr(e))&&(wr(e)?Nr:Ar).test(xr(e))};const Ir=function(e,t){return null==e?void 0:e[t]};const Pr=function(e,t){var n=Ir(e,t);return Lr(n)?n:void 0};const Fr=function(){try{var e=Pr(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const Br=function(e,t,n){"__proto__"==t&&Fr?Fr(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const Yr=function(e,t){return e===t||e!=e&&t!=t};var Hr=Object.prototype.hasOwnProperty;const Ur=function(e,t,n){var r=e[t];Hr.call(e,t)&&Yr(r,n)&&(void 0!==n||t in e)||Br(e,t,n)};const zr=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?Br(n,s,l):Ur(n,s,l)}return n};const jr=function(e){return e};const Vr=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Gr=Math.max;const Wr=function(e,t,n){return t=Gr(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Gr(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Vr(e,this,s)}};const qr=function(e){return function(){return e}};const $r=Fr?function(e,t){return Fr(e,"toString",{configurable:!0,enumerable:!1,value:qr(t),writable:!0})}:jr;var Kr=Date.now;const Qr=function(e){var t=0,n=0;return function(){var r=Kr(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}($r);const Xr=function(e,t){return Qr(Wr(e,t,jr),e+"")};const Zr=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const Jr=function(e){return null!=e&&Zr(e.length)&&!wr(e)};var ei=/^(?:0|[1-9]\d*)$/;const ti=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ei.test(e))&&e>-1&&e%1==0&&e<t};const ni=function(e,t,n){if(!lr(n))return!1;var r=typeof t;return!!("number"==r?Jr(n)&&ti(t,n.length):"string"==r&&t in n)&&Yr(n[t],e)};const ri=function(e){return Xr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&ni(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))};const ii=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const oi=function(e){return null!=e&&"object"==typeof e};const ai=function(e){return oi(e)&&"[object Arguments]"==Er(e)};var si=Object.prototype,li=si.hasOwnProperty,ci=si.propertyIsEnumerable;const di=ai(function(){return arguments}())?ai:function(e){return oi(e)&&li.call(e,"callee")&&!ci.call(e,"callee")};const ui=Array.isArray;const hi=function(){return!1};var pi="object"==typeof exports&&exports&&!exports.nodeType&&exports,fi=pi&&"object"==typeof module&&module&&!module.nodeType&&module,mi=fi&&fi.exports===pi?ur.Buffer:void 0;const _i=(mi?mi.isBuffer:void 0)||hi;var gi={};gi["[object Float32Array]"]=gi["[object Float64Array]"]=gi["[object Int8Array]"]=gi["[object Int16Array]"]=gi["[object Int32Array]"]=gi["[object Uint8Array]"]=gi["[object Uint8ClampedArray]"]=gi["[object Uint16Array]"]=gi["[object Uint32Array]"]=!0,gi["[object Arguments]"]=gi["[object Array]"]=gi["[object ArrayBuffer]"]=gi["[object Boolean]"]=gi["[object DataView]"]=gi["[object Date]"]=gi["[object Error]"]=gi["[object Function]"]=gi["[object Map]"]=gi["[object Number]"]=gi["[object Object]"]=gi["[object RegExp]"]=gi["[object Set]"]=gi["[object String]"]=gi["[object WeakMap]"]=!1;const bi=function(e){return oi(e)&&Zr(e.length)&&!!gi[Er(e)]};const vi=function(e){return function(t){return e(t)}};var yi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ei=yi&&"object"==typeof module&&module&&!module.nodeType&&module,wi=Ei&&Ei.exports===yi&&cr.process;const Si=function(){try{var e=Ei&&Ei.require&&Ei.require("util").types;return e||wi&&wi.binding&&wi.binding("util")}catch(e){}}();var Ti=Si&&Si.isTypedArray;const ki=Ti?vi(Ti):bi;var Ci=Object.prototype.hasOwnProperty;const xi=function(e,t){var n=ui(e),r=!n&&di(e),i=!n&&!r&&_i(e),o=!n&&!r&&!i&&ki(e),a=n||r||i||o,s=a?ii(e.length,String):[],l=s.length;for(var c in e)!t&&!Ci.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ti(c,l))||s.push(c);return s};var Ai=Object.prototype;const Ri=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ai)};const Mi=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var Di=Object.prototype.hasOwnProperty;const Oi=function(e){if(!lr(e))return Mi(e);var t=Ri(e),n=[];for(var r in e)("constructor"!=r||!t&&Di.call(e,r))&&n.push(r);return n};const Ni=function(e){return Jr(e)?xi(e,!0):Oi(e)};const Li=ri((function(e,t){zr(t,Ni(t),e)})),Ii=Symbol("observableProperties"),Pi=Symbol("boundObservables"),Fi=Symbol("boundProperties"),Bi=Symbol("decoratedMethods"),Yi=Symbol("decoratedOriginal"),Hi={set(e,t){if(lr(e))return void Object.keys(e).forEach((t=>{this.set(t,e[t])}),this);zi(this);const n=this[Ii];if(e in this&&!n.has(e))throw new Wn("observable-set-cannot-override",this);Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get:()=>n.get(e),set(t){const r=n.get(e);let i=this.fire("set:"+e,e,t,r);void 0===i&&(i=t),r===i&&n.has(e)||(n.set(e,i),this.fire("change:"+e,e,i,r))}}),this[e]=t},bind(...e){if(!e.length||!Gi(e))throw new Wn("observable-bind-wrong-properties",this);if(new Set(e).size!==e.length)throw new Wn("observable-bind-duplicate-properties",this);zi(this);const t=this[Fi];e.forEach((e=>{if(t.has(e))throw new Wn("observable-bind-rebind",this)}));const n=new Map;return e.forEach((e=>{const r={property:e,to:[]};t.set(e,r),n.set(e,r)})),{to:ji,toMany:Vi,_observable:this,_bindProperties:e,_to:[],_bindings:n}},unbind(...e){if(!this[Ii])return;const t=this[Fi],n=this[Pi];if(e.length){if(!Gi(e))throw new Wn("observable-unbind-wrong-properties",this);e.forEach((e=>{const r=t.get(e);if(!r)return;let i,o,a,s;r.to.forEach((e=>{i=e[0],o=e[1],a=n.get(i),s=a[o],s.delete(r),s.size||delete a[o],Object.keys(a).length||(n.delete(i),this.stopListening(i,"change"))})),t.delete(e)}))}else n.forEach(((e,t)=>{this.stopListening(t,"change")})),n.clear(),t.clear()},decorate(e){const t=this[e];if(!t)throw new Wn("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:e});this.on(e,((e,n)=>{e.return=t.apply(this,n)})),this[e]=function(...t){return this.fire(e,t)},this[e][Yi]=t,this[Bi]||(this[Bi]=[]),this[Bi].push(e)}};Li(Hi,er),Hi.stopListening=function(e,t,n){if(!e&&this[Bi]){for(const e of this[Bi])this[e]=this[e][Yi];delete this[Bi]}er.stopListening.call(this,e,t,n)};const Ui=Hi;function zi(e){e[Ii]||(Object.defineProperty(e,Ii,{value:new Map}),Object.defineProperty(e,Pi,{value:new Map}),Object.defineProperty(e,Fi,{value:new Map}))}function ji(...e){const t=function(...e){if(!e.length)throw new Wn("observable-bind-to-parse-error",null);const t={to:[]};let n;"function"==typeof e[e.length-1]&&(t.callback=e.pop());return e.forEach((e=>{if("string"==typeof e)n.properties.push(e);else{if("object"!=typeof e)throw new Wn("observable-bind-to-parse-error",null);n={observable:e,properties:[]},t.to.push(n)}})),t}(...e),n=Array.from(this._bindings.keys()),r=n.length;if(!t.callback&&t.to.length>1)throw new Wn("observable-bind-to-no-callback",this);if(r>1&&t.callback)throw new Wn("observable-bind-to-extra-callback",this);var i;t.to.forEach((e=>{if(e.properties.length&&e.properties.length!==r)throw new Wn("observable-bind-to-properties-length",this);e.properties.length||(e.properties=this._bindProperties)})),this._to=t.to,t.callback&&(this._bindings.get(n[0]).callback=t.callback),i=this._observable,this._to.forEach((e=>{const t=i[Pi];let n;t.get(e.observable)||i.listenTo(e.observable,"change",((r,o)=>{n=t.get(e.observable)[o],n&&n.forEach((e=>{Wi(i,e.property)}))}))})),function(e){let t;e._bindings.forEach(((n,r)=>{e._to.forEach((i=>{t=i.properties[n.callback?0:e._bindProperties.indexOf(r)],n.to.push([i.observable,t]),function(e,t,n,r){const i=e[Pi],o=i.get(n),a=o||{};a[r]||(a[r]=new Set);a[r].add(t),o||i.set(n,a)}(e._observable,n,i.observable,t)}))}))}(this),this._bindProperties.forEach((e=>{Wi(this._observable,e)}))}function Vi(e,t,n){if(this._bindings.size>1)throw new Wn("observable-bind-to-many-not-one-binding",this);this.to(...function(e,t){const n=e.map((e=>[e,t]));return Array.prototype.concat.apply([],n)}(e,t),n)}function Gi(e){return e.every((e=>"string"==typeof e))}function Wi(e,t){const n=e[Fi].get(t);let r;n.callback?r=n.callback.apply(e,n.to.map((e=>e[0][e[1]]))):(r=n.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(e,t)?e[t]=r:e.set(t,r)}function qi(e,...t){t.forEach((t=>{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((n=>{if(n in e.prototype)return;const r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e.prototype,n,r)}))}))}class $i{constructor(e){this.editor=e,this.set("isEnabled",!0),this._disableStack=new Set}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Ki,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",Ki),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function Ki(e){e.return=!1,e.stop()}qi($i,Ui);class Qi{constructor(e){this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",(()=>{this.refresh()})),this.on("execute",(e=>{this.isEnabled||e.stop()}),{priority:"high"}),this.listenTo(e,"change:isReadOnly",((e,t,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}))}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),1==this._disableStack.size&&(this.on("set:isEnabled",Xi,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),0==this._disableStack.size&&(this.off("set:isEnabled",Xi),this.refresh())}execute(){}destroy(){this.stopListening()}}function Xi(e){e.return=!1,e.stop()}qi(Qi,Ui);const Zi=function(e,t){return function(n){return e(t(n))}};const Ji=Zi(Object.getPrototypeOf,Object);var eo=Function.prototype,to=Object.prototype,no=eo.toString,ro=to.hasOwnProperty,io=no.call(Object);const oo=function(e){if(!oi(e)||"[object Object]"!=Er(e))return!1;var t=Ji(e);if(null===t)return!0;var n=ro.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&no.call(n)==io};const ao=function(){this.__data__=[],this.size=0};const so=function(e,t){for(var n=e.length;n--;)if(Yr(e[n][0],t))return n;return-1};var lo=Array.prototype.splice;const co=function(e){var t=this.__data__,n=so(t,e);return!(n<0)&&(n==t.length-1?t.pop():lo.call(t,n,1),--this.size,!0)};const uo=function(e){var t=this.__data__,n=so(t,e);return n<0?void 0:t[n][1]};const ho=function(e){return so(this.__data__,e)>-1};const po=function(e,t){var n=this.__data__,r=so(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function fo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fo.prototype.clear=ao,fo.prototype.delete=co,fo.prototype.get=uo,fo.prototype.has=ho,fo.prototype.set=po;const mo=fo;const _o=function(){this.__data__=new mo,this.size=0};const go=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const bo=function(e){return this.__data__.get(e)};const vo=function(e){return this.__data__.has(e)};const yo=Pr(ur,"Map");const Eo=Pr(Object,"create");const wo=function(){this.__data__=Eo?Eo(null):{},this.size=0};const So=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var To=Object.prototype.hasOwnProperty;const ko=function(e){var t=this.__data__;if(Eo){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return To.call(t,e)?t[e]:void 0};var Co=Object.prototype.hasOwnProperty;const xo=function(e){var t=this.__data__;return Eo?void 0!==t[e]:Co.call(t,e)};const Ao=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Eo&&void 0===t?"__lodash_hash_undefined__":t,this};function Ro(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ro.prototype.clear=wo,Ro.prototype.delete=So,Ro.prototype.get=ko,Ro.prototype.has=xo,Ro.prototype.set=Ao;const Mo=Ro;const Do=function(){this.size=0,this.__data__={hash:new Mo,map:new(yo||mo),string:new Mo}};const Oo=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const No=function(e,t){var n=e.__data__;return Oo(t)?n["string"==typeof t?"string":"hash"]:n.map};const Lo=function(e){var t=No(this,e).delete(e);return this.size-=t?1:0,t};const Io=function(e){return No(this,e).get(e)};const Po=function(e){return No(this,e).has(e)};const Fo=function(e,t){var n=No(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Bo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bo.prototype.clear=Do,Bo.prototype.delete=Lo,Bo.prototype.get=Io,Bo.prototype.has=Po,Bo.prototype.set=Fo;const Yo=Bo;const Ho=function(e,t){var n=this.__data__;if(n instanceof mo){var r=n.__data__;if(!yo||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yo(r)}return n.set(e,t),this.size=n.size,this};function Uo(e){var t=this.__data__=new mo(e);this.size=t.size}Uo.prototype.clear=_o,Uo.prototype.delete=go,Uo.prototype.get=bo,Uo.prototype.has=vo,Uo.prototype.set=Ho;const zo=Uo;const jo=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const Vo=Zi(Object.keys,Object);var Go=Object.prototype.hasOwnProperty;const Wo=function(e){if(!Ri(e))return Vo(e);var t=[];for(var n in Object(e))Go.call(e,n)&&"constructor"!=n&&t.push(n);return t};const qo=function(e){return Jr(e)?xi(e):Wo(e)};const $o=function(e,t){return e&&zr(t,qo(t),e)};const Ko=function(e,t){return e&&zr(t,Ni(t),e)};var Qo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Xo=Qo&&"object"==typeof module&&module&&!module.nodeType&&module,Zo=Xo&&Xo.exports===Qo?ur.Buffer:void 0,Jo=Zo?Zo.allocUnsafe:void 0;const ea=function(e,t){if(t)return e.slice();var n=e.length,r=Jo?Jo(n):new e.constructor(n);return e.copy(r),r};const ta=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const na=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};const ra=function(){return[]};var ia=Object.prototype.propertyIsEnumerable,oa=Object.getOwnPropertySymbols;const aa=oa?function(e){return null==e?[]:(e=Object(e),na(oa(e),(function(t){return ia.call(e,t)})))}:ra;const sa=function(e,t){return zr(e,aa(e),t)};const la=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};const ca=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)la(t,aa(e)),e=Ji(e);return t}:ra;const da=function(e,t){return zr(e,ca(e),t)};const ua=function(e,t,n){var r=t(e);return ui(e)?r:la(r,n(e))};const ha=function(e){return ua(e,qo,aa)};const pa=function(e){return ua(e,Ni,ca)};const fa=Pr(ur,"DataView");const ma=Pr(ur,"Promise");const _a=Pr(ur,"Set");const ga=Pr(ur,"WeakMap");var ba="[object Map]",va="[object Promise]",ya="[object Set]",Ea="[object WeakMap]",wa="[object DataView]",Sa=xr(fa),Ta=xr(yo),ka=xr(ma),Ca=xr(_a),xa=xr(ga),Aa=Er;(fa&&Aa(new fa(new ArrayBuffer(1)))!=wa||yo&&Aa(new yo)!=ba||ma&&Aa(ma.resolve())!=va||_a&&Aa(new _a)!=ya||ga&&Aa(new ga)!=Ea)&&(Aa=function(e){var t=Er(e),n="[object Object]"==t?e.constructor:void 0,r=n?xr(n):"";if(r)switch(r){case Sa:return wa;case Ta:return ba;case ka:return va;case Ca:return ya;case xa:return Ea}return t});const Ra=Aa;var Ma=Object.prototype.hasOwnProperty;const Da=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ma.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const Oa=ur.Uint8Array;const Na=function(e){var t=new e.constructor(e.byteLength);return new Oa(t).set(new Oa(e)),t};const La=function(e,t){var n=t?Na(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var Ia=/\w*$/;const Pa=function(e){var t=new e.constructor(e.source,Ia.exec(e));return t.lastIndex=e.lastIndex,t};var Fa=hr?hr.prototype:void 0,Ba=Fa?Fa.valueOf:void 0;const Ya=function(e){return Ba?Object(Ba.call(e)):{}};const Ha=function(e,t){var n=t?Na(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Ua=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Na(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return La(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ha(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Pa(e);case"[object Set]":return new r;case"[object Symbol]":return Ya(e)}};var za=Object.create;const ja=function(){function e(){}return function(t){if(!lr(t))return{};if(za)return za(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Va=function(e){return"function"!=typeof e.constructor||Ri(e)?{}:ja(Ji(e))};const Ga=function(e){return oi(e)&&"[object Map]"==Ra(e)};var Wa=Si&&Si.isMap;const qa=Wa?vi(Wa):Ga;const $a=function(e){return oi(e)&&"[object Set]"==Ra(e)};var Ka=Si&&Si.isSet;const Qa=Ka?vi(Ka):$a;var Xa="[object Arguments]",Za="[object Function]",Ja="[object Object]",es={};es[Xa]=es["[object Array]"]=es["[object ArrayBuffer]"]=es["[object DataView]"]=es["[object Boolean]"]=es["[object Date]"]=es["[object Float32Array]"]=es["[object Float64Array]"]=es["[object Int8Array]"]=es["[object Int16Array]"]=es["[object Int32Array]"]=es["[object Map]"]=es["[object Number]"]=es["[object Object]"]=es["[object RegExp]"]=es["[object Set]"]=es["[object String]"]=es["[object Symbol]"]=es["[object Uint8Array]"]=es["[object Uint8ClampedArray]"]=es["[object Uint16Array]"]=es["[object Uint32Array]"]=!0,es["[object Error]"]=es[Za]=es["[object WeakMap]"]=!1;const ts=function e(t,n,r,i,o,a){var s,l=1&n,c=2&n,d=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!lr(t))return t;var u=ui(t);if(u){if(s=Da(t),!l)return ta(t,s)}else{var h=Ra(t),p=h==Za||"[object GeneratorFunction]"==h;if(_i(t))return ea(t,l);if(h==Ja||h==Xa||p&&!o){if(s=c||p?{}:Va(t),!l)return c?da(t,Ko(s,t)):sa(t,$o(s,t))}else{if(!es[h])return o?t:{};s=Ua(t,h,l)}}a||(a=new zo);var f=a.get(t);if(f)return f;a.set(t,s),Qa(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):qa(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var m=u?void 0:(d?c?pa:ha:c?Ni:qo)(t);return jo(m||t,(function(i,o){m&&(i=t[o=i]),Ur(s,o,e(i,n,r,o,t,a))})),s};const ns=function(e,t){return ts(e,5,t="function"==typeof t?t:void 0)};const rs=function(e){return oi(e)&&1===e.nodeType&&!oo(e)};class is{constructor(e,t){this._config={},t&&this.define(os(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,n,r=!1){if(oo(t))return void this._setObjectToTarget(e,t,r);const i=t.split(".");t=i.pop();for(const t of i)oo(e[t])||(e[t]={}),e=e[t];if(oo(n))return oo(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,n,r);r&&void 0!==e[t]||(e[t]=n)}_getFromSource(e,t){const n=t.split(".");t=n.pop();for(const t of n){if(!oo(e[t])){e=null;break}e=e[t]}return e?os(e[t]):void 0}_setObjectToTarget(e,t,n){Object.keys(t).forEach((r=>{this._setToTarget(e,r,t[r],n)}))}}function os(e){return ns(e,as)}function as(e){return rs(e)?e:void 0}function ss(e){return!(!e||!e[Symbol.iterator])}class ls{constructor(e={},t={}){const n=ss(e);if(n||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const t of e)this._items.push(t),this._itemMap.set(this._getItemIdBeforeAdding(t),t)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(void 0===t)t=this._items.length;else if(t>this._items.length||t<0)throw new Wn("collection-add-item-invalid-index",this);for(let n=0;n<e.length;n++){const r=e[n],i=this._getItemIdBeforeAdding(r),o=t+n;this._items.splice(o,0,r),this._itemMap.set(i,r),this.fire("add",r,o)}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if("string"==typeof e)t=this._itemMap.get(e);else{if("number"!=typeof e)throw new Wn("collection-get-invalid-arg",this);t=this._items[e]}return t||null}has(e){if("string"==typeof e)return this._itemMap.has(e);{const t=e[this._idProperty];return this._itemMap.has(t)}}getIndex(e){let t;return t="string"==typeof e?this._itemMap.get(e):e,this._items.indexOf(t)}remove(e){const[t,n]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:n}),t}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new Wn("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:e=>{this._setUpBindToBinding((t=>new e(t)))},using:e=>{"function"==typeof e?this._setUpBindToBinding((t=>e(t))):this._setUpBindToBinding((t=>t[e]))}}}_setUpBindToBinding(e){const t=this._bindToCollection,n=(n,r,i)=>{const o=t._bindToCollection==this,a=t._bindToInternalToExternalMap.get(r);if(o&&a)this._bindToExternalToInternalMap.set(r,a),this._bindToInternalToExternalMap.set(a,r);else{const n=e(r);if(!n)return void this._skippedIndexesFromExternal.push(i);let o=i;for(const e of this._skippedIndexesFromExternal)i>e&&o--;for(const e of t._skippedIndexesFromExternal)o>=e&&o++;this._bindToExternalToInternalMap.set(r,n),this._bindToInternalToExternalMap.set(n,r),this.add(n,o);for(let e=0;e<t._skippedIndexesFromExternal.length;e++)o<=t._skippedIndexesFromExternal[e]&&t._skippedIndexesFromExternal[e]++}};for(const e of t)n(0,e,t.getIndex(e));this.listenTo(t,"add",n),this.listenTo(t,"remove",((e,t,n)=>{const r=this._bindToExternalToInternalMap.get(t);r&&this.remove(r),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce(((e,t)=>(n<t&&e.push(t-1),n>t&&e.push(t),e)),[])}))}_getItemIdBeforeAdding(e){const t=this._idProperty;let n;if(t in e){if(n=e[t],"string"!=typeof n)throw new Wn("collection-add-invalid-id",this);if(this.get(n))throw new Wn("collection-add-item-already-exists",this)}else e[t]=n=Vn();return n}_remove(e){let t,n,r,i=!1;const o=this._idProperty;if("string"==typeof e?(n=e,r=this._itemMap.get(n),i=!r,r&&(t=this._items.indexOf(r))):"number"==typeof e?(t=e,r=this._items[t],i=!r,r&&(n=r[o])):(r=e,n=r[o],t=this._items.indexOf(r),i=-1==t||!this._itemMap.get(n)),i)throw new Wn("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(n);const a=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(a),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}qi(ls,er);class cs{constructor(e,t=[],n=[]){this._context=e,this._plugins=new Map,this._availablePlugins=new Map;for(const e of t)e.pluginName&&this._availablePlugins.set(e.pluginName,e);this._contextPlugins=new Map;for(const[e,t]of n)this._contextPlugins.set(e,t),this._contextPlugins.set(t,e),e.pluginName&&this._availablePlugins.set(e.pluginName,e)}*[Symbol.iterator](){for(const e of this._plugins)"function"==typeof e[0]&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let t=e;throw"function"==typeof e&&(t=e.pluginName||e.name),new Wn("plugincollection-plugin-not-loaded",this._context,{plugin:t})}return t}has(e){return this._plugins.has(e)}init(e,t=[],n=[]){const r=this,i=this._context;!function e(t,n=new Set){t.forEach((t=>{s(t)&&(n.has(t)||(n.add(t),t.pluginName&&!r._availablePlugins.has(t.pluginName)&&r._availablePlugins.set(t.pluginName,t),t.requires&&e(t.requires,n)))}))}(e),u(e);const o=[...function e(t,n=new Set){return t.map((e=>s(e)?e:r._availablePlugins.get(e))).reduce(((t,r)=>n.has(r)?t:(n.add(r),r.requires&&(u(r.requires,r),e(r.requires,n).forEach((e=>t.add(e)))),t.add(r))),new Set)}(e.filter((e=>!c(e,t))))];!function(e,t){for(const n of t){if("function"!=typeof n)throw new Wn("plugincollection-replace-plugin-invalid-type",null,{pluginItem:n});const t=n.pluginName;if(!t)throw new Wn("plugincollection-replace-plugin-missing-name",null,{pluginItem:n});if(n.requires&&n.requires.length)throw new Wn("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:t});const i=r._availablePlugins.get(t);if(!i)throw new Wn("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:t});const o=e.indexOf(i);if(-1===o){if(r._contextPlugins.has(i))return;throw new Wn("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:t})}if(i.requires&&i.requires.length)throw new Wn("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:t});e.splice(o,1,n),r._availablePlugins.set(t,n)}}(o,n);const a=function(e){return e.map((e=>{const t=r._contextPlugins.get(e)||new e(i);return r._add(e,t),t}))}(o);return h(a,"init").then((()=>h(a,"afterInit"))).then((()=>a));function s(e){return"function"==typeof e}function l(e){return s(e)&&e.isContextPlugin}function c(e,t){return t.some((t=>t===e||(d(e)===t||d(t)===e)))}function d(e){return s(e)?e.pluginName||e.name:e}function u(e,n=null){e.map((e=>s(e)?e:r._availablePlugins.get(e)||e)).forEach((e=>{!function(e,t){if(s(e))return;if(t)throw new Wn("plugincollection-soft-required",i,{missingPlugin:e,requiredBy:d(t)});throw new Wn("plugincollection-plugin-not-found",i,{plugin:e})}(e,n),function(e,t){if(!l(t))return;if(l(e))return;throw new Wn("plugincollection-context-required",i,{plugin:d(e),requiredBy:d(t)})}(e,n),function(e,n){if(!n)return;if(!c(e,t))return;throw new Wn("plugincollection-required",i,{plugin:d(e),requiredBy:d(n)})}(e,n)}))}function h(e,t){return e.reduce(((e,n)=>n[t]?r._contextPlugins.has(n)?e:e.then(n[t].bind(n)):e),Promise.resolve())}}destroy(){const e=[];for(const[,t]of this)"function"!=typeof t.destroy||this._contextPlugins.has(t)||e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const n=e.pluginName;if(n){if(this._plugins.has(n))throw new Wn("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:e});this._plugins.set(n,t)}}}function ds(e){return Array.isArray(e)?e:[e]}function us(e,t,n=1){if("number"!=typeof n)throw new Wn("translation-service-quantity-not-a-number",null,{quantity:n});const r=Object.keys(window.CKEDITOR_TRANSLATIONS).length;1===r&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]);const i=t.id||t.string;if(0===r||!function(e,t){return!!window.CKEDITOR_TRANSLATIONS[e]&&!!window.CKEDITOR_TRANSLATIONS[e].dictionary[t]}(e,i))return 1!==n?t.plural:t.string;const o=window.CKEDITOR_TRANSLATIONS[e].dictionary,a=window.CKEDITOR_TRANSLATIONS[e].getPluralForm||(e=>1===e?0:1);if("string"==typeof o[i])return o[i];const s=Number(a(n));return o[i][s]}qi(cs,er),window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});const hs=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function ps(e){return hs.includes(e)?"rtl":"ltr"}class fs{constructor(e={}){this.uiLanguage=e.uiLanguage||"en",this.contentLanguage=e.contentLanguage||this.uiLanguage,this.uiLanguageDirection=ps(this.uiLanguage),this.contentLanguageDirection=ps(this.contentLanguage),this.t=(e,t)=>this._t(e,t)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=ds(t),"string"==typeof e&&(e={string:e});const n=!!e.plural?t[0]:1;return function(e,t){return e.replace(/%(\d+)/g,((e,n)=>n<t.length?t[n]:e))}(us(this.uiLanguage,e,n),t)}}class ms{constructor(e){this.config=new is(e,this.constructor.defaultConfig);const t=this.constructor.builtinPlugins;this.config.define("plugins",t),this.plugins=new cs(this,t);const n=this.config.get("language")||{};this.locale=new fs({uiLanguage:"string"==typeof n?n:n.ui,contentLanguage:this.config.get("language.content")}),this.t=this.locale.t,this.editors=new ls,this._contextOwner=null}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const n of e.concat(t)){if("function"!=typeof n)throw new Wn("context-initplugins-constructor-only",null,{Plugin:n});if(!0!==n.isContextPlugin)throw new Wn("context-initplugins-invalid-plugin",null,{Plugin:n})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,(e=>e.destroy()))).then((()=>this.plugins.destroy()))}_addEditor(e,t){if(this._contextOwner)throw new Wn("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise((t=>{const n=new this(e);t(n.initPlugins().then((()=>n)))}))}}class _s{constructor(e){this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}function gs(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)if(e[r]!=t[r])return r;return e.length==t.length?"same":e.length<t.length?"prefix":"extension"}qi(_s,Ui);const bs=function(e){return ts(e,4)};class vs{constructor(e){this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new Wn("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),r=e.getAncestors(t);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),r=gs(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this!=e&&(this.root===e.root&&!this.isBefore(e))}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire("change:"+e,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=bs(this);return delete e.parent,e}is(e){return"node"===e||"view:node"===e}}qi(vs,er);class ys extends vs{constructor(e,t){super(e),this._textData=t}is(e){return"$text"===e||"view:$text"===e||"text"===e||"view:text"===e||"node"===e||"view:node"===e}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof ys&&(this===e||this.data===e.data)}_clone(){return new ys(this.document,this.data)}}class Es{constructor(e,t,n){if(this.textNode=e,t<0||t>e.data.length)throw new Wn("view-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.data.length)throw new Wn("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(e){return"$textProxy"===e||"view:$textProxy"===e||"textProxy"===e||"view:textProxy"===e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this.textNode:this.parent;for(;null!==n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}}function ws(e){return ss(e)?new Map(e):function(e){const t=new Map;for(const n in e)t.set(n,e[n]);return t}(e)}class Ss{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)("string"==typeof t||t instanceof RegExp)&&(t={name:t}),t.classes&&("string"==typeof t.classes||t.classes instanceof RegExp)&&(t.classes=[t.classes]),this._patterns.push(t)}match(...e){for(const t of e)for(const e of this._patterns){const n=Ts(t,e);if(n)return{element:t,pattern:e,match:n}}return null}matchAll(...e){const t=[];for(const n of e)for(const e of this._patterns){const r=Ts(n,e);r&&t.push({element:n,pattern:e,match:r})}return t.length>0?t:null}getElementName(){if(1!==this._patterns.length)return null;const e=this._patterns[0],t=e.name;return"function"==typeof e||!t||t instanceof RegExp?null:t}}function Ts(e,t){if("function"==typeof t)return t(e);const n={};return t.name&&(n.name=function(e,t){if(e instanceof RegExp)return e.test(t);return e===t}(t.name,e.name),!n.name)||t.attributes&&(n.attributes=function(e,t){const n=[];for(const r in e){const i=e[r];if(!t.hasAttribute(r))return null;{const e=t.getAttribute(r);if(!0===i)n.push(r);else if(i instanceof RegExp){if(!i.test(e))return null;n.push(r)}else{if(e!==i)return null;n.push(r)}}}return n}(t.attributes,e),!n.attributes)?null:!(t.classes&&(n.classes=function(e,t){const n=[];for(const r of e)if(r instanceof RegExp){const e=t.getClassNames();for(const t of e)r.test(t)&&n.push(t);if(0===n.length)return null}else{if(!t.hasClass(r))return null;n.push(r)}return n}(t.classes,e),!n.classes))&&(!(t.styles&&(n.styles=function(e,t){const n=[];for(const r in e){const i=e[r];if(!t.hasStyle(r))return null;{const e=t.getStyle(r);if(i instanceof RegExp){if(!i.test(e))return null;n.push(r)}else{if(e!==i)return null;n.push(r)}}}return n}(t.styles,e),!n.styles))&&n)}const ks=function(e){return"symbol"==typeof e||oi(e)&&"[object Symbol]"==Er(e)};var Cs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xs=/^\w*$/;const As=function(e,t){if(ui(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ks(e))||(xs.test(e)||!Cs.test(e)||null!=t&&e in Object(t))};function Rs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Rs.Cache||Yo),n}Rs.Cache=Yo;const Ms=Rs;var Ds=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Os=/\\(\\)?/g;const Ns=function(e){var t=Ms(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ds,(function(e,n,r,i){t.push(r?i.replace(Os,"$1"):n||e)})),t}));const Ls=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Is=hr?hr.prototype:void 0,Ps=Is?Is.toString:void 0;const Fs=function e(t){if("string"==typeof t)return t;if(ui(t))return Ls(t,e)+"";if(ks(t))return Ps?Ps.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};const Bs=function(e){return null==e?"":Fs(e)};const Ys=function(e,t){return ui(e)?e:As(e,t)?[e]:Ns(Bs(e))};const Hs=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const Us=function(e){if("string"==typeof e||ks(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const zs=function(e,t){for(var n=0,r=(t=Ys(t,e)).length;null!=e&&n<r;)e=e[Us(t[n++])];return n&&n==r?e:void 0};const js=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};const Vs=function(e,t){return t.length<2?e:zs(e,js(t,0,-1))};const Gs=function(e,t){return t=Ys(t,e),null==(e=Vs(e,t))||delete e[Us(Hs(t))]};const Ws=function(e,t){return null==e||Gs(e,t)};const qs=function(e,t,n){var r=null==e?void 0:zs(e,t);return void 0===r?n:r};const $s=function(e,t,n){(void 0!==n&&!Yr(e[t],n)||void 0===n&&!(t in e))&&Br(e,t,n)};const Ks=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}();const Qs=function(e){return oi(e)&&Jr(e)};const Xs=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};const Zs=function(e){return zr(e,Ni(e))};const Js=function(e,t,n,r,i,o,a){var s=Xs(e,n),l=Xs(t,n),c=a.get(l);if(c)$s(e,n,c);else{var d=o?o(s,l,n+"",e,t,a):void 0,u=void 0===d;if(u){var h=ui(l),p=!h&&_i(l),f=!h&&!p&&ki(l);d=l,h||p||f?ui(s)?d=s:Qs(s)?d=ta(s):p?(u=!1,d=ea(l,!0)):f?(u=!1,d=Ha(l,!0)):d=[]:oo(l)||di(l)?(d=s,di(s)?d=Zs(s):lr(s)&&!wr(s)||(d=Va(l))):u=!1}u&&(a.set(l,d),i(d,l,r,o,a),a.delete(l)),$s(e,n,d)}};const el=function e(t,n,r,i,o){t!==n&&Ks(n,(function(a,s){if(o||(o=new zo),lr(a))Js(t,n,s,r,e,i,o);else{var l=i?i(Xs(t,s),a,s+"",t,n,o):void 0;void 0===l&&(l=a),$s(t,s,l)}}),Ni)};const tl=ri((function(e,t,n){el(e,t,n)}));const nl=function(e,t,n,r){if(!lr(e))return e;for(var i=-1,o=(t=Ys(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=Us(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var d=s[l];void 0===(c=r?r(d,l,s):void 0)&&(c=lr(d)?d:ti(t[i+1])?[]:{})}Ur(s,l,c),s=s[l]}return e};const rl=function(e,t,n){return null==e?e:nl(e,t,n)};class il{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){const e=Object.entries(this._styles);return!Array.from(e).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Array.from(function(e){let t=null,n=0,r=0,i=null;const o=new Map;if(""===e)return o;";"!=e.charAt(e.length-1)&&(e+=";");for(let a=0;a<e.length;a++){const s=e.charAt(a);if(null===t)switch(s){case":":i||(i=e.substr(n,a-n),r=a+1);break;case'"':case"'":t=s;break;case";":{const t=e.substr(r,a-r);i&&o.set(i.trim(),t.trim()),i=null,n=a+1;break}}else s===t&&(t=null)}return o}(e).entries());for(const[e,n]of t)this._styleProcessor.toNormalizedForm(e,n,this._styles)}has(e){if(this.isEmpty)return!1;const t=this._styleProcessor.getReducedForm(e,this._styles).find((([t])=>t===e));return Array.isArray(t)}set(e,t){if(lr(e))for(const[t,n]of Object.entries(e))this._styleProcessor.toNormalizedForm(t,n,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=al(e);Ws(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this._getStylesEntries().map((e=>e.join(":"))).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!lr(this._styles[e]))return this._styles[e];const t=this._styleProcessor.getReducedForm(e,this._styles).find((([t])=>t===e));return Array.isArray(t)?t[1]:void 0}getStyleNames(){if(this.isEmpty)return[];return this._getStylesEntries().map((([e])=>e))}clear(){this._styles={}}_getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const n of t)e.push(...this._styleProcessor.getReducedForm(n,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const n=t.splice(0,t.length-1).join("."),r=qs(this._styles,n);if(!r)return;!Array.from(Object.keys(r)).length&&this.remove(n)}}class ol{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,n){if(lr(t))sl(n,al(e),t);else if(this._normalizers.has(e)){const r=this._normalizers.get(e),{path:i,value:o}=r(t);sl(n,i,o)}else sl(n,e,t)}getNormalized(e,t){if(!e)return tl({},t);if(void 0!==t[e])return t[e];if(this._extractors.has(e)){const n=this._extractors.get(e);if("string"==typeof n)return qs(t,n);const r=n(e,t);if(r)return r}return qs(t,al(e))}getReducedForm(e,t){const n=this.getNormalized(e,t);if(void 0===n)return[];if(this._reducers.has(e)){return this._reducers.get(e)(n)}return[[e,n]]}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const n of t)this._mapStyleNames(n,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function al(e){return e.replace("-",".")}function sl(e,t,n){let r=n;lr(n)&&(r=tl({},qs(e,t),n)),rl(e,t,r)}class ll extends vs{constructor(e,t,n,r){if(super(e),this.name=t,this._attrs=function(e){e=ws(e);for(const[t,n]of e)null===n?e.delete(t):"string"!=typeof n&&e.set(t,String(n));return e}(n),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){const e=this._attrs.get("class");cl(this._classes,e),this._attrs.delete("class")}this._styles=new il(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style")),this._customProperties=new Map,this._isAllowedInsideAttributeElement=!1}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}get isAllowedInsideAttributeElement(){return this._isAllowedInsideAttributeElement}is(e,t=null){return t?t===this.name&&("element"===e||"view:element"===e):"element"===e||"view:element"===e||"node"===e||"view:node"===e}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if("class"==e)return this._classes.size>0?[...this._classes].join(" "):void 0;if("style"==e){const e=this._styles.toString();return""==e?void 0:e}return this._attrs.get(e)}hasAttribute(e){return"class"==e?this._classes.size>0:"style"==e?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof ll))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this.isAllowedInsideAttributeElement!=e.isAllowedInsideAttributeElement)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,n]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==n)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(){return this._styles.getStyleNames()}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Ss(...e);let n=this.parent;for(;n;){if(t.match(n))return n;n=n.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),n=Array.from(this._attrs).map((e=>`${e[0]}="${e[1]}"`)).sort().join(" ");return this.name+(""==e?"":` class="${e}"`)+(t?` style="${t}"`:"")+(""==n?"":` ${n}`)}_clone(e=!1){const t=[];if(e)for(const n of this.getChildren())t.push(n._clone(e));const n=new this.constructor(this.document,this.name,this._attrs,t);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._isAllowedInsideAttributeElement=this.isAllowedInsideAttributeElement,n}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let n=0;const r=function(e,t){if("string"==typeof t)return[new ys(e,t)];ss(t)||(t=[t]);return Array.from(t).map((t=>"string"==typeof t?new ys(e,t):t instanceof Es?new ys(e,t.data):t))}(this.document,t);for(const t of r)null!==t.parent&&t._remove(),t.parent=this,t.document=this.document,this._children.splice(e,0,t),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){t=String(t),this._fireChange("attributes",this),"class"==e?cl(this._classes,t):"style"==e?this._styles.setTo(t):this._attrs.set(e,t)}_removeAttribute(e){return this._fireChange("attributes",this),"class"==e?this._classes.size>0&&(this._classes.clear(),!0):"style"==e?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const t of ds(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(const t of ds(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(const t of ds(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}function cl(e,t){const n=t.split(/\s+/);e.clear(),n.forEach((t=>e.add(t)))}class dl extends ll{constructor(e,t,n,r){super(e,t,n,r),this.getFillerOffset=ul}is(e,t=null){return t?t===this.name&&("containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}}function ul(){const e=[...this.getChildren()],t=e[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const t of e)if(!t.is("uiElement"))return null;return this.childCount}class hl extends dl{constructor(e,t,n,r){super(e,t,n,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",(t=>t&&e.selection.editableElement==this)),this.listenTo(e.selection,"change",(()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this}))}is(e,t=null){return t?t===this.name&&("editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}destroy(){this.stopListening()}}qi(hl,Ui);const pl=Symbol("rootName");class fl extends hl{constructor(e,t){super(e,t),this.rootName="main"}is(e,t=null){return t?t===this.name&&("rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e):"rootElement"===e||"view:rootElement"===e||"editableElement"===e||"view:editableElement"===e||"containerElement"===e||"view:containerElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}get rootName(){return this.getCustomProperty(pl)}set rootName(e){this._setCustomProperty(pl,e)}set _name(e){this.name=e}}class ml{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new Wn("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new Wn("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this.position=_l._createAt(e.startPosition):this.position=_l._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,n,r;do{r=this.position,({done:t,value:n}=this.next())}while(!t&&e(n));t||(this.position=r)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,n=e.parent;if(null===n.parent&&e.offset===n.childCount)return{done:!0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};let r;if(n instanceof ys){if(e.isAtEnd)return this.position=_l._createAfter(n),this._next();r=n.data[e.offset]}else r=n.getChild(e.offset);if(r instanceof ll)return this.shallow?e.offset++:e=new _l(r,0),this.position=e,this._formatReturnValue("elementStart",r,t,e,1);if(r instanceof ys){if(this.singleCharacters)return e=new _l(r,0),this.position=e,this._next();{let n,i=r.data.length;return r==this._boundaryEndParent?(i=this.boundaries.end.offset,n=new Es(r,0,i),e=_l._createAfter(n)):(n=new Es(r,0,r.data.length),e.offset++),this.position=e,this._formatReturnValue("text",n,t,e,i)}}if("string"==typeof r){let r;if(this.singleCharacters)r=1;else{r=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset}const i=new Es(n,e.offset,r);return e.offset+=r,this.position=e,this._formatReturnValue("text",i,t,e,r)}return e=_l._createAfter(n),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,t,e)}_previous(){let e=this.position.clone();const t=this.position,n=e.parent;if(null===n.parent&&0===e.offset)return{done:!0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};let r;if(n instanceof ys){if(e.isAtStart)return this.position=_l._createBefore(n),this._previous();r=n.data[e.offset-1]}else r=n.getChild(e.offset-1);if(r instanceof ll)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue("elementStart",r,t,e,1)):(e=new _l(r,r.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,t,e));if(r instanceof ys){if(this.singleCharacters)return e=new _l(r,r.data.length),this.position=e,this._previous();{let n,i=r.data.length;if(r==this._boundaryStartParent){const t=this.boundaries.start.offset;n=new Es(r,t,r.data.length-t),i=n.data.length,e=_l._createBefore(n)}else n=new Es(r,0,r.data.length),e.offset--;return this.position=e,this._formatReturnValue("text",n,t,e,i)}}if("string"==typeof r){let r;if(this.singleCharacters)r=1;else{const t=n===this._boundaryStartParent?this.boundaries.start.offset:0;r=e.offset-t}e.offset-=r;const i=new Es(n,e.offset,r);return this.position=e,this._formatReturnValue("text",i,t,e,r)}return e=_l._createBefore(n),this.position=e,this._formatReturnValue("elementStart",n,t,e,1)}_formatReturnValue(e,t,n,r,i){return t instanceof Es&&(t.offsetInText+t.data.length==t.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?n=_l._createAfter(t.textNode):(r=_l._createAfter(t.textNode),this.position=r)),0===t.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?n=_l._createBefore(t.textNode):(r=_l._createBefore(t.textNode),this.position=r))),{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:i}}}}class _l{constructor(e,t){this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof hl);){if(!e.parent)return null;e=e.parent}return e}getShiftedBy(e){const t=_l._createAt(this),n=t.offset+e;return t.offset=n<0?0:n,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new ml(t);return n.skip(e),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]==n[r]&&t[r];)r++;return 0===r?null:t[r-1]}is(e){return"position"===e||"view:position"===e}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return"before"==this.compareWith(e)}isAfter(e){return"after"==this.compareWith(e)}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],n=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),n.push(e.offset);const r=gs(t,n);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<n[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new ml(e)}clone(){return new _l(this.parent,this.offset)}static _createAt(e,t){if(e instanceof _l)return new this(e.parent,e.offset);{const n=e;if("end"==t)t=n.is("$text")?n.data.length:n.childCount;else{if("before"==t)return this._createBefore(n);if("after"==t)return this._createAfter(n);if(0!==t&&!t)throw new Wn("view-createpositionat-offset-required",n)}return new _l(n,t)}}static _createAfter(e){if(e.is("$textProxy"))return new _l(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new Wn("view-position-after-root",e,{root:e});return new _l(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new _l(e.textNode,e.offsetInText);if(!e.parent)throw new Wn("view-position-before-root",e,{root:e});return new _l(e.parent,e.index)}}class gl{constructor(e,t=null){this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new ml({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(bl,{direction:"backward"}),t=this.end.getLastMatchingPosition(bl);return e.parent.is("$text")&&e.isAtStart&&(e=_l._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=_l._createAfter(t.parent)),new gl(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(bl);if(e.isAfter(this.end)||e.isEqual(this.end))return new gl(e,e);let t=this.end.getLastMatchingPosition(bl,{direction:"backward"});const n=e.nodeAfter,r=t.nodeBefore;return n&&n.is("$text")&&(e=new _l(n,0)),r&&r.is("$text")&&(t=new _l(r,r.data.length)),new gl(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new gl(this.start,e.start)),this.containsPosition(e.end)&&t.push(new gl(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new gl(t,n)}return null}getWalker(e={}){return e.boundaries=this,new ml(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new gl(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new ml(e);for(const e of t)yield e.item}*getPositions(e={}){e.boundaries=this;const t=new ml(e);yield t.position;for(const e of t)yield e.nextPosition}is(e){return"range"===e||"view:range"===e}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,n,r){return new this(new _l(e,t),new _l(n,r))}static _createFromPositionAndShift(e,t){const n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(_l._createBefore(e),t)}}function bl(e){return!(!e.item.is("attributeElement")&&!e.item.is("uiElement"))}function vl(e){let t=0;for(const n of e)t++;return t}class yl{constructor(e=null,t,n){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",this.setTo(e,t,n)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=vl(this.getRanges());if(t!=vl(e.getRanges()))return!1;if(0==t)return!0;for(let t of this.getRanges()){t=t.getTrimmed();let n=!1;for(let r of e.getRanges())if(r=r.getTrimmed(),t.start.isEqual(r.start)&&t.end.isEqual(r.end)){n=!0;break}if(!n)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(e,t,n){if(null===e)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof yl||e instanceof El)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof gl)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof _l)this._setRanges([new gl(e)]),this._setFakeOptions(t);else if(e instanceof vs){const r=!!n&&!!n.backward;let i;if(void 0===t)throw new Wn("view-selection-setto-required-second-parameter",this);i="in"==t?gl._createIn(e):"on"==t?gl._createOn(e):new gl(_l._createAt(e,t)),this._setRanges([i],r),this._setFakeOptions(n)}else{if(!ss(e))throw new Wn("view-selection-setto-not-selectable",this);this._setRanges(e,t&&t.backward),this._setFakeOptions(t)}this.fire("change")}setFocus(e,t){if(null===this.anchor)throw new Wn("view-selection-setfocus-no-ranges",this);const n=_l._createAt(e,t);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.pop(),"before"==n.compareWith(r)?this._addRange(new gl(n,r),!0):this._addRange(new gl(r,n)),this.fire("change")}is(e){return"selection"===e||"view:selection"===e}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const t of e)this._addRange(t);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof gl))throw new Wn("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new Wn("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new gl(e.start,e.end))}}qi(yl,er);class El{constructor(e=null,t,n){this._selection=new yl,this._selection.delegate("change").to(this),this._selection.setTo(e,t,n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}is(e){return"selection"===e||"documentSelection"==e||"view:selection"==e||"view:documentSelection"==e}_setTo(e,t,n){this._selection.setTo(e,t,n)}_setFocus(e,t){this._selection.setFocus(e,t)}}qi(El,er);class wl extends zn{constructor(e,t,n){super(e,t),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const Sl=Symbol("bubbling contexts"),Tl={fire(e,...t){try{const n=e instanceof zn?e:new zn(this,e),r=Al(this);if(!r.size)return;if(kl(n,"capturing",this),Cl(r,"$capture",n,...t))return n.return;const i=n.startRange||this.selection.getFirstRange(),o=i?i.getContainedElement():null,a=!!o&&Boolean(xl(r,o));let s=o||function(e){if(!e)return null;const t=e.start.parent,n=e.end.parent,r=t.getPath(),i=n.getPath();return r.length>i.length?t:n}(i);if(kl(n,"atTarget",s),!a){if(Cl(r,"$text",n,...t))return n.return;kl(n,"bubbling",s)}for(;s;){if(s.is("rootElement")){if(Cl(r,"$root",n,...t))return n.return}else if(s.is("element")&&Cl(r,s.name,n,...t))return n.return;if(Cl(r,s,n,...t))return n.return;s=s.parent,kl(n,"bubbling",s)}return kl(n,"bubbling",this),Cl(r,"$document",n,...t),n.return}catch(e){Wn.rethrowUnexpectedError(e,this)}},_addEventListener(e,t,n){const r=ds(n.context||"$document"),i=Al(this);for(const o of r){let r=i.get(o);r||(r=Object.create(er),i.set(o,r)),this.listenTo(r,e,t,n)}},_removeEventListener(e,t){const n=Al(this);for(const r of n.values())this.stopListening(r,e,t)}};function kl(e,t,n){e instanceof wl&&(e._eventPhase=t,e._currentTarget=n)}function Cl(e,t,n,...r){const i="string"==typeof t?e.get(t):xl(e,t);return!!i&&(i.fire(n,...r),n.stop.called)}function xl(e,t){for(const[n,r]of e)if("function"==typeof n&&n(t))return r;return null}function Al(e){return e[Sl]||(e[Sl]=new Map),e[Sl]}class Rl{constructor(e){this.selection=new El,this.roots=new ls({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isComposing",!1),this._postFixers=new Set}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.map((e=>e.destroy())),this.stopListening()}_callPostFixers(e){let t=!1;do{for(const n of this._postFixers)if(t=n(e),t)break}while(t)}}qi(Rl,Tl),qi(Rl,Ui);class Ml extends ll{constructor(e,t,n,r){super(e,t,n,r),this.getFillerOffset=Dl,this._priority=10,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new Wn("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}is(e,t=null){return t?t===this.name&&("attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e):"attributeElement"===e||"view:attributeElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}function Dl(){if(Ol(this))return null;let e=this.parent;for(;e&&e.is("attributeElement");){if(Ol(e)>1)return null;e=e.parent}return!e||Ol(e)>1?null:this.childCount}function Ol(e){return Array.from(e.getChildren()).filter((e=>!e.is("uiElement"))).length}Ml.DEFAULT_PRIORITY=10;class Nl extends ll{constructor(e,t,n,r){super(e,t,n,r),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=Ll}is(e,t=null){return t?t===this.name&&("emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e):"emptyElement"===e||"view:emptyElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof vs||Array.from(t).length>0))throw new Wn("view-emptyelement-cannot-add",[this,t])}}function Ll(){return null}const Il=navigator.userAgent.toLowerCase(),Pl={isMac:function(e){return e.indexOf("macintosh")>-1}(Il),isGecko:function(e){return!!e.match(/gecko\/\d+/)}(Il),isSafari:function(e){return e.indexOf(" applewebkit/")>-1&&-1===e.indexOf("chrome")}(Il),isAndroid:function(e){return e.indexOf("android")>-1}(Il),isBlink:function(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0}(Il),features:{isRegExpUnicodePropertySupported:function(){let e=!1;try{e=0==="ć".search(new RegExp("[\\p{L}]","u"))}catch(e){}return e}()}};const Fl={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},Bl={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Yl=function(){const e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const n=String.fromCharCode(t);e[n.toLowerCase()]=t}for(let t=48;t<=57;t++)e[t-48]=t;for(let t=112;t<=123;t++)e["f"+(t-111)]=t;return e}(),Hl=Object.fromEntries(Object.entries(Yl).map((([e,t])=>[t,e.charAt(0).toUpperCase()+e.slice(1)])));function Ul(e){let t;if("string"==typeof e){if(t=Yl[e.toLowerCase()],!t)throw new Wn("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?Yl.alt:0)+(e.ctrlKey?Yl.ctrl:0)+(e.shiftKey?Yl.shift:0)+(e.metaKey?Yl.cmd:0);return t}function zl(e){return"string"==typeof e&&(e=function(e){return e.split("+").map((e=>e.trim()))}(e)),e.map((e=>"string"==typeof e?function(e){if(e.endsWith("!"))return Ul(e.slice(0,-1));const t=Ul(e);return Pl.isMac&&t==Yl.ctrl?Yl.cmd:t}(e):e)).reduce(((e,t)=>t+e),0)}function jl(e){let t=zl(e);return Object.entries(Pl.isMac?Fl:Bl).reduce(((e,[n,r])=>(0!=(t&Yl[n])&&(t&=~Yl[n],e+=r),e)),"")+(t?Hl[t]:"")}function Vl(e,t){const n=function(e,t){const n="ltr"===t;switch(e){case Yl.arrowleft:return n?"left":"right";case Yl.arrowright:return n?"right":"left";case Yl.arrowup:return"up";case Yl.arrowdown:return"down"}}(e,t);return"down"===n||"right"===n}class Gl extends ll{constructor(e,t,n,r){super(e,t,n,r),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=ql}is(e,t=null){return t?t===this.name&&("uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e):"uiElement"===e||"view:uiElement"===e||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof vs||Array.from(t).length>0))throw new Wn("view-uielement-cannot-add",this)}render(e){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const e of this.getAttributeKeys())t.setAttribute(e,this.getAttribute(e));return t}}function Wl(e){e.document.on("arrowKey",((t,n)=>function(e,t,n){if(t.keyCode==Yl.arrowright){const e=t.domTarget.ownerDocument.defaultView.getSelection(),r=1==e.rangeCount&&e.getRangeAt(0).collapsed;if(r||t.shiftKey){const t=e.focusNode,i=e.focusOffset,o=n.domPositionToView(t,i);if(null===o)return;let a=!1;const s=o.getLastMatchingPosition((e=>(e.item.is("uiElement")&&(a=!0),!(!e.item.is("uiElement")&&!e.item.is("attributeElement")))));if(a){const t=n.viewPositionToDom(s);r?e.collapse(t.parent,t.offset):e.extend(t.parent,t.offset)}}}}(0,n,e.domConverter)),{priority:"low"})}function ql(){return null}class $l extends ll{constructor(e,t,n,r){super(e,t,n,r),this._isAllowedInsideAttributeElement=!0,this.getFillerOffset=Kl}is(e,t=null){return t?t===this.name&&("rawElement"===e||"view:rawElement"===e||"element"===e||"view:element"===e):"rawElement"===e||"view:rawElement"===e||e===this.name||e==="view:"+this.name||"element"===e||"view:element"===e||"node"===e||"view:node"===e}_insertChild(e,t){if(t&&(t instanceof vs||Array.from(t).length>0))throw new Wn("view-rawelement-cannot-add",[this,t])}}function Kl(){return null}class Ql{constructor(e,t){this.document=e,this._children=[],t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return"documentFragment"===e||"view:documentFragment"===e}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let n=0;const r=function(e,t){if("string"==typeof t)return[new ys(e,t)];ss(t)||(t=[t]);return Array.from(t).map((t=>"string"==typeof t?new ys(e,t):t instanceof Es?new ys(e,t.data):t))}(this.document,t);for(const t of r)null!==t.parent&&t._remove(),t.parent=this,this._children.splice(e,0,t),e++,n++;return n}_removeChildren(e,t=1){this._fireChange("children",this);for(let n=e;n<e+t;n++)this._children[n].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}}qi(Ql,er);class Xl{constructor(e){this.document=e,this._cloneGroups=new Map}setSelection(e,t,n){this.document.selection._setTo(e,t,n)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new Ql(this.document,e)}createText(e){return new ys(this.document,e)}createAttributeElement(e,t,n={}){const r=new Ml(this.document,e,t);return n.priority&&(r._priority=n.priority),n.id&&(r._id=n.id),r}createContainerElement(e,t,n={}){const r=new dl(this.document,e,t);return void 0!==n.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),r}createEditableElement(e,t){const n=new hl(this.document,e,t);return n._document=this.document,n}createEmptyElement(e,t,n={}){const r=new Nl(this.document,e,t);return void 0!==n.isAllowedInsideAttributeElement&&(r._isAllowedInsideAttributeElement=n.isAllowedInsideAttributeElement),r}createUIElement(e,t,n,r={}){const i=new Gl(this.document,e,t);return n&&(i.render=n),void 0!==r.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),i}createRawElement(e,t,n,r={}){const i=new $l(this.document,e,t);return i.render=n||(()=>{}),void 0!==r.isAllowedInsideAttributeElement&&(i._isAllowedInsideAttributeElement=r.isAllowedInsideAttributeElement),i}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){oo(e)&&void 0===n&&(n=t),n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof _l?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new Wn("view-writer-break-non-container-element",this.document);if(!t.parent)throw new Wn("view-writer-break-root",this.document);if(e.isAtStart)return _l._createBefore(t);if(!e.isAtEnd){const n=t._clone(!1);this.insert(_l._createAfter(t),n);const r=new gl(e,_l._createAt(t,"end")),i=new _l(n,0);this.move(r,i)}return _l._createAfter(t)}mergeAttributes(e){const t=e.offset,n=e.parent;if(n.is("$text"))return e;if(n.is("attributeElement")&&0===n.childCount){const e=n.parent,t=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new _l(e,t))}const r=n.getChild(t-1),i=n.getChild(t);if(!r||!i)return e;if(r.is("$text")&&i.is("$text"))return nc(r,i);if(r.is("attributeElement")&&i.is("attributeElement")&&r.isSimilar(i)){const e=r.childCount;return r._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new _l(r,e))}return e}mergeContainers(e){const t=e.nodeBefore,n=e.nodeAfter;if(!(t&&n&&t.is("containerElement")&&n.is("containerElement")))throw new Wn("view-writer-merge-containers-invalid-position",this.document);const r=t.getChild(t.childCount-1),i=r instanceof ys?_l._createAt(r,"end"):_l._createAt(t,"end");return this.move(gl._createIn(n),_l._createAt(t,"end")),this.remove(gl._createOn(n)),i}insert(e,t){rc(t=ss(t)?[...t]:[t],this.document);const n=t.reduce(((e,t)=>{const n=e[e.length-1],r=!(t.is("uiElement")&&t.isAllowedInsideAttributeElement);return n&&n.breakAttributes==r?n.nodes.push(t):e.push({breakAttributes:r,nodes:[t]}),e}),[]);let r=null,i=e;for(const{nodes:e,breakAttributes:t}of n){const n=this._insertNodes(i,e,t);r||(r=n.start),i=n.end}return r?new gl(r,i):new gl(e)}remove(e){const t=e instanceof gl?e:gl._createOn(e);if(ac(t,this.document),t.isCollapsed)return new Ql(this.document);const{start:n,end:r}=this._breakAttributesRange(t,!0),i=n.parent,o=r.offset-n.offset,a=i._removeChildren(n.offset,o);for(const e of a)this._removeFromClonedElementsGroup(e);const s=this.mergeAttributes(n);return t.start=s,t.end=s.clone(),new Ql(this.document,a)}clear(e,t){ac(e,this.document);const n=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const r of n){const n=r.item;let i;if(n.is("element")&&t.isSimilar(n))i=gl._createOn(n);else if(!r.nextPosition.isAfter(e.start)&&n.is("$textProxy")){const e=n.getAncestors().find((e=>e.is("element")&&t.isSimilar(e)));e&&(i=gl._createIn(e))}i&&(i.end.isAfter(e.end)&&(i.end=e.end),i.start.isBefore(e.start)&&(i.start=e.start),this.remove(i))}}move(e,t){let n;if(t.isAfter(e.end)){const r=(t=this._breakAttributes(t,!0)).parent,i=r.childCount;e=this._breakAttributesRange(e,!0),n=this.remove(e),t.offset+=r.childCount-i}else n=this.remove(e);return this.insert(t,n)}wrap(e,t){if(!(t instanceof Ml))throw new Wn("view-writer-wrap-invalid-attribute",this.document);if(ac(e,this.document),e.isCollapsed){let r=e.start;r.parent.is("element")&&(n=r.parent,!Array.from(n.getChildren()).some((e=>!e.is("uiElement"))))&&(r=r.getLastMatchingPosition((e=>e.item.is("uiElement")))),r=this._wrapPosition(r,t);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(e.start)&&this.setSelection(r),new gl(r)}return this._wrapRange(e,t);var n}unwrap(e,t){if(!(t instanceof Ml))throw new Wn("view-writer-unwrap-invalid-attribute",this.document);if(ac(e,this.document),e.isCollapsed)return e;const{start:n,end:r}=this._breakAttributesRange(e,!0),i=n.parent,o=this._unwrapChildren(i,n.offset,r.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const s=this.mergeAttributes(o.end);return new gl(a,s)}rename(e,t){const n=new dl(this.document,e,t.getAttributes());return this.insert(_l._createAfter(t),n),this.move(gl._createIn(t),_l._createAt(n,0)),this.remove(gl._createOn(t)),n}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return _l._createAt(e,t)}createPositionAfter(e){return _l._createAfter(e)}createPositionBefore(e){return _l._createBefore(e)}createRange(e,t){return new gl(e,t)}createRangeOn(e){return gl._createOn(e)}createRangeIn(e){return gl._createIn(e)}createSelection(e,t,n){return new yl(e,t,n)}_insertNodes(e,t,n){let r,i;if(r=n?Zl(e):e.parent.is("$text")?e.parent.parent:e.parent,!r)throw new Wn("view-writer-invalid-position-container",this.document);i=n?this._breakAttributes(e,!0):e.parent.is("$text")?tc(e):e;const o=r._insertChild(i.offset,t);for(const e of t)this._addToClonedElementsGroup(e);const a=i.getShiftedBy(o),s=this.mergeAttributes(i);s.isEqual(i)||a.offset--;const l=this.mergeAttributes(a);return new gl(s,l)}_wrapChildren(e,t,n,r){let i=t;const o=[];for(;i<n;){const t=e.getChild(i),n=t.is("$text"),a=t.is("attributeElement"),s=t.isAllowedInsideAttributeElement;if(a&&this._wrapAttributeElement(r,t))o.push(new _l(e,i));else if(n||s||a&&Jl(r,t)){const n=r._clone();t._remove(),n._appendChild(t),e._insertChild(i,n),this._addToClonedElementsGroup(n),o.push(new _l(e,i))}else a&&this._wrapChildren(t,0,t.childCount,r);i++}let a=0;for(const e of o){if(e.offset-=a,e.offset==t)continue;this.mergeAttributes(e).isEqual(e)||(a++,n--)}return gl._createFromParentsAndOffsets(e,t,e,n)}_unwrapChildren(e,t,n,r){let i=t;const o=[];for(;i<n;){const t=e.getChild(i);if(t.is("attributeElement"))if(t.isSimilar(r)){const r=t.getChildren(),a=t.childCount;t._remove(),e._insertChild(i,r),this._removeFromClonedElementsGroup(t),o.push(new _l(e,i),new _l(e,i+a)),i+=a,n+=a-1}else this._unwrapAttributeElement(r,t)?(o.push(new _l(e,i),new _l(e,i+1)),i++):(this._unwrapChildren(t,0,t.childCount,r),i++);else i++}let a=0;for(const e of o){if(e.offset-=a,e.offset==t||e.offset==n)continue;this.mergeAttributes(e).isEqual(e)||(a++,n--)}return gl._createFromParentsAndOffsets(e,t,e,n)}_wrapRange(e,t){const{start:n,end:r}=this._breakAttributesRange(e,!0),i=n.parent,o=this._wrapChildren(i,n.offset,r.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const s=this.mergeAttributes(o.end);return new gl(a,s)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return ec(e.clone());e.parent.is("$text")&&(e=tc(e));const n=this.createAttributeElement();n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,e.parent._insertChild(e.offset,n);const r=new gl(e,e.getShiftedBy(1));this.wrap(r,t);const i=new _l(n.parent,n.index);n._remove();const o=i.nodeBefore,a=i.nodeAfter;return o instanceof ys&&a instanceof ys?nc(o,a):ec(i)}_wrapAttributeElement(e,t){if(!sc(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if("class"!==n&&"style"!==n&&t.hasAttribute(n)&&t.getAttribute(n)!==e.getAttribute(n))return!1;for(const n of e.getStyleNames())if(t.hasStyle(n)&&t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())"class"!==n&&"style"!==n&&(t.hasAttribute(n)||this.setAttribute(n,e.getAttribute(n),t));for(const n of e.getStyleNames())t.hasStyle(n)||this.setStyle(n,e.getStyle(n),t);for(const n of e.getClassNames())t.hasClass(n)||this.addClass(n,t);return!0}_unwrapAttributeElement(e,t){if(!sc(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const n of e.getAttributeKeys())if("class"!==n&&"style"!==n&&(!t.hasAttribute(n)||t.getAttribute(n)!==e.getAttribute(n)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const n of e.getStyleNames())if(!t.hasStyle(n)||t.getStyle(n)!==e.getStyle(n))return!1;for(const n of e.getAttributeKeys())"class"!==n&&"style"!==n&&this.removeAttribute(n,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const n=e.start,r=e.end;if(ac(e,this.document),e.isCollapsed){const n=this._breakAttributes(e.start,t);return new gl(n,n)}const i=this._breakAttributes(r,t),o=i.parent.childCount,a=this._breakAttributes(n,t);return i.offset+=i.parent.childCount-o,new gl(a,i)}_breakAttributes(e,t=!1){const n=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new Wn("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new Wn("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new Wn("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&oc(r.parent))return e.clone();if(oc(r))return e.clone();if(r.is("$text"))return this._breakAttributes(tc(e),t);if(n==r.childCount){const e=new _l(r.parent,r.index+1);return this._breakAttributes(e,t)}if(0===n){const e=new _l(r.parent,r.index);return this._breakAttributes(e,t)}{const e=r.index+1,i=r._clone();r.parent._insertChild(e,i),this._addToClonedElementsGroup(i);const o=r.childCount-n,a=r._removeChildren(n,o);i._appendChild(a);const s=new _l(r.parent,e);return this._breakAttributes(s,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const t of e.getChildren())this._addToClonedElementsGroup(t);const t=e.id;if(!t)return;let n=this._cloneGroups.get(t);n||(n=new Set,this._cloneGroups.set(t,n)),n.add(e),e._clonesGroup=n}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const t of e.getChildren())this._removeFromClonedElementsGroup(t);const t=e.id;if(!t)return;const n=this._cloneGroups.get(t);n&&n.delete(e)}}function Zl(e){let t=e.parent;for(;!oc(t);){if(!t)return;t=t.parent}return t}function Jl(e,t){return e.priority<t.priority||!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity()}function ec(e){const t=e.nodeBefore;if(t&&t.is("$text"))return new _l(t,t.data.length);const n=e.nodeAfter;return n&&n.is("$text")?new _l(n,0):e}function tc(e){if(e.offset==e.parent.data.length)return new _l(e.parent.parent,e.parent.index+1);if(0===e.offset)return new _l(e.parent.parent,e.parent.index);const t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new ys(e.root.document,t)),new _l(e.parent.parent,e.parent.index+1)}function nc(e,t){const n=e.data.length;return e._data+=t.data,t._remove(),new _l(e,n)}function rc(e,t){for(const n of e){if(!ic.some((e=>n instanceof e)))throw new Wn("view-writer-insert-invalid-node-type",t);n.is("$text")||rc(n.getChildren(),t)}}const ic=[ys,Ml,dl,Nl,$l,Gl];function oc(e){return e&&(e.is("containerElement")||e.is("documentFragment"))}function ac(e,t){const n=Zl(e.start),r=Zl(e.end);if(!n||!r||n!==r)throw new Wn("view-writer-invalid-range-container",t)}function sc(e,t){return null===e.id&&null===t.id}function lc(e){return"[object Text]"==Object.prototype.toString.call(e)}const cc=e=>e.createTextNode(" "),dc=e=>{const t=e.createElement("span");return t.dataset.ckeFiller=!0,t.innerHTML=" ",t},uc=e=>{const t=e.createElement("br");return t.dataset.ckeFiller=!0,t},hc="⁠".repeat(7);function pc(e){return lc(e)&&e.data.substr(0,7)===hc}function fc(e){return 7==e.data.length&&pc(e)}function mc(e){return pc(e)?e.data.slice(7):e.data}function _c(e,t){if(t.keyCode==Yl.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(1==e.rangeCount&&e.getRangeAt(0).collapsed){const t=e.getRangeAt(0).startContainer,n=e.getRangeAt(0).startOffset;pc(t)&&n<=7&&e.collapse(t,0)}}}function gc(e,t,n,r=!1){n=n||function(e,t){return e===t},Array.isArray(e)||(e=Array.prototype.slice.call(e)),Array.isArray(t)||(t=Array.prototype.slice.call(t));const i=function(e,t,n){const r=bc(e,t,n);if(-1===r)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=vc(e,r),o=vc(t,r),a=bc(i,o,n),s=e.length-a,l=t.length-a;return{firstIndex:r,lastIndexOld:s,lastIndexNew:l}}(e,t,n);return r?function(e,t){const{firstIndex:n,lastIndexOld:r,lastIndexNew:i}=e;if(-1===n)return Array(t).fill("equal");let o=[];n>0&&(o=o.concat(Array(n).fill("equal")));i-n>0&&(o=o.concat(Array(i-n).fill("insert")));r-n>0&&(o=o.concat(Array(r-n).fill("delete")));i<t&&(o=o.concat(Array(t-i).fill("equal")));return o}(i,t.length):function(e,t){const n=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:o}=t;o-r>0&&n.push({index:r,type:"insert",values:e.slice(r,o)});i-r>0&&n.push({index:r+(o-r),type:"delete",howMany:i-r});return n}(t,i)}function bc(e,t,n){for(let r=0;r<Math.max(e.length,t.length);r++)if(void 0===e[r]||void 0===t[r]||!n(e[r],t[r]))return r;return-1}function vc(e,t){return e.slice(t).reverse()}function yc(e,t,n){n=n||function(e,t){return e===t};const r=e.length,i=t.length;if(r>200||i>200||r+i>300)return yc.fastDiff(e,t,n,!0);let o,a;if(i<r){const n=e;e=t,t=n,o="delete",a="insert"}else o="insert",a="delete";const s=e.length,l=t.length,c=l-s,d={},u={};function h(r){const i=(void 0!==u[r-1]?u[r-1]:-1)+1,c=void 0!==u[r+1]?u[r+1]:-1,h=i>c?-1:1;d[r+h]&&(d[r]=d[r+h].slice(0)),d[r]||(d[r]=[]),d[r].push(i>c?o:a);let p=Math.max(i,c),f=p-r;for(;f<s&&p<l&&n(e[f],t[p]);)f++,p++,d[r].push("equal");return p}let p,f=0;do{for(p=-f;p<c;p++)u[p]=h(p);for(p=c+f;p>c;p--)u[p]=h(p);u[c]=h(c),f++}while(u[c]!==l);return d[c].slice(1)}function Ec(e,t,n){e.insertBefore(n,e.childNodes[t]||null)}function wc(e){const t=e.parentNode;t&&t.removeChild(e)}function Sc(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}yc.fastDiff=gc;class Tc{constructor(e,t){this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this.isFocused=!1,this._inlineFiller=null,this._fakeSelectionContainer=null}markToSync(e,t){if("text"===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if("attributes"===e)this.markedAttributes.add(t);else{if("children"!==e)throw new Wn("view-renderer-unknown-type",this);this.markedChildren.add(t)}}}render(){let e;for(const e of this.markedChildren)this._updateChildrenMappings(e);this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));for(const e of this.markedAttributes)this._updateAttrs(e);for(const t of this.markedChildren)this._updateChildren(t,{inlineFillerPosition:e});for(const t of this.markedTexts)!this.markedChildren.has(t.parent)&&this.domConverter.mapViewToDom(t.parent)&&this._updateText(t,{inlineFillerPosition:e});if(e){const t=this.domConverter.viewPositionToDom(e),n=t.parent.ownerDocument;pc(t.parent)?this._inlineFiller=t.parent:this._inlineFiller=kc(n,t.parent,t.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=this.domConverter.mapViewToDom(e).childNodes,r=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:!1})),i=this._diffNodeLists(n,r),o=this._findReplaceActions(i,n,r);if(-1!==o.indexOf("replace")){const t={equal:0,insert:0,delete:0};for(const i of o)if("replace"===i){const i=t.equal+t.insert,o=t.equal+t.delete,a=e.getChild(i);!a||a.is("uiElement")||a.is("rawElement")||this._updateElementMappings(a,n[o]),wc(r[i]),t.equal++}else t[i]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?_l._createBefore(this.selection.getFirstPosition().parent):e}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&lc(t.parent)&&pc(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!pc(e))throw new Wn("view-renderer-filler-was-lost",this);fc(e)?e.parentNode.removeChild(e):e.data=e.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,n=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is("element"))return!1;if(!function(e){if("false"==e.getAttribute("contenteditable"))return!1;const t=e.findAncestor((e=>e.hasAttribute("contenteditable")));return!t||"true"==t.getAttribute("contenteditable")}(t))return!1;if(n===t.getFillerOffset())return!1;const r=e.nodeBefore,i=e.nodeAfter;return!(r instanceof ys||i instanceof ys)}_updateText(e,t){const n=this.domConverter.findCorrespondingDomText(e),r=this.domConverter.viewToDom(e,n.ownerDocument),i=n.data;let o=r.data;const a=t.inlineFillerPosition;if(a&&a.parent==e.parent&&a.offset==e.index&&(o=hc+o),i!=o){const e=gc(i,o);for(const t of e)"insert"===t.type?n.insertData(t.index,t.values.join("")):n.deleteData(t.index,t.howMany)}}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const n=Array.from(t.attributes).map((e=>e.name)),r=e.getAttributeKeys();for(const n of r)t.setAttribute(n,e.getAttribute(n));for(const r of n)e.hasAttribute(r)||t.removeAttribute(r)}_updateChildren(e,t){const n=this.domConverter.mapViewToDom(e);if(!n)return;const r=t.inlineFillerPosition,i=this.domConverter.mapViewToDom(e).childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,n.ownerDocument,{bind:!0,inlineFillerPosition:r}));r&&r.parent===e&&kc(n.ownerDocument,o,r.offset);const a=this._diffNodeLists(i,o);let s=0;const l=new Set;for(const e of a)"delete"===e?(l.add(i[s]),wc(i[s])):"equal"===e&&s++;s=0;for(const e of a)"insert"===e?(Ec(n,s,o[s]),s++):"equal"===e&&(this._markDescendantTextToSync(this.domConverter.domToView(o[s])),s++);for(const e of l)e.parentNode||this.domConverter.unbindDomElement(e)}_diffNodeLists(e,t){return yc(e=function(e,t){const n=Array.from(e);if(0==n.length||!t)return n;n[n.length-1]==t&&n.pop();return n}(e,this._fakeSelectionContainer),t,xc.bind(null,this.domConverter))}_findReplaceActions(e,t,n){if(-1===e.indexOf("insert")||-1===e.indexOf("delete"))return e;let r=[],i=[],o=[];const a={equal:0,insert:0,delete:0};for(const s of e)"insert"===s?o.push(n[a.equal+a.insert]):"delete"===s?i.push(t[a.equal+a.delete]):(r=r.concat(yc(i,o,Cc).map((e=>"equal"===e?"replace":e))),r.push("equal"),i=[],o=[]),a[s]++;return r.concat(yc(i,o,Cc).map((e=>"equal"===e?"replace":e)))}_markDescendantTextToSync(e){if(e)if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(e){const t=e.createElement("div");return t.className="ck-fake-selection-container",Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),t.textContent=" ",t}(t));const n=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(n,this.selection),!this._fakeSelectionNeedsUpdate(e))return;n.parentElement&&n.parentElement==e||e.appendChild(n),n.textContent=this.selection.fakeSelectionLabel||" ";const r=t.getSelection(),i=t.createRange();r.removeAllRanges(),i.selectNodeContents(n),r.addRange(i)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const n=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.collapse(n.parent,n.offset),t.extend(r.parent,r.offset),Pl.isGecko&&function(e,t){const n=e.parent;if(n.nodeType!=Node.ELEMENT_NODE||e.offset!=n.childNodes.length-1)return;const r=n.childNodes[e.offset];r&&"BR"==r.tagName&&t.addRange(t.getRangeAt(0))}(r,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,n=e.ownerDocument.getSelection();return!t||t.parentElement!==e||(n.anchorNode!==t&&!t.contains(n.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel)}_removeDomSelection(){for(const e of this.domDocuments){if(e.getSelection().rangeCount){const t=e.activeElement,n=this.domConverter.mapDomToView(t);t&&n&&e.getSelection().removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function kc(e,t,n){const r=t instanceof Array?t:t.childNodes,i=r[n];if(lc(i))return i.data=hc+i.data,i;{const i=e.createTextNode(hc);return Array.isArray(t)?r.splice(n,0,i):Ec(t,n,i),i}}function Cc(e,t){return Sc(e)&&Sc(t)&&!lc(e)&&!lc(t)&&e.nodeType!==Node.COMMENT_NODE&&t.nodeType!==Node.COMMENT_NODE&&e.tagName.toLowerCase()===t.tagName.toLowerCase()}function xc(e,t,n){return t===n||(lc(t)&&lc(n)?t.data===n.data:!(!e.isBlockFiller(t)||!e.isBlockFiller(n)))}qi(Tc,Ui);const Ac={window,document};function Rc(e){let t=0;for(;e.previousSibling;)e=e.previousSibling,t++;return t}function Mc(e){const t=[];for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}const Dc=uc(document),Oc=cc(document),Nc=dc(document);class Lc{constructor(e,t={}){this.document=e,this.blockFillerMode=t.blockFillerMode||"br",this.preElements=["pre"],this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption","td","th"],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Ss,this._encounteredRawContentDomNodes=new WeakSet}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new yl(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const t of e.childNodes)this.unbindDomElement(t)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}viewToDom(e,t,n={}){if(e.is("$text")){const n=this._processDataFromViewText(e);return t.createTextNode(n)}{if(this.mapViewToDom(e))return this.mapViewToDom(e);let r;if(e.is("documentFragment"))r=t.createDocumentFragment(),n.bind&&this.bindDocumentFragments(r,e);else{if(e.is("uiElement"))return r=e.render(t),n.bind&&this.bindElements(r,e),r;r=e.hasAttribute("xmlns")?t.createElementNS(e.getAttribute("xmlns"),e.name):t.createElement(e.name),e.is("rawElement")&&e.render(r),n.bind&&this.bindElements(r,e);for(const t of e.getAttributeKeys())r.setAttribute(t,e.getAttribute(t))}if(!1!==n.withChildren)for(const i of this.viewChildrenToDom(e,t,n))r.appendChild(i);return r}}*viewChildrenToDom(e,t,n={}){const r=e.getFillerOffset&&e.getFillerOffset();let i=0;for(const o of e.getChildren())r===i&&(yield this._getBlockFiller(t)),yield this.viewToDom(o,t,n),i++;r===i&&(yield this._getBlockFiller(t))}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),n=this.viewPositionToDom(e.end),r=document.createRange();return r.setStart(t.parent,t.offset),r.setEnd(n.parent,n.offset),r}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const n=this.findCorrespondingDomText(t);if(!n)return null;let r=e.offset;return pc(n)&&(r+=7),{parent:n,offset:r}}{let n,r,i;if(0===e.offset){if(n=this.mapViewToDom(t),!n)return null;i=n.childNodes[0]}else{const t=e.nodeBefore;if(r=t.is("$text")?this.findCorrespondingDomText(t):this.mapViewToDom(e.nodeBefore),!r)return null;n=r.parentNode,i=r.nextSibling}if(lc(i)&&pc(i))return{parent:i,offset:7};return{parent:n,offset:r?Rc(r)+1:0}}}domToView(e,t={}){if(this.isBlockFiller(e))return null;const n=this.getHostViewElement(e);if(n)return n;if(lc(e)){if(fc(e))return null;{const t=this._processDataFromDomText(e);return""===t?null:new ys(this.document,t)}}if(this.isComment(e))return null;{if(this.mapDomToView(e))return this.mapDomToView(e);let n;if(this.isDocumentFragment(e))n=new Ql(this.document),t.bind&&this.bindDocumentFragments(e,n);else{const r=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();n=new ll(this.document,r),t.bind&&this.bindElements(e,n);const i=e.attributes;for(let e=i.length-1;e>=0;e--)n._setAttribute(i[e].name,i[e].value);if(!1!==t.withChildren&&this._rawContentElementMatcher.match(n))return n._setCustomProperty("$rawContent",e.innerHTML),this._encounteredRawContentDomNodes.add(e),n}if(!1!==t.withChildren)for(const r of this.domChildrenToView(e,t))n._appendChild(r);return n}}*domChildrenToView(e,t={}){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n],i=this.domToView(r,t);null!==i&&(yield i)}}domSelectionToView(e){if(1===e.rangeCount){let t=e.getRangeAt(0).startContainer;lc(t)&&(t=t.parentNode);const n=this.fakeSelectionToView(t);if(n)return n}const t=this.isDomSelectionBackward(e),n=[];for(let t=0;t<e.rangeCount;t++){const r=e.getRangeAt(t),i=this.domRangeToView(r);i&&n.push(i)}return new yl(n,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),n=this.domPositionToView(e.endContainer,e.endOffset);return t&&n?new gl(t,n):null}domPositionToView(e,t){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Rc(e));const n=this.mapDomToView(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return _l._createBefore(n);if(lc(e)){if(fc(e))return this.domPositionToView(e.parentNode,Rc(e));const n=this.findCorrespondingViewText(e);let r=t;return n?(pc(e)&&(r-=7,r=r<0?0:r),new _l(n,r)):null}if(0===t){const t=this.mapDomToView(e);if(t)return new _l(t,0)}else{const n=e.childNodes[t-1],r=lc(n)?this.findCorrespondingViewText(n):this.mapDomToView(n);if(r&&r.parent)return new _l(r.parent,r.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(fc(e))return null;const t=this.getHostViewElement(e);if(t)return t;const n=e.previousSibling;if(n){if(!this.isElement(n))return null;const e=this.mapDomToView(n);if(e){return e.nextSibling instanceof ys?e.nextSibling:null}}else{const t=this.mapDomToView(e.parentNode);if(t){const e=t.getChild(0);return e instanceof ys?e:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:e,scrollY:n}=Ac.window,r=[];Pc(t,(e=>{const{scrollLeft:t,scrollTop:n}=e;r.push([t,n])})),t.focus(),Pc(t,(e=>{const[t,n]=r.shift();e.scrollLeft=t,e.scrollTop=n})),Ac.window.scrollTo(e,n)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(e){return e&&e.nodeType==Node.COMMENT_NODE}isBlockFiller(e){return"br"==this.blockFillerMode?e.isEqualNode(Dc):!("BR"!==e.tagName||!Fc(e,this.blockElements)||1!==e.parentNode.childNodes.length)||(e.isEqualNode(Nc)||function(e,t){return e.isEqualNode(Oc)&&Fc(e,t)&&1===e.parentNode.childNodes.length}(e,this.blockElements))}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const n=t.collapsed;return t.detach(),n}getHostViewElement(e){const t=Mc(e);for(t.pop();t.length;){const e=t.pop(),n=this._domToViewMapping.get(e);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}_getBlockFiller(e){switch(this.blockFillerMode){case"nbsp":return cc(e);case"markedNbsp":return dc(e);case"br":return uc(e)}}_isDomSelectionPositionCorrect(e,t){if(lc(e)&&pc(e)&&t<7)return!1;if(this.isElement(e)&&pc(e.childNodes[t]))return!1;const n=this.mapDomToView(e);return!n||!n.is("uiElement")&&!n.is("rawElement")}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some((e=>this.preElements.includes(e.name))))return t;if(" "==t.charAt(0)){const n=this._getTouchingViewTextNode(e,!1);!(n&&this._nodeEndsWithSpace(n))&&n||(t=" "+t.substr(1))}if(" "==t.charAt(t.length-1)){const n=this._getTouchingViewTextNode(e,!0);" "!=t.charAt(t.length-2)&&n&&" "!=n.data.charAt(0)||(t=t.substr(0,t.length-1)+" ")}return t.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(e.getAncestors().some((e=>this.preElements.includes(e.name))))return!1;const t=this._processDataFromViewText(e);return" "==t.charAt(t.length-1)}_processDataFromDomText(e){let t=e.data;if(Ic(e,this.preElements))return mc(e);t=t.replace(/[ \n\t\r]{1,}/g," ");const n=this._getTouchingInlineDomNode(e,!1),r=this._getTouchingInlineDomNode(e,!0),i=this._checkShouldLeftTrimDomText(e,n),o=this._checkShouldRightTrimDomText(e,r);return i&&(t=t.replace(/^ /,"")),o&&(t=t.replace(/ $/,"")),t=mc(new Text(t)),t=t.replace(/ \u00A0/g,"  "),(/( |\u00A0)\u00A0$/.test(t)||!r||r.data&&" "==r.data.charAt(0))&&(t=t.replace(/\u00A0$/," ")),i&&(t=t.replace(/^\u00A0/," ")),t}_checkShouldLeftTrimDomText(e,t){return!t||(!!rs(t)||!this._encounteredRawContentDomNodes.has(e.previousSibling)&&/[^\S\u00A0]/.test(t.data.charAt(t.data.length-1)))}_checkShouldRightTrimDomText(e,t){return!t&&!pc(e)}_getTouchingViewTextNode(e,t){const n=new ml({startPosition:t?_l._createAfter(e):_l._createBefore(e),direction:t?"forward":"backward"});for(const e of n){if(e.item.is("containerElement"))return null;if(e.item.is("element","br"))return null;if(e.item.is("$textProxy"))return e.item}return null}_getTouchingInlineDomNode(e,t){if(!e.parentNode)return null;const n=t?"nextNode":"previousNode",r=e.ownerDocument,i=Mc(e)[0],o=r.createTreeWalker(i,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:e=>lc(e)||"BR"==e.tagName?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});o.currentNode=e;const a=o[n]();if(null!==a){const t=function(e,t){const n=Mc(e),r=Mc(t);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}(e,a);if(t&&!Ic(e,this.blockElements,t)&&!Ic(a,this.blockElements,t))return a}return null}}function Ic(e,t,n){let r=Mc(e);return n&&(r=r.slice(r.indexOf(n)+1)),r.some((e=>e.tagName&&t.includes(e.tagName.toLowerCase())))}function Pc(e,t){for(;e&&e!=Ac.document;)t(e),e=e.parentNode}function Fc(e,t){const n=e.parentNode;return n&&n.tagName&&t.includes(n.tagName.toLowerCase())}function Bc(e){const t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t}const Yc=Li({},er,{listenTo(e,...t){if(Sc(e)||Bc(e)){const n=this._getProxyEmitter(e)||new Hc(e);n.attach(...t),e=n}er.listenTo.call(this,e,...t)},stopListening(e,t,n){if(Sc(e)||Bc(e)){const t=this._getProxyEmitter(e);if(!t)return;e=t}er.stopListening.call(this,e,t,n),e instanceof Hc&&e.detach(t)},_getProxyEmitter(e){return t=this,n=Uc(e),t[Zn]&&t[Zn][n]?t[Zn][n].emitter:null;var t,n}});class Hc{constructor(e){tr(this,Uc(e)),this._domNode=e}}function Uc(e){return e["data-ck-expando"]||(e["data-ck-expando"]=Vn())}Li(Hc.prototype,er,{attach(e,t,n={}){if(this._domListeners&&this._domListeners[e])return;const r={capture:!!n.useCapture,passive:!!n.usePassive},i=this._createDomListener(e,r);this._domNode.addEventListener(e,i,r),this._domListeners||(this._domListeners={}),this._domListeners[e]=i},detach(e){let t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener(e,t){const n=t=>{this.fire(e,t)};return n.removeListener=()=>{this._domNode.removeEventListener(e,n,t),delete this._domListeners[e]},n}});class zc{constructor(e){this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&3===e.nodeType&&(e=e.parentNode),!(!e||1!==e.nodeType)&&e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}qi(zc,Yc);const jc=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const Vc=function(e){return this.__data__.has(e)};function Gc(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yo;++t<n;)this.add(e[t])}Gc.prototype.add=Gc.prototype.push=jc,Gc.prototype.has=Vc;const Wc=Gc;const qc=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const $c=function(e,t){return e.has(t)};const Kc=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,p=2&n?new Wc:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var f=e[u],m=t[u];if(r)var _=a?r(m,f,u,t,e,o):r(f,m,u,e,t,o);if(void 0!==_){if(_)continue;h=!1;break}if(p){if(!qc(t,(function(e,t){if(!$c(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h};const Qc=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const Xc=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var Zc=hr?hr.prototype:void 0,Jc=Zc?Zc.valueOf:void 0;const ed=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Oa(e),new Oa(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Yr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Qc;case"[object Set]":var l=1&r;if(s||(s=Xc),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var d=Kc(s(e),s(t),r,i,o,a);return a.delete(e),d;case"[object Symbol]":if(Jc)return Jc.call(e)==Jc.call(t)}return!1};var td=Object.prototype.hasOwnProperty;const nd=function(e,t,n,r,i,o){var a=1&n,s=ha(e),l=s.length;if(l!=ha(t).length&&!a)return!1;for(var c=l;c--;){var d=s[c];if(!(a?d in t:td.call(t,d)))return!1}var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++c<l;){var m=e[d=s[c]],_=t[d];if(r)var g=a?r(_,m,d,t,e,o):r(m,_,d,e,t,o);if(!(void 0===g?m===_||i(m,_,n,r,o):g)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p};var rd="[object Arguments]",id="[object Array]",od="[object Object]",ad=Object.prototype.hasOwnProperty;const sd=function(e,t,n,r,i,o){var a=ui(e),s=ui(t),l=a?id:Ra(e),c=s?id:Ra(t),d=(l=l==rd?od:l)==od,u=(c=c==rd?od:c)==od,h=l==c;if(h&&_i(e)){if(!_i(t))return!1;a=!0,d=!1}if(h&&!d)return o||(o=new zo),a||ki(e)?Kc(e,t,n,r,i,o):ed(e,t,l,n,r,i,o);if(!(1&n)){var p=d&&ad.call(e,"__wrapped__"),f=u&&ad.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,_=f?t.value():t;return o||(o=new zo),i(m,_,n,r,o)}}return!!h&&(o||(o=new zo),nd(e,t,n,r,i,o))};const ld=function e(t,n,r,i,o){return t===n||(null==t||null==n||!oi(t)&&!oi(n)?t!=t&&n!=n:sd(t,n,r,i,e,o))};const cd=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?ld(e,t,void 0,n):!!r};class dd extends zc{constructor(e){super(e),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(0===e.length)return;const t=this.domConverter,n=new Map,r=new Set;for(const n of e)if("childList"===n.type){const e=t.mapDomToView(n.target);if(e&&(e.is("uiElement")||e.is("rawElement")))continue;e&&!this._isBogusBrMutation(n)&&r.add(e)}for(const i of e){const e=t.mapDomToView(i.target);if((!e||!e.is("uiElement")&&!e.is("rawElement"))&&"characterData"===i.type){const e=t.findCorrespondingViewText(i.target);e&&!r.has(e.parent)?n.set(e,{type:"text",oldText:e.data,newText:mc(i.target),node:e}):!e&&pc(i.target)&&r.add(t.mapDomToView(i.target.parentNode))}}const i=[];for(const e of n.values())this.renderer.markToSync("text",e.node),i.push(e);for(const e of r){const n=t.mapViewToDom(e),r=Array.from(e.getChildren()),o=Array.from(t.domChildrenToView(n,{withChildren:!1}));cd(r,o,s)||(this.renderer.markToSync("children",e),i.push({type:"children",oldChildren:r,newChildren:o,node:e}))}const o=e[0].target.ownerDocument.getSelection();let a=null;if(o&&o.anchorNode){const e=t.domPositionToView(o.anchorNode,o.anchorOffset),n=t.domPositionToView(o.focusNode,o.focusOffset);e&&n&&(a=new yl(e),a.setFocus(n))}function s(e,t){if(!Array.isArray(e))return e===t||!(!e.is("$text")||!t.is("$text"))&&e.data===t.data}i.length&&(this.document.fire("mutations",i,a),this.view.forceRender())}_isBogusBrMutation(e){let t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}}class ud{constructor(e,t,n){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Li(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class hd extends zc{constructor(e){super(e),this.useCapture=!1}observe(e){("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach((t=>{this.listenTo(e,t,((e,t)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(t.target)&&this.onDomEvent(t)}),{useCapture:this.useCapture})}))}fire(e,t,n){this.isEnabled&&this.document.fire(e,new ud(this.view,t,n))}}class pd extends hd{constructor(e){super(e),this.domEventType=["keydown","keyup"]}onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Ul(this)}})}}const fd=function(){return ur.Date.now()};var md=/\s/;const _d=function(e){for(var t=e.length;t--&&md.test(e.charAt(t)););return t};var gd=/^\s+/;const bd=function(e){return e?e.slice(0,_d(e)+1).replace(gd,""):e};var vd=/^[-+]0x[0-9a-f]+$/i,yd=/^0b[01]+$/i,Ed=/^0o[0-7]+$/i,wd=parseInt;const Sd=function(e){if("number"==typeof e)return e;if(ks(e))return NaN;if(lr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=lr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=bd(e);var n=yd.test(e);return n||Ed.test(e)?wd(e.slice(2),n?2:8):vd.test(e)?NaN:+e};var Td=Math.max,kd=Math.min;const Cd=function(e,t,n){var r,i,o,a,s,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function f(e){return c=e,s=setTimeout(_,t),d?p(e):a}function m(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=o}function _(){var e=fd();if(m(e))return g(e);s=setTimeout(_,function(e){var n=t-(e-l);return u?kd(n,o-(e-c)):n}(e))}function g(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function b(){var e=fd(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return f(l);if(u)return clearTimeout(s),s=setTimeout(_,t),p(l)}return void 0===s&&(s=setTimeout(_,t)),a}return t=Sd(t)||0,lr(n)&&(d=!!n.leading,o=(u="maxWait"in n)?Td(Sd(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},b.flush=function(){return void 0===s?a:g(fd())},b};class xd extends zc{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Cd((e=>this.document.fire("selectionChangeDone",e)),200)}observe(){const e=this.document;e.on("arrowKey",((t,n)=>{e.selection.isFake&&this.isEnabled&&n.preventDefault()}),{context:"$capture"}),e.on("arrowKey",((t,n)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(n.keyCode)}),{priority:"lowest"})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,n=new yl(t.getRanges(),{backward:t.isBackward,fake:!1});e!=Yl.arrowleft&&e!=Yl.arrowup||n.setTo(n.getFirstPosition()),e!=Yl.arrowright&&e!=Yl.arrowdown||n.setTo(n.getLastPosition());const r={oldSelection:t,newSelection:n,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}class Ad extends zc{constructor(e){super(e),this.mutationObserver=e.getObserver(dd),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Cd((e=>this.document.fire("selectionChangeDone",e)),200),this._clearInfiniteLoopInterval=setInterval((()=>this._clearInfiniteLoop()),1e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument;this._documents.has(t)||(this.listenTo(t,"selectionchange",((e,n)=>{this._handleSelectionChange(n,t)})),this._documents.add(t))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(e,t){if(!this.isEnabled)return;const n=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(n.anchorNode))return;this.mutationObserver.flush();const r=this.domConverter.domSelectionToView(n);if(0!=r.rangeCount){if(this.view.hasDomSelection=!0,!(this.selection.isEqual(r)&&this.domConverter.isDomSelectionCorrect(n)||++this._loopbackCounter>60))if(this.selection.isSimilar(r))this.view.forceRender();else{const e={oldSelection:this.selection,newSelection:r,domSelection:n};this.document.fire("selectionChange",e),this._fireSelectionChangeDoneDebounced(e)}}else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class Rd extends hd{constructor(e){super(e),this.domEventType=["focus","blur"],this.useCapture=!0;const t=this.document;t.on("focus",(()=>{t.isFocused=!0,this._renderTimeoutId=setTimeout((()=>e.forceRender()),50)})),t.on("blur",((n,r)=>{const i=t.selection.editableElement;null!==i&&i!==r.target||(t.isFocused=!1,e.forceRender())}))}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Md extends hd{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const t=this.document;t.on("compositionstart",(()=>{t.isComposing=!0})),t.on("compositionend",(()=>{t.isComposing=!1}))}onDomEvent(e){this.fire(e.type,e)}}class Dd extends hd{constructor(e){super(e),this.domEventType=["beforeinput"]}onDomEvent(e){this.fire(e.type,e)}}class Od{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach((({element:e,newElement:t})=>{e.style.display="",t&&t.remove()})),this._replacedElements=[]}}function Nd(e){return e instanceof HTMLTextAreaElement?e.value:e.innerHTML}function Ld(e){return"[object Range]"==Object.prototype.toString.apply(e)}function Id(e){const t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}const Pd=["top","right","bottom","left","width","height"];class Fd{constructor(e){const t=Ld(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),rs(e)||t)if(t){const t=Fd.getDomRangeRects(e);Bd(this,Fd.getBoundingRect(t))}else Bd(this,e.getBoundingClientRect());else if(Bc(e)){const{innerWidth:t,innerHeight:n}=e;Bd(this,{top:0,right:t,bottom:n,left:0,width:t,height:n})}else Bd(this,e)}clone(){return new Fd(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new Fd(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(!Yd(e)){let n=e.parentNode||e.commonAncestorContainer;for(;n&&!Yd(n);){const e=new Fd(n),r=t.getIntersection(e);if(!r)return null;r.getArea()<t.getArea()&&(t=r),n=n.parentNode}}return t}isEqual(e){for(const t of Pd)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!(!t||!t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,n,r;if(Bc(e))t=e.innerWidth-e.document.documentElement.clientWidth,n=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{const i=Id(this._source);t=e.offsetWidth-e.clientWidth-i.left-i.right,n=e.offsetHeight-e.clientHeight-i.top-i.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=i.left,this.top+=i.top,this.right-=i.right,this.bottom-=i.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,"ltr"===r?this.right-=t:this.left+=t,this.height-=n,this.bottom-=n,this}static getDomRangeRects(e){const t=[],n=Array.from(e.getClientRects());if(n.length)for(const e of n)t.push(new Fd(e));else{let n=e.startContainer;lc(n)&&(n=n.parentNode);const r=new Fd(n.getBoundingClientRect());r.right=r.left,r.width=0,t.push(r)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let n=0;for(const r of e)n++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return 0==n?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Fd(t))}}function Bd(e,t){for(const n of Pd)e[n]=t[n]}function Yd(e){return!!rs(e)&&e===e.ownerDocument.body}class Hd{constructor(e,t){Hd._observerInstance||Hd._createObserver(),this._element=e,this._callback=t,Hd._addElementCallback(e,t),Hd._observerInstance.observe(e)}destroy(){Hd._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Hd._elementCallbacks||(Hd._elementCallbacks=new Map);let n=Hd._elementCallbacks.get(e);n||(n=new Set,Hd._elementCallbacks.set(e,n)),n.add(t)}static _deleteElementCallback(e,t){const n=Hd._getElementCallbacks(e);n&&(n.delete(t),n.size||(Hd._elementCallbacks.delete(e),Hd._observerInstance.unobserve(e))),Hd._elementCallbacks&&!Hd._elementCallbacks.size&&(Hd._observerInstance=null,Hd._elementCallbacks=null)}static _getElementCallbacks(e){return Hd._elementCallbacks?Hd._elementCallbacks.get(e):null}static _createObserver(){let e;e="function"==typeof Ac.window.ResizeObserver?Ac.window.ResizeObserver:Ud,Hd._observerInstance=new e((e=>{for(const t of e){const e=Hd._getElementCallbacks(t.target);if(e)for(const n of e)n(t)}}))}}Hd._observerInstance=null,Hd._elementCallbacks=null;class Ud{constructor(e){this._callback=e,this._elements=new Set,this._previousRects=new Map,this._periodicCheckTimeout=null}observe(e){this._elements.add(e),this._checkElementRectsAndExecuteCallback(),1===this._elements.size&&this._startPeriodicCheck()}unobserve(e){this._elements.delete(e),this._previousRects.delete(e),this._elements.size||this._stopPeriodicCheck()}_startPeriodicCheck(){const e=()=>{this._checkElementRectsAndExecuteCallback(),this._periodicCheckTimeout=setTimeout(e,100)};this.listenTo(Ac.window,"resize",(()=>{this._checkElementRectsAndExecuteCallback()})),this._periodicCheckTimeout=setTimeout(e,100)}_stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout),this.stopListening(),this._previousRects.clear()}_checkElementRectsAndExecuteCallback(){const e=[];for(const t of this._elements)this._hasRectChanged(t)&&e.push({target:t,contentRect:this._previousRects.get(t)});e.length&&this._callback(e)}_hasRectChanged(e){if(!e.ownerDocument.body.contains(e))return!1;const t=new Fd(e),n=this._previousRects.get(e),r=!n||!n.isEqual(t);return this._previousRects.set(e,t),r}}function zd(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}function jd(e){return t=>t+e}function Vd(e){const t=e.next();return t.done?null:t.value}qi(Ud,Yc);class Gd{constructor(){this.set("isFocused",!1),this.set("focusedElement",null),this._elements=new Set,this._nextEventLoopTimeout=null}add(e){if(this._elements.has(e))throw new Wn("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",(()=>this._focus(e)),{useCapture:!0}),this.listenTo(e,"blur",(()=>this._blur()),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout((()=>{this.focusedElement=null,this.isFocused=!1}),0)}}qi(Gd,Yc),qi(Gd,Ui);class Wd{constructor(){this._listener=Object.create(Yc)}listenTo(e){this._listener.listenTo(e,"keydown",((e,t)=>{this._listener.fire("_keydown:"+Ul(t),t)}))}set(e,t,n={}){const r=zl(e),i=n.priority;this._listener.listenTo(this._listener,"_keydown:"+r,((e,n)=>{t(n,(()=>{n.preventDefault(),n.stopPropagation(),e.stop()})),e.return=!0}),{priority:i})}press(e){return!!this._listener.fire("_keydown:"+Ul(e),e)}destroy(){this._listener.stopListening()}}class qd extends zc{constructor(e){super(e),this.document.on("keydown",((e,t)=>{if(this.isEnabled&&((n=t.keyCode)==Yl.arrowright||n==Yl.arrowleft||n==Yl.arrowup||n==Yl.arrowdown)){const n=new wl(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(n,t),n.stop.called&&e.stop()}var n}))}observe(){}}function $d({target:e,viewportOffset:t=0}){const n=tu(e);let r=n,i=null;for(;r;){let o;o=nu(r==n?e:i),Qd(o,(()=>ru(e,r)));const a=ru(e,r);if(Kd(r,a,t),r.parent!=r){if(i=r.frameElement,r=r.parent,!i)return}else r=null}}function Kd(e,t,n){const r=t.clone().moveBy(0,n),i=t.clone().moveBy(0,-n),o=new Fd(e).excludeScrollbarsAndBorders();if(![i,r].every((e=>o.contains(e)))){let{scrollX:a,scrollY:s}=e;Zd(i,o)?s-=o.top-t.top+n:Xd(r,o)&&(s+=t.bottom-o.bottom+n),Jd(t,o)?a-=o.left-t.left+n:eu(t,o)&&(a+=t.right-o.right+n),e.scrollTo(a,s)}}function Qd(e,t){const n=tu(e);let r,i;for(;e!=n.document.body;)i=t(),r=new Fd(e).excludeScrollbarsAndBorders(),r.contains(i)||(Zd(i,r)?e.scrollTop-=r.top-i.top:Xd(i,r)&&(e.scrollTop+=i.bottom-r.bottom),Jd(i,r)?e.scrollLeft-=r.left-i.left:eu(i,r)&&(e.scrollLeft+=i.right-r.right)),e=e.parentNode}function Xd(e,t){return e.bottom>t.bottom}function Zd(e,t){return e.top<t.top}function Jd(e,t){return e.left<t.left}function eu(e,t){return e.right>t.right}function tu(e){return Ld(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function nu(e){if(Ld(e)){let t=e.commonAncestorContainer;return lc(t)&&(t=t.parentNode),t}return e.parentNode}function ru(e,t){const n=tu(e),r=new Fd(e);if(n===t)return r;{let e=n;for(;e!=t;){const t=e.frameElement,n=new Fd(t).excludeScrollbarsAndBorders();r.moveBy(n.left,n.top),e=e.parent}}return r}Object.assign({},{scrollViewportToShowTarget:$d,scrollAncestorsToShowTarget:function(e){Qd(nu(e),(()=>new Fd(e)))}});class iu{constructor(e){this.document=new Rl(e),this.domConverter=new Lc(this.document),this.domRoots=new Map,this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Tc(this.domConverter,this.document.selection),this._renderer.bind("isFocused").to(this.document),this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this._writer=new Xl(this.document),this.addObserver(dd),this.addObserver(Ad),this.addObserver(Rd),this.addObserver(pd),this.addObserver(xd),this.addObserver(Md),this.addObserver(qd),Pl.isAndroid&&this.addObserver(Dd),this.document.on("arrowKey",_c,{priority:"low"}),Wl(this),this.on("render",(()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1})),this.listenTo(this.document.selection,"change",(()=>{this._hasChangedSinceTheLastRendering=!0}))}attachDomRoot(e,t="main"){const n=this.document.getRoot(t);n._name=e.tagName.toLowerCase();const r={};for(const{name:t,value:i}of Array.from(e.attributes))r[t]=i,"class"===t?this._writer.addClass(i.split(" "),n):this._writer.setAttribute(t,i,n);this._initialDomRootAttributes.set(e,r);const i=()=>{this._writer.setAttribute("contenteditable",!n.isReadOnly,n),n.isReadOnly?this._writer.addClass("ck-read-only",n):this._writer.removeClass("ck-read-only",n)};i(),this.domRoots.set(t,e),this.domConverter.bindElements(e,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(e.ownerDocument),n.on("change:children",((e,t)=>this._renderer.markToSync("children",t))),n.on("change:attributes",((e,t)=>this._renderer.markToSync("attributes",t))),n.on("change:text",((e,t)=>this._renderer.markToSync("text",t))),n.on("change:isReadOnly",(()=>this.change(i))),n.on("change",(()=>{this._hasChangedSinceTheLastRendering=!0}));for(const n of this._observers.values())n.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach((({name:e})=>t.removeAttribute(e)));const n=this._initialDomRootAttributes.get(t);for(const e in n)t.setAttribute(e,n[e]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[e,n]of this.domRoots)t.observe(n,e);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){const e=this.document.selection.getFirstRange();e&&$d({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new Wn("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(e){Wn.rethrowUnexpectedError(e,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.change((()=>{}))}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return _l._createAt(e,t)}createPositionAfter(e){return _l._createAfter(e)}createPositionBefore(e){return _l._createBefore(e)}createRange(e,t){return new gl(e,t)}createRangeOn(e){return gl._createOn(e)}createRangeIn(e){return gl._createIn(e)}createSelection(e,t,n){return new yl(e,t,n)}_disableRendering(e){this._renderingDisabled=e,0==e&&this.change((()=>{}))}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}qi(iu,Ui);class ou{constructor(e){this.parent=null,this._attrs=ws(e)}get index(){let e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new Wn("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new Wn("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}getCommonAncestor(e,t={}){const n=this.getAncestors(t),r=e.getAncestors(t);let i=0;for(;n[i]==r[i]&&n[i];)i++;return 0===i?null:n[i-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;const t=this.getPath(),n=e.getPath(),r=gs(t,n);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<n[r]}}isAfter(e){return this!=e&&(this.root===e.root&&!this.isBefore(e))}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce(((e,t)=>(e[t[0]]=t[1],e)),{})),e}is(e){return"node"===e||"model:node"===e}_clone(){return new ou(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=ws(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}class au extends ou{constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}is(e){return"$text"===e||"model:$text"===e||"text"===e||"model:text"===e||"node"===e||"model:node"===e}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new au(this.data,this.getAttributes())}static fromJSON(e){return new au(e.data,e.attributes)}}class su{constructor(e,t,n){if(this.textNode=e,t<0||t>e.offsetSize)throw new Wn("model-textproxy-wrong-offsetintext",this);if(n<0||t+n>e.offsetSize)throw new Wn("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+n),this.offsetInText=t}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}is(e){return"$textProxy"===e||"model:$textProxy"===e||"textProxy"===e||"model:textProxy"===e}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];let n=e.includeSelf?this:this.parent;for(;n;)t[e.parentFirst?"push":"unshift"](n),n=n.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class lu{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce(((e,t)=>e+t.offsetSize),0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return-1==t?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce(((e,t)=>e+t.offsetSize),0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new Wn("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const n of this._nodes){if(e>=t&&e<t+n.offsetSize)return this.getNodeIndex(n);t+=n.offsetSize}if(t!=e)throw new Wn("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const e of t)if(!(e instanceof ou))throw new Wn("model-nodelist-insertnodes-not-node",this);this._nodes.splice(e,0,...t)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map((e=>e.toJSON()))}}class cu extends ou{constructor(e,t,n){super(t),this.name=e,this._children=new lu,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(e,t=null){return t?t===this.name&&("element"===e||"model:element"===e):"element"===e||"model:element"===e||"node"===e||"model:node"===e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}findAncestor(e,t={includeSelf:!1}){let n=t.includeSelf?this:this.parent;for(;n;){if(n.name===e)return n;n=n.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map((e=>e._clone(!0))):null;return new cu(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=function(e){if("string"==typeof e)return[new au(e)];ss(e)||(e=[e]);return Array.from(e).map((e=>"string"==typeof e?new au(e):e instanceof su?new au(e.data,e.getAttributes()):e))}(t);for(const e of n)null!==e.parent&&e._remove(),e.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const e of n)e.parent=null;return n}static fromJSON(e){let t=null;if(e.children){t=[];for(const n of e.children)n.name?t.push(cu.fromJSON(n)):t.push(au.fromJSON(n))}return new cu(e.name,e.attributes,t)}}class du{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new Wn("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if("forward"!=t&&"backward"!=t)throw new Wn("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this.position=e.startPosition.clone():this.position=hu._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,n,r,i;do{r=this.position,i=this._visitedParent,({done:t,value:n}=this.next())}while(!t&&e(n));t||(this.position=r,this._visitedParent=i)}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(null===n.parent&&t.offset===n.maxOffset)return{done:!0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};const r=t.parent,i=pu(t,r),o=i||fu(t,r,i);if(o instanceof cu)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=o),this.position=t,uu("elementStart",o,e,t,1);if(o instanceof au){let r;if(this.singleCharacters)r=1;else{let e=o.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<e&&(e=this.boundaries.end.offset),r=e-t.offset}const i=t.offset-o.startOffset,a=new su(o,i,r);return t.offset+=r,this.position=t,uu("text",a,e,t,r)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():uu("elementEnd",n,e,t)}_previous(){const e=this.position,t=this.position.clone(),n=this._visitedParent;if(null===n.parent&&0===t.offset)return{done:!0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};const r=t.parent,i=pu(t,r),o=i||mu(t,r,i);if(o instanceof cu)return t.offset--,this.shallow?(this.position=t,uu("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this.position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():uu("elementEnd",o,e,t));if(o instanceof au){let r;if(this.singleCharacters)r=1;else{let e=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>e&&(e=this.boundaries.start.offset),r=t.offset-e}const i=t.offset-o.startOffset,a=new su(o,i-r,r);return t.offset-=r,this.position=t,uu("text",a,e,t,r)}return t.path.pop(),this.position=t,this._visitedParent=n.parent,uu("elementStart",n,e,t,1)}}function uu(e,t,n,r,i){return{done:!1,value:{type:e,item:t,previousPosition:n,nextPosition:r,length:i}}}class hu{constructor(e,t,n="toNone"){if(!e.is("element")&&!e.is("documentFragment"))throw new Wn("model-position-root-invalid",e);if(!(t instanceof Array)||0===t.length)throw new Wn("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChild(e.offsetToIndex(this.path[t])),!e)throw new Wn("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new Wn("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return pu(this,this.parent)}get nodeAfter(){const e=this.parent;return fu(this,e,pu(this,e))}get nodeBefore(){const e=this.parent;return mu(this,e,pu(this,e))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=gs(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const n=new du(t);return n.skip(e),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=gs(this.path,e.path),n="string"==typeof t?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,n)}getCommonAncestor(e){const t=this.getAncestors(),n=e.getAncestors();let r=0;for(;t[r]==n[r]&&t[r];)r++;return 0===r?null:t[r-1]}getShiftedBy(e){const t=this.clone(),n=t.offset+e;return t.offset=n<0?0:n,t}isAfter(e){return"after"==this.compareWith(e)}isBefore(e){return"before"==this.compareWith(e)}isEqual(e){return"same"==this.compareWith(e)}isTouching(e){let t=null,n=null;switch(this.compareWith(e)){case"same":return!0;case"before":t=hu._createAt(this),n=hu._createAt(e);break;case"after":t=hu._createAt(e),n=hu._createAt(this);break;default:return!1}let r=t.parent;for(;t.path.length+n.path.length;){if(t.isEqual(n))return!0;if(t.path.length>n.path.length){if(t.offset!==r.maxOffset)return!1;t.path=t.path.slice(0,-1),r=r.parent,t.offset++}else{if(0!==n.offset)return!1;n.path=n.path.slice(0,-1)}}}is(e){return"position"===e||"model:position"===e}hasSameParentAs(e){if(this.root!==e.root)return!1;return"same"==gs(this.getParentPath(),e.getParentPath())}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=hu._createAt(this)}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange;let n;return t.containsPosition(this)||t.start.isEqual(this)?(n=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(n=n._getTransformedByDeletion(e.deletionPosition,1))):n=this.isEqual(e.deletionPosition)?hu._createAt(e.deletionPosition):this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),n}_getTransformedByDeletion(e,t){const n=hu._createAt(this);if(this.root!=e.root)return n;if("same"==gs(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;n.offset-=t}}else if("prefix"==gs(e.getParentPath(),this.getParentPath())){const r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;n.path[r]-=t}}return n}_getTransformedByInsertion(e,t){const n=hu._createAt(this);if(this.root!=e.root)return n;if("same"==gs(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=t);else if("prefix"==gs(e.getParentPath(),this.getParentPath())){const r=e.path.length-1;e.offset<=this.path[r]&&(n.path[r]+=t)}return n}_getTransformedByMove(e,t,n){if(t=t._getTransformedByDeletion(e,n),e.isEqual(t))return hu._createAt(this);const r=this._getTransformedByDeletion(e,n);return null===r||e.isEqual(this)&&"toNext"==this.stickiness||e.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(e,t):r._getTransformedByInsertion(t,n)}_getCombined(e,t){const n=e.path.length-1,r=hu._createAt(t);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[n]-e.offset,r.path=[...r.path,...this.path.slice(n+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,n="toNone"){if(e instanceof hu)return new hu(e.root,e.path,e.stickiness);{const r=e;if("end"==t)t=r.maxOffset;else{if("before"==t)return this._createBefore(r,n);if("after"==t)return this._createAfter(r,n);if(0!==t&&!t)throw new Wn("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new Wn("model-position-parent-incorrect",[this,e]);const i=r.getPath();return i.push(t),new this(r.root,i,n)}}static _createAfter(e,t){if(!e.parent)throw new Wn("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new Wn("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if("$graveyard"===e.root){const n=new hu(t.graveyard,e.path);return n.stickiness=e.stickiness,n}if(!t.getRoot(e.root))throw new Wn("model-position-fromjson-no-root",t,{rootName:e.root});return new hu(t.getRoot(e.root),e.path,e.stickiness)}}function pu(e,t){const n=t.getChild(t.offsetToIndex(e.offset));return n&&n.is("$text")&&n.startOffset<e.offset?n:null}function fu(e,t,n){return null!==n?null:t.getChild(t.offsetToIndex(e.offset))}function mu(e,t,n){return null!==n?null:t.getChild(t.offsetToIndex(e.offset)-1)}class _u{constructor(e,t=null){this.start=hu._createAt(e),this.end=t?hu._createAt(t):hu._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new du({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==gs(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const n=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return n&&r}containsItem(e){const t=hu._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}is(e){return"range"===e||"model:range"===e}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new _u(this.start,e.start)),this.containsPosition(e.end)&&t.push(new _u(e.end,this.end))):t.push(new _u(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,n=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(n=e.end),new _u(t,n)}return null}getJoined(e,t=!1){let n=this.isIntersecting(e);if(n||(n=this.start.isBefore(e.start)?t?this.end.isTouching(e.start):this.end.isEqual(e.start):t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!n)return null;let r=this.start,i=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(i)&&(i=e.end),new _u(r,i)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,n=hu._createAt(this.start);let r=n.parent;for(;n.path.length>t+1;){const t=r.maxOffset-n.offset;0!==t&&e.push(new _u(n,n.getShiftedBy(t))),n.path=n.path.slice(0,-1),n.offset++,r=r.parent}for(;n.path.length<=this.end.path.length;){const t=this.end.path[n.path.length-1],r=t-n.offset;0!==r&&e.push(new _u(n,n.getShiftedBy(r))),n.offset=t,n.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new du(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new du(e);for(const e of t)yield e.item}*getPositions(e={}){e.boundaries=this;const t=new du(e);yield t.position;for(const e of t)yield e.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new _u(this.start,this.end)]}getTransformedByOperations(e){const t=[new _u(this.start,this.end)];for(const n of e)for(let e=0;e<t.length;e++){const r=t[e].getTransformedByOperation(n);t.splice(e,1,...r),e+=r.length-1}for(let e=0;e<t.length;e++){const n=t[e];for(let r=e+1;r<t.length;r++){const e=t[r];(n.containsRange(e)||e.containsRange(n)||n.isEqual(e))&&t.splice(r,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const n=e.sourcePosition,r=e.howMany,i=e.targetPosition;return this._getTransformedByMove(n,i,r,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let n=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(n=this.end.getShiftedBy(1)),t.root!=n.root&&(n=this.end.getShiftedBy(-1)),new _u(t,n)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new _u(this.start);let t=this.start._getTransformedByMergeOperation(e),n=this.end._getTransformedByMergeOperation(e);return t.root!=n.root&&(n=this.end.getShiftedBy(-1)),t.isAfter(n)?(e.sourcePosition.isBefore(e.targetPosition)?(t=hu._createAt(n),t.offset=0):(e.deletionPosition.isEqual(t)||(n=e.deletionPosition),t=e.targetPosition),new _u(t,n)):new _u(t,n)}_getTransformedByInsertion(e,t,n=!1){if(n&&this.containsPosition(e))return[new _u(this.start,e),new _u(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const n=new _u(this.start,this.end);return n.start=n.start._getTransformedByInsertion(e,t),n.end=n.end._getTransformedByInsertion(e,t),[n]}}_getTransformedByMove(e,t,n,r=!1){if(this.isCollapsed){const r=this.start._getTransformedByMove(e,t,n);return[new _u(r)]}const i=_u._createFromPositionAndShift(e,n),o=t._getTransformedByDeletion(e,n);if(this.containsPosition(t)&&!r&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const r=this.start._getTransformedByMove(e,t,n),i=this.end._getTransformedByMove(e,t,n);return[new _u(r,i)]}let a;const s=this.getDifference(i);let l=null;const c=this.getIntersection(i);if(1==s.length?l=new _u(s[0].start._getTransformedByDeletion(e,n),s[0].end._getTransformedByDeletion(e,n)):2==s.length&&(l=new _u(this.start,this.end._getTransformedByDeletion(e,n))),a=l?l._getTransformedByInsertion(o,n,null!==c||r):[],c){const e=new _u(c.start._getCombined(i.start,o),c.end._getCombined(i.start,o));2==a.length?a.splice(1,0,e):a.push(e)}return a}_getTransformedByDeletion(e,t){let n=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return null==n&&null==r?null:(null==n&&(n=e),null==r&&(r=e),new _u(n,r))}static _createFromPositionAndShift(e,t){const n=e,r=e.getShiftedBy(t);return t>0?new this(n,r):new this(r,n)}static _createIn(e){return new this(hu._createAt(e,0),hu._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(hu._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(0===e.length)throw new Wn("range-create-from-ranges-empty-array",null);if(1==e.length)return e[0].clone();const t=e[0];e.sort(((e,t)=>e.start.isAfter(t.start)?1:-1));const n=e.indexOf(t),r=new this(t.start,t.end);if(n>0)for(let t=n-1;e[t].end.isEqual(r.start);t++)r.start=hu._createAt(e[t].start);for(let t=n+1;t<e.length&&e[t].start.isEqual(r.end);t++)r.end=hu._createAt(e[t].end);return r}static fromJSON(e,t){return new this(hu.fromJSON(e.start,t),hu.fromJSON(e.end,t))}}class gu{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",((e,t)=>{if(t.viewPosition)return;const n=this._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=this.findPositionIn(n,t.modelPosition.offset)}),{priority:"low"}),this.on("viewToModelPosition",((e,t)=>{if(t.modelPosition)return;const n=this.findMappedViewAncestor(t.viewPosition),r=this._viewToModelMapping.get(n),i=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,n);t.modelPosition=hu._createAt(r,i)}),{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e){const t=this.toModelElement(e);if(this._viewToModelMapping.delete(e),this._elementToMarkerNames.has(e))for(const t of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(t);this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const n=this._markerNameToElements.get(t)||new Set;n.add(e);const r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,n),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){const n=this._markerNameToElements.get(t);n&&(n.delete(e),0==n.size&&this._markerNameToElements.delete(t));const r=this._elementToMarkerNames.get(e);r&&(r.delete(t),0==r.size&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new _u(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new gl(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={isPhantom:!1}){const n={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const n=new Set;for(const e of t)if(e.is("attributeElement"))for(const t of e.getElementsWithSameId())n.add(t);else n.add(e);return n}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,n){if(n!=e){return this._toModelOffset(e.parent,e.index,n)+this._toModelOffset(e,t,e)}if(e.is("$text"))return t;let r=0;for(let n=0;n<t;n++)r+=this.getModelLength(e.getChild(n));return r}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name)){return this._viewToModelLengthCallbacks.get(e.name)(e)}if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(const n of e.getChildren())t+=this.getModelLength(n);return t}}findPositionIn(e,t){let n,r=0,i=0,o=0;if(e.is("$text"))return new _l(e,t);for(;i<t;)n=e.getChild(o),r=this.getModelLength(n),i+=r,o++;return i==t?this._moveViewPositionToTextNode(new _l(e,o)):this.findPositionIn(n,t-(i-r))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,n=e.nodeAfter;return t instanceof ys?new _l(t,t.data.length):n instanceof ys?new _l(n,0):e}}qi(gu,er);class bu{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=vu(t),e instanceof su&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=vu(t),e instanceof su&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=vu(t),e instanceof su&&(e=this._getSymbolForTextProxy(e));const n=this._consumable.get(e);if(void 0===n)return null;const r=n.get(t);return void 0===r?null:r}revert(e,t){t=vu(t),e instanceof su&&(e=this._getSymbolForTextProxy(e));const n=this.test(e,t);return!1===n?(this._consumable.get(e).set(t,!0),!0):!0!==n&&null}_getSymbolForTextProxy(e){let t=null;const n=this._textProxyRegistry.get(e.startOffset);if(n){const r=n.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}_addSymbolForTextProxy(e,t,n){const r=Symbol("textProxySymbol");let i,o;return i=this._textProxyRegistry.get(e),i||(i=new Map,this._textProxyRegistry.set(e,i)),o=i.get(t),o||(o=new Map,i.set(t,o)),o.set(n,r),r}}function vu(e){const t=e.split(":");return t.length>1?t[0]+":"+t[1]:t[0]}class yu{constructor(e){this.conversionApi=Object.assign({dispatcher:this},e),this._reconversionEventsMapping=new Map}convertChanges(e,t,n){for(const t of e.getMarkersToRemove())this.convertMarkerRemove(t.name,t.range,n);const r=this._mapChangesWithAutomaticReconversion(e);for(const e of r)"insert"===e.type?this.convertInsert(_u._createFromPositionAndShift(e.position,e.length),n):"remove"===e.type?this.convertRemove(e.position,e.length,e.name,n):"reconvert"===e.type?this.reconvertElement(e.element,n):this.convertAttribute(e.range,e.attributeKey,e.attributeOldValue,e.attributeNewValue,n);for(const e of this.conversionApi.mapper.flushUnboundMarkerNames()){const r=t.get(e).getRange();this.convertMarkerRemove(e,r,n),this.convertMarkerAdd(e,r,n)}for(const t of e.getMarkersToAdd())this.convertMarkerAdd(t.name,t.range,n)}convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);for(const t of Array.from(e).map(wu))this._convertInsertWithAttributes(t);this._clearConversionApi()}convertRemove(e,t,n,r){this.conversionApi.writer=r,this.fire("remove:"+n,{position:e,length:t},this.conversionApi),this._clearConversionApi()}convertAttribute(e,t,n,r,i){this.conversionApi.writer=i,this.conversionApi.consumable=this._createConsumableForRange(e,`attribute:${t}`);for(const i of e){const e={item:i.item,range:_u._createFromPositionAndShift(i.previousPosition,i.length),attributeKey:t,attributeOldValue:n,attributeNewValue:r};this._testAndFire(`attribute:${t}`,e)}this._clearConversionApi()}reconvertElement(e,t){const n=_u._createOn(e);this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(n);const r=this.conversionApi.mapper,i=r.toViewElement(e);t.remove(i),this._convertInsertWithAttributes({item:e,range:n});const o=r.toViewElement(e);for(const n of _u._createIn(e)){const{item:e}=n,i=Su(e,r);i?i.root!==o.root&&t.move(t.createRangeOn(i),r.toViewPosition(hu._createBefore(e))):this._convertInsertWithAttributes(wu(n))}r.unbindViewElement(i),this._clearConversionApi()}convertSelection(e,t,n){const r=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=n,this.conversionApi.consumable=this._createSelectionConsumable(e,r),this.fire("selection",{selection:e},this.conversionApi),e.isCollapsed){for(const t of r){const n=t.getRange();if(!Eu(e.getFirstPosition(),t,this.conversionApi.mapper))continue;const r={item:e,markerName:t.name,markerRange:n};this.conversionApi.consumable.test(e,"addMarker:"+t.name)&&this.fire("addMarker:"+t.name,r,this.conversionApi)}for(const t of e.getAttributeKeys()){const n={item:e,range:e.getFirstRange(),attributeKey:t,attributeOldValue:null,attributeNewValue:e.getAttribute(t)};this.conversionApi.consumable.test(e,"attribute:"+n.attributeKey)&&this.fire("attribute:"+n.attributeKey+":$text",n,this.conversionApi)}this._clearConversionApi()}}convertMarkerAdd(e,t,n){if("$graveyard"==t.root.rootName)return;this.conversionApi.writer=n;const r="addMarker:"+e,i=new bu;if(i.add(t,r),this.conversionApi.consumable=i,this.fire(r,{markerName:e,markerRange:t},this.conversionApi),i.test(t,r)){this.conversionApi.consumable=this._createConsumableForRange(t,r);for(const n of t.getItems()){if(!this.conversionApi.consumable.test(n,r))continue;const i={item:n,range:_u._createOn(n),markerName:e,markerRange:t};this.fire(r,i,this.conversionApi)}this._clearConversionApi()}}convertMarkerRemove(e,t,n){"$graveyard"!=t.root.rootName&&(this.conversionApi.writer=n,this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}_mapReconversionTriggerEvent(e,t){this._reconversionEventsMapping.set(t,e)}_createInsertConsumable(e){const t=new bu;for(const n of e){const e=n.item;t.add(e,"insert");for(const n of e.getAttributeKeys())t.add(e,"attribute:"+n)}return t}_createConsumableForRange(e,t){const n=new bu;for(const r of e.getItems())n.add(r,t);return n}_createSelectionConsumable(e,t){const n=new bu;n.add(e,"selection");for(const r of t)n.add(e,"addMarker:"+r.name);for(const t of e.getAttributeKeys())n.add(e,"attribute:"+t);return n}_testAndFire(e,t){this.conversionApi.consumable.test(t.item,e)&&this.fire(function(e,t){const n=t.item.name||"$text";return`${e}:${n}`}(e,t),t,this.conversionApi)}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}_convertInsertWithAttributes(e){this._testAndFire("insert",e);for(const t of e.item.getAttributeKeys())e.attributeKey=t,e.attributeOldValue=null,e.attributeNewValue=e.item.getAttribute(t),this._testAndFire(`attribute:${t}`,e)}_mapChangesWithAutomaticReconversion(e){const t=new Set,n=[];for(const r of e.getChanges()){const e=r.position||r.range.start,i=e.parent;if(pu(e,i)){n.push(r);continue}const o="attribute"===r.type?fu(e,i,null):i;if(o.is("$text")){n.push(r);continue}let a;if(a="attribute"===r.type?`attribute:${r.attributeKey}:${o.name}`:`${r.type}:${r.name}`,this._isReconvertTriggerEvent(a,o.name)){if(t.has(o))continue;t.add(o),n.push({type:"reconvert",element:o})}else n.push(r)}return n}_isReconvertTriggerEvent(e,t){return this._reconversionEventsMapping.get(e)===t}}function Eu(e,t,n){const r=t.getRange(),i=Array.from(e.getAncestors());i.shift(),i.reverse();return!i.some((e=>{if(r.containsItem(e)){return!!n.toViewElement(e).getCustomProperty("addHighlight")}}))}function wu(e){return{item:e.item,range:_u._createFromPositionAndShift(e.previousPosition,e.length)}}function Su(e,t){if(e.is("textProxy")){const n=t.toViewPosition(hu._createBefore(e)).parent;return n.is("$text")?n:null}return t.toViewElement(e)}qi(yu,er);class Tu{constructor(e,t,n){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,e&&this.setTo(e,t,n)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let n=!1;for(const r of e._ranges)if(t.isEqual(r)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new _u(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)e&&!t.start.isBefore(e.start)||(e=t);return e?new _u(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)e&&!t.end.isAfter(e.end)||(e=t);return e?new _u(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(e,t,n){if(null===e)this._setRanges([]);else if(e instanceof Tu)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof _u)this._setRanges([e],!!t&&!!t.backward);else if(e instanceof hu)this._setRanges([new _u(e)]);else if(e instanceof ou){const r=!!n&&!!n.backward;let i;if("in"==t)i=_u._createIn(e);else if("on"==t)i=_u._createOn(e);else{if(void 0===t)throw new Wn("model-selection-setto-required-second-parameter",[this,e]);i=new _u(hu._createAt(e,t))}this._setRanges([i],r)}else{if(!ss(e))throw new Wn("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,t&&!!t.backward)}}_setRanges(e,t=!1){const n=(e=Array.from(e)).some((t=>{if(!(t instanceof _u))throw new Wn("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every((e=>!e.isEqual(t)))}));if(e.length!==this._ranges.length||n){this._removeAllRanges();for(const t of e)this._pushRange(t);this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0})}}setFocus(e,t){if(null===this.anchor)throw new Wn("model-selection-setfocus-no-ranges",[this,e]);const n=hu._createAt(e,t);if("same"==n.compareWith(this.focus))return;const r=this.anchor;this._ranges.length&&this._popRange(),"before"==n.compareWith(r)?(this._pushRange(new _u(n,r)),this._lastRangeBackward=!0):(this._pushRange(new _u(r,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}is(e){return"selection"===e||"model:selection"===e}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const n=xu(t.start,e);n&&Au(n,t)&&(yield n);for(const n of t.getWalker()){const r=n.item;"elementEnd"==n.type&&Cu(r,e,t)&&(yield r)}const r=xu(t.end,e);r&&!t.end.isTouching(hu._createAt(r,0))&&Au(r,t)&&(yield r)}}containsEntireContent(e=this.anchor.root){const t=hu._createAt(e,0),n=hu._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new _u(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new Wn("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function ku(e,t){return!t.has(e)&&(t.add(e),e.root.document.model.schema.isBlock(e)&&e.parent)}function Cu(e,t,n){return ku(e,t)&&Au(e,n)}function xu(e,t){const n=e.parent.root.document.model.schema,r=e.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const o=r.find((e=>!i&&(i=n.isLimit(e),!i&&ku(e,t))));return r.forEach((e=>t.add(e))),o}function Au(e,t){const n=function(e){const t=e.root.document.model.schema;let n=e.parent;for(;n;){if(t.isBlock(n))return n;n=n.parent}}(e);if(!n)return!0;return!t.containsRange(_u._createOn(n),!0)}qi(Tu,er);class Ru extends _u{constructor(e,t){super(e,t),Mu.call(this)}detach(){this.stopListening()}is(e){return"liveRange"===e||"model:liveRange"===e||"range"==e||"model:range"===e}toRange(){return new _u(this.start,this.end)}static fromRange(e){return new Ru(e.start,e.end)}}function Mu(){this.listenTo(this.root.document.model,"applyOperation",((e,t)=>{const n=t[0];n.isDocumentOperation&&Du.call(this,n)}),{priority:"low"})}function Du(e){const t=this.getTransformedByOperation(e),n=_u._createFromRanges(t),r=!n.isEqual(this),i=function(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition)}return!1}(this,e);let o=null;if(r){"$graveyard"==n.root.rootName&&(o="remove"==e.type?e.sourcePosition:e.deletionPosition);const t=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",t,{deletionPosition:o})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:o})}qi(Ru,er);const Ou="selection:";class Nu{constructor(e){this._selection=new Lu(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection._updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}is(e){return"selection"===e||"model:selection"==e||"documentSelection"==e||"model:documentSelection"==e}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(e,t,n){this._selection.setTo(e,t,n)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Ou+e}static _isStoreAttributeKey(e){return e.startsWith(Ou)}}qi(Nu,er);class Lu extends Tu{constructor(e){super(),this.markers=new ls({idProperty:"name"}),this._model=e.model,this._document=e,this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this.listenTo(this._model,"applyOperation",((e,t)=>{const n=t[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))}),{priority:"lowest"}),this.on("change:range",(()=>{for(const e of this.getRanges())if(!this._document._validateSelectionRange(e))throw new Wn("document-selection-wrong-position",this,{range:e})})),this.listenTo(this._model.markers,"update",((e,t,n,r)=>{this._updateMarker(t,r)})),this.listenTo(this._document,"change",((e,t)=>{!function(e,t){const n=e.document.differ;for(const r of n.getChanges()){if("insert"!=r.type)continue;const n=r.position.parent;r.length===n.maxOffset&&e.enqueueChange(t,(e=>{const t=Array.from(n.getAttributeKeys()).filter((e=>e.startsWith(Ou)));for(const r of t)e.removeAttribute(r,n)}))}}(this._model,t)}))}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(e,t,n){super.setTo(e,t,n),this._updateAttributes(!0),this._updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this._updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=Vn();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new Wn("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this._updateMarkers()}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Ru.fromRange(e);return t.on("change:range",((e,n,r)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const e=this._ranges.indexOf(t);this._ranges.splice(e,1),t.detach()}})),t}_updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const t of this._model.markers){const n=t.name.split(":",1)[0];if(!this._observedMarkers.has(n))continue;const r=t.getRange();for(const n of this.getRanges())r.containsRange(n,!n.isCollapsed)&&e.push(t)}const n=Array.from(this.markers);for(const n of e)this.markers.has(n)||(this.markers.add(n),t=!0);for(const n of Array.from(this.markers))e.includes(n)||(this.markers.remove(n),t=!0);t&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(e,t){const n=e.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let r=!1;const i=Array.from(this.markers),o=this.markers.has(e);if(t){let n=!1;for(const e of this.getRanges())if(t.containsRange(e,!e.isCollapsed)){n=!0;break}n&&!o?(this.markers.add(e),r=!0):!n&&o&&(this.markers.remove(e),r=!0)}else o&&(this.markers.remove(e),r=!0);r&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(e){const t=ws(this._getSurroundingAttributes()),n=ws(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[e,t]of this._attributePriority)"low"==t&&(this._attrs.delete(e),this._attributePriority.delete(e));this._setAttributesTo(t);const r=[];for(const[e,t]of this.getAttributes())n.has(e)&&n.get(e)===t||r.push(e);for(const[e]of n)this.hasAttribute(e)||r.push(e);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,t,n=!0){const r=n?"normal":"low";if("low"==r&&"normal"==this._attributePriority.get(e))return!1;return super.getAttribute(e)!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}_removeAttribute(e,t=!0){const n=t?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(e))&&(this._attributePriority.set(e,n),!!super.hasAttribute(e)&&(this._attrs.delete(e),!0))}_setAttributesTo(e){const t=new Set;for(const[t,n]of this.getAttributes())e.get(t)!==n&&this._removeAttribute(t,!1);for(const[n,r]of e){this._setAttribute(n,r,!1)&&t.add(n)}return t}*_getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())if(t.startsWith(Ou)){const n=t.substr(Ou.length);yield[n,e.getAttribute(t)]}}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let n=null;if(this.isCollapsed){const r=e.textNode?e.textNode:e.nodeBefore,i=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(n=Iu(r)),n||(n=Iu(i)),!this.isGravityOverridden&&!n){let e=r;for(;e&&!t.isInline(e)&&!n;)e=e.previousSibling,n=Iu(e)}if(!n){let e=i;for(;e&&!t.isInline(e)&&!n;)e=e.nextSibling,n=Iu(e)}n||(n=this._getStoredAttributes())}else{const e=this.getFirstRange();for(const r of e){if(r.item.is("element")&&t.isObject(r.item))break;if("text"==r.type){n=r.item.getAttributes();break}}}return n}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function Iu(e){return e instanceof su||e instanceof au?e.getAttributes():null}class Pu{constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}const Fu=function(e){return ts(e,5)};class Bu extends Pu{elementToElement(e){return this.add(function(e){return(e=Fu(e)).view=Uu(e.view,"container"),t=>{var n;if(t.on("insert:"+e.model,(n=e.view,(e,t,r)=>{const i=n(t.item,r);if(!i)return;if(!r.consumable.consume(t.item,"insert"))return;const o=r.mapper.toViewPosition(t.range.start);r.mapper.bindElements(t.item,i),r.writer.insert(o,i)}),{priority:e.converterPriority||"normal"}),e.triggerBy){if(e.triggerBy.attributes)for(const n of e.triggerBy.attributes)t._mapReconversionTriggerEvent(e.model,`attribute:${n}:${e.model}`);if(e.triggerBy.children)for(const n of e.triggerBy.children)t._mapReconversionTriggerEvent(e.model,`insert:${n}`),t._mapReconversionTriggerEvent(e.model,`remove:${n}`)}}}(e))}attributeToElement(e){return this.add(function(e){e=Fu(e);let t="attribute:"+(e.model.key?e.model.key:e.model);e.model.name&&(t+=":"+e.model.name);if(e.model.values)for(const t of e.model.values)e.view[t]=Uu(e.view[t],"attribute");else e.view=Uu(e.view,"attribute");const n=zu(e);return r=>{r.on(t,function(e){return(t,n,r)=>{const i=e(n.attributeOldValue,r),o=e(n.attributeNewValue,r);if(!i&&!o)return;if(!r.consumable.consume(n.item,t.name))return;const a=r.writer,s=a.document.selection;if(n.item instanceof Tu||n.item instanceof Nu)a.wrap(s.getFirstRange(),o);else{let e=r.mapper.toViewRange(n.range);null!==n.attributeOldValue&&i&&(e=a.unwrap(e,i)),null!==n.attributeNewValue&&o&&a.wrap(e,o)}}}(n),{priority:e.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(e){e=Fu(e);let t="attribute:"+(e.model.key?e.model.key:e.model);e.model.name&&(t+=":"+e.model.name);if(e.model.values)for(const t of e.model.values)e.view[t]=ju(e.view[t]);else e.view=ju(e.view);const n=zu(e);return r=>{var i;r.on(t,(i=n,(e,t,n)=>{const r=i(t.attributeOldValue,n),o=i(t.attributeNewValue,n);if(!r&&!o)return;if(!n.consumable.consume(t.item,e.name))return;const a=n.mapper.toViewElement(t.item),s=n.writer;if(!a)throw new Wn("conversion-attribute-to-attribute-on-text",[t,n]);if(null!==t.attributeOldValue&&r)if("class"==r.key){const e=ds(r.value);for(const t of e)s.removeClass(t,a)}else if("style"==r.key){const e=Object.keys(r.value);for(const t of e)s.removeStyle(t,a)}else s.removeAttribute(r.key,a);if(null!==t.attributeNewValue&&o)if("class"==o.key){const e=ds(o.value);for(const t of e)s.addClass(t,a)}else if("style"==o.key){const e=Object.keys(o.value);for(const t of e)s.setStyle(t,o.value[t],a)}else s.setAttribute(o.key,o.value,a)}),{priority:e.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(function(e){return(e=Fu(e)).view=Uu(e.view,"ui"),t=>{var n;t.on("addMarker:"+e.model,(n=e.view,(e,t,r)=>{t.isOpening=!0;const i=n(t,r);t.isOpening=!1;const o=n(t,r);if(!i||!o)return;const a=t.markerRange;if(a.isCollapsed&&!r.consumable.consume(a,e.name))return;for(const t of a)if(!r.consumable.consume(t.item,e.name))return;const s=r.mapper,l=r.writer;l.insert(s.toViewPosition(a.start),i),r.mapper.bindElementToMarker(i,t.markerName),a.isCollapsed||(l.insert(s.toViewPosition(a.end),o),r.mapper.bindElementToMarker(o,t.markerName)),e.stop()}),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,(e.view,(e,t,n)=>{const r=n.mapper.markerNameToElements(t.markerName);if(r){for(const e of r)n.mapper.unbindElementFromMarkerName(e,t.markerName),n.writer.clear(n.writer.createRangeOn(e),e);n.writer.clearClonedElementsGroup(t.markerName),e.stop()}}),{priority:e.converterPriority||"normal"})}}(e))}markerToHighlight(e){return this.add(function(e){return t=>{var n;t.on("addMarker:"+e.model,(n=e.view,(e,t,r)=>{if(!t.item)return;if(!(t.item instanceof Tu||t.item instanceof Nu||t.item.is("$textProxy")))return;const i=Vu(n,t,r);if(!i)return;if(!r.consumable.consume(t.item,e.name))return;const o=r.writer,a=Yu(o,i),s=o.document.selection;if(t.item instanceof Tu||t.item instanceof Nu)o.wrap(s.getFirstRange(),a,s);else{const e=r.mapper.toViewRange(t.range),n=o.wrap(e,a);for(const e of n.getItems())if(e.is("attributeElement")&&e.isSimilar(a)){r.mapper.bindElementToMarker(e,t.markerName);break}}}),{priority:e.converterPriority||"normal"}),t.on("addMarker:"+e.model,function(e){return(t,n,r)=>{if(!n.item)return;if(!(n.item instanceof cu))return;const i=Vu(e,n,r);if(!i)return;if(!r.consumable.test(n.item,t.name))return;const o=r.mapper.toViewElement(n.item);if(o&&o.getCustomProperty("addHighlight")){r.consumable.consume(n.item,t.name);for(const e of _u._createIn(n.item))r.consumable.consume(e.item,t.name);o.getCustomProperty("addHighlight")(o,i,r.writer),r.mapper.bindElementToMarker(o,n.markerName)}}}(e.view),{priority:e.converterPriority||"normal"}),t.on("removeMarker:"+e.model,function(e){return(t,n,r)=>{if(n.markerRange.isCollapsed)return;const i=Vu(e,n,r);if(!i)return;const o=Yu(r.writer,i),a=r.mapper.markerNameToElements(n.markerName);if(a){for(const e of a)r.mapper.unbindElementFromMarkerName(e,n.markerName),e.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(e),o):e.getCustomProperty("removeHighlight")(e,i.id,r.writer);r.writer.clearClonedElementsGroup(n.markerName),t.stop()}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}markerToData(e){return this.add(function(e){const t=(e=Fu(e)).model;e.view||(e.view=n=>({group:t,name:n.substr(e.model.length+1)}));return n=>{var r;n.on("addMarker:"+t,(r=e.view,(e,t,n)=>{const i=r(t.markerName,n);if(!i)return;const o=t.markerRange;n.consumable.consume(o,e.name)&&(Hu(o,!1,n,t,i),Hu(o,!0,n,t,i),e.stop())}),{priority:e.converterPriority||"normal"}),n.on("removeMarker:"+t,function(e){return(t,n,r)=>{const i=e(n.markerName,r);if(!i)return;const o=r.mapper.markerNameToElements(n.markerName);if(o){for(const e of o)r.mapper.unbindElementFromMarkerName(e,n.markerName),e.is("containerElement")?(a(`data-${i.group}-start-before`,e),a(`data-${i.group}-start-after`,e),a(`data-${i.group}-end-before`,e),a(`data-${i.group}-end-after`,e)):r.writer.clear(r.writer.createRangeOn(e),e);r.writer.clearClonedElementsGroup(n.markerName),t.stop()}function a(e,t){if(t.hasAttribute(e)){const n=new Set(t.getAttribute(e).split(","));n.delete(i.name),0==n.size?r.writer.removeAttribute(e,t):r.writer.setAttribute(e,Array.from(n).join(","),t)}}}}(e.view),{priority:e.converterPriority||"normal"})}}(e))}}function Yu(e,t){const n=e.createAttributeElement("span",t.attributes);return t.classes&&n._addClass(t.classes),t.priority&&(n._priority=t.priority),n._id=t.id,n}function Hu(e,t,n,r,i){const o=t?e.start:e.end;if(n.schema.checkChild(o,"$text")){!function(e,t,n,r,i){const o=`${i.group}-${t?"start":"end"}`,a=i.name?{name:i.name}:null,s=n.writer.createUIElement(o,a);n.writer.insert(e,s),n.mapper.bindElementToMarker(s,r.markerName)}(n.mapper.toViewPosition(o),t,n,r,i)}else{let e,a;t&&o.nodeAfter||!t&&!o.nodeBefore?(e=o.nodeAfter,a=!0):(e=o.nodeBefore,a=!1);!function(e,t,n,r,i,o){const a=`data-${o.group}-${t?"start":"end"}-${n?"before":"after"}`,s=e.hasAttribute(a)?e.getAttribute(a).split(","):[];s.unshift(o.name),r.writer.setAttribute(a,s.join(","),e),r.mapper.bindElementToMarker(e,i.markerName)}(n.mapper.toViewElement(e),t,a,n,r,i)}}function Uu(e,t){return"function"==typeof e?e:(n,r)=>function(e,t,n){"string"==typeof e&&(e={name:e});let r;const i=t.writer,o=Object.assign({},e.attributes);if("container"==n)r=i.createContainerElement(e.name,o);else if("attribute"==n){const t={priority:e.priority||Ml.DEFAULT_PRIORITY};r=i.createAttributeElement(e.name,o,t)}else r=i.createUIElement(e.name,o);if(e.styles){const t=Object.keys(e.styles);for(const n of t)i.setStyle(n,e.styles[n],r)}if(e.classes){const t=e.classes;if("string"==typeof t)i.addClass(t,r);else for(const e of t)i.addClass(e,r)}return r}(e,r,t)}function zu(e){return e.model.values?(t,n)=>{const r=e.view[t];return r?r(t,n):null}:e.view}function ju(e){return"string"==typeof e?t=>({key:e,value:t}):"object"==typeof e?e.value?()=>e:t=>({key:e.key,value:t}):e}function Vu(e,t,n){const r="function"==typeof e?e(t,n):e;return r?(r.priority||(r.priority=10),r.id||(r.id=t.markerName),r):null}function Gu(e){const{schema:t,document:n}=e.model;for(const r of n.getRootNames()){const i=n.getRoot(r);if(i.isEmpty&&!t.checkChild(i,"$text")&&t.checkChild(i,"paragraph"))return e.insertElement("paragraph",i),!0}return!1}function Wu(e,t,n){const r=n.createContext(e);return!!n.checkChild(r,"paragraph")&&!!n.checkChild(r.push("paragraph"),t)}function qu(e,t){const n=t.createElement("paragraph");return t.insert(n,e),t.createPositionAt(n,0)}class $u extends Pu{elementToElement(e){return this.add(Ku(e))}elementToAttribute(e){return this.add(function(e){Zu(e=Fu(e));const t=Ju(e,!1),n=Qu(e.view),r=n?"element:"+n:"element";return n=>{n.on(r,t,{priority:e.converterPriority||"low"})}}(e))}attributeToAttribute(e){return this.add(function(e){e=Fu(e);let t=null;("string"==typeof e.view||e.view.key)&&(t=function(e){"string"==typeof e.view&&(e.view={key:e.view});const t=e.view.key;let n;if("class"==t||"style"==t){n={["class"==t?"classes":"styles"]:e.view.value}}else{n={attributes:{[t]:void 0===e.view.value?/[\s\S]*/:e.view.value}}}e.view.name&&(n.name=e.view.name);return e.view=n,t}(e));Zu(e,t);const n=Ju(e,!0);return t=>{t.on("element",n,{priority:e.converterPriority||"low"})}}(e))}elementToMarker(e){return qn("upcast-helpers-element-to-marker-deprecated"),this.add(function(e){return function(e){const t=e.model;e.model=(e,n)=>{const r="string"==typeof t?t:t(e,n);return n.writer.createElement("$marker",{"data-name":r})}}(e=Fu(e)),Ku(e)}(e))}dataToMarker(e){return this.add(function(e){(e=Fu(e)).model||(e.model=t=>t?e.view+":"+t:e.view);const t=Xu(eh(e,"start")),n=Xu(eh(e,"end"));return r=>{r.on("element:"+e.view+"-start",t,{priority:e.converterPriority||"normal"}),r.on("element:"+e.view+"-end",n,{priority:e.converterPriority||"normal"});const i=Gn.get("low"),o=Gn.get("highest"),a=Gn.get(e.converterPriority)/o;r.on("element",function(e){return(t,n,r)=>{const i=`data-${e.view}`;function o(t,i){for(const o of i){const i=e.model(o,r),a=r.writer.createElement("$marker",{"data-name":i});r.writer.insert(a,t),n.modelCursor.isEqual(t)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(t,1),n.modelRange=n.modelRange._getTransformedByInsertion(t,1)[0]}}n.modelRange||(n=Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor))),r.consumable.consume(n.viewItem,{attributes:i+"-end-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-after"})&&o(n.modelRange.end,n.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-end-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-before"})&&o(n.modelRange.start,n.viewItem.getAttribute(i+"-start-before").split(","))}}(e),{priority:i+a})}}(e))}}function Ku(e){const t=Xu(e=Fu(e)),n=Qu(e.view),r=n?"element:"+n:"element";return n=>{n.on(r,t,{priority:e.converterPriority||"normal"})}}function Qu(e){return"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.name?e.name:null}function Xu(e){const t=new Ss(e.view);return(n,r,i)=>{const o=t.match(r.viewItem);if(!o)return;const a=o.match;if(a.name=!0,!i.consumable.test(r.viewItem,a))return;const s=function(e,t,n){return e instanceof Function?e(t,n):n.writer.createElement(e)}(e.model,r.viewItem,i);s&&i.safeInsert(s,r.modelCursor)&&(i.consumable.consume(r.viewItem,a),i.convertChildren(r.viewItem,s),i.updateConversionResult(s,r))}}function Zu(e,t=null){const n=null===t||(e=>e.getAttribute(t)),r="object"!=typeof e.model?e.model:e.model.key,i="object"!=typeof e.model||void 0===e.model.value?n:e.model.value;e.model={key:r,value:i}}function Ju(e,t){const n=new Ss(e.view);return(r,i,o)=>{const a=n.match(i.viewItem);if(!a)return;const s=e.model.key,l="function"==typeof e.model.value?e.model.value(i.viewItem,o):e.model.value;if(null===l)return;if(!function(e,t){const n="function"==typeof e?e(t):e;if("object"==typeof n&&!Qu(n))return!1;return!n.classes&&!n.attributes&&!n.styles}(e.view,i.viewItem)?delete a.match.name:a.match.name=!0,!o.consumable.test(i.viewItem,a.match))return;i.modelRange||(i=Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor)));(function(e,t,n,r){let i=!1;for(const o of Array.from(e.getItems({shallow:n})))r.schema.checkAttribute(o,t.key)&&(i=!0,o.hasAttribute(t.key)||r.writer.setAttribute(t.key,t.value,o));return i})(i.modelRange,{key:s,value:l},t,o)&&o.consumable.consume(i.viewItem,a.match)}}function eh(e,t){const n={};return n.view=e.view+"-"+t,n.model=(t,n)=>{const r=t.getAttribute("name"),i=e.model(r,n);return n.writer.createElement("$marker",{"data-name":i})},n}class th{constructor(e,t){this.model=e,this.view=new iu(t),this.mapper=new gu,this.downcastDispatcher=new yu({mapper:this.mapper,schema:e.schema});const n=this.model.document,r=n.selection,i=this.model.markers;this.listenTo(this.model,"_beforeChanges",(()=>{this.view._disableRendering(!0)}),{priority:"highest"}),this.listenTo(this.model,"_afterChanges",(()=>{this.view._disableRendering(!1)}),{priority:"lowest"}),this.listenTo(n,"change",(()=>{this.view.change((e=>{this.downcastDispatcher.convertChanges(n.differ,i,e),this.downcastDispatcher.convertSelection(r,i,e)}))}),{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(e,t){return(n,r)=>{const i=r.newSelection,o=[];for(const e of i.getRanges())o.push(t.toModelRange(e));const a=e.createSelection(o,{backward:i.isBackward});a.isEqual(e.document.selection)||e.change((e=>{e.setSelection(a)}))}}(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",((e,t,n)=>{if(!n.consumable.consume(t.item,"insert"))return;const r=n.writer,i=n.mapper.toViewPosition(t.range.start),o=r.createText(t.item.data);r.insert(i,o)}),{priority:"lowest"}),this.downcastDispatcher.on("remove",((e,t,n)=>{const r=n.mapper.toViewPosition(t.position),i=t.position.getShiftedBy(t.length),o=n.mapper.toViewPosition(i,{isPhantom:!0}),a=n.writer.createRange(r,o),s=n.writer.remove(a.getTrimmed());for(const e of n.writer.createRangeIn(s).getItems())n.mapper.unbindViewElement(e)}),{priority:"low"}),this.downcastDispatcher.on("selection",((e,t,n)=>{const r=n.writer,i=r.document.selection;for(const e of i.getRanges())e.isCollapsed&&e.end.parent.isAttached()&&n.writer.mergeAttributes(e.start);r.setSelection(null)}),{priority:"low"}),this.downcastDispatcher.on("selection",((e,t,n)=>{const r=t.selection;if(r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=[];for(const e of r.getRanges()){const t=n.mapper.toViewRange(e);i.push(t)}n.writer.setSelection(i,{backward:r.isBackward})}),{priority:"low"}),this.downcastDispatcher.on("selection",((e,t,n)=>{const r=t.selection;if(!r.isCollapsed)return;if(!n.consumable.consume(r,"selection"))return;const i=n.writer,o=r.getFirstPosition(),a=n.mapper.toViewPosition(o),s=i.breakAttributes(a);i.setSelection(s)}),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using((e=>{if("$graveyard"==e.rootName)return null;const t=new fl(this.view.document,e.name);return t.rootName=e.rootName,this.mapper.bindElements(e,t),t}))}destroy(){this.view.destroy(),this.stopListening()}}qi(th,Ui);class nh{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const n=this.get(e);if(!n)throw new Wn("commandcollection-command-not-found",this,{commandName:e});return n.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class rh{constructor(){this._consumables=new Map}add(e,t){let n;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?n=this._consumables.get(e):(n=new ih(e),this._consumables.set(e,n)),n.add(t))}test(e,t){const n=this._consumables.get(e);return void 0===n?null:e.is("$text")||e.is("documentFragment")?n:n.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){const n=this._consumables.get(e);void 0!==n&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):n.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},n=e.getAttributeKeys();for(const e of n)"style"!=e&&"class"!=e&&t.attributes.push(e);const r=e.getClassNames();for(const e of r)t.classes.push(e);const i=e.getStyleNames();for(const e of i)t.styles.push(e);return t}static createFrom(e,t){if(t||(t=new rh(e)),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,rh.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const n of e.getChildren())t=rh.createFrom(n,t);return t}}class ih{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t in this._consumables)if(t in e){const n=this._test(t,e[t]);if(!0!==n)return n}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t in this._consumables)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t in this._consumables)t in e&&this._revert(t,e[t])}_add(e,t){const n=ui(t)?t:[t],r=this._consumables[e];for(const t of n){if("attributes"===e&&("class"===t||"style"===t))throw new Wn("viewconsumable-invalid-attribute",this);if(r.set(t,!0),"styles"===e)for(const e of this.element.document.stylesProcessor.getRelatedStyles(t))r.set(e,!0)}}_test(e,t){const n=ui(t)?t:[t],r=this._consumables[e];for(const t of n)if("attributes"!==e||"class"!==t&&"style"!==t){const e=r.get(t);if(void 0===e)return null;if(!e)return!1}else{const e="class"==t?"classes":"styles",n=this._test(e,[...this._consumables[e].keys()]);if(!0!==n)return n}return!0}_consume(e,t){const n=ui(t)?t:[t],r=this._consumables[e];for(const t of n)if("attributes"!==e||"class"!==t&&"style"!==t){if(r.set(t,!1),"styles"==e)for(const e of this.element.document.stylesProcessor.getRelatedStyles(t))r.set(e,!1)}else{const e="class"==t?"classes":"styles";this._consume(e,[...this._consumables[e].keys()])}}_revert(e,t){const n=ui(t)?t:[t],r=this._consumables[e];for(const t of n)if("attributes"!==e||"class"!==t&&"style"!==t){!1===r.get(t)&&r.set(t,!0)}else{const e="class"==t?"classes":"styles";this._revert(e,[...this._consumables[e].keys()])}}}class oh{constructor(){this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",((e,t)=>{t[0]=new ah(t[0])}),{priority:"highest"}),this.on("checkChild",((e,t)=>{t[0]=new ah(t[0]),t[1]=this.getDefinition(t[1])}),{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new Wn("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new Wn("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return t="string"==typeof e?e:e.is&&(e.is("$text")||e.is("$textProxy"))?"$text":e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!(!t||!t.isBlock)}isLimit(e){const t=this.getDefinition(e);return!!t&&!(!t.isLimit&&!t.isObject)}isObject(e){const t=this.getDefinition(e);return!!t&&!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent)}isInline(e){const t=this.getDefinition(e);return!(!t||!t.isInline)}isSelectable(e){const t=this.getDefinition(e);return!!t&&!(!t.isSelectable&&!t.isObject)}isContent(e){const t=this.getDefinition(e);return!!t&&!(!t.isContent&&!t.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(t,e)}checkAttribute(e,t){const n=this.getDefinition(e.last);return!!n&&n.allowAttributes.includes(t)}checkMerge(e,t=null){if(e instanceof hu){const t=e.nodeBefore,n=e.nodeAfter;if(!(t instanceof cu))throw new Wn("schema-check-merge-no-element-before",this);if(!(n instanceof cu))throw new Wn("schema-check-merge-no-element-after",this);return this.checkMerge(t,n)}for(const n of t.getChildren())if(!this.checkChild(e,n))return!1;return!0}addChildCheck(e){this.on("checkChild",((t,[n,r])=>{if(!r)return;const i=e(n,r);"boolean"==typeof i&&(t.stop(),t.return=i)}),{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",((t,[n,r])=>{const i=e(n,r);"boolean"==typeof i&&(t.stop(),t.return=i)}),{priority:"high"})}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let t;if(e instanceof hu)t=e.parent;else{t=(e instanceof _u?[e]:Array.from(e.getRanges())).reduce(((e,t)=>{const n=t.getCommonAncestor();return e?e.getCommonAncestor(n,{includeSelf:!0}):n}),null)}for(;!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const n=[...e.getFirstPosition().getAncestors(),new au("",e.getAttributes())];return this.checkAttribute(n,t)}{const n=e.getRanges();for(const e of n)for(const n of e)if(this.checkAttribute(n.item,t))return!0}return!1}*getValidRanges(e,t){e=function*(e){for(const t of e)yield*t.getMinimalFlatRanges()}(e);for(const n of e)yield*this._getValidRangesForRange(n,t)}getNearestSelectionRange(e,t="both"){if(this.checkChild(e,"$text"))return new _u(e);let n,r;const i=e.getAncestors().reverse().find((e=>this.isLimit(e)))||e.root;"both"!=t&&"backward"!=t||(n=new du({boundaries:_u._createIn(i),startPosition:e,direction:"backward"})),"both"!=t&&"forward"!=t||(r=new du({boundaries:_u._createIn(i),startPosition:e}));for(const e of function*(e,t){let n=!1;for(;!n;){if(n=!0,e){const t=e.next();t.done||(n=!1,yield{walker:e,value:t.value})}if(t){const e=t.next();e.done||(n=!1,yield{walker:t,value:e.value})}}}(n,r)){const t=e.walker==n?"elementEnd":"elementStart",r=e.value;if(r.type==t&&this.isObject(r.item))return _u._createOn(r.item);if(this.checkChild(r.nextPosition,"$text"))return new _u(r.nextPosition)}return null}findAllowedParent(e,t){let n=e.parent;for(;n;){if(this.checkChild(n,t))return n;if(this.isLimit(n))return null;n=n.parent}return null}removeDisallowedAttributes(e,t){for(const n of e)if(n.is("$text"))gh(this,n,t);else{const e=_u._createIn(n).getPositions();for(const n of e){gh(this,n.nodeBefore||n.parent,t)}}}createContext(e){return new ah(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,n=Object.keys(t);for(const r of n)e[r]=sh(t[r],r);for(const t of n)lh(e,t);for(const t of n)ch(e,t);for(const t of n)dh(e,t),uh(e,t);for(const t of n)hh(e,t),ph(e,t);this._compiledDefinitions=e}_checkContextMatch(e,t,n=t.length-1){const r=t.getItem(n);if(e.allowIn.includes(r.name)){if(0==n)return!0;{const e=this.getDefinition(r);return this._checkContextMatch(e,t,n-1)}}return!1}*_getValidRangesForRange(e,t){let n=e.start,r=e.start;for(const i of e.getItems({shallow:!0}))i.is("element")&&(yield*this._getValidRangesForRange(_u._createIn(i),t)),this.checkAttribute(i,t)||(n.isEqual(r)||(yield new _u(n,r)),n=hu._createAfter(i)),r=hu._createAfter(i);n.isEqual(r)||(yield new _u(n,r))}}qi(oh,Ui);class ah{constructor(e){if(e instanceof ah)return e;"string"==typeof e?e=[e]:Array.isArray(e)||(e=e.getAncestors({includeSelf:!0})),this._items=e.map(_h)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new ah([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map((e=>e.name))}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function sh(e,t){const n={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return function(e,t){for(const n of e){const e=Object.keys(n).filter((e=>e.startsWith("is")));for(const r of e)t[r]=n[r]}}(e,n),fh(e,n,"allowIn"),fh(e,n,"allowContentOf"),fh(e,n,"allowWhere"),fh(e,n,"allowAttributes"),fh(e,n,"allowAttributesOf"),fh(e,n,"inheritTypesFrom"),function(e,t){for(const n of e){const e=n.inheritAllFrom;e&&(t.allowContentOf.push(e),t.allowWhere.push(e),t.allowAttributesOf.push(e),t.inheritTypesFrom.push(e))}}(e,n),n}function lh(e,t){for(const n of e[t].allowContentOf)if(e[n]){mh(e,n).forEach((e=>{e.allowIn.push(t)}))}delete e[t].allowContentOf}function ch(e,t){for(const n of e[t].allowWhere){const r=e[n];if(r){const n=r.allowIn;e[t].allowIn.push(...n)}}delete e[t].allowWhere}function dh(e,t){for(const n of e[t].allowAttributesOf){const r=e[n];if(r){const n=r.allowAttributes;e[t].allowAttributes.push(...n)}}delete e[t].allowAttributesOf}function uh(e,t){const n=e[t];for(const t of n.inheritTypesFrom){const r=e[t];if(r){const e=Object.keys(r).filter((e=>e.startsWith("is")));for(const t of e)t in n||(n[t]=r[t])}}delete n.inheritTypesFrom}function hh(e,t){const n=e[t],r=n.allowIn.filter((t=>e[t]));n.allowIn=Array.from(new Set(r))}function ph(e,t){const n=e[t];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function fh(e,t,n){for(const r of e)"string"==typeof r[n]?t[n].push(r[n]):Array.isArray(r[n])&&t[n].push(...r[n])}function mh(e,t){const n=e[t];return(r=e,Object.keys(r).map((e=>r[e]))).filter((e=>e.allowIn.includes(n.name)));var r}function _h(e){return"string"==typeof e||e.is("documentFragment")?{name:"string"==typeof e?e:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:e.is("element")?e.name:"$text",*getAttributeKeys(){yield*e.getAttributeKeys()},getAttribute:t=>e.getAttribute(t)}}function gh(e,t,n){for(const r of t.getAttributeKeys())e.checkAttribute(t,r)||n.removeAttribute(r,t)}class bh{constructor(e={}){this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.safeInsert=this._safeInsert.bind(this),this.conversionApi.updateConversionResult=this._updateConversionResult.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this),this.conversionApi.getSplitParts=this._getSplitParts.bind(this)}convert(e,t,n=["$root"]){this.fire("viewCleanup",e),this._modelCursor=function(e,t){let n;for(const r of new ah(e)){const e={};for(const t of r.getAttributeKeys())e[t]=r.getAttribute(t);const i=t.createElement(r.name,e);n&&t.append(i,n),n=hu._createAt(i,0)}return n}(n,t),this.conversionApi.writer=t,this.conversionApi.consumable=rh.createFrom(e),this.conversionApi.store={};const{modelRange:r}=this._convertItem(e,this._modelCursor),i=t.createDocumentFragment();if(r){this._removeEmptyElements();for(const e of Array.from(this._modelCursor.parent.getChildren()))t.append(e,i);i.markers=function(e,t){const n=new Set,r=new Map,i=_u._createIn(e).getItems();for(const e of i)"$marker"==e.name&&n.add(e);for(const e of n){const n=e.getAttribute("data-name"),i=t.createPositionBefore(e);r.has(n)?r.get(n).end=i.clone():r.set(n,new _u(i.clone())),t.remove(e)}return r}(i,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}_convertItem(e,t){const n=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")?this.fire("element:"+e.name,n,this.conversionApi):e.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof _u))throw new Wn("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(e,t){let n=t.is("position")?t:hu._createAt(t,0);const r=new _u(n);for(const t of Array.from(e.getChildren())){const e=this._convertItem(t,n);e.modelRange instanceof _u&&(r.end=e.modelRange.end,n=e.modelCursor)}return{modelRange:r,modelCursor:n}}_safeInsert(e,t){const n=this._splitToAllowedParent(e,t);return!!n&&(this.conversionApi.writer.insert(e,n.position),!0)}_updateConversionResult(e,t){const n=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(n[n.length-1])));const i=this._cursorParents.get(e);t.modelCursor=i?r.createPositionAt(i,0):t.modelRange.end}_splitToAllowedParent(e,t){const{schema:n,writer:r}=this.conversionApi;let i=n.findAllowedParent(t,e);if(i){if(i===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(i)&&(i=null)}if(!i)return Wu(t,e,n)?{position:qu(t,r)}:null;const o=this.conversionApi.writer.split(t,i),a=[];for(const e of o.range.getWalker())if("elementEnd"==e.type)a.push(e.item);else{const t=a.pop(),n=e.item;this._registerSplitPair(t,n)}const s=o.range.end.parent;return this._cursorParents.set(e,s),{position:o.position,cursorParent:s}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const n=this._splitParts.get(e);this._splitParts.set(t,n),n.push(t)}_getSplitParts(e){let t;return t=this._splitParts.has(e)?this._splitParts.get(e):[e],t}_removeEmptyElements(){let e=!1;for(const t of this._splitParts.keys())t.isEmpty&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}}qi(bh,er);class vh{getHtml(e){const t=document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}class yh{constructor(e){this._domParser=new DOMParser,this._domConverter=new Lc(e,{blockFillerMode:"nbsp"}),this._htmlWriter=new vh}toData(e){const t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this._domConverter.domToView(t)}registerRawContentMatcher(e){this._domConverter.registerRawContentMatcher(e)}useFillerType(e){this._domConverter.blockFillerMode="marked"==e?"markedNbsp":"nbsp"}_toDom(e){const t=this._domParser.parseFromString(e,"text/html"),n=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)n.appendChild(r[0]);return n}}class Eh{constructor(e,t){this.model=e,this.mapper=new gu,this.downcastDispatcher=new yu({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",((e,t,n)=>{if(!n.consumable.consume(t.item,"insert"))return;const r=n.writer,i=n.mapper.toViewPosition(t.range.start),o=r.createText(t.item.data);r.insert(i,o)}),{priority:"lowest"}),this.upcastDispatcher=new bh({schema:e.schema}),this.viewDocument=new Rl(t),this.stylesProcessor=t,this.htmlProcessor=new yh(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Xl(this.viewDocument),this.upcastDispatcher.on("text",((e,t,{schema:n,consumable:r,writer:i})=>{let o=t.modelCursor;if(!r.test(t.viewItem))return;if(!n.checkChild(o,"$text")){if(!Wu(o,"$text",n))return;o=qu(o,i)}r.consume(t.viewItem);const a=i.createText(t.viewItem.data);i.insert(a,o),t.modelRange=i.createRange(o,o.getShiftedBy(a.offsetSize)),t.modelCursor=t.modelRange.end}),{priority:"lowest"}),this.upcastDispatcher.on("element",((e,t,n)=>{if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:r}=n.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=r}}),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",((e,t,n)=>{if(!t.modelRange&&n.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:r}=n.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=r}}),{priority:"lowest"}),this.decorate("init"),this.decorate("set"),this.on("init",(()=>{this.fire("ready")}),{priority:"lowest"}),this.on("ready",(()=>{this.model.enqueueChange("transparent",Gu)}),{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:n="empty"}=e;if(!this._checkIfRootsExists([t]))throw new Wn("datacontroller-get-non-existent-root",this);const r=this.model.document.getRoot(t);return"empty"!==n||this.model.hasContent(r,{ignoreWhitespaces:!0})?this.stringify(r,e):""}stringify(e,t={}){const n=this.toView(e,t);return this.processor.toData(n)}toView(e,t={}){const n=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();const i=_u._createIn(e),o=new Ql(n);this.mapper.bindElements(e,o),this.downcastDispatcher.conversionApi.options=t,this.downcastDispatcher.convertInsert(i,r);const a=e.is("documentFragment")?Array.from(e.markers):function(e){const t=[],n=e.root.document;if(!n)return[];const r=_u._createIn(e);for(const e of n.model.markers){const n=r.getIntersection(e.getRange());n&&t.push([e.name,n])}return t}(e);for(const[e,t]of a)this.downcastDispatcher.convertMarkerAdd(e,t,r);return delete this.downcastDispatcher.conversionApi.options,o}init(e){if(this.model.document.version)throw new Wn("datacontroller-init-document-not-empty",this);let t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new Wn("datacontroller-init-non-existent-root",this);return this.model.enqueueChange("transparent",(e=>{for(const n of Object.keys(t)){const r=this.model.document.getRoot(n);e.insert(this.parse(t[n],r),r,0)}})),Promise.resolve()}set(e){let t={};if("string"==typeof e?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new Wn("datacontroller-set-non-existent-root",this);this.model.enqueueChange("transparent",(e=>{e.setSelection(null),e.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const n of Object.keys(t)){const r=this.model.document.getRoot(n);e.remove(e.createRangeIn(r)),e.insert(this.parse(t[n],r),r,0)}}))}parse(e,t="$root"){const n=this.processor.toView(e);return this.toModel(n,t)}toModel(e,t="$root"){return this.model.change((n=>this.upcastDispatcher.convert(e,n,t)))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRootNames().includes(t))return!1;return!0}}qi(Eh,Ui);class wh{constructor(e,t){this._helpers=new Map,this._downcast=ds(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=ds(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const n=this._downcast.includes(t);if(!this._upcast.includes(t)&&!n)throw new Wn("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:n})}for(e){if(!this._helpers.has(e))throw new Wn("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:n}of Sh(e))this.for("upcast").elementToElement({model:t,view:n,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:n}of Sh(e))this.for("upcast").elementToAttribute({view:n,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:n}of Sh(e))this.for("upcast").attributeToAttribute({view:n,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:n}){if(this._helpers.has(e))throw new Wn("conversion-group-exists",this);const r=n?new Bu(t):new $u(t);this._helpers.set(e,r)}}function*Sh(e){if(e.model.values)for(const t of e.model.values){const n={key:e.model.key,value:t},r=e.view[t],i=e.upcastAlso?e.upcastAlso[t]:void 0;yield*Th(n,r,i)}else yield*Th(e.model,e.view,e.upcastAlso)}function*Th(e,t,n){if(yield{model:e,view:t},n)for(const t of ds(n))yield{model:e,view:t}}class kh{constructor(e="default"){this.operations=[],this.type=e}get baseVersion(){for(const e of this.operations)if(null!==e.baseVersion)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}class Ch{constructor(e){this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e){return new this(e.baseVersion)}}class xh{constructor(e){this.markers=new Map,this._children=new lu,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return"documentFragment"===e||"model:documentFragment"===e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const n of e)t=t.getChild(t.offsetToIndex(n));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const n of e)n.name?t.push(cu.fromJSON(n)):t.push(au.fromJSON(n));return new xh(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const n=function(e){if("string"==typeof e)return[new au(e)];ss(e)||(e=[e]);return Array.from(e).map((e=>"string"==typeof e?new au(e):e instanceof su?new au(e.data,e.getAttributes()):e))}(t);for(const e of n)null!==e.parent&&e._remove(),e.parent=this;this._children._insertNodes(e,n)}_removeChildren(e,t=1){const n=this._children._removeNodes(e,t);for(const e of n)e.parent=null;return n}}function Ah(e,t){const n=(t=Dh(t)).reduce(((e,t)=>e+t.offsetSize),0),r=e.parent;Nh(e);const i=e.index;return r._insertChild(i,t),Oh(r,i+t.length),Oh(r,i),new _u(e,e.getShiftedBy(n))}function Rh(e){if(!e.isFlat)throw new Wn("operation-utils-remove-range-not-flat",this);const t=e.start.parent;Nh(e.start),Nh(e.end);const n=t._removeChildren(e.start.index,e.end.index-e.start.index);return Oh(t,e.start.index),n}function Mh(e,t){if(!e.isFlat)throw new Wn("operation-utils-move-range-not-flat",this);const n=Rh(e);return Ah(t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),n)}function Dh(e){const t=[];e instanceof Array||(e=[e]);for(let n=0;n<e.length;n++)if("string"==typeof e[n])t.push(new au(e[n]));else if(e[n]instanceof su)t.push(new au(e[n].data,e[n].getAttributes()));else if(e[n]instanceof xh||e[n]instanceof lu)for(const r of e[n])t.push(r);else e[n]instanceof ou&&t.push(e[n]);for(let e=1;e<t.length;e++){const n=t[e],r=t[e-1];n instanceof au&&r instanceof au&&Lh(n,r)&&(t.splice(e-1,2,new au(r.data+n.data,r.getAttributes())),e--)}return t}function Oh(e,t){const n=e.getChild(t-1),r=e.getChild(t);if(n&&r&&n.is("$text")&&r.is("$text")&&Lh(n,r)){const i=new au(n.data+r.data,n.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,i)}}function Nh(e){const t=e.textNode,n=e.parent;if(t){const r=e.offset-t.startOffset,i=t.index;n._removeChildren(i,1);const o=new au(t.data.substr(0,r),t.getAttributes()),a=new au(t.data.substr(r),t.getAttributes());n._insertChild(i,[o,a])}}function Lh(e,t){const n=e.getAttributes(),r=t.getAttributes();for(const e of n){if(e[1]!==t.getAttribute(e[0]))return!1;r.next()}return r.next().done}const Ih=function(e,t){return ld(e,t)};class Ph extends Ch{constructor(e,t,n,r,i){super(i),this.range=e.clone(),this.key=t,this.oldValue=void 0===n?null:n,this.newValue=void 0===r?null:r}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}clone(){return new Ph(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ph(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new Wn("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Ih(e.getAttribute(this.key),this.oldValue))throw new Wn("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&e.hasAttribute(this.key))throw new Wn("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Ih(this.oldValue,this.newValue)||function(e,t,n){Nh(e.start),Nh(e.end);for(const r of e.getItems({shallow:!0})){const e=r.is("$textProxy")?r.textNode:r;null!==n?e._setAttribute(t,n):e._removeAttribute(t),Oh(e.parent,e.index)}Oh(e.end.parent,e.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new Ph(_u.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Fh extends Ch{constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new Wn("detach-operation-on-document-node",this)}_execute(){Rh(_u._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Bh extends Ch{constructor(e,t,n,r){super(r),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,n=this.sourcePosition.offset,r=this.targetPosition.offset;if(n+this.howMany>e.maxOffset)throw new Wn("move-operation-nodes-do-not-exist",this);if(e===t&&n<r&&r<n+this.howMany)throw new Wn("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==gs(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const e=this.sourcePosition.path.length-1;if(this.targetPosition.path[e]>=n&&this.targetPosition.path[e]<n+this.howMany)throw new Wn("move-operation-node-into-itself",this)}}_execute(){Mh(_u._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const n=hu.fromJSON(e.sourcePosition,t),r=hu.fromJSON(e.targetPosition,t);return new this(n,e.howMany,r,e.baseVersion)}}class Yh extends Ch{constructor(e,t,n){super(n),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new lu(Dh(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}clone(){const e=new lu([...this.nodes].map((e=>e._clone(!0)))),t=new Yh(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new hu(e,[0]);return new Bh(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new Wn("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new lu([...e].map((e=>e._clone(!0)))),Ah(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const n=[];for(const t of e.nodes)t.name?n.push(cu.fromJSON(t)):n.push(au.fromJSON(t));const r=new Yh(hu.fromJSON(e.position,t),n,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}}class Hh extends Ch{constructor(e,t,n,r,i,o){super(o),this.name=e,this.oldRange=t?t.clone():null,this.newRange=n?n.clone():null,this.affectsData=i,this._markers=r}get type(){return"marker"}clone(){return new Hh(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Hh(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){const e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,!0,this.affectsData)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Hh(e.name,e.oldRange?_u.fromJSON(e.oldRange,t):null,e.newRange?_u.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}class Uh extends Ch{constructor(e,t,n,r){super(r),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=n}get type(){return"rename"}clone(){return new Uh(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Uh(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(!(e instanceof cu))throw new Wn("rename-operation-wrong-position",this);if(e.name!==this.oldName)throw new Wn("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new Uh(hu.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class zh extends Ch{constructor(e,t,n,r,i){super(i),this.root=e,this.key=t,this.oldValue=n,this.newValue=r}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}clone(){return new zh(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new zh(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new Wn("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Wn("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Wn("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new Wn("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new zh(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class jh extends Ch{constructor(e,t,n,r,i){super(i),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new hu(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new _u(this.sourcePosition,e)}clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),n=new hu(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Vh(e,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(!e.parent)throw new Wn("merge-operation-source-position-invalid",this);if(!t.parent)throw new Wn("merge-operation-target-position-invalid",this);if(this.howMany!=e.maxOffset)throw new Wn("merge-operation-how-many-invalid",this)}_execute(){const e=this.sourcePosition.parent;Mh(_u._createIn(e),this.targetPosition),Mh(_u._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const n=hu.fromJSON(e.sourcePosition,t),r=hu.fromJSON(e.targetPosition,t),i=hu.fromJSON(e.graveyardPosition,t);return new this(n,e.howMany,r,i,e.baseVersion)}}class Vh extends Ch{constructor(e,t,n,r,i){super(i),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=n,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new hu(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new _u(this.splitPosition,e)}clone(){return new this.constructor(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new hu(e,[0]);return new jh(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new Wn("split-operation-position-invalid",this);if(!e.parent)throw new Wn("split-operation-split-in-root",this);if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new Wn("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new Wn("split-operation-graveyard-position-invalid",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)Mh(_u._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const t=e._clone();Ah(this.insertionPosition,t)}Mh(new _u(hu._createAt(e,this.splitPosition.offset),hu._createAt(e,e.maxOffset)),this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new hu(e.root,t,"toPrevious")}static fromJSON(e,t){const n=hu.fromJSON(e.splitPosition,t),r=hu.fromJSON(e.insertionPosition,t),i=e.graveyardPosition?hu.fromJSON(e.graveyardPosition,t):null;return new this(n,e.howMany,r,i,e.baseVersion)}}class Gh extends cu{constructor(e,t,n="main"){super(t),this._document=e,this.rootName=n}get document(){return this._document}is(e,t){return t?t===this.name&&("rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e):"rootElement"===e||"model:rootElement"===e||"element"===e||"model:element"===e||"node"===e||"model:node"===e}toJSON(){return this.rootName}}class Wh{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new au(e,t)}createElement(e,t){return new cu(e,t)}createDocumentFragment(){return new xh}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,n=0){if(this._assertWriterUsedCorrectly(),e instanceof au&&""==e.data)return;const r=hu._createAt(t,n);if(e.parent){if(Xh(e.root,r.root))return void this.move(_u._createOn(e),r);if(e.root.document)throw new Wn("model-writer-insert-forbidden-move",this);this.remove(e)}const i=r.root.document?r.root.document.version:null,o=new Yh(r,e,i);if(e instanceof au&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),e instanceof xh)for(const[t,n]of e.markers){const e=hu._createAt(n.root,0),i={range:new _u(n.start._getCombined(e,r),n.end._getCombined(e,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(t)?this.updateMarker(t,i):this.addMarker(t,i)}}insertText(e,t,n,r){t instanceof xh||t instanceof cu||t instanceof hu?this.insert(this.createText(e),t,n):this.insert(this.createText(e,t),n,r)}insertElement(e,t,n,r){t instanceof xh||t instanceof cu||t instanceof hu?this.insert(this.createElement(e),t,n):this.insert(this.createElement(e,t),n,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,n){t instanceof xh||t instanceof cu?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),n,"end")}appendElement(e,t,n){t instanceof xh||t instanceof cu?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),n,"end")}setAttribute(e,t,n){if(this._assertWriterUsedCorrectly(),n instanceof _u){const r=n.getMinimalFlatRanges();for(const n of r)qh(this,e,t,n)}else $h(this,e,t,n)}setAttributes(e,t){for(const[n,r]of ws(e))this.setAttribute(n,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof _u){const n=t.getMinimalFlatRanges();for(const t of n)qh(this,e,null,t)}else $h(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=e=>{for(const t of e.getAttributeKeys())this.removeAttribute(t,e)};if(e instanceof _u)for(const n of e.getItems())t(n);else t(e)}move(e,t,n){if(this._assertWriterUsedCorrectly(),!(e instanceof _u))throw new Wn("writer-move-invalid-range",this);if(!e.isFlat)throw new Wn("writer-move-range-not-flat",this);const r=hu._createAt(t,n);if(r.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!Xh(e.root,r.root))throw new Wn("writer-move-different-document",this);const i=e.root.document?e.root.document.version:null,o=new Bh(e.start,e.end.offset-e.start.offset,r,i);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const t=(e instanceof _u?e:_u._createOn(e)).getMinimalFlatRanges().reverse();for(const e of t)this._addOperationForAffectedMarkers("move",e),Qh(e.start,e.end.offset-e.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,n=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof cu))throw new Wn("writer-merge-no-element-before",this);if(!(n instanceof cu))throw new Wn("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,n){return this.model.createPositionFromPath(e,t,n)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(e,t,n){return this.model.createSelection(e,t,n)}_mergeDetached(e){const t=e.nodeBefore,n=e.nodeAfter;this.move(_u._createIn(n),hu._createAt(t,"end")),this.remove(n)}_merge(e){const t=hu._createAt(e.nodeBefore,"end"),n=hu._createAt(e.nodeAfter,0),r=e.root.document.graveyard,i=new hu(r,[0]),o=e.root.document.version,a=new jh(n,e.nodeAfter.maxOffset,t,i,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof cu))throw new Wn("writer-rename-not-element-instance",this);const n=e.root.document?e.root.document.version:null,r=new Uh(hu._createBefore(e),e.name,t,n);this.batch.addOperation(r),this.model.applyOperation(r)}split(e,t){this._assertWriterUsedCorrectly();let n,r,i=e.parent;if(!i.parent)throw new Wn("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new Wn("writer-split-invalid-limit-element",this);do{const t=i.root.document?i.root.document.version:null,o=i.maxOffset-e.offset,a=Vh.getInsertionPosition(e),s=new Vh(e,o,a,null,t);this.batch.addOperation(s),this.model.applyOperation(s),n||r||(n=i,r=e.parent.nextSibling),i=(e=this.createPositionAfter(e.parent)).parent}while(i!==t);return{position:e,range:new _u(hu._createAt(n,"end"),hu._createAt(r,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new Wn("writer-wrap-range-not-flat",this);const n=t instanceof cu?t:new cu(t);if(n.childCount>0)throw new Wn("writer-wrap-element-not-empty",this);if(null!==n.parent)throw new Wn("writer-wrap-element-attached",this);this.insert(n,e.start);const r=new _u(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,hu._createAt(n,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new Wn("writer-unwrap-element-no-parent",this);this.move(_u._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||"boolean"!=typeof t.usingOperation)throw new Wn("writer-addmarker-no-usingoperation",this);const n=t.usingOperation,r=t.range,i=void 0!==t.affectsData&&t.affectsData;if(this.model.markers.has(e))throw new Wn("writer-addmarker-marker-exists",this);if(!r)throw new Wn("writer-addmarker-no-range",this);return n?(Kh(this,e,null,r,i),this.model.markers.get(e)):this.model.markers._set(e,r,n,i)}updateMarker(e,t){this._assertWriterUsedCorrectly();const n="string"==typeof e?e:e.name,r=this.model.markers.get(n);if(!r)throw new Wn("writer-updatemarker-marker-not-exists",this);if(!t)return void this.model.markers._refresh(r);const i="boolean"==typeof t.usingOperation,o="boolean"==typeof t.affectsData,a=o?t.affectsData:r.affectsData;if(!i&&!t.range&&!o)throw new Wn("writer-updatemarker-wrong-options",this);const s=r.getRange(),l=t.range?t.range:s;i&&t.usingOperation!==r.managedUsingOperations?t.usingOperation?Kh(this,n,null,l,a):(Kh(this,n,s,null,a),this.model.markers._set(n,l,void 0,a)):r.managedUsingOperations?Kh(this,n,s,l,a):this.model.markers._set(n,l,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t="string"==typeof e?e:e.name;if(!this.model.markers.has(t))throw new Wn("writer-removemarker-no-marker",this);const n=this.model.markers.get(t);if(!n.managedUsingOperations)return void this.model.markers._remove(t);Kh(this,t,n.getRange(),null,n.affectsData)}setSelection(e,t,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,n)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._setSelectionAttribute(e,t);else for(const[t,n]of ws(e))this._setSelectionAttribute(t,n)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),"string"==typeof e)this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=Nu._getStoreAttributeKey(e);this.setAttribute(r,t,n.anchor.parent)}n._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const n=Nu._getStoreAttributeKey(e);this.removeAttribute(n,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new Wn("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const n of this.model.markers){if(!n.managedUsingOperations)continue;const r=n.getRange();let i=!1;if("move"===e)i=t.containsPosition(r.start)||t.start.isEqual(r.start)||t.containsPosition(r.end)||t.end.isEqual(r.end);else{const e=t.nodeBefore,n=t.nodeAfter,o=r.start.parent==e&&r.start.isAtEnd,a=r.end.parent==n&&0==r.end.offset,s=r.end.nodeAfter==n,l=r.start.nodeAfter==n;i=o||a||s||l}i&&this.updateMarker(n.name,{range:r})}}}function qh(e,t,n,r){const i=e.model,o=i.document;let a,s,l,c=r.start;for(const e of r.getWalker({shallow:!0}))l=e.item.getAttribute(t),a&&s!=l&&(s!=n&&d(),c=a),a=e.nextPosition,s=l;function d(){const r=new _u(c,a),l=r.root.document?o.version:null,d=new Ph(r,t,s,n,l);e.batch.addOperation(d),i.applyOperation(d)}a instanceof hu&&a!=c&&s!=n&&d()}function $h(e,t,n,r){const i=e.model,o=i.document,a=r.getAttribute(t);let s,l;if(a!=n){if(r.root===r){const e=r.document?o.version:null;l=new zh(r,t,a,n,e)}else{s=new _u(hu._createBefore(r),e.createPositionAfter(r));const i=s.root.document?o.version:null;l=new Ph(s,t,a,n,i)}e.batch.addOperation(l),i.applyOperation(l)}}function Kh(e,t,n,r,i){const o=e.model,a=o.document,s=new Hh(t,n,r,o.markers,i,a.version);e.batch.addOperation(s),o.applyOperation(s)}function Qh(e,t,n,r){let i;if(e.root.document){const n=r.document,o=new hu(n.graveyard,[0]);i=new Bh(e,t,o,n.version)}else i=new Fh(e,t);n.addOperation(i),r.applyOperation(i)}function Xh(e,t){return e===t||e instanceof Gh&&t instanceof Gh}class Zh{constructor(e){this._markerCollection=e,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize);const t=_u._createOn(e);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getRange();this.bufferMarkerChange(e.name,t,t,e.affectsData)}this._cachedChanges=null}bufferOperation(e){switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const t of e.range.getItems({shallow:!0}))this._isInInsertedElement(t.parent)||this._markAttribute(t);break;case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const t=this._isInInsertedElement(e.sourcePosition.parent),n=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),n||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=_u._createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getRange();this.bufferMarkerChange(e.name,t,t,e.affectsData)}break}case"split":{const t=e.splitPosition.parent;this._isInInsertedElement(t)||this._markRemove(t,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break}case"merge":{const t=e.sourcePosition.parent;this._isInInsertedElement(t.parent)||this._markRemove(t.parent,t.startOffset,1);const n=e.graveyardPosition.parent;this._markInsert(n,e.graveyardPosition.offset,1);const r=e.targetPosition.parent;this._isInInsertedElement(r)||this._markInsert(r,e.targetPosition.offset,t.maxOffset);break}}this._cachedChanges=null}bufferMarkerChange(e,t,n,r){const i=this._changedMarkers.get(e);i?(i.newRange=n,i.affectsData=r,null==i.oldRange&&null==i.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:n,affectsData:r})}getMarkersToRemove(){const e=[];for(const[t,n]of this._changedMarkers)null!=n.oldRange&&e.push({name:t,range:n.oldRange});return e}getMarkersToAdd(){const e=[];for(const[t,n]of this._changedMarkers)null!=n.newRange&&e.push({name:t,range:n.newRange});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map((e=>({name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}})))}hasDataChanges(){for(const[,e]of this._changedMarkers)if(e.affectsData)return!0;return this._changesInElement.size>0}getChanges(e={includeChangesInGraveyard:!1}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const e of this._changesInElement.keys()){const n=this._changesInElement.get(e).sort(((e,t)=>e.offset===t.offset?e.type!=t.type?"remove"==e.type?-1:1:0:e.offset<t.offset?-1:1)),r=this._elementSnapshots.get(e),i=Jh(e.getChildren()),o=ep(r.length,n);let a=0,s=0;for(const n of o)if("i"===n)t.push(this._getInsertDiff(e,a,i[a].name)),a++;else if("r"===n)t.push(this._getRemoveDiff(e,a,r[s].name)),s++;else if("a"===n){const n=i[a].attributes,o=r[s].attributes;let l;if("$text"==i[a].name)l=new _u(hu._createAt(e,a),hu._createAt(e,a+1));else{const t=e.offsetToIndex(a);l=new _u(hu._createAt(e,a),hu._createAt(e.getChild(t),0))}t.push(...this._getAttributesDiff(l,o,n)),a++,s++}else a++,s++}t.sort(((e,t)=>e.position.root!=t.position.root?e.position.root.rootName<t.position.root.rootName?-1:1:e.position.isEqual(t.position)?e.changeCount-t.changeCount:e.position.isBefore(t.position)?-1:1));for(let e=1,n=0;e<t.length;e++){const r=t[n],i=t[e],o="remove"==r.type&&"remove"==i.type&&"$text"==r.name&&"$text"==i.name&&r.position.isEqual(i.position),a="insert"==r.type&&"insert"==i.type&&"$text"==r.name&&"$text"==i.name&&r.position.parent==i.position.parent&&r.position.offset+r.length==i.position.offset,s="attribute"==r.type&&"attribute"==i.type&&r.position.parent==i.position.parent&&r.range.isFlat&&i.range.isFlat&&r.position.offset+r.length==i.position.offset&&r.attributeKey==i.attributeKey&&r.attributeOldValue==i.attributeOldValue&&r.attributeNewValue==i.attributeNewValue;o||a||s?(r.length++,s&&(r.range.end=r.range.end.getShiftedBy(1)),t[e]=null):n=e}t=t.filter((e=>e));for(const e of t)delete e.changeCount,"attribute"==e.type&&(delete e.position,delete e.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t.slice(),this._cachedChanges=t.filter(tp),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(e,t,n){const r={type:"insert",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r)}_markRemove(e,t,n){const r={type:"remove",offset:t,howMany:n,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,n)}_markAttribute(e){const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const n=this._getChangesForElement(e);this._handleChange(t,n),n.push(t);for(let e=0;e<n.length;e++)n[e].howMany<1&&(n.splice(e,1),e--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,Jh(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const n of t){const r=e.offset+e.howMany,i=n.offset+n.howMany;if("insert"==e.type&&("insert"==n.type&&(e.offset<=n.offset?n.offset+=e.howMany:e.offset<i&&(n.howMany+=e.nodesToHandle,e.nodesToHandle=0)),"remove"==n.type&&e.offset<n.offset&&(n.offset+=e.howMany),"attribute"==n.type))if(e.offset<=n.offset)n.offset+=e.howMany;else if(e.offset<i){const i=n.howMany;n.howMany=e.offset-n.offset,t.unshift({type:"attribute",offset:r,howMany:i-n.howMany,count:this._changeCount++})}if("remove"==e.type){if("insert"==n.type)if(r<=n.offset)n.offset-=e.howMany;else if(r<=i)if(e.offset<n.offset){const t=r-n.offset;n.offset=e.offset,n.howMany-=t,e.nodesToHandle-=t}else n.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=n.offset)e.nodesToHandle-=n.howMany,n.howMany=0;else if(e.offset<i){const t=i-e.offset;n.howMany-=t,e.nodesToHandle-=t}if("remove"==n.type&&(r<=n.offset?n.offset-=e.howMany:e.offset<n.offset&&(e.nodesToHandle+=n.howMany,n.howMany=0)),"attribute"==n.type)if(r<=n.offset)n.offset-=e.howMany;else if(e.offset<n.offset){const t=r-n.offset;n.offset=e.offset,n.howMany-=t}else if(e.offset<i)if(r<=i){const r=n.howMany;n.howMany=e.offset-n.offset;const i=r-n.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:i,count:this._changeCount++})}else n.howMany-=i-e.offset}if("attribute"==e.type){if("insert"==n.type)if(e.offset<n.offset&&r>n.offset){if(r>i){const e={type:"attribute",offset:i,howMany:r-i,count:this._changeCount++};this._handleChange(e,t),t.push(e)}e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=n.offset&&e.offset<i&&(r>i?(e.nodesToHandle=r-i,e.offset=i):e.nodesToHandle=0);if("remove"==n.type&&e.offset<n.offset&&r>n.offset){const i={type:"attribute",offset:n.offset,howMany:r-n.offset,count:this._changeCount++};this._handleChange(i,t),t.push(i),e.nodesToHandle=n.offset-e.offset,e.howMany=e.nodesToHandle}"attribute"==n.type&&(e.offset>=n.offset&&r<=i?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=n.offset&&r>=i&&(n.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,n){return{type:"insert",position:hu._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,n){return{type:"remove",position:hu._createAt(e,t),name:n,length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,n){const r=[];n=new Map(n);for(const[i,o]of t){const t=n.has(i)?n.get(i):null;t!==o&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:i,attributeOldValue:o,attributeNewValue:t,changeCount:this._changeCount++}),n.delete(i)}for(const[t,i]of n)r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:t,attributeOldValue:null,attributeNewValue:i,changeCount:this._changeCount++});return r}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const n=this._changesInElement.get(t),r=e.startOffset;if(n)for(const e of n)if("insert"==e.type&&r>=e.offset&&r<e.offset+e.howMany)return!0;return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,n){const r=new _u(hu._createAt(e,t),hu._createAt(e,t+n));for(const e of r.getItems({shallow:!0}))e.is("element")&&(this._elementSnapshots.delete(e),this._changesInElement.delete(e),this._removeAllNestedChanges(e,0,e.maxOffset))}}function Jh(e){const t=[];for(const n of e)if(n.is("$text"))for(let e=0;e<n.data.length;e++)t.push({name:"$text",attributes:new Map(n.getAttributes())});else t.push({name:n.name,attributes:new Map(n.getAttributes())});return t}function ep(e,t){const n=[];let r=0,i=0;for(const e of t){if(e.offset>r){for(let t=0;t<e.offset-r;t++)n.push("e");i+=e.offset-r}if("insert"==e.type){for(let t=0;t<e.howMany;t++)n.push("i");r=e.offset+e.howMany}else if("remove"==e.type){for(let t=0;t<e.howMany;t++)n.push("r");r=e.offset,i+=e.howMany}else n.push(..."a".repeat(e.howMany).split("")),r=e.offset+e.howMany,i+=e.howMany}if(i<e)for(let t=0;t<e-i-r;t++)n.push("e");return n}function tp(e){const t=e.position&&"$graveyard"==e.position.root.rootName,n=e.range&&"$graveyard"==e.range.root.rootName;return!t&&!n}class np{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set}addOperation(e){this._operations.includes(e)||this._operations.push(e)}getOperations(e=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY){const n=[];for(const r of this._operations)r.baseVersion>=e&&r.baseVersion<t&&n.push(r);return n}getOperation(e){for(const t of this._operations)if(t.baseVersion==e)return t}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}}function rp(e,t){return!!(n=e.charAt(t-1))&&1==n.length&&/[\ud800-\udbff]/.test(n)&&function(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e)}(e.charAt(t));var n}function ip(e,t){return!!(n=e.charAt(t))&&1==n.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n);var n}const op="$graveyard";class ap{constructor(e){this.model=e,this.version=0,this.history=new np(this),this.selection=new Nu(this),this.roots=new ls({idProperty:"rootName"}),this.differ=new Zh(e.markers),this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",op),this.listenTo(e,"applyOperation",((e,t)=>{const n=t[0];if(n.isDocumentOperation&&n.baseVersion!==this.version)throw new Wn("model-document-applyoperation-wrong-version",this,{operation:n})}),{priority:"highest"}),this.listenTo(e,"applyOperation",((e,t)=>{const n=t[0];n.isDocumentOperation&&this.differ.bufferOperation(n)}),{priority:"high"}),this.listenTo(e,"applyOperation",((e,t)=>{const n=t[0];n.isDocumentOperation&&(this.version++,this.history.addOperation(n))}),{priority:"low"}),this.listenTo(this.selection,"change",(()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0})),this.listenTo(e.markers,"update",((e,t,n,r)=>{this.differ.bufferMarkerChange(t.name,n,r,t.affectsData),null===n&&t.on("change",((e,n)=>{this.differ.bufferMarkerChange(t.name,n,t.getRange(),t.affectsData)}))}))}get graveyard(){return this.getRoot(op)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new Wn("model-document-createroot-name-exists",this,{name:t});const n=new Gh(this,e,t);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,(e=>e.rootName)).filter((e=>e!=op))}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=bs(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,n=t.schema,r=t.createPositionFromPath(e,[0]);return n.getNearestSelectionRange(r)||t.createRange(r)}_validateSelectionRange(e){return sp(e.start)&&sp(e.end)}_callPostFixers(e){let t=!1;do{for(const n of this._postFixers)if(this.selection.refresh(),t=n(e),t)break}while(t)}}function sp(e){const t=e.textNode;if(t){const n=t.data,r=e.offset-t.startOffset;return!rp(n,r)&&!ip(n,r)}return!0}qi(ap,er);class lp{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){return this._markers.has(e)}get(e){return this._markers.get(e)||null}_set(e,t,n=!1,r=!1){const i=e instanceof cp?e.name:e;if(i.includes(","))throw new Wn("markercollection-incorrect-marker-name",this);const o=this._markers.get(i);if(o){const e=o.getRange();let a=!1;return e.isEqual(t)||(o._attachLiveRange(Ru.fromRange(t)),a=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,a=!0),"boolean"==typeof r&&r!=o.affectsData&&(o._affectsData=r,a=!0),a&&this.fire("update:"+i,o,e,t),o}const a=Ru.fromRange(t),s=new cp(i,a,n,r);return this._markers.set(i,s),this.fire("update:"+i,s,null,t),s}_remove(e){const t=e instanceof cp?e.name:e,n=this._markers.get(t);return!!n&&(this._markers.delete(t),this.fire("update:"+t,n,n.getRange(),null),this._destroyMarker(n),!0)}_refresh(e){const t=e instanceof cp?e.name:e,n=this._markers.get(t);if(!n)throw new Wn("markercollection-refresh-marker-not-exists",this);const r=n.getRange();this.fire("update:"+t,n,r,r,n.managedUsingOperations,n.affectsData)}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)null!==t.getRange().getIntersection(e)&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}qi(lp,er);class cp{constructor(e,t,n,r){this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=n,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new Wn("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new Wn("marker-destroyed",this);return this._affectsData}getStart(){if(!this._liveRange)throw new Wn("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new Wn("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new Wn("marker-destroyed",this);return this._liveRange.toRange()}is(e){return"marker"===e||"model:marker"===e}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}qi(cp,er);class dp extends Ch{get type(){return"noop"}clone(){return new dp(this.baseVersion)}getReversed(){return new dp(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}const up={};up[Ph.className]=Ph,up[Yh.className]=Yh,up[Hh.className]=Hh,up[Bh.className]=Bh,up[dp.className]=dp,up[Ch.className]=Ch,up[Uh.className]=Uh,up[zh.className]=zh,up[Vh.className]=Vh,up[jh.className]=jh;class hp extends hu{constructor(e,t,n="toNone"){if(super(e,t,n),!this.root.is("rootElement"))throw new Wn("model-liveposition-root-not-rootelement",e);pp.call(this)}detach(){this.stopListening()}is(e){return"livePosition"===e||"model:livePosition"===e||"position"==e||"model:position"===e}toPosition(){return new hu(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}function pp(){this.listenTo(this.root.document.model,"applyOperation",((e,t)=>{const n=t[0];n.isDocumentOperation&&fp.call(this,n)}),{priority:"low"})}function fp(e){const t=this.getTransformedByOperation(e);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}qi(hp,er);class mp{constructor(e,t,n){this.model=e,this.writer=t,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),n=this.writer.createPositionAfter(e);if(n.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new Wn("insertcontent-invalid-insertion-position",this);this.position=n,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this.nodeToSelect?_u._createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new _u(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e))return void this._handleObject(e);let t=this._checkAndAutoParagraphToAllowedPosition(e);t||(t=this._checkAndSplitToAllowedPosition(e),t)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this._handleDisallowedNode(e)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=hp.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new Wn("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this.nodeToSelect=e:this.nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=hp.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=hp.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof cu))return;if(!this._canMergeLeft(e))return;const t=hp._createBefore(e);t.stickiness="toNext";const n=hp.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=hp._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=hp._createAt(t.nodeBefore,"end","toNext")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof cu))return;if(!this._canMergeRight(e))return;const t=hp._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new Wn("insertcontent-invalid-insertion-position",this);this.position=hu._createAt(t.nodeBefore,"end");const n=hp.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=hp._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=hp._createAt(t.nodeBefore,0,"toPrevious")),this.position=n.toPosition(),n.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof cu&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof cu&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_tryAutoparagraphing(e){const t=this.writer.createElement("paragraph");this._getAllowedIn(t,this.position.parent)&&this.schema.checkChild(t,e)&&(t._appendChild(e),this._handleNode(t))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const t=this.writer.createElement("paragraph");return this.writer.insert(t,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=t,this.position=this.writer.createPositionAt(t,0),!0}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(e,this.position.parent);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){const e=this.position.parent;this.position=this.writer.createPositionBefore(e),e.isEmpty&&e.parent===t&&this.writer.remove(e)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const e=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=e,this.canMergeWith.add(this.position.nodeAfter)}}return!0}_getAllowedIn(e,t){return this.schema.checkChild(t,e)?t:t.parent?this._getAllowedIn(e,t.parent):null}}function _p(e,t,n={}){if(t.isCollapsed)return;const r=t.getFirstRange();if("$graveyard"==r.root.rootName)return;const i=e.schema;e.change((e=>{if(!n.doNotResetEntireContent&&function(e,t){const n=e.getLimitElement(t);if(!t.containsEntireContent(n))return!1;const r=t.getFirstRange();if(r.start.parent==r.end.parent)return!1;return e.checkChild(n,"paragraph")}(i,t))return void function(e,t){const n=e.model.schema.getLimitElement(t);e.remove(e.createRangeIn(n)),yp(e,e.createPositionAt(n,0),t)}(e,t);const[o,a]=function(e){const t=e.root.document.model,n=e.start;let r=e.end;if(t.hasContent(e,{ignoreMarkers:!0})){const n=function(e){const t=e.parent,n=t.root.document.model.schema,r=t.getAncestors({parentFirst:!0,includeSelf:!0});for(const e of r){if(n.isLimit(e))return null;if(n.isBlock(e))return e}}(r);if(n&&r.isTouching(t.createPositionAt(n,0))){const n=t.createSelection(e);t.modifySelection(n,{direction:"backward"}),r=n.getLastPosition()}}return[hp.fromPosition(n,"toPrevious"),hp.fromPosition(r,"toNext")]}(r);o.isTouching(a)||e.remove(e.createRange(o,a)),n.leaveUnmerged||(!function(e,t,n){const r=e.model;if(!vp(e.model.schema,t,n))return;const[i,o]=function(e,t){const n=e.getAncestors(),r=t.getAncestors();let i=0;for(;n[i]&&n[i]==r[i];)i++;return[n[i],r[i]]}(t,n);if(!i||!o)return;!r.hasContent(i,{ignoreMarkers:!0})&&r.hasContent(o,{ignoreMarkers:!0})?bp(e,t,n,i.parent):gp(e,t,n,i.parent)}(e,o,a),i.removeDisallowedAttributes(o.parent.getChildren(),e)),Ep(e,t,o),!n.doNotAutoparagraph&&function(e,t){const n=e.checkChild(t,"$text"),r=e.checkChild(t,"paragraph");return!n&&r}(i,o)&&yp(e,o,t),o.detach(),a.detach()}))}function gp(e,t,n,r){const i=t.parent,o=n.parent;if(i!=r&&o!=r){for(t=e.createPositionAfter(i),(n=e.createPositionBefore(o)).isEqual(t)||e.insert(o,t),e.merge(t);n.parent.isEmpty;){const t=n.parent;n=e.createPositionBefore(t),e.remove(t)}vp(e.model.schema,t,n)&&gp(e,t,n,r)}}function bp(e,t,n,r){const i=t.parent,o=n.parent;if(i!=r&&o!=r){for(t=e.createPositionAfter(i),(n=e.createPositionBefore(o)).isEqual(t)||e.insert(i,n);t.parent.isEmpty;){const n=t.parent;t=e.createPositionBefore(n),e.remove(n)}n=e.createPositionBefore(o),function(e,t){const n=t.nodeBefore,r=t.nodeAfter;n.name!=r.name&&e.rename(n,r.name);e.clearAttributes(n),e.setAttributes(Object.fromEntries(r.getAttributes()),n),e.merge(t)}(e,n),vp(e.model.schema,t,n)&&bp(e,t,n,r)}}function vp(e,t,n){const r=t.parent,i=n.parent;return r!=i&&(!e.isLimit(r)&&!e.isLimit(i)&&function(e,t,n){const r=new _u(e,t);for(const e of r.getWalker())if(n.isLimit(e.item))return!1;return!0}(t,n,e))}function yp(e,t,n){const r=e.createElement("paragraph");e.insert(r,t),Ep(e,n,e.createPositionAt(r,0))}function Ep(e,t,n){t instanceof Nu?e.setSelection(n):t.setTo(n)}const wp=' ,.?!:;"-()';function Sp(e,t){const{isForward:n,walker:r,unit:i,schema:o}=e,{type:a,item:s,nextPosition:l}=t;if("text"==a)return"word"===e.unit?function(e,t){let n=e.position.textNode;if(n){let r=e.position.offset-n.startOffset;for(;!kp(n.data,r,t)&&!Cp(n,r,t);){e.next();const i=t?e.position.nodeAfter:e.position.nodeBefore;if(i&&i.is("$text")){const r=i.data.charAt(t?0:i.data.length-1);wp.includes(r)||(e.next(),n=e.position.textNode)}r=e.position.offset-n.startOffset}}return e.position}(r,n):function(e,t){const n=e.position.textNode;if(n){const r=n.data;let i=e.position.offset-n.startOffset;for(;rp(r,i)||"character"==t&&ip(r,i);)e.next(),i=e.position.offset-n.startOffset}return e.position}(r,i);if(a==(n?"elementStart":"elementEnd")){if(o.isSelectable(s))return hu._createAt(s,n?"after":"before");if(o.checkChild(l,"$text"))return l}else{if(o.isLimit(s))return void r.skip((()=>!0));if(o.checkChild(l,"$text"))return l}}function Tp(e,t){const n=e.root,r=hu._createAt(n,t?"end":0);return t?new _u(e,r):new _u(r,e)}function kp(e,t,n){const r=t+(n?0:-1);return wp.includes(e.charAt(r))}function Cp(e,t,n){return t===(n?e.endOffset:0)}function xp(e,t){const n=[];Array.from(e.getItems({direction:"backward"})).map((e=>t.createRangeOn(e))).filter((t=>(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end)))).forEach((e=>{n.push(e.start.parent),t.remove(e)})),n.forEach((e=>{let n=e;for(;n.parent&&n.isEmpty;){const e=t.createRangeOn(n);n=n.parent,t.remove(e)}}))}function Ap(e){e.document.registerPostFixer((t=>function(e,t){const n=t.document.selection,r=t.schema,i=[];let o=!1;for(const e of n.getRanges()){const t=Rp(e,r);t&&!t.isEqual(e)?(i.push(t),o=!0):i.push(e)}o&&e.setSelection(function(e){const t=[];t.push(e.shift());for(const n of e){const e=t.pop();if(n.isEqual(e))t.push(e);else if(n.isIntersecting(e)){const r=e.start.isAfter(n.start)?n.start:e.start,i=e.end.isAfter(n.end)?e.end:n.end,o=new _u(r,i);t.push(o)}else t.push(e),t.push(n)}return t}(i),{backward:n.isBackward})}(t,e)))}function Rp(e,t){return e.isCollapsed?function(e,t){const n=e.start,r=t.getNearestSelectionRange(n);if(!r)return null;if(!r.isCollapsed)return r;const i=r.start;if(n.isEqual(i))return null;return new _u(i)}(e,t):function(e,t){const{start:n,end:r}=e,i=t.checkChild(n,"$text"),o=t.checkChild(r,"$text"),a=t.getLimitElement(n),s=t.getLimitElement(r);if(a===s){if(i&&o)return null;if(function(e,t,n){const r=e.nodeAfter&&!n.isLimit(e.nodeAfter)||n.checkChild(e,"$text"),i=t.nodeBefore&&!n.isLimit(t.nodeBefore)||n.checkChild(t,"$text");return r||i}(n,r,t)){const e=n.nodeAfter&&t.isSelectable(n.nodeAfter)?null:t.getNearestSelectionRange(n,"forward"),i=r.nodeBefore&&t.isSelectable(r.nodeBefore)?null:t.getNearestSelectionRange(r,"backward"),o=e?e.start:n,a=i?i.end:r;return new _u(o,a)}}const l=a&&!a.is("rootElement"),c=s&&!s.is("rootElement");if(l||c){const e=n.nodeAfter&&r.nodeBefore&&n.nodeAfter.parent===r.nodeBefore.parent,i=l&&(!e||!Dp(n.nodeAfter,t)),o=c&&(!e||!Dp(r.nodeBefore,t));let d=n,u=r;return i&&(d=hu._createBefore(Mp(a,t))),o&&(u=hu._createAfter(Mp(s,t))),new _u(d,u)}return null}(e,t)}function Mp(e,t){let n=e,r=n;for(;t.isLimit(r)&&r.parent;)n=r,r=r.parent;return n}function Dp(e,t){return e&&t.isSelectable(e)}class Op{constructor(){this.markers=new lp,this.document=new ap(this),this.schema=new oh,this._pendingChanges=[],this._currentWriter=null,["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach((e=>this.decorate(e))),this.on("applyOperation",((e,t)=>{t[0]._validate()}),{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$block",{allowIn:"$root",isBlock:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$clipboardHolder"}),this.schema.register("$documentFragment",{allowContentOf:"$root",isLimit:!0}),this.schema.extend("$text",{allowIn:"$documentFragment"}),this.schema.register("$marker"),this.schema.addChildCheck(((e,t)=>{if("$marker"===t.name)return!0})),Ap(this),this.document.registerPostFixer(Gu)}change(e){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new kh,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(e){Wn.rethrowUnexpectedError(e,this)}}enqueueChange(e,t){try{"string"==typeof e?e=new kh(e):"function"==typeof e&&(t=e,e=new kh),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(e){Wn.rethrowUnexpectedError(e,this)}}applyOperation(e){e._execute()}insertContent(e,t,n){return function(e,t,n,r){return e.change((i=>{let o;o=n?n instanceof Tu||n instanceof Nu?n:i.createSelection(n,r):e.document.selection,o.isCollapsed||e.deleteContent(o,{doNotAutoparagraph:!0});const a=new mp(e,i,o.anchor);let s;s=t.is("documentFragment")?t.getChildren():[t],a.handleNodes(s);const l=a.getSelectionRange();l&&(o instanceof Nu?i.setSelection(l):o.setTo(l));const c=a.getAffectedRange()||e.createRange(o.anchor);return a.destroy(),c}))}(this,e,t,n)}deleteContent(e,t){_p(this,e,t)}modifySelection(e,t){!function(e,t,n={}){const r=e.schema,i="backward"!=n.direction,o=n.unit?n.unit:"character",a=t.focus,s=new du({boundaries:Tp(a,i),singleCharacters:!0,direction:i?"forward":"backward"}),l={walker:s,schema:r,isForward:i,unit:o};let c;for(;c=s.next();){if(c.done)return;const n=Sp(l,c.value);if(n)return void(t instanceof Nu?e.change((e=>{e.setSelectionFocus(n)})):t.setFocus(n))}}(this,e,t)}getSelectedContent(e){return function(e,t){return e.change((e=>{const n=e.createDocumentFragment(),r=t.getFirstRange();if(!r||r.isCollapsed)return n;const i=r.start.root,o=r.start.getCommonPath(r.end),a=i.getNodeByPath(o);let s;s=r.start.parent==r.end.parent?r:e.createRange(e.createPositionAt(a,r.start.path[o.length]),e.createPositionAt(a,r.end.path[o.length]+1));const l=s.end.offset-s.start.offset;for(const t of s.getItems({shallow:!0}))t.is("$textProxy")?e.appendText(t.data,t.getAttributes(),n):e.append(e.cloneElement(t,!0),n);if(s!=r){const t=r._getTransformedByMove(s.start,e.createPositionAt(n,0),l)[0],i=e.createRange(e.createPositionAt(n,0),t.start);xp(e.createRange(t.end,e.createPositionAt(n,"end")),e),xp(i,e)}return n}))}(this,e)}hasContent(e,t={}){const n=e instanceof cu?_u._createIn(e):e;if(n.isCollapsed)return!1;const{ignoreWhitespaces:r=!1,ignoreMarkers:i=!1}=t;if(!i)for(const e of this.markers.getMarkersIntersectingRange(n))if(e.affectsData)return!0;for(const e of n.getItems())if(this.schema.isContent(e)){if(!e.is("$textProxy"))return!0;if(!r)return!0;if(-1!==e.data.search(/\S/))return!0}return!1}createPositionFromPath(e,t,n){return new hu(e,t,n)}createPositionAt(e,t){return hu._createAt(e,t)}createPositionAfter(e){return hu._createAfter(e)}createPositionBefore(e){return hu._createBefore(e)}createRange(e,t){return new _u(e,t)}createRangeIn(e){return _u._createIn(e)}createRangeOn(e){return _u._createOn(e)}createSelection(e,t,n){return new Tu(e,t,n)}createBatch(e){return new kh(e)}createOperationFromJSON(e){return class{static fromJSON(e,t){return up[e.__className].fromJSON(e,t)}}.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];for(this.fire("_beforeChanges");this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new Wh(this,t);const n=this._pendingChanges[0].callback(this._currentWriter);e.push(n),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return this.fire("_afterChanges"),e}}qi(Op,Ui);class Np extends Wd{constructor(e){super(),this.editor=e}set(e,t,n={}){if("string"==typeof t){const e=t;t=(t,n)=>{this.editor.execute(e),n()}}super.set(e,t,n)}}class Lp{constructor(e={}){this._context=e.context||new ms({language:e.language}),this._context._addEditor(this,!e.context);const t=Array.from(this.constructor.builtinPlugins||[]);this.config=new is(e,this.constructor.defaultConfig),this.config.define("plugins",t),this.config.define(this._context._getEditorConfig()),this.plugins=new cs(this,t,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this.commands=new nh,this.set("state","initializing"),this.once("ready",(()=>this.state="ready"),{priority:"high"}),this.once("destroy",(()=>this.state="destroyed"),{priority:"high"}),this.set("isReadOnly",!1),this.model=new Op;const n=new ol;this.data=new Eh(this.model,n),this.editing=new th(this.model,n),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new wh([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Np(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){const e=this.config,t=e.get("plugins"),n=e.get("removePlugins")||[],r=e.get("extraPlugins")||[],i=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(r),n,i)}destroy(){let e=Promise.resolve();return"initializing"==this.state&&(e=new Promise((e=>this.once("ready",e)))),e.then((()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()})).then((()=>this.plugins.destroy())).then((()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()})).then((()=>this._context._removeEditor(this)))}execute(...e){try{return this.commands.execute(...e)}catch(e){Wn.rethrowUnexpectedError(e,this)}}focus(){this.editing.view.focus()}}qi(Lp,Ui);class Ip{constructor(e){this.editor=e,this._components=new Map}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(Pp(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new Wn("componentfactory-item-missing",this,{name:e});return this._components.get(Pp(e)).callback(this.editor.locale)}has(e){return this._components.has(Pp(e))}}function Pp(e){return String(e).toLowerCase()}class Fp{constructor(e){this.editor=e,this.componentFactory=new Ip(e),this.focusTracker=new Gd,this._editableElementsMap=new Map,this.listenTo(e.editing.view.document,"layoutChanged",(()=>this.update()))}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null;this._editableElementsMap=new Map}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}}function Bp(e){if(!wr(e.updateSourceElement))throw new Wn("attachtoform-missing-elementapi-interface",e);const t=e.sourceElement;if(t&&"textarea"===t.tagName.toLowerCase()&&t.form){let n;const r=t.form,i=()=>e.updateSourceElement();wr(r.submit)&&(n=r.submit,r.submit=()=>{i(),n.apply(r)}),r.addEventListener("submit",i),e.on("destroy",(()=>{r.removeEventListener("submit",i),n&&(r.submit=n)}))}}qi(Fp,er);const Yp={setData(e){this.data.set(e)},getData(e){return this.data.get(e)}},Hp={updateSourceElement(){if(!this.sourceElement)throw new Wn("editor-missing-sourceelement",this);zd(this.sourceElement,this.data.get())}};function Up(e){const t=e.sourceElement;if(t){if(t.ckeditorInstance)throw new Wn("editor-source-element-already-used",e);t.ckeditorInstance=e,e.once("destroy",(()=>{delete t.ckeditorInstance}))}}class zp extends _s{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new ls({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if("string"!=typeof e)throw new Wn("pendingactions-add-invalid-message",this);const t=Object.create(Ui);return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const jp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Vp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Gp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Wp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',qp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>',$p='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',Kp='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>';function Qp({emitter:e,activator:t,callback:n,contextElements:r}){e.listenTo(document,"mousedown",((e,i)=>{if(!t())return;const o="function"==typeof i.composedPath?i.composedPath():[];for(const e of r)if(e.contains(i.target)||o.includes(e))return;n()}))}function Xp(e){e.set("_isCssTransitionsDisabled",!1),e.disableCssTransitions=()=>{e._isCssTransitionsDisabled=!0},e.enableCssTransitions=()=>{e._isCssTransitionsDisabled=!1},e.extendTemplate({attributes:{class:[e.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}function Zp({view:e}){e.listenTo(e.element,"submit",((t,n)=>{n.preventDefault(),e.fire("submit")}),{useCapture:!0})}class Jp extends ls{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",((e,t,n)=>{this._renderViewIntoCollectionParent(t,n)})),this.on("remove",((e,t)=>{t.element&&this._parentElement&&t.element.remove()})),this._parentElement=null}destroy(){this.map((e=>e.destroy()))}setParent(e){this._parentElement=e;for(const e of this)this._renderViewIntoCollectionParent(e)}delegate(...e){if(!e.length||!e.every((e=>"string"==typeof e)))throw new Wn("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const n of this)for(const r of e)n.delegate(r).to(t);this.on("add",((n,r)=>{for(const n of e)r.delegate(n).to(t)})),this.on("remove",((n,r)=>{for(const n of e)r.stopDelegating(n,t)}))}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}}r(9468);class ef{constructor(e){this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new ls,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",((t,n)=>{n.locale=e})),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=tf.bind(this,this)}createCollection(e){const t=new Jp(e);return this._viewCollections.add(t),t}registerChild(e){ss(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){ss(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new tf(e)}extendTemplate(e){tf.extend(this.template,e)}render(){if(this.isRendered)throw new Wn("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map((e=>e.destroy())),this.template&&this.template._revertData&&this.template.revert(this.element)}}qi(ef,Yc),qi(ef,Ui);class tf{constructor(e){Object.assign(this,hf(uf(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new Wn("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){yield*function*e(t){if(t.children)for(const n of t.children)bf(n)?yield n:vf(n)&&(yield*e(n))}(this)}static bind(e,t){return{to:(n,r)=>new rf({eventNameOrFunction:n,attribute:n,observable:e,emitter:t,callback:r}),if:(n,r,i)=>new of({observable:e,emitter:t,attribute:n,valueIfTrue:r,callback:i})}}static extend(e,t){if(e._isRendered)throw new Wn("template-extend-render",[this,e]);_f(e,hf(uf(t)))}_renderNode(e){let t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text,t)throw new Wn("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),af(this.text)?this._bindToObservable({schema:this.text,updater:lf(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){let t,n,r,i;if(!this.attributes)return;const o=e.node,a=e.revertData;for(t in this.attributes)if(r=o.getAttribute(t),n=this.attributes[t],a&&(a.attributes[t]=r),i=lr(n[0])&&n[0].ns?n[0].ns:null,af(n)){const s=i?n[0].value:n;a&&Ef(t)&&s.unshift(r),this._bindToObservable({schema:s,updater:cf(o,t,i),data:e})}else"style"==t&&"string"!=typeof n[0]?this._renderStyleAttribute(n[0],e):(a&&r&&Ef(t)&&n.unshift(r),n=n.map((e=>e&&e.value||e)).reduce(((e,t)=>e.concat(t)),[]).reduce(ff,""),gf(n)||o.setAttributeNS(i,t,n))}_renderStyleAttribute(e,t){const n=t.node;for(const r in e){const i=e[r];af(i)?this._bindToObservable({schema:[i],updater:df(n,r),data:t}):n.style[r]=i}}_renderElementChildren(e){const t=e.node,n=e.intoFragment?document.createDocumentFragment():t,r=e.isApplying;let i=0;for(const o of this.children)if(yf(o)){if(!r){o.setParent(t);for(const e of o)n.appendChild(e.element)}}else if(bf(o))r||(o.isRendered||o.render(),n.appendChild(o.element));else if(Sc(o))n.appendChild(o);else if(r){const t={children:[],bindings:[],attributes:{}};e.revertData.children.push(t),o._renderNode({node:n.childNodes[i++],isApplying:!0,revertData:t})}else n.appendChild(o.render());e.intoFragment&&t.appendChild(n)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const n=this.eventListeners[t].map((n=>{const[r,i]=t.split("@");return n.activateDomEventListener(r,i,e)}));e.revertData&&e.revertData.bindings.push(n)}}_bindToObservable({schema:e,updater:t,data:n}){const r=n.revertData;sf(e,t,n);const i=e.filter((e=>!gf(e))).filter((e=>e.observable)).map((r=>r.activateAttributeListener(e,t,n)));r&&r.bindings.push(i)}_revertTemplateFromNode(e,t){for(const e of t.bindings)for(const t of e)t();if(t.text)e.textContent=t.text;else{for(const n in t.attributes){const r=t.attributes[n];null===r?e.removeAttribute(n):e.setAttribute(n,r)}for(let n=0;n<t.children.length;++n)this._revertTemplateFromNode(e.childNodes[n],t.children[n])}}}qi(tf,er);class nf{constructor(e){Object.assign(this,e)}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,n){const r=()=>sf(e,t,n);return this.emitter.listenTo(this.observable,"change:"+this.attribute,r),()=>{this.emitter.stopListening(this.observable,"change:"+this.attribute,r)}}}class rf extends nf{activateDomEventListener(e,t,n){const r=(e,n)=>{t&&!n.target.matches(t)||("function"==typeof this.eventNameOrFunction?this.eventNameOrFunction(n):this.observable.fire(this.eventNameOrFunction,n))};return this.emitter.listenTo(n.node,e,r),()=>{this.emitter.stopListening(n.node,e,r)}}}class of extends nf{getValue(e){return!gf(super.getValue(e))&&(this.valueIfTrue||!0)}}function af(e){return!!e&&(e.value&&(e=e.value),Array.isArray(e)?e.some(af):e instanceof nf)}function sf(e,t,{node:n}){let r=function(e,t){return e.map((e=>e instanceof nf?e.getValue(t):e))}(e,n);r=1==e.length&&e[0]instanceof of?r[0]:r.reduce(ff,""),gf(r)?t.remove():t.set(r)}function lf(e){return{set(t){e.textContent=t},remove(){e.textContent=""}}}function cf(e,t,n){return{set(r){e.setAttributeNS(n,t,r)},remove(){e.removeAttributeNS(n,t)}}}function df(e,t){return{set(n){e.style[t]=n},remove(){e.style[t]=null}}}function uf(e){return ns(e,(e=>{if(e&&(e instanceof nf||vf(e)||bf(e)||yf(e)))return e}))}function hf(e){if("string"==typeof e?e=function(e){return{text:[e]}}(e):e.text&&function(e){e.text=ds(e.text)}(e),e.on&&(e.eventListeners=function(e){for(const t in e)pf(e,t);return e}(e.on),delete e.on),!e.text){e.attributes&&function(e){for(const t in e)e[t].value&&(e[t].value=ds(e[t].value)),pf(e,t)}(e.attributes);const t=[];if(e.children)if(yf(e.children))t.push(e.children);else for(const n of e.children)vf(n)||bf(n)||Sc(n)?t.push(n):t.push(new tf(n));e.children=t}return e}function pf(e,t){e[t]=ds(e[t])}function ff(e,t){return gf(t)?e:gf(e)?t:`${e} ${t}`}function mf(e,t){for(const n in t)e[n]?e[n].push(...t[n]):e[n]=t[n]}function _f(e,t){if(t.attributes&&(e.attributes||(e.attributes={}),mf(e.attributes,t.attributes)),t.eventListeners&&(e.eventListeners||(e.eventListeners={}),mf(e.eventListeners,t.eventListeners)),t.text&&e.text.push(...t.text),t.children&&t.children.length){if(e.children.length!=t.children.length)throw new Wn("ui-template-extend-children-mismatch",e);let n=0;for(const r of t.children)_f(e.children[n++],r)}}function gf(e){return!e&&0!==e}function bf(e){return e instanceof ef}function vf(e){return e instanceof tf}function yf(e){return e instanceof Jp}function Ef(e){return"class"==e||"style"==e}const wf=function(e){return"string"==typeof e||!ui(e)&&oi(e)&&"[object String]"==Er(e)};class Sf extends Jp{constructor(e,t=[]){super(t),this.locale=e}attachToDom(){this._bodyCollectionContainer=new tf({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=function(e,t,n={},r=[]){const i=n&&n.xmlns,o=i?e.createElementNS(i,t):e.createElement(t);for(const e in n)o.setAttribute(e,n[e]);!wf(r)&&ss(r)||(r=[r]);for(let t of r)wf(t)&&(t=e.createTextNode(t)),o.appendChild(t);return o}(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&0==e.childElementCount&&e.remove()}}r(3171);class Tf extends ef{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon"],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",(()=>{this._updateXMLContent(),this._colorFillPaths()})),this.on("change:fillColor",(()=>{this._colorFillPaths()}))}_updateXMLContent(){if(this.content){const e=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");for(t&&(this.viewBox=t),this.element.innerHTML="";e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach((e=>{e.style.fill=this.fillColor}))}}r(1326);class kf extends ef{constructor(e){super(e),this.set("text",""),this.set("position","s");const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip",t.to("position",(e=>"ck-tooltip_"+e)),t.if("text","ck-hidden",(e=>!e.trim()))]},children:[{tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]})}}r(5057);class Cf extends ef{constructor(e){super(e);const t=this.bindTemplate,n=Vn();this.set("class"),this.set("labelStyle"),this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(n),this.iconView=new Tf,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this)),this.setTemplate({tag:"button",attributes:{class:["ck","ck-button",t.to("class"),t.if("isEnabled","ck-disabled",(e=>!e)),t.if("isVisible","ck-hidden",(e=>!e)),t.to("isOn",(e=>e?"ck-on":"ck-off")),t.if("withText","ck-button_with-text"),t.if("withKeystroke","ck-button_with-keystroke")],type:t.to("type",(e=>e||"button")),tabindex:t.to("tabindex"),"aria-labelledby":`ck-editor__aria-label_${n}`,"aria-disabled":t.if("isEnabled",!0,(e=>!e)),"aria-pressed":t.to("isOn",(e=>!!this.isToggleable&&String(e)))},children:this.children,on:{mousedown:t.to((e=>{e.preventDefault()})),click:t.to((e=>{this.isEnabled?this.fire("execute"):e.preventDefault()}))}})}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView),this.withKeystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}_createTooltipView(){const e=new kf;return e.bind("text").to(this,"_tooltipString"),e.bind("position").to(this,"tooltipPosition"),e}_createLabelView(e){const t=new ef,n=this.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:n.to("labelStyle"),id:`ck-editor__aria-label_${e}`},children:[{text:this.bindTemplate.to("label")}]}),t}_createKeystrokeView(){const e=new ef;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",(e=>jl(e)))}]}),e}_getTooltipString(e,t,n){return e?"string"==typeof e?e:(n&&(n=jl(n)),e instanceof Function?e(t,n):`${t}${n?` (${n})`:""}`):""}}r(6859);class xf extends Cf{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new ef;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}function Af(e){return"string"==typeof e?{model:e,label:e,hasBorder:!1,view:{name:"span",styles:{color:e}}}:{model:e.color,label:e.label||e.color,hasBorder:void 0!==e.hasBorder&&e.hasBorder,view:{name:"span",styles:{color:`${e.color}`}}}}class Rf extends Cf{constructor(e){super(e);const t=this.bindTemplate;this.set("color"),this.set("hasBorder"),this.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',this.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-table__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class Mf{constructor(e){if(Object.assign(this,e),e.actions&&e.keystrokeHandler)for(const t in e.actions){let n=e.actions[t];"string"==typeof n&&(n=[n]);for(const r of n)e.keystrokeHandler.set(r,((e,n)=>{this[t](),n()}))}}get first(){return this.focusables.find(Df)||null}get last(){return this.focusables.filter(Df).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let e=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find(((t,n)=>{const r=t.element===this.focusTracker.focusedElement;return r&&(e=n),r})),e)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(e){const t=this.current,n=this.focusables.length;if(!n)return null;if(null===t)return this[1===e?"first":"last"];let r=(t+n+e)%n;do{const t=this.focusables.get(r);if(Df(t))return t;r=(r+n+e)%n}while(r!==t);return null}}function Df(e){return!(!e.focus||"none"==Ac.window.getComputedStyle(e.element).display)}r(2501);class Of extends ef{constructor(e,t){super(e);const n=t&&t.colorDefinitions||[],r={};t&&t.columns&&(r.gridTemplateColumns=`repeat( ${t.columns}, 1fr)`),this.set("selectedColor"),this.items=this.createCollection(),this.focusTracker=new Gd,this.keystrokes=new Wd,this._focusCycler=new Mf({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}}),this.items.on("add",((e,t)=>{t.isOn=t.color===this.selectedColor})),n.forEach((e=>{const t=new Rf;t.set({color:e.color,label:e.label,tooltip:!0,hasBorder:e.options.hasBorder}),t.on("execute",(()=>{this.fire("execute",{value:e.color,hasBorder:e.options.hasBorder,label:e.label})})),this.items.add(t)})),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:r}}),this.on("change:selectedColor",((e,t,n)=>{for(const e of this.items)e.isOn=e.color===n}))}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",((e,t)=>{this.focusTracker.add(t.element)})),this.items.on("remove",((e,t)=>{this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element)}}const Nf='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class Lf extends Cf{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Tf;return e.content=Nf,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}r(691);class If extends ef{constructor(e){super(e);const t=this.bindTemplate;this.set("icon"),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke"),this.set("label"),this.set("tabindex",-1),this.set("tooltip"),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(),this.arrowView=this._createArrowView(),this.keystrokes=new Wd,this.focusTracker=new Gd,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",t.if("isVisible","ck-hidden",(e=>!e)),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",((e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())})),this.keystrokes.set("arrowleft",((e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())}))}focus(){this.actionView.focus()}_createActionView(){const e=new Cf;return e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const e=new Cf,t=e.bindTemplate;return e.icon=Nf,e.extendTemplate({attributes:{class:"ck-splitbutton__arrow","aria-haspopup":!0,"aria-expanded":t.to("isOn",(e=>String(e)))}}),e.bind("isEnabled").to(this),e.delegate("execute").to(this,"open"),e}}class Pf extends ef{constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",(e=>`ck-dropdown__panel_${e}`)),t.if("isVisible","ck-dropdown__panel-visible")]},children:this.children,on:{selectstart:t.to((e=>e.preventDefault()))}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const e=this.children.last;"function"==typeof e.focusLast?e.focusLast():e.focus()}}}r(5295);function Ff({element:e,target:t,positions:n,limiter:r,fitInViewport:i}){wr(t)&&(t=t()),wr(r)&&(r=r());const o=function(e){return e&&e.parentNode?e.offsetParent===Ac.document.body?null:e.offsetParent:null}(e),a=new Fd(e),s=new Fd(t);let l,c;if(r||i){const e=function(e,t){const{elementRect:n,viewportRect:r}=t,i=n.getArea(),o=function(e,{targetRect:t,elementRect:n,limiterRect:r,viewportRect:i}){const o=[],a=n.getArea();for(const s of e){const e=Bf(s,t,n);if(!e)continue;const[l,c]=e;let d=0,u=0;if(r)if(i){const e=r.getIntersection(i);e&&(d=e.getIntersectionArea(c))}else d=r.getIntersectionArea(c);i&&(u=i.getIntersectionArea(c));const h={positionName:l,positionRect:c,limiterIntersectArea:d,viewportIntersectArea:u};if(d===a)return[h];o.push(h)}return o}(e,t);if(r){const e=Yf(o.filter((({viewportIntersectArea:e})=>e===i)),i);if(e)return e}return Yf(o,i)}(n,{targetRect:s,elementRect:a,limiterRect:r&&new Fd(r).getVisible(),viewportRect:i&&new Fd(Ac.window)});[c,l]=e||Bf(n[0],s,a)}else[c,l]=Bf(n[0],s,a);let d=Hf(l);return o&&(d=function({left:e,top:t},n){const r=Hf(new Fd(n)),i=Id(n);return e-=r.left,t-=r.top,e+=n.scrollLeft,t+=n.scrollTop,e-=i.left,t-=i.top,{left:e,top:t}}(d,o)),{left:d.left,top:d.top,name:c}}function Bf(e,t,n){const r=e(t,n);if(!r)return null;const{left:i,top:o,name:a}=r;return[a,n.clone().moveTo(i,o)]}function Yf(e,t){let n,r,i=0;for(const{positionName:o,positionRect:a,limiterIntersectArea:s,viewportIntersectArea:l}of e){if(s===t)return[o,a];const e=l**2+s**2;e>i&&(i=e,n=a,r=o)}return n?[r,n]:null}function Hf({left:e,top:t}){const{scrollX:n,scrollY:r}=Ac.window;return{left:e+n,top:t+r}}class Uf extends ef{constructor(e,t,n){super(e);const r=this.bindTemplate;this.buttonView=t,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class"),this.set("id"),this.set("panelPosition","auto"),this.keystrokes=new Wd,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",(e=>!e))],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[t,n]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"]}})}render(){super.render(),this.listenTo(this.buttonView,"open",(()=>{this.isOpen=!this.isOpen})),this.panelView.bind("isVisible").to(this,"isOpen"),this.on("change:isOpen",(()=>{this.isOpen&&("auto"===this.panelPosition?this.panelView.position=Uf._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions}).name:this.panelView.position=this.panelPosition)})),this.keystrokes.listenTo(this.element);const e=(e,t)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,t())};this.keystrokes.set("arrowdown",((e,t)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,t())})),this.keystrokes.set("arrowright",((e,t)=>{this.isOpen&&t()})),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:n,southWest:r,northEast:i,northWest:o,southMiddleEast:a,southMiddleWest:s,northMiddleEast:l,northMiddleWest:c}=Uf.defaultPanelPositions;return"rtl"!==this.locale.uiLanguageDirection?[n,r,a,s,e,i,o,l,c,t]:[r,n,s,a,e,o,i,c,l,t]}}Uf.defaultPanelPositions={south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-3*(t.width-e.width)/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-3*(t.width-e.width)/4,name:"nmw"})},Uf._getOptimalPosition=Ff;class zf extends ef{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class jf extends ef{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function Vf(e){return Array.isArray(e)?{items:e,removeItems:[]}:e?Object.assign({items:[],removeItems:[]},e):{items:[],removeItems:[]}}r(4569);class Gf extends ef{constructor(e,t){super(e);const n=this.bindTemplate,r=this.t;this.options=t||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Gd,this.keystrokes=new Wd,this.set("class"),this.set("isCompact",!1),this.itemsView=new Wf(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection(),this._focusCycler=new Mf({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}});const i=["ck","ck-toolbar",n.to("class"),n.if("isCompact","ck-toolbar_compact")];var o;this.options.shouldGroupWhenFull&&this.options.isFloating&&i.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:i,role:"toolbar","aria-label":n.to("ariaLabel"),style:{maxWidth:n.to("maxWidth")}},children:this.children,on:{mousedown:(o=this,o.bindTemplate.to((e=>{e.target===o.element&&e.preventDefault()})))}}),this._behavior=this.options.shouldGroupWhenFull?new $f(this):new qf(this)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",((e,t)=>{this.focusTracker.add(t.element)})),this.items.on("remove",((e,t)=>{this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t){const n=Vf(e),r=n.items.filter(((e,r,i)=>"|"===e||-1===n.removeItems.indexOf(e)&&("-"===e?!this.options.shouldGroupWhenFull||(qn("toolbarview-line-break-ignored-when-grouping-items",i),!1):!!t.has(e)||(qn("toolbarview-item-unavailable",{name:e}),!1)))),i=this._cleanSeparators(r).map((e=>"|"===e?new zf:"-"===e?new jf:t.create(e)));this.items.addMany(i)}_cleanSeparators(e){const t=e=>"-"!==e&&"|"!==e,n=e.length,r=e.findIndex(t),i=n-e.slice().reverse().findIndex(t);return e.slice(r,i).filter(((e,n,r)=>{if(t(e))return!0;return!(n>0&&r[n-1]===e)}))}}class Wf extends ef{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class qf{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using((e=>e)),e.focusables.bindTo(e.items).using((e=>e)),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class $f{constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,e.itemsView.children.bindTo(this.ungroupedItems).using((e=>e)),this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this)),this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this)),e.children.on("add",this._updateFocusCycleableItems.bind(this)),e.children.on("remove",this._updateFocusCycleableItems.bind(this)),e.items.on("change",((e,t)=>{const n=t.index;for(const e of t.removed)n>=this.ungroupedItems.length?this.groupedItems.remove(e):this.ungroupedItems.remove(e);for(let e=n;e<n+t.added.length;e++){const r=t.added[e-n];e>this.ungroupedItems.length?this.groupedItems.add(r,e-this.ungroupedItems.length):this.ungroupedItems.add(r,e)}this._updateGrouping()})),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!this.viewElement.offsetParent)return void(this.shouldUpdateGroupingOnNextResize=!0);const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,n=new Fd(e.lastChild),r=new Fd(e);if(!this.cachedPadding){const n=Ac.window.getComputedStyle(e),r="ltr"===t?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(n[r])}return"ltr"===t?n.right>r.right-this.cachedPadding:n.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Hd(this.viewElement,(t=>{e&&e===t.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)})),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",(()=>{this._updateGrouping()}))}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new zf),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,n=Zf(e);return n.class="ck-toolbar__grouped-dropdown",n.panelPosition="ltr"===e.uiLanguageDirection?"sw":"se",Jf(n,[]),n.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:"rtl"===e.uiLanguageDirection?"se":"sw",icon:Kp}),n.toolbarView.items.bindTo(this.groupedItems).using((e=>e)),n}_updateFocusCycleableItems(){this.viewFocusables.clear(),this.ungroupedItems.map((e=>{this.viewFocusables.add(e)})),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}r(7740);class Kf extends ef{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new Gd,this.keystrokes=new Wd,this._focusCycler=new Mf({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"]},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",((e,t)=>{this.focusTracker.add(t.element)})),this.items.on("remove",((e,t)=>{this.focusTracker.remove(t.element)})),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class Qf extends ef{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item"]},children:this.children})}focus(){this.children.first.focus()}}class Xf extends ef{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}r(8480),r(6305);function Zf(e,t=Lf){const n=new t(e),r=new Pf(e),i=new Uf(e,n,r);return n.bind("isEnabled").to(i),n instanceof Lf?n.bind("isOn").to(i,"isOpen"):n.arrowView.bind("isOn").to(i,"isOpen"),function(e){(function(e){e.on("render",(()=>{Qp({emitter:e,activator:()=>e.isOpen,callback:()=>{e.isOpen=!1},contextElements:[e.element]})}))})(e),function(e){e.on("execute",(t=>{t.source instanceof xf||(e.isOpen=!1)}))}(e),function(e){e.keystrokes.set("arrowdown",((t,n)=>{e.isOpen&&(e.panelView.focus(),n())})),e.keystrokes.set("arrowup",((t,n)=>{e.isOpen&&(e.panelView.focusLast(),n())}))}(e)}(i),i}function Jf(e,t){const n=e.locale,r=n.t,i=e.toolbarView=new Gf(n);i.set("ariaLabel",r("Dropdown toolbar")),e.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.map((e=>i.items.add(e))),e.panelView.children.add(i),i.items.delegate("execute").to(e)}function em(e,t){const n=e.locale,r=e.listView=new Kf(n);r.items.bindTo(t).using((({type:e,model:t})=>{if("separator"===e)return new Xf(n);if("button"===e||"switchbutton"===e){const r=new Qf(n);let i;return i="button"===e?new Cf(n):new xf(n),i.bind(...Object.keys(t)).to(t),i.delegate("execute").to(r),r.children.add(i),r}})),e.panelView.children.add(r),r.items.delegate("execute").to(e)}r(1405);class tm extends ef{constructor(e){super(e),this.body=new Sf(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}r(6249);class nm extends ef{constructor(e){super(e),this.set("text"),this.set("for"),this.id=`ck-editor__label_${Vn()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}class rm extends tm{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new nm;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}class im extends ef{constructor(e,t,n){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.name=null,this.set("isFocused",!1),this._editableElement=n,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",(()=>this._updateIsFocusedClasses())),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}_updateIsFocusedClasses(){const e=this._editingView;function t(t){e.change((n=>{const r=e.document.getRoot(t.name);n.addClass(t.isFocused?"ck-focused":"ck-blurred",r),n.removeClass(t.isFocused?"ck-blurred":"ck-focused",r)}))}e.isRenderingInProgress?function n(r){e.once("change:isRenderingInProgress",((e,i,o)=>{o?n(r):t(r)}))}(this):t(this)}}class om extends im{constructor(e,t,n){super(e,t,n),this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView,t=this.t;e.change((n=>{const r=e.document.getRoot(this.name);n.setAttribute("aria-label",t("Rich Text Editor, %0",this.name),r)}))}}r(8830);r(7445);class am extends ef{constructor(e){super(e),this.set("value"),this.set("id"),this.set("placeholder"),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById"),this.focusTracker=new Gd,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{type:"text",class:["ck","ck-input","ck-input-text",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to("input"),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",((e,t,n)=>{this._setDomElementValue(n),this._updateIsEmpty()}))}select(){this.element.select()}focus(){this.element.focus()}_updateIsEmpty(){this.isEmpty=!this.element.value}_setDomElementValue(e){this.element.value=e||0===e?e:""}}r(4413);class sm extends ef{constructor(e,t){super(e);const n=`ck-labeled-field-view-${Vn()}`,r=`ck-labeled-field-view-status-${Vn()}`;this.fieldView=t(this,n,r),this.set("label"),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class"),this.set("placeholder"),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(r),this.bind("_statusText").to(this,"errorText",this,"infoText",((e,t)=>e||t));const i=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",i.to("class"),i.if("isEnabled","ck-disabled",(e=>!e)),i.if("isEmpty","ck-labeled-field-view_empty"),i.if("isFocused","ck-labeled-field-view_focused"),i.if("placeholder","ck-labeled-field-view_placeholder"),i.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:[this.fieldView,this.labelView]},this.statusView]})}_createLabelView(e){const t=new nm(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new ef(this.locale),n=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",(e=>!e))],id:e,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),t}focus(){this.fieldView.focus()}}function lm(e,t,n){const r=new am(e.locale);return r.set({id:t,ariaDescribedById:n}),r.bind("isReadOnly").to(e,"isEnabled",(e=>!e)),r.bind("hasError").to(e,"errorText",(e=>!!e)),r.on("input",(()=>{e.errorText=null})),e.bind("isEmpty","isFocused","placeholder").to(r),r}class cm extends _s{static get pluginName(){return"Notification"}init(){this.on("show:warning",((e,t)=>{window.alert(t.message)}),{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=`show:${e.type}`+(e.namespace?`:${e.namespace}`:"");this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class dm{constructor(e,t){t&&Li(this,t),e&&this.set(e)}}qi(dm,Ui);r(3229);const um=jd("px"),hm=Ac.document.body;class pm extends ef{constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class"),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",(e=>`ck-balloon-panel_${e}`)),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",um),left:t.to("left",um)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=pm.defaultPositions,n=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:hm,fitInViewport:!0},e),r=pm._getOptimalPosition(n),i=parseInt(r.left),o=parseInt(r.top),a=r.name;Object.assign(this,{top:o,left:i,position:a})}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=fm(e.target),n=e.limiter?fm(e.limiter):hm;this.listenTo(Ac.document,"scroll",((r,i)=>{const o=i.target,a=t&&o.contains(t),s=n&&o.contains(n);!a&&!s&&t&&n||this.attachTo(e)}),{useCapture:!0}),this.listenTo(Ac.window,"resize",(()=>{this.attachTo(e)}))}_stopPinning(){this.stopListening(Ac.document,"scroll"),this.stopListening(Ac.window,"resize")}}function fm(e){return rs(e)?e:Ld(e)?e.commonAncestorContainer:"function"==typeof e?fm(e()):null}function mm(e,t){return e.top-t.height-pm.arrowVerticalOffset}function _m(e){return e.bottom+pm.arrowVerticalOffset}pm.arrowHorizontalOffset=25,pm.arrowVerticalOffset=10,pm._getOptimalPosition=Ff,pm.defaultPositions={northWestArrowSouthWest:(e,t)=>({top:mm(e,t),left:e.left-pm.arrowHorizontalOffset,name:"arrow_sw"}),northWestArrowSouthMiddleWest:(e,t)=>({top:mm(e,t),left:e.left-.25*t.width-pm.arrowHorizontalOffset,name:"arrow_smw"}),northWestArrowSouth:(e,t)=>({top:mm(e,t),left:e.left-t.width/2,name:"arrow_s"}),northWestArrowSouthMiddleEast:(e,t)=>({top:mm(e,t),left:e.left-.75*t.width+pm.arrowHorizontalOffset,name:"arrow_sme"}),northWestArrowSouthEast:(e,t)=>({top:mm(e,t),left:e.left-t.width+pm.arrowHorizontalOffset,name:"arrow_se"}),northArrowSouthWest:(e,t)=>({top:mm(e,t),left:e.left+e.width/2-pm.arrowHorizontalOffset,name:"arrow_sw"}),northArrowSouthMiddleWest:(e,t)=>({top:mm(e,t),left:e.left+e.width/2-.25*t.width-pm.arrowHorizontalOffset,name:"arrow_smw"}),northArrowSouth:(e,t)=>({top:mm(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"}),northArrowSouthMiddleEast:(e,t)=>({top:mm(e,t),left:e.left+e.width/2-.75*t.width+pm.arrowHorizontalOffset,name:"arrow_sme"}),northArrowSouthEast:(e,t)=>({top:mm(e,t),left:e.left+e.width/2-t.width+pm.arrowHorizontalOffset,name:"arrow_se"}),northEastArrowSouthWest:(e,t)=>({top:mm(e,t),left:e.right-pm.arrowHorizontalOffset,name:"arrow_sw"}),northEastArrowSouthMiddleWest:(e,t)=>({top:mm(e,t),left:e.right-.25*t.width-pm.arrowHorizontalOffset,name:"arrow_smw"}),northEastArrowSouth:(e,t)=>({top:mm(e,t),left:e.right-t.width/2,name:"arrow_s"}),northEastArrowSouthMiddleEast:(e,t)=>({top:mm(e,t),left:e.right-.75*t.width+pm.arrowHorizontalOffset,name:"arrow_sme"}),northEastArrowSouthEast:(e,t)=>({top:mm(e,t),left:e.right-t.width+pm.arrowHorizontalOffset,name:"arrow_se"}),southWestArrowNorthWest:(e,t)=>({top:_m(e),left:e.left-pm.arrowHorizontalOffset,name:"arrow_nw"}),southWestArrowNorthMiddleWest:(e,t)=>({top:_m(e),left:e.left-.25*t.width-pm.arrowHorizontalOffset,name:"arrow_nmw"}),southWestArrowNorth:(e,t)=>({top:_m(e),left:e.left-t.width/2,name:"arrow_n"}),southWestArrowNorthMiddleEast:(e,t)=>({top:_m(e),left:e.left-.75*t.width+pm.arrowHorizontalOffset,name:"arrow_nme"}),southWestArrowNorthEast:(e,t)=>({top:_m(e),left:e.left-t.width+pm.arrowHorizontalOffset,name:"arrow_ne"}),southArrowNorthWest:(e,t)=>({top:_m(e),left:e.left+e.width/2-pm.arrowHorizontalOffset,name:"arrow_nw"}),southArrowNorthMiddleWest:(e,t)=>({top:_m(e),left:e.left+e.width/2-.25*t.width-pm.arrowHorizontalOffset,name:"arrow_nmw"}),southArrowNorth:(e,t)=>({top:_m(e),left:e.left+e.width/2-t.width/2,name:"arrow_n"}),southArrowNorthMiddleEast:(e,t)=>({top:_m(e),left:e.left+e.width/2-.75*t.width+pm.arrowHorizontalOffset,name:"arrow_nme"}),southArrowNorthEast:(e,t)=>({top:_m(e),left:e.left+e.width/2-t.width+pm.arrowHorizontalOffset,name:"arrow_ne"}),southEastArrowNorthWest:(e,t)=>({top:_m(e),left:e.right-pm.arrowHorizontalOffset,name:"arrow_nw"}),southEastArrowNorthMiddleWest:(e,t)=>({top:_m(e),left:e.right-.25*t.width-pm.arrowHorizontalOffset,name:"arrow_nmw"}),southEastArrowNorth:(e,t)=>({top:_m(e),left:e.right-t.width/2,name:"arrow_n"}),southEastArrowNorthMiddleEast:(e,t)=>({top:_m(e),left:e.right-.75*t.width+pm.arrowHorizontalOffset,name:"arrow_nme"}),southEastArrowNorthEast:(e,t)=>({top:_m(e),left:e.right-t.width+pm.arrowHorizontalOffset,name:"arrow_ne"})};r(9040),r(3133);const gm=jd("px");class bm extends $i{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this.positionLimiter=()=>{const e=this.editor.editing.view,t=e.document.selection.editableElement;return t?e.domConverter.mapViewToDom(t.root):null},this.set("visibleView",null),this.view=new pm(e.locale),e.ui.view.body.add(this.view),e.ui.focusTracker.add(this.view.element),this._viewToStack=new Map,this._idToStack=new Map,this.set("_numberOfStacks",0),this.set("_singleViewMode",!1),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this.hasView(e.view))throw new Wn("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t))return this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!e.singleViewMode||this.showStack(t));const n=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),n.set(e.view,e),this._viewToStack.set(e.view,n),n===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new Wn("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(1===t.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),1===t.size?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new Wn("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find((t=>t[1]===e))[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new vm(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",((e,t)=>!t&&e>1)),e.on("change:isNavigationVisible",(()=>this.updatePosition()),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",((e,n)=>{if(n<2)return"";const r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[r,n])})),e.buttonNextView.on("execute",(()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()})),e.buttonPrevView.on("execute",(()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()})),e}_createFakePanelsView(){const e=new ym(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",((e,t)=>!t&&e>=2?Math.min(e-1,2):0)),e.listenTo(this.view,"change:top",(()=>e.updatePosition())),e.listenTo(this.view,"change:left",(()=>e.updatePosition())),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:n=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=n,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e}}class vm extends ef{constructor(e){super(e);const t=e.t,n=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Gd,this.buttonPrevView=this._createButtonView(t("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),this.buttonNextView=this._createButtonView(t("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",n.to("isNavigationVisible",(e=>e?"":"ck-hidden"))]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:n.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const n=new Cf(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n}}class ym extends ef{constructor(e,t){super(e);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",n.to("numberOfPanels",(e=>e?"":"ck-hidden"))],style:{top:n.to("top",gm),left:n.to("left",gm),width:n.to("width",gm),height:n.to("height",gm)}},children:this.content}),this.on("change:numberOfPanels",((e,t,n,r)=>{n>r?this._addPanels(n-r):this._removePanels(r-n),this.updatePosition()}))}_addPanels(e){for(;e--;){const e=new ef;e.setTemplate({tag:"div"}),this.content.add(e),this.registerChild(e)}}_removePanels(e){for(;e--;){const e=this.content.last;this.content.remove(e),this.deregisterChild(e),e.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:n,height:r}=new Fd(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:n,height:r})}}}r(5969);const Em=jd("px");class wm extends ef{constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheLimiter",!1),this.set("_hasViewportTopOffset",!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new tf({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",(e=>e?"block":"none")),height:t.to("isSticky",(e=>e?Em(this._panelRect.height):null))}}}).render(),this._contentPanel=new tf({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",(e=>e?Em(this._contentPanelPlaceholder.getBoundingClientRect().width):null)),top:t.to("_hasViewportTopOffset",(e=>e?Em(this.viewportTopOffset):null)),bottom:t.to("_isStickyToTheLimiter",(e=>e?Em(this.limiterBottomOffset):null)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo(Ac.window,"scroll",(()=>{this._checkIfShouldBeSticky()})),this.listenTo(this,"change:isActive",(()=>{this._checkIfShouldBeSticky()}))}_checkIfShouldBeSticky(){const e=this._panelRect=this._contentPanel.getBoundingClientRect();let t;this.limiterElement?(t=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&t.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<t.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Em(-Ac.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}function Sm({origin:e,originKeystrokeHandler:t,originFocusTracker:n,toolbar:r,beforeFocus:i,afterBlur:o}){n.add(r.element),t.set("Alt+F10",((e,t)=>{n.isFocused&&!r.focusTracker.isFocused&&(i&&i(),r.focus(),t())})),r.keystrokes.set("Esc",((t,n)=>{r.focusTracker.isFocused&&(e.focus(),o&&o(),n())}))}const Tm=jd("px");class km extends $i{static get pluginName(){return"BalloonToolbar"}static get requires(){return[bm]}constructor(e){super(e),this._balloonConfig=Vf(e.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new Gd,e.ui.once("ready",(()=>{this.focusTracker.add(e.ui.getEditableElement()),this.focusTracker.add(this.toolbarView.element)})),this._resizeObserver=null,this._balloon=e.plugins.get(bm),this._fireSelectionChangeDebounced=Cd((()=>this.fire("_selectionChangeDebounced")),200),this.decorate("show")}init(){const e=this.editor,t=e.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",((e,t,n)=>{const r=this._balloon.visibleView===this.toolbarView;!n&&r?this.hide():n&&this.show()})),this.listenTo(t,"change:range",((e,n)=>{(n.directChange||t.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()})),this.listenTo(this,"_selectionChangeDebounced",(()=>{this.editor.editing.view.document.isFocused&&this.show()})),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(e,"ready",(()=>{const t=e.ui.view.editable.element;this._resizeObserver=new Hd(t,(()=>{this.toolbarView.maxWidth=Tm(.9*new Fd(t).width)}))})),this.listenTo(this.toolbarView,"groupedItemsUpdate",(()=>{this._updatePosition()}))}afterInit(){const e=this.editor.ui.componentFactory;this.toolbarView.fillFromConfig(this._balloonConfig,e)}_createToolbarView(){const e=!this._balloonConfig.shouldNotGroupWhenFull,t=new Gf(this.editor.locale,{shouldGroupWhenFull:e,isFloating:!0});return t.render(),t}show(){const e=this.editor,t=e.model.document.selection,n=e.model.schema;this._balloon.hasView(this.toolbarView)||t.isCollapsed||function(e,t){if(1===e.rangeCount)return!1;return[...e.getRanges()].every((e=>{const n=e.getContainedElement();return n&&t.isSelectable(n)}))}(t,n)||Array.from(this.toolbarView.items).every((e=>void 0!==e.isEnabled&&!e.isEnabled))||(this.listenTo(this.editor.ui,"update",(()=>{this._updatePosition()})),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document,n=t.selection,r=t.selection.isBackward;return{target:()=>{const t=r?n.getFirstRange():n.getLastRange(),i=Fd.getDomRangeRects(e.domConverter.viewRangeToDom(t));return r?i[0]:(i.length>1&&0===i[i.length-1].width&&i.pop(),i[i.length-1])},positions:Cm(r)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}}function Cm(e){const t=pm.defaultPositions;return e?[t.northWestArrowSouth,t.northWestArrowSouthWest,t.northWestArrowSouthEast,t.northWestArrowSouthMiddleEast,t.northWestArrowSouthMiddleWest,t.southWestArrowNorth,t.southWestArrowNorthWest,t.southWestArrowNorthEast,t.southWestArrowNorthMiddleWest,t.southWestArrowNorthMiddleEast]:[t.southEastArrowNorth,t.southEastArrowNorthEast,t.southEastArrowNorthWest,t.southEastArrowNorthMiddleEast,t.southEastArrowNorthMiddleWest,t.northEastArrowSouth,t.northEastArrowSouthEast,t.northEastArrowSouthWest,t.northEastArrowSouthMiddleEast,t.northEastArrowSouthMiddleWest]}r(5428);jd("px");jd("px");r(2203);const xm=new WeakMap;function Am(e){const{view:t,element:n,text:r,isDirectHost:i=!0,keepOnFocus:o=!1}=e,a=t.document;xm.has(a)||(xm.set(a,new Map),a.registerPostFixer((e=>Mm(a,e)))),xm.get(a).set(n,{text:r,isDirectHost:i,keepOnFocus:o,hostElement:i?n:null}),t.change((e=>Mm(a,e)))}function Rm(e,t){return!!t.hasClass("ck-placeholder")&&(e.removeClass("ck-placeholder",t),!0)}function Mm(e,t){const n=xm.get(e),r=[];let i=!1;for(const[e,o]of n)o.isDirectHost&&(r.push(e),Dm(t,e,o)&&(i=!0));for(const[e,o]of n){if(o.isDirectHost)continue;const n=Om(e);n&&(r.includes(n)||(o.hostElement=n,Dm(t,e,o)&&(i=!0)))}return i}function Dm(e,t,n){const{text:r,isDirectHost:i,hostElement:o}=n;let a=!1;o.getAttribute("data-placeholder")!==r&&(e.setAttribute("data-placeholder",r,o),a=!0);return(i||1==t.childCount)&&function(e,t){if(!e.isAttached())return!1;if(Array.from(e.getChildren()).some((e=>!e.is("uiElement"))))return!1;if(t)return!0;const n=e.document;if(!n.isFocused)return!0;const r=n.selection.anchor;return r&&r.parent!==e}(o,n.keepOnFocus)?function(e,t){return!t.hasClass("ck-placeholder")&&(e.addClass("ck-placeholder",t),!0)}(e,o)&&(a=!0):Rm(e,o)&&(a=!0),a}function Om(e){if(e.childCount){const t=e.getChild(0);if(t.is("element")&&!t.is("uiElement"))return t}return null}const Nm=new Map;function Lm(e,t,n){let r=Nm.get(e);r||(r=new Map,Nm.set(e,r)),r.set(t,n)}function Im(e){return[e]}function Pm(e,t,n={}){const r=function(e,t){const n=Nm.get(e);return n&&n.has(t)?n.get(t):Im}(e.constructor,t.constructor);try{return r(e=e.clone(),t,n)}catch(e){throw e}}function Fm(e,t,n){e=e.slice(),t=t.slice();const r=new Bm(n.document,n.useRelations,n.forceWeakRemove);r.setOriginalOperations(e),r.setOriginalOperations(t);const i=r.originalOperations;if(0==e.length||0==t.length)return{operationsA:e,operationsB:t,originalOperations:i};const o=new WeakMap;for(const t of e)o.set(t,0);const a={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length};let s=0;for(;s<e.length;){const n=e[s],i=o.get(n);if(i==t.length){s++;continue}const a=t[i],l=Pm(n,a,r.getContext(n,a,!0)),c=Pm(a,n,r.getContext(a,n,!1));r.updateRelation(n,a),r.setOriginalOperations(l,n),r.setOriginalOperations(c,a);for(const e of l)o.set(e,i+c.length);e.splice(s,1,...l),t.splice(i,1,...c)}if(n.padWithNoOps){const n=e.length-a.originalOperationsACount,r=t.length-a.originalOperationsBCount;Hm(e,r-n),Hm(t,n-r)}return Ym(e,a.nextBaseVersionB),Ym(t,a.nextBaseVersionA),{operationsA:e,operationsB:t,originalOperations:i}}class Bm{constructor(e,t,n=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!n,this._relations=new Map}setOriginalOperations(e,t=null){const n=t?this.originalOperations.get(t):null;for(const t of e)this.originalOperations.set(t,n||t)}updateRelation(e,t){switch(e.constructor){case Bh:switch(t.constructor){case jh:e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter");break;case Bh:e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter")}break;case Vh:switch(t.constructor){case jh:e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");break;case Bh:if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const n=_u._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){const r=n.end.offset-e.splitPosition.offset,i=e.splitPosition.offset-n.start.offset;this._setRelation(e,t,{howMany:r,offset:i})}}}break;case jh:switch(t.constructor){case jh:e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement");break;case Vh:e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource")}break;case Hh:{const n=e.newRange;if(!n)return;switch(t.constructor){case Bh:{const r=_u._createFromPositionAndShift(t.sourcePosition,t.howMany),i=r.containsPosition(n.start)||r.start.isEqual(n.start),o=r.containsPosition(n.end)||r.end.isEqual(n.end);!i&&!o||r.containsRange(n)||this._setRelation(e,t,{side:i?"left":"right",path:i?n.start.path.slice():n.end.path.slice()});break}case jh:{const r=n.start.isEqual(t.targetPosition),i=n.start.isEqual(t.deletionPosition),o=n.end.isEqual(t.deletionPosition),a=n.end.isEqual(t.sourcePosition);(r||i||o||a)&&this._setRelation(e,t,{wasInLeftElement:r,wasStartBeforeMergedElement:i,wasEndBeforeMergedElement:o,wasInRightElement:a});break}}break}}}getContext(e,t,n){return{aIsStrong:n,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const n=this.originalOperations.get(t),r=this._history.getUndoneOperation(n);if(!r)return null;const i=this.originalOperations.get(e),o=this._relations.get(i);return o&&o.get(r)||null}_setRelation(e,t,n){const r=this.originalOperations.get(e),i=this.originalOperations.get(t);let o=this._relations.get(r);o||(o=new Map,this._relations.set(r,o)),o.set(i,n)}}function Ym(e,t){for(const n of e)n.baseVersion=t++}function Hm(e,t){for(let n=0;n<t;n++)e.push(new dp(0))}function Um(e,t,n){const r=e.nodes.getNode(0).getAttribute(t);if(r==n)return null;const i=new _u(e.position,e.position.getShiftedBy(e.howMany));return new Ph(i,t,r,n,0)}function zm(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function jm(e,t){const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=new Bh(i.start,i.end.offset-i.start.offset,t,0);n.push(o);for(let t=r+1;t<e.length;t++)e[t]=e[t]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];t=t._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return n}Lm(Ph,Ph,((e,t,n)=>{if(e.key===t.key&&e.range.start.hasSameParentAs(t.range.start)){const r=e.range.getDifference(t.range).map((t=>new Ph(t,e.key,e.oldValue,e.newValue,0))),i=e.range.getIntersection(t.range);return i&&n.aIsStrong&&r.push(new Ph(i,t.key,t.newValue,e.newValue,0)),0==r.length?[new dp(0)]:r}return[e]})),Lm(Ph,Yh,((e,t)=>{if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){const n=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map((t=>new Ph(t,e.key,e.oldValue,e.newValue,e.baseVersion)));if(t.shouldReceiveAttributes){const r=Um(t,e.key,e.oldValue);r&&n.unshift(r)}return n}return e.range=e.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[e]})),Lm(Ph,jh,((e,t)=>{const n=[];e.range.start.hasSameParentAs(t.deletionPosition)&&(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition))&&n.push(_u._createFromPositionAndShift(t.graveyardPosition,1));const r=e.range._getTransformedByMergeOperation(t);return r.isCollapsed||n.push(r),n.map((t=>new Ph(t,e.key,e.oldValue,e.newValue,e.baseVersion)))})),Lm(Ph,Bh,((e,t)=>function(e,t){const n=_u._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=null,i=[];n.containsRange(e,!0)?r=e:e.start.hasSameParentAs(n.start)?(i=e.getDifference(n),r=e.getIntersection(n)):i=[e];const o=[];for(let e of i){e=e._getTransformedByDeletion(t.sourcePosition,t.howMany);const n=t.getMovedRangeStart(),r=e.start.hasSameParentAs(n);e=e._getTransformedByInsertion(n,t.howMany,r),o.push(...e)}r&&o.push(r._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]);return o}(e.range,t).map((t=>new Ph(t,e.key,e.oldValue,e.newValue,e.baseVersion))))),Lm(Ph,Vh,((e,t)=>{if(e.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.range.end.offset++,[e];if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){const n=e.clone();return n.range=new _u(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),e.range.end=t.splitPosition.clone(),e.range.end.stickiness="toPrevious",[e,n]}return e.range=e.range._getTransformedBySplitOperation(t),[e]})),Lm(Yh,Ph,((e,t)=>{const n=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){const r=Um(e,t.key,t.newValue);r&&n.push(r)}return n})),Lm(Yh,Yh,((e,t,n)=>(e.position.isEqual(t.position)&&n.aIsStrong||(e.position=e.position._getTransformedByInsertOperation(t)),[e]))),Lm(Yh,Bh,((e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e]))),Lm(Yh,Vh,((e,t)=>(e.position=e.position._getTransformedBySplitOperation(t),[e]))),Lm(Yh,jh,((e,t)=>(e.position=e.position._getTransformedByMergeOperation(t),[e]))),Lm(Hh,Yh,((e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0]),e.newRange&&(e.newRange=e.newRange._getTransformedByInsertOperation(t)[0]),[e]))),Lm(Hh,Hh,((e,t,n)=>{if(e.name==t.name){if(!n.aIsStrong)return[new dp(0)];e.oldRange=t.newRange?t.newRange.clone():null}return[e]})),Lm(Hh,jh,((e,t)=>(e.oldRange&&(e.oldRange=e.oldRange._getTransformedByMergeOperation(t)),e.newRange&&(e.newRange=e.newRange._getTransformedByMergeOperation(t)),[e]))),Lm(Hh,Bh,((e,t,n)=>{if(e.oldRange&&(e.oldRange=_u._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))),e.newRange){if(n.abRelation){const r=_u._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if("left"==n.abRelation.side&&t.targetPosition.isEqual(e.newRange.start))return e.newRange.start.path=n.abRelation.path,e.newRange.end=r.end,[e];if("right"==n.abRelation.side&&t.targetPosition.isEqual(e.newRange.end))return e.newRange.start=r.start,e.newRange.end.path=n.abRelation.path,[e]}e.newRange=_u._createFromRanges(e.newRange._getTransformedByMoveOperation(t))}return[e]})),Lm(Hh,Vh,((e,t,n)=>{if(e.oldRange&&(e.oldRange=e.oldRange._getTransformedBySplitOperation(t)),e.newRange){if(n.abRelation){const r=e.newRange._getTransformedBySplitOperation(t);return e.newRange.start.isEqual(t.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?e.newRange.start=hu._createAt(t.insertionPosition):e.newRange.start.isEqual(t.splitPosition)&&!n.abRelation.wasInLeftElement&&(e.newRange.start=hu._createAt(t.moveTargetPosition)),e.newRange.end.isEqual(t.splitPosition)&&n.abRelation.wasInRightElement?e.newRange.end=hu._createAt(t.moveTargetPosition):e.newRange.end.isEqual(t.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?e.newRange.end=hu._createAt(t.insertionPosition):e.newRange.end=r.end,[e]}e.newRange=e.newRange._getTransformedBySplitOperation(t)}return[e]})),Lm(jh,Yh,((e,t)=>(e.sourcePosition.hasSameParentAs(t.position)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t),e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t),[e]))),Lm(jh,jh,((e,t,n)=>{if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(n.bWasUndone){const n=t.graveyardPosition.path.slice();return n.push(0),e.sourcePosition=new hu(t.graveyardPosition.root,n),e.howMany=0,[e]}return[new dp(0)]}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!n.bWasUndone&&"splitAtSource"!=n.abRelation){const r="$graveyard"==e.targetPosition.root.rootName,i="$graveyard"==t.targetPosition.root.rootName,o=r&&!i;if(i&&!r||!o&&n.aIsStrong){const n=t.targetPosition._getTransformedByMergeOperation(t),r=e.targetPosition._getTransformedByMergeOperation(t);return[new Bh(n,e.howMany,r,0)]}return[new dp(0)]}return e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),e.graveyardPosition.isEqual(t.graveyardPosition)&&n.aIsStrong||(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]})),Lm(jh,Bh,((e,t,n)=>{const r=_u._createFromPositionAndShift(t.sourcePosition,t.howMany);return"remove"==t.type&&!n.bWasUndone&&!n.forceWeakRemove&&e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition)?[new dp(0)]:(e.sourcePosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.sourcePosition.hasSameParentAs(t.sourcePosition)&&(e.howMany-=t.howMany),e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t),e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t),e.graveyardPosition.isEqual(t.targetPosition)||(e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)),[e])})),Lm(jh,Vh,((e,t,n)=>{if(t.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),e.deletionPosition.isEqual(t.graveyardPosition)&&(e.howMany=t.howMany)),e.targetPosition.isEqual(t.splitPosition)){const r=0!=t.howMany,i=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(r||i||"mergeTargetNotMoved"==n.abRelation)return e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),[e]}if(e.sourcePosition.isEqual(t.splitPosition)){if("mergeSourceNotMoved"==n.abRelation)return e.howMany=0,e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e];if("mergeSameElement"==n.abRelation||e.sourcePosition.offset>0)return e.sourcePosition=t.moveTargetPosition.clone(),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]}return e.sourcePosition.hasSameParentAs(t.splitPosition)&&(e.howMany=t.splitPosition.offset),e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t),e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t),[e]})),Lm(Bh,Yh,((e,t)=>{const n=_u._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByInsertOperation(t,!1)[0];return e.sourcePosition=n.start,e.howMany=n.end.offset-n.start.offset,e.targetPosition.isEqual(t.position)||(e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t)),[e]})),Lm(Bh,Bh,((e,t,n)=>{const r=_u._createFromPositionAndShift(e.sourcePosition,e.howMany),i=_u._createFromPositionAndShift(t.sourcePosition,t.howMany);let o,a=n.aIsStrong,s=!n.aIsStrong;if("insertBefore"==n.abRelation||"insertAfter"==n.baRelation?s=!0:"insertAfter"!=n.abRelation&&"insertBefore"!=n.baRelation||(s=!1),o=e.targetPosition.isEqual(t.targetPosition)&&s?e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),zm(e,t)&&zm(t,e))return[t.getReversed()];if(r.containsPosition(t.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),jm([r],o);if(i.containsPosition(e.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.end=r.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),jm([r],o);const l=gs(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if("prefix"==l||"extension"==l)return r.start=r.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),r.end=r.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),jm([r],o);"remove"!=e.type||"remove"==t.type||n.aWasUndone||n.forceWeakRemove?"remove"==e.type||"remove"!=t.type||n.bWasUndone||n.forceWeakRemove||(a=!1):a=!0;const c=[],d=r.getDifference(i);for(const e of d){e.start=e.start._getTransformedByDeletion(t.sourcePosition,t.howMany),e.end=e.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const n="same"==gs(e.start.getParentPath(),t.getMovedRangeStart().getParentPath()),r=e._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,n);c.push(...r)}const u=r.getIntersection(i);return null!==u&&a&&(u.start=u.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),u.end=u.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===c.length?c.push(u):1==c.length?i.start.isBefore(r.start)||i.start.isEqual(r.start)?c.unshift(u):c.push(u):c.splice(1,0,u)),0===c.length?[new dp(e.baseVersion)]:jm(c,o)})),Lm(Bh,Vh,((e,t,n)=>{let r=e.targetPosition.clone();e.targetPosition.isEqual(t.insertionPosition)&&t.graveyardPosition&&"moveTargetAfter"!=n.abRelation||(r=e.targetPosition._getTransformedBySplitOperation(t));const i=_u._createFromPositionAndShift(e.sourcePosition,e.howMany);if(i.end.isEqual(t.insertionPosition))return t.graveyardPosition||e.howMany++,e.targetPosition=r,[e];if(i.start.hasSameParentAs(t.splitPosition)&&i.containsPosition(t.splitPosition)){let e=new _u(t.splitPosition,i.end);e=e._getTransformedBySplitOperation(t);return jm([new _u(i.start,t.splitPosition),e],r)}e.targetPosition.isEqual(t.splitPosition)&&"insertAtSource"==n.abRelation&&(r=t.moveTargetPosition),e.targetPosition.isEqual(t.insertionPosition)&&"insertBetween"==n.abRelation&&(r=e.targetPosition);const o=[i._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const r=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);e.howMany>1&&r&&!n.aWasUndone&&o.push(_u._createFromPositionAndShift(t.insertionPosition,1))}return jm(o,r)})),Lm(Bh,jh,((e,t,n)=>{const r=_u._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.sourcePosition))if("remove"!=e.type||n.forceWeakRemove){if(1==e.howMany)return n.bWasUndone?(e.sourcePosition=t.graveyardPosition.clone(),e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]):[new dp(0)]}else if(!n.aWasUndone){const n=[];let r=t.graveyardPosition.clone(),i=t.targetPosition._getTransformedByMergeOperation(t);e.howMany>1&&(n.push(new Bh(e.sourcePosition,e.howMany-1,e.targetPosition,0)),r=r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1),i=i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1));const o=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition),a=new Bh(r,1,o,0),s=a.getMovedRangeStart().path.slice();s.push(0);const l=new hu(a.targetPosition.root,s);i=i._getTransformedByMove(r,o,1);const c=new Bh(i,t.howMany,l,0);return n.push(a),n.push(c),n}const i=_u._createFromPositionAndShift(e.sourcePosition,e.howMany)._getTransformedByMergeOperation(t);return e.sourcePosition=i.start,e.howMany=i.end.offset-i.start.offset,e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t),[e]})),Lm(Uh,Yh,((e,t)=>(e.position=e.position._getTransformedByInsertOperation(t),[e]))),Lm(Uh,jh,((e,t)=>e.position.isEqual(t.deletionPosition)?(e.position=t.graveyardPosition.clone(),e.position.stickiness="toNext",[e]):(e.position=e.position._getTransformedByMergeOperation(t),[e]))),Lm(Uh,Bh,((e,t)=>(e.position=e.position._getTransformedByMoveOperation(t),[e]))),Lm(Uh,Uh,((e,t,n)=>{if(e.position.isEqual(t.position)){if(!n.aIsStrong)return[new dp(0)];e.oldName=t.newName}return[e]})),Lm(Uh,Vh,((e,t)=>{if("same"==gs(e.position.path,t.splitPosition.getParentPath())&&!t.graveyardPosition){const t=new Uh(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,t]}return e.position=e.position._getTransformedBySplitOperation(t),[e]})),Lm(zh,zh,((e,t,n)=>{if(e.root===t.root&&e.key===t.key){if(!n.aIsStrong||e.newValue===t.newValue)return[new dp(0)];e.oldValue=t.newValue}return[e]})),Lm(Vh,Yh,((e,t)=>(e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t),e.insertionPosition=e.insertionPosition._getTransformedByInsertOperation(t),[e]))),Lm(Vh,jh,((e,t,n)=>{if(!e.graveyardPosition&&!n.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){const n=t.graveyardPosition.path.slice();n.push(0);const r=new hu(t.graveyardPosition.root,n),i=Vh.getInsertionPosition(new hu(t.graveyardPosition.root,n)),o=new Vh(r,0,i,null,0);return e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Vh.getInsertionPosition(e.splitPosition),e.graveyardPosition=o.insertionPosition.clone(),e.graveyardPosition.stickiness="toNext",[o,e]}return e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)&&e.howMany--,e.splitPosition.hasSameParentAs(t.targetPosition)&&(e.howMany+=t.howMany),e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t),e.insertionPosition=Vh.getInsertionPosition(e.splitPosition),e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t)),[e]})),Lm(Vh,Bh,((e,t,n)=>{const r=_u._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){const i=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);if(!n.bWasUndone&&i){const n=e.splitPosition._getTransformedByMoveOperation(t),r=e.graveyardPosition._getTransformedByMoveOperation(t),i=r.path.slice();i.push(0);const o=new hu(r.root,i);return[new Bh(n,e.howMany,o,0)]}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t)}const i=e.splitPosition.isEqual(t.targetPosition);if(i&&("insertAtSource"==n.baRelation||"splitBefore"==n.abRelation))return e.howMany+=t.howMany,e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),e.insertionPosition=Vh.getInsertionPosition(e.splitPosition),[e];if(i&&n.abRelation&&n.abRelation.howMany){const{howMany:t,offset:r}=n.abRelation;return e.howMany+=t,e.splitPosition=e.splitPosition.getShiftedBy(r),[e]}if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.splitPosition)){const n=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset);return e.howMany-=n,e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany),e.splitPosition=t.sourcePosition.clone(),e.insertionPosition=Vh.getInsertionPosition(e.splitPosition),[e]}return t.sourcePosition.isEqual(t.targetPosition)||(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset&&(e.howMany-=t.howMany),e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset&&(e.howMany+=t.howMany)),e.splitPosition.stickiness="toNone",e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t),e.splitPosition.stickiness="toNext",e.graveyardPosition?e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t):e.insertionPosition=Vh.getInsertionPosition(e.splitPosition),[e]})),Lm(Vh,Vh,((e,t,n)=>{if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition)return[new dp(0)];if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition))return[new dp(0)];if("splitBefore"==n.abRelation)return e.howMany=0,e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t),[e]}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){const r="$graveyard"==e.splitPosition.root.rootName,i="$graveyard"==t.splitPosition.root.rootName,o=r&&!i;if(i&&!r||!o&&n.aIsStrong){const n=[];return t.howMany&&n.push(new Bh(t.moveTargetPosition,t.howMany,t.splitPosition,0)),e.howMany&&n.push(new Bh(e.splitPosition,e.howMany,e.moveTargetPosition,0)),n}return[new dp(0)]}if(e.graveyardPosition&&(e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t)),e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==n.abRelation)return e.howMany++,[e];if(t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==n.baRelation){const n=t.insertionPosition.path.slice();n.push(0);const r=new hu(t.insertionPosition.root,n);return[e,new Bh(e.insertionPosition,1,r,0)]}return e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset&&(e.howMany-=t.howMany),e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t),e.insertionPosition=Vh.getInsertionPosition(e.splitPosition),[e]}));class Vm extends hd{constructor(e){super(e),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}class Gm extends hd{constructor(e){super(e),this.domEventType=["mousedown","mouseup"]}onDomEvent(e){this.fire(e.type,e)}}class Wm{constructor(e){this.document=e}createDocumentFragment(e){return new Ql(this.document,e)}createElement(e,t,n){return new ll(this.document,e,t,n)}createText(e){return new ys(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,n){return n._insertChild(e,t)}removeChildren(e,t,n){return n._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const n=e.parent;if(n){const r=n.getChildIndex(e);return this.removeChildren(r,1,n),this.insertChild(r,t,n),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const n=t.getChildIndex(e);this.remove(e),this.insertChild(n,e.getChildren(),t)}}rename(e,t){const n=new ll(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,n)?n:null}setAttribute(e,t,n){n._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,n){oo(e)&&void 0===n&&(n=t),n._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,n){n._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return _l._createAt(e,t)}createPositionAfter(e){return _l._createAfter(e)}createPositionBefore(e){return _l._createBefore(e)}createRange(e,t){return new gl(e,t)}createRangeOn(e){return gl._createOn(e)}createRangeIn(e){return gl._createIn(e)}createSelection(e,t,n){return new yl(e,t,n)}}const qm=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,$m=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,Km=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Qm=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,Xm=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Zm=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function Jm(e){return e.startsWith("#")?qm.test(e):e.startsWith("rgb")?$m.test(e)||Km.test(e):e.startsWith("hsl")?Qm.test(e)||Xm.test(e):Zm.has(e.toLowerCase())}const e_=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;const t_=/^[+-]?[0-9]*([.][0-9]+)?%$/;const n_=["repeat-x","repeat-y","repeat","space","round","no-repeat"];const r_=["center","top","bottom","left","right"];function i_(e){return r_.includes(e)}const o_=["fixed","scroll","local"];function a_(e){return o_.includes(e)}const s_=/^url\(/;function l_(e){return s_.test(e)}function c_(e){return e.replace(/, /g,",").split(" ").map((e=>e.replace(/,/g,", ")))}function d_(e){e.setNormalizer("background",u_),e.setNormalizer("background-color",(e=>({path:"background.color",value:e}))),e.setReducer("background",(e=>{const t=[];return t.push(["background-color",e.color]),t}))}function u_(e){const t={},n=c_(e);for(const e of n)r=e,n_.includes(r)?(t.repeat=t.repeat||[],t.repeat.push(e)):i_(e)?(t.position=t.position||[],t.position.push(e)):a_(e)?t.attachment=e:Jm(e)?t.color=e:l_(e)&&(t.image=e);var r;return{path:"background",value:t}}class h_ extends Fp{constructor(e,t){super(e),this.view=t,this._toolbarConfig=Vf(e.config.get("toolbar")),this._elementReplacer=new Od}get element(){return this.view.element}init(e){const t=this.editor,n=this.view,r=t.editing.view,i=n.editable,o=r.document.getRoot();i.name=o.rootName,n.render();const a=i.element;this.setEditableElement(i.name,a),this.focusTracker.add(a),n.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initToolbar(){const e=this.editor,t=this.view,n=e.editing.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,this._toolbarConfig.viewportTopOffset&&(t.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),Sm({origin:n,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t.toolbar})}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,i=e.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&Am({view:t,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}r(925);class p_ extends rm{constructor(e,t,n={}){super(e),this.stickyPanel=new wm(e),this.toolbar=new Gf(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),this.editable=new om(e,t)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class f_ extends Lp{constructor(e,t){super(t),rs(e)&&(this.sourceElement=e),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new p_(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:n});this.ui=new h_(this,r),Bp(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise((n=>{const r=new this(e,t);n(r.initPlugins().then((()=>r.ui.init(rs(e)?e:null))).then((()=>{if(!rs(e)&&t.initialData)throw new Wn("editor-create-initial-data",null);const n=void 0!==t.initialData?t.initialData:function(e){return rs(e)?Nd(e):e}(e);return r.data.init(n)})).then((()=>r.fire("ready"))).then((()=>r)))}))}}qi(f_,Yp),qi(f_,Hp);class m_ extends Fp{constructor(e,t){super(e),this.view=t,this._toolbarConfig=Vf(e.config.get("toolbar"))}get element(){return this.view.editable.element}init(){const e=this.editor,t=this.view,n=e.editing.view,r=t.editable,i=n.document.getRoot();r.name=i.rootName,t.render();const o=r.element;this.setEditableElement(r.name,o),this.focusTracker.add(o),r.bind("isFocused").to(this.focusTracker),n.attachDomRoot(o),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initToolbar(){const e=this.editor,t=this.view,n=t.editable.element,r=e.editing.view,i=t.toolbar;t.panel.bind("isVisible").to(this.focusTracker,"isFocused"),this._toolbarConfig.viewportTopOffset&&(t.viewportTopOffset=this._toolbarConfig.viewportTopOffset),t.listenTo(e.ui,"update",(()=>{t.panel.isVisible&&t.panel.pin({target:n,positions:t.panelPositions})})),i.fillFromConfig(this._toolbarConfig,this.componentFactory),Sm({origin:r,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:i})}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,i=e.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&Am({view:t,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}const __=jd("px");class g_ extends tm{constructor(e,t,n,r={}){super(e),this.toolbar=new Gf(e,{shouldGroupWhenFull:r.shouldToolbarGroupWhenFull,isFloating:!0}),this.set("viewportTopOffset",0),this.panel=new pm(e),this.panel.withArrow=!1,this.panelPositions=this._getPanelPositions(),this.panel.extendTemplate({attributes:{class:"ck-toolbar-container"}}),this.editable=new om(e,t,n),this._resizeObserver=null}render(){super.render(),this.body.add(this.panel),this.registerChild(this.editable),this.panel.content.add(this.toolbar);if(this.toolbar.options.shouldGroupWhenFull){const e=this.editable.element;this._resizeObserver=new Hd(e,(()=>{this.toolbar.maxWidth=__(new Fd(e).width)}))}}destroy(){super.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getPanelPositionTop(e,t){let n;return n=e.top>t.height+this.viewportTopOffset?e.top-t.height:e.bottom>t.height+this.viewportTopOffset+50?this.viewportTopOffset:e.bottom,n}_getPanelPositions(){const e=[(e,t)=>({top:this._getPanelPositionTop(e,t),left:e.left,name:"toolbar_west"}),(e,t)=>({top:this._getPanelPositionTop(e,t),left:e.left+e.width-t.width,name:"toolbar_east"})];return"ltr"===this.locale.uiLanguageDirection?e:e.reverse()}}class b_ extends Lp{constructor(e,t){super(t),this.model.document.createRoot(),rs(e)&&(this.sourceElement=e,Up(this));const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new g_(this.locale,this.editing.view,this.sourceElement,{shouldToolbarGroupWhenFull:n});this.ui=new m_(this,r),Bp(this)}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then((()=>{this.sourceElement&&zd(this.sourceElement,e)}))}static create(e,t={}){return new Promise((n=>{const r=rs(e);if(r&&"TEXTAREA"===e.tagName)throw new Wn("editor-wrong-element",null);const i=new this(e,t);n(i.initPlugins().then((()=>{i.ui.init()})).then((()=>{if(!r&&t.initialData)throw new Wn("editor-create-initial-data",null);const n=void 0!==t.initialData?t.initialData:function(e){return rs(e)?Nd(e):e}(e);return i.data.init(n)})).then((()=>i.fire("ready"))).then((()=>i)))}))}}qi(b_,Yp),qi(b_,Hp);class v_ extends Fp{constructor(e,t){super(e),this.view=t}get element(){return this.view.editable.element}init(){const e=this.editor,t=this.view,n=e.plugins.get("BalloonToolbar"),r=e.editing.view,i=t.editable,o=r.document.getRoot();i.name=o.rootName,t.render();const a=i.element;this.setEditableElement(i.name,a),this.focusTracker.add(a),i.bind("isFocused").to(this.focusTracker),r.attachDomRoot(a),Sm({origin:r,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:n.toolbarView,beforeFocus(){n.show()},afterBlur(){n.hide()}}),this._initPlaceholder(),this.fire("ready")}destroy(){const e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,i=e.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&Am({view:t,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}class y_ extends tm{constructor(e,t,n){super(e),this.editable=new om(e,t,n)}render(){super.render(),this.registerChild(this.editable)}}class E_ extends Lp{constructor(e,t){super(t),rs(e)&&(this.sourceElement=e,Up(this));const n=this.config.get("plugins");n.push(km),this.config.set("plugins",n),this.config.define("balloonToolbar",this.config.get("toolbar")),this.model.document.createRoot();const r=new y_(this.locale,this.editing.view,this.sourceElement);this.ui=new v_(this,r),Bp(this)}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then((()=>{this.sourceElement&&zd(this.sourceElement,e)}))}static create(e,t={}){return new Promise((n=>{const r=rs(e);if(r&&"TEXTAREA"===e.tagName)throw new Wn("editor-wrong-element",null);const i=new this(e,t);n(i.initPlugins().then((()=>{i.ui.init()})).then((()=>{if(!r&&t.initialData)throw new Wn("editor-create-initial-data",null);const n=void 0!==t.initialData?t.initialData:function(e){return rs(e)?Nd(e):e}(e);return i.data.init(n)})).then((()=>i.fire("ready"))).then((()=>i)))}))}}qi(E_,Yp),qi(E_,Hp);class w_ extends Fp{constructor(e,t){super(e),this.view=t}init(){const e=this.editor,t=this.view,n=e.editing.view,r=t.editable,i=n.document.getRoot();t.editable.name=i.rootName,t.render();const o=r.element;this.setEditableElement(r.name,o),this.focusTracker.add(o),t.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(o),this._initPlaceholder(),this._initToolbar(),this.fire("ready")}destroy(){const e=this.view;this.editor.editing.view.detachDomRoot(e.editable.name),e.destroy(),super.destroy()}_initToolbar(){const e=this.editor,t=this.view.toolbar;t.fillFromConfig(e.config.get("toolbar"),this.componentFactory),Sm({origin:e.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:t})}_initPlaceholder(){const e=this.editor,t=e.editing.view,n=t.document.getRoot(),r=e.sourceElement,i=e.config.get("placeholder")||r&&"textarea"===r.tagName.toLowerCase()&&r.getAttribute("placeholder");i&&Am({view:t,element:n,text:i,isDirectHost:!1,keepOnFocus:!0})}}class S_ extends tm{constructor(e,t,n={}){super(e),this.toolbar=new Gf(e,{shouldGroupWhenFull:n.shouldToolbarGroupWhenFull}),this.editable=new om(e,t,n.editableElement),this.toolbar.extendTemplate({attributes:{class:["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}})}render(){super.render(),this.registerChild([this.toolbar,this.editable])}}class T_ extends Lp{constructor(e,t){super(t),rs(e)&&(this.sourceElement=e,Up(this)),this.model.document.createRoot();const n=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=new S_(this.locale,this.editing.view,{editableElement:this.sourceElement,shouldToolbarGroupWhenFull:n});this.ui=new w_(this,r)}destroy(){const e=this.getData();return this.ui.destroy(),super.destroy().then((()=>{this.sourceElement&&zd(this.sourceElement,e)}))}static create(e,t={}){return new Promise((n=>{const r=rs(e);if(r&&"TEXTAREA"===e.tagName)throw new Wn("editor-wrong-element",null);const i=new this(e,t);n(i.initPlugins().then((()=>{i.ui.init()})).then((()=>{if(!r&&t.initialData)throw new Wn("editor-create-initial-data",null);const n=void 0!==t.initialData?t.initialData:function(e){return rs(e)?Nd(e):e}(e);return i.data.init(n)})).then((()=>i.fire("ready"))).then((()=>i)))}))}}qi(T_,Yp);class k_{constructor(e){this.files=function(e){const t=e.files?Array.from(e.files):[],n=e.items?Array.from(e.items):[];if(t.length)return t;return n.filter((e=>"file"===e.kind)).map((e=>e.getAsFile()))}(e),this._native=e}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}get isCanceled(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}class C_ extends hd{constructor(e){super(e);const t=this.document;function n(e){return(n,r)=>{r.preventDefault();const i=r.dropRange?[r.dropRange]:null,o=new zn(t,e);t.fire(o,{dataTransfer:r.dataTransfer,method:n.name,targetRanges:i,target:r.target}),o.stop.called&&r.stopPropagation()}}this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"],this.listenTo(t,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",n("dragging"),{priority:"low"})}onDomEvent(e){const t={dataTransfer:new k_(e.clipboardData?e.clipboardData:e.dataTransfer)};"drop"!=e.type&&"dragover"!=e.type||(t.dropRange=function(e,t){const n=t.target.ownerDocument,r=t.clientX,i=t.clientY;let o;n.caretRangeFromPoint&&n.caretRangeFromPoint(r,i)?o=n.caretRangeFromPoint(r,i):t.rangeParent&&(o=n.createRange(),o.setStart(t.rangeParent,t.rangeOffset),o.collapse(!0));if(o)return e.domConverter.domRangeToView(o);return null}(this.view,e)),this.fire(e.type,e,t)}}const x_=["figcaption","li"];function A_(e){let t="";if(e.is("$text")||e.is("$textProxy"))t=e.data;else if(e.is("element","img")&&e.hasAttribute("alt"))t=e.getAttribute("alt");else if(e.is("element","br"))t="\n";else{let n=null;for(const r of e.getChildren()){const e=A_(r);n&&(n.is("containerElement")||r.is("containerElement"))&&(x_.includes(n.name)||x_.includes(r.name)?t+="\n":t+="\n\n"),t+=e,n=r}}return t}class R_ extends $i{static get pluginName(){return"ClipboardPipeline"}init(){this.editor.editing.view.addObserver(C_),this._setupPasteDrop(),this._setupCopyCut()}_setupPasteDrop(){const e=this.editor,t=e.model,n=e.editing.view,r=n.document;this.listenTo(r,"clipboardInput",(t=>{e.isReadOnly&&t.stop()}),{priority:"highest"}),this.listenTo(r,"clipboardInput",((e,t)=>{const r=t.dataTransfer;let i=t.content||"";var o;i||(r.getData("text/html")?i=function(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,((e,t)=>1==t.length?" ":t))}(r.getData("text/html")):r.getData("text/plain")&&(((o=(o=r.getData("text/plain")).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||o.includes("<br>"))&&(o=`<p>${o}</p>`),i=o),i=this.editor.data.htmlProcessor.toView(i));const a=new zn(this,"inputTransformation");this.fire(a,{content:i,dataTransfer:r,targetRanges:t.targetRanges,method:t.method}),a.stop.called&&e.stop(),n.scrollToTheSelection()}),{priority:"low"}),this.listenTo(this,"inputTransformation",((e,n)=>{if(n.content.isEmpty)return;const r=this.editor.data.toModel(n.content,"$clipboardHolder");0!=r.childCount&&(e.stop(),t.change((()=>{this.fire("contentInsertion",{content:r,method:n.method,dataTransfer:n.dataTransfer,targetRanges:n.targetRanges})})))}),{priority:"low"}),this.listenTo(this,"contentInsertion",((e,n)=>{n.resultRange=t.insertContent(n.content)}),{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,n=e.editing.view.document;function r(r,i){const o=i.dataTransfer;i.preventDefault();const a=e.data.toView(e.model.getSelectedContent(t.selection));n.fire("clipboardOutput",{dataTransfer:o,content:a,method:r.name})}this.listenTo(n,"copy",r,{priority:"low"}),this.listenTo(n,"cut",((t,n)=>{e.isReadOnly?n.preventDefault():r(t,n)}),{priority:"low"}),this.listenTo(n,"clipboardOutput",((n,r)=>{r.content.isEmpty||(r.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(r.content)),r.dataTransfer.setData("text/plain",A_(r.content))),"cut"==r.method&&e.model.deleteContent(t.selection)}),{priority:"low"})}}function*M_(e,t){for(const n of t)n&&e.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class D_ extends Qi{execute(){const e=this.editor.model,t=e.document;e.change((n=>{!function(e,t,n,r){const i=n.isCollapsed,o=n.getFirstRange(),a=o.start.parent,s=o.end.parent;if(r.isLimit(a)||r.isLimit(s))return void(i||a!=s||e.deleteContent(n));if(i){const e=M_(t.model.schema,n.getAttributes());O_(t,o.start),t.setSelectionAttribute(e)}else{const r=!(o.start.isAtStart&&o.end.isAtEnd),i=a==s;e.deleteContent(n,{leaveUnmerged:r}),r&&(i?O_(t,n.focus):t.setSelection(s,0))}}(this.editor.model,n,t.selection,e.schema),this.fire("afterExecute",{writer:n})}))}}function O_(e,t){e.split(t),e.setSelection(t.parent.nextSibling,0)}class N_ extends zc{constructor(e){super(e);const t=this.document;t.on("keydown",((e,n)=>{if(this.isEnabled&&n.keyCode==Yl.enter){const r=new wl(t,"enter",t.selection.getFirstRange());t.fire(r,new ud(t,n.domEvent,{isSoft:n.shiftKey})),r.stop.called&&e.stop()}}))}observe(){}}class L_ extends $i{static get pluginName(){return"Enter"}init(){const e=this.editor,t=e.editing.view,n=t.document;t.addObserver(N_),e.commands.add("enter",new D_(e)),this.listenTo(n,"enter",((n,r)=>{r.preventDefault(),r.isSoft||(e.execute("enter"),t.scrollToTheSelection())}),{priority:"low"})}}class I_{constructor(e,t=20){this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=(e,t)=>{"transparent"!=t.type&&t!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch()),this._batch}input(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e){this.isLocked&&!e||(this._batch=null,this.size=0)}}class P_ extends Qi{constructor(e,t){super(e),this.direction=t,this._buffer=new I_(e.model,e.config.get("typing.undoStep"))}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,n=t.document;t.enqueueChange(this._buffer.batch,(r=>{this._buffer.lock();const i=r.createSelection(e.selection||n.selection),o=e.sequence||1,a=i.isCollapsed;if(i.isCollapsed&&t.modifySelection(i,{direction:this.direction,unit:e.unit}),this._shouldEntireContentBeReplacedWithParagraph(o))return void this._replaceEntireContentWithParagraph(r);if(this._shouldReplaceFirstBlockWithParagraph(i,o))return void this.editor.execute("paragraph",{selection:i});if(i.isCollapsed)return;let s=0;i.getFirstRange().getMinimalFlatRanges().forEach((e=>{s+=vl(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))})),t.deleteContent(i,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(s),r.setSelection(i),this._buffer.unlock()}))}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,n=t.document.selection,r=t.schema.getLimitElement(n);if(!(n.isCollapsed&&n.containsEntireContent(r)))return!1;if(!t.schema.checkChild(r,"paragraph"))return!1;const i=r.getChild(0);return!i||"paragraph"!==i.name}_replaceEntireContentWithParagraph(e){const t=this.editor.model,n=t.document.selection,r=t.schema.getLimitElement(n),i=e.createElement("paragraph");e.remove(e.createRangeIn(r)),e.insert(i,r),e.setSelection(i,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const n=this.editor.model;if(t>1||"backward"!=this.direction)return!1;if(!e.isCollapsed)return!1;const r=e.getFirstPosition(),i=n.schema.getLimitElement(r),o=i.getChild(0);return r.parent==o&&(!!e.containsEntireContent(o)&&(!!n.schema.checkChild(i,"paragraph")&&"paragraph"!=o.name))}}class F_ extends zc{constructor(e){super(e);const t=e.document;let n=0;function r(e,n,r){const i=new wl(t,"delete",t.selection.getFirstRange());t.fire(i,new ud(t,n,r)),i.stop.called&&e.stop()}t.on("keyup",((e,t)=>{t.keyCode!=Yl.delete&&t.keyCode!=Yl.backspace||(n=0)})),t.on("keydown",((e,t)=>{const i={};if(t.keyCode==Yl.delete)i.direction="forward",i.unit="character";else{if(t.keyCode!=Yl.backspace)return;i.direction="backward",i.unit="codePoint"}const o=Pl.isMac?t.altKey:t.ctrlKey;i.unit=o?"word":i.unit,i.sequence=++n,r(e,t.domEvent,i)})),Pl.isAndroid&&t.on("beforeinput",((t,n)=>{if("deleteContentBackward"!=n.domEvent.inputType)return;const i={unit:"codepoint",direction:"backward",sequence:1},o=n.domTarget.ownerDocument.defaultView.getSelection();o.anchorNode==o.focusNode&&o.anchorOffset+1!=o.focusOffset&&(i.selectionToRemove=e.domConverter.domSelectionToView(o)),r(t,n.domEvent,i)}))}observe(){}}class B_ extends $i{static get pluginName(){return"Delete"}init(){const e=this.editor,t=e.editing.view,n=t.document;t.addObserver(F_);const r=new P_(e,"forward");if(e.commands.add("deleteForward",r),e.commands.add("forwardDelete",r),e.commands.add("delete",new P_(e,"backward")),this.listenTo(n,"delete",((n,r)=>{const i={unit:r.unit,sequence:r.sequence};if(r.selectionToRemove){const t=e.model.createSelection(),n=[];for(const t of r.selectionToRemove.getRanges())n.push(e.editing.mapper.toModelRange(t));t.setTo(n),i.selection=t}e.execute("forward"==r.direction?"deleteForward":"delete",i),r.preventDefault(),t.scrollToTheSelection()}),{priority:"low"}),Pl.isAndroid){let e=null;this.listenTo(n,"delete",((t,n)=>{const r=n.domTarget.ownerDocument.defaultView.getSelection();e={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}}),{priority:"lowest"}),this.listenTo(n,"keyup",((t,n)=>{if(e){const t=n.domTarget.ownerDocument.defaultView.getSelection();t.collapse(e.anchorNode,e.anchorOffset),t.extend(e.focusNode,e.focusOffset),e=null}}))}}}class Y_{constructor(){this._stack=[]}add(e,t){const n=this._stack,r=n[0];this._insertDescriptor(e);const i=n[0];r===i||H_(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:t})}remove(e,t){const n=this._stack,r=n[0];this._removeDescriptor(e);const i=n[0];r===i||H_(r,i)||this.fire("change:top",{oldDescriptor:r,newDescriptor:i,writer:t})}_insertDescriptor(e){const t=this._stack,n=t.findIndex((t=>t.id===e.id));if(H_(e,t[n]))return;n>-1&&t.splice(n,1);let r=0;for(;t[r]&&U_(t[r],e);)r++;t.splice(r,0,e)}_removeDescriptor(e){const t=this._stack,n=t.findIndex((t=>t.id===e));n>-1&&t.splice(n,1)}}function H_(e,t){return e&&t&&e.priority==t.priority&&z_(e.classes)==z_(t.classes)}function U_(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&z_(e.classes)>z_(t.classes)}function z_(e){return Array.isArray(e)?e.sort().join(","):e}qi(Y_,er);const j_='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',V_="ck-widget_selected";function G_(e){return!!e.is("element")&&!!e.getCustomProperty("widget")}function W_(e,t,n={}){if(!e.is("containerElement"))throw new Wn("widget-to-widget-wrong-element-type",null,{element:e});return t.setAttribute("contenteditable","false",e),t.addClass("ck-widget",e),t.setCustomProperty("widget",!0,e),e.getFillerOffset=X_,n.label&&function(e,t,n){n.setCustomProperty("widgetLabel",t,e)}(e,n.label,t),n.hasSelectionHandle&&function(e,t){const n=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},(function(e){const t=this.toDomElement(e),n=new Tf;return n.set("content",j_),n.render(),t.appendChild(n.element),t}));t.insert(t.createPositionAt(e,0),n),t.addClass(["ck-widget_with-selection-handle"],e)}(e,t),function(e,t,n,r){const i=new Y_;i.on("change:top",((t,i)=>{i.oldDescriptor&&r(e,i.oldDescriptor,i.writer),i.newDescriptor&&n(e,i.newDescriptor,i.writer)})),t.setCustomProperty("addHighlight",((e,t,n)=>i.add(t,n)),e),t.setCustomProperty("removeHighlight",((e,t,n)=>i.remove(t,n)),e)}(e,t,q_,$_),e}function q_(e,t,n){if(t.classes&&n.addClass(ds(t.classes),e),t.attributes)for(const r in t.attributes)n.setAttribute(r,t.attributes[r],e)}function $_(e,t,n){if(t.classes&&n.removeClass(ds(t.classes),e),t.attributes)for(const r in t.attributes)n.removeAttribute(r,e)}function K_(e){const t=e.getCustomProperty("widgetLabel");return t?"function"==typeof t?t():t:""}function Q_(e,t){const n=e.getSelectedElement();if(n){const r=eg(e);if(r)return t.createPositionAt(n,r);if(t.schema.isBlock(n))return t.createPositionAfter(n)}const r=e.getSelectedBlocks().next().value;if(r){if(r.isEmpty)return t.createPositionAt(r,0);const n=t.createPositionAfter(r);return e.focus.isTouching(n)?n:t.createPositionBefore(r)}return e.focus}function X_(){return null}const Z_="widget-type-around";function J_(e,t,n){return e&&G_(e)&&!n.isInline(t)}function eg(e){return e.getAttribute(Z_)}const tg=[Ul("arrowUp"),Ul("arrowRight"),Ul("arrowDown"),Ul("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(let e=112;e<=135;e++)tg.push(e);function ng(e){return!(!e.ctrlKey&&!e.metaKey)||tg.includes(e.keyCode)}r(6970);const rg=["before","after"],ig=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,og="ck-widget__type-around_disabled";class ag extends $i{static get pluginName(){return"WidgetTypeAround"}static get requires(){return[L_,B_]}constructor(e){super(e),this._currentFakeCaretModelElement=null}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",((n,r,i)=>{t.change((e=>{for(const n of t.document.roots)i?e.removeClass(og,n):e.addClass(og,n)})),i||e.model.change((e=>{e.removeSelectionAttribute(Z_)}))})),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration()}destroy(){this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const n=this.editor,r=n.editing.view;n.execute("insertParagraph",{position:n.model.createPositionAt(e,t)}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,n,r){this.listenTo(e,t,((...e)=>{this.isEnabled&&n(...e)}),r)}_insertParagraphAccordingToFakeCaretPosition(){const e=this.editor.model.document.selection,t=eg(e);if(!t)return!1;const n=e.getSelectedElement();return this._insertParagraph(n,t),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,n=e.locale.t,r={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",((e,n,i)=>{const o=i.mapper.toViewElement(n.item);J_(o,n.item,t)&&function(e,t,n){const r=e.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},(function(e){const n=this.toDomElement(e);return function(e,t){for(const n of rg){const r=new tf({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:t[n]},children:[e.ownerDocument.importNode(ig,!0)]});e.appendChild(r.render())}}(n,t),function(e){const t=new tf({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});e.appendChild(t.render())}(n),n}));e.insert(e.createPositionAt(n,"end"),r)}(i.writer,r,o)}),{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,n=t.document.selection,r=t.schema,i=e.editing.view;function o(e){return`ck-widget_type-around_show-fake-caret_${e}`}this._listenToIfEnabled(i.document,"arrowKey",((e,t)=>{this._handleArrowKeyPress(e,t)}),{context:[G_,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",((t,n)=>{n.directChange&&e.model.change((e=>{e.removeSelectionAttribute(Z_)}))})),this._listenToIfEnabled(t.document,"change:data",(()=>{const t=n.getSelectedElement();if(t){if(J_(e.editing.mapper.toViewElement(t),t,r))return}e.model.change((e=>{e.removeSelectionAttribute(Z_)}))})),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",((e,t,n)=>{const i=n.writer;if(this._currentFakeCaretModelElement){const e=n.mapper.toViewElement(this._currentFakeCaretModelElement);e&&(i.removeClass(rg.map(o),e),this._currentFakeCaretModelElement=null)}const a=t.selection.getSelectedElement();if(!a)return;const s=n.mapper.toViewElement(a);if(!J_(s,a,r))return;const l=eg(t.selection);l&&(i.addClass(o(l),s),this._currentFakeCaretModelElement=a)})),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",((t,n,r)=>{r||e.model.change((e=>{e.removeSelectionAttribute(Z_)}))}))}_handleArrowKeyPress(e,t){const n=this.editor,r=n.model,i=r.document.selection,o=r.schema,a=n.editing.view,s=Vl(t.keyCode,n.locale.contentLanguageDirection),l=a.document.selection.getSelectedElement();let c;J_(l,n.editing.mapper.toModelElement(l),o)?c=this._handleArrowKeyPressOnSelectedWidget(s):i.isCollapsed&&(c=this._handleArrowKeyPressWhenSelectionNextToAWidget(s)),c&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const t=this.editor.model,n=eg(t.document.selection);return t.change((t=>{if(!n)return t.setSelectionAttribute(Z_,e?"after":"before"),!0;if(!(n===(e?"after":"before")))return t.removeSelectionAttribute(Z_),!0;return!1}))}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,n=t.model,r=n.schema,i=t.plugins.get("Widget"),o=i._getObjectElementNextToSelection(e);return!!J_(t.editing.mapper.toViewElement(o),o,r)&&(n.change((t=>{i._setSelectionOverElement(o),t.setSelectionAttribute(Z_,e?"before":"after")})),!0)}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",((n,r)=>{const i=r.domTarget.closest(".ck-widget__type-around__button");if(!i)return;const o=function(e){return e.classList.contains("ck-widget__type-around__button_before")?"before":"after"}(i),a=function(e,t){const n=e.closest(".ck-widget");return t.mapDomToView(n)}(i,t.domConverter),s=e.editing.mapper.toModelElement(a);this._insertParagraph(s,o),r.preventDefault(),n.stop()}))}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",((n,r)=>{if("atTarget"!=n.eventPhase)return;const i=t.getSelectedElement(),o=e.editing.mapper.toViewElement(i),a=e.model.schema;let s;this._insertParagraphAccordingToFakeCaretPosition()?s=!0:J_(o,i,a)&&(this._insertParagraph(i,r.isSoft?"before":"after"),s=!0),s&&(r.preventDefault(),n.stop())}),{context:G_})}_enableInsertingParagraphsOnTypingKeystroke(){const e=this.editor.editing.view,t=[Yl.enter,Yl.delete,Yl.backspace];this._listenToIfEnabled(e.document,"keydown",((e,n)=>{t.includes(n.keyCode)||ng(n)||this._insertParagraphAccordingToFakeCaretPosition()}),{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,n=e.model,r=n.schema;this._listenToIfEnabled(t.document,"delete",((t,i)=>{if("atTarget"!=t.eventPhase)return;const o=eg(n.document.selection);if(!o)return;const a=i.direction,s=n.document.selection.getSelectedElement(),l="forward"==a;if("before"===o===l)e.execute("delete",{selection:n.createSelection(s,"on")});else{const t=r.getNearestSelectionRange(n.createPositionAt(s,o),a);if(t)if(t.isCollapsed){const i=n.createSelection(t.start);if(n.modifySelection(i,{direction:a}),i.focus.isEqual(t.start)){const e=function(e,t){let n=t;for(const r of t.getAncestors({parentFirst:!0})){if(r.childCount>1||e.isLimit(r))break;n=r}return n}(r,t.start.parent);n.deleteContent(n.createSelection(e,"on"),{doNotAutoparagraph:!0})}else n.change((n=>{n.setSelection(t),e.execute(l?"deleteForward":"delete")}))}else n.change((n=>{n.setSelection(t),e.execute(l?"deleteForward":"delete")}))}i.preventDefault(),t.stop()}),{context:G_})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,n=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",((e,[r,i])=>{if(i&&!i.is("documentSelection"))return;const o=eg(n);return o?(e.stop(),t.change((e=>{const i=n.getSelectedElement(),a=t.createPositionAt(i,o),s=e.createSelection(a),l=t.insertContent(r,s);return e.setSelection(s),l}))):void 0}),{priority:"high"})}}r(1419);function sg(e){const t=e.model;return(n,r)=>{const i=r.keyCode==Yl.arrowup,o=r.keyCode==Yl.arrowdown,a=r.shiftKey,s=t.document.selection;if(!i&&!o)return;const l=o;if(a&&function(e,t){return!e.isCollapsed&&e.isBackward==t}(s,l))return;const c=function(e,t,n){const r=e.model;if(n){const e=t.isCollapsed?t.focus:t.getLastPosition(),n=lg(r,e,"forward");if(!n)return null;const i=r.createRange(e,n),o=cg(r.schema,i,"backward");return o&&e.isBefore(o)?r.createRange(e,o):null}{const e=t.isCollapsed?t.focus:t.getFirstPosition(),n=lg(r,e,"backward");if(!n)return null;const i=r.createRange(n,e),o=cg(r.schema,i,"forward");return o&&e.isAfter(o)?r.createRange(o,e):null}}(e,s,l);c&&!c.isCollapsed&&function(e,t,n){const r=e.model,i=e.view.domConverter;if(n){const e=r.createSelection(t.start);r.modifySelection(e),e.focus.isAtEnd||t.start.isEqual(e.focus)||(t=r.createRange(e.focus,t.end))}const o=e.mapper.toViewRange(t),a=i.viewRangeToDom(o),s=Fd.getDomRangeRects(a);let l;for(const e of s)if(void 0!==l){if(Math.round(e.top)>=l)return!1;l=Math.max(l,Math.round(e.bottom))}else l=Math.round(e.bottom);return!0}(e,c,l)&&(t.change((e=>{const n=l?c.end:c.start;if(a){const r=t.createSelection(s.anchor);r.setFocus(n),e.setSelection(r)}else e.setSelection(n)})),n.stop(),r.preventDefault(),r.stopPropagation())}}function lg(e,t,n){const r=e.schema,i=e.createRangeIn(t.root),o="forward"==n?"elementStart":"elementEnd";for(const{previousPosition:e,item:a,type:s}of i.getWalker({startPosition:t,direction:n})){if(r.isLimit(a)&&!r.isInline(a))return e;if(s==o&&r.isBlock(a))return null}return null}function cg(e,t,n){const r="backward"==n?t.end:t.start;if(e.checkChild(r,"$text"))return r;for(const{nextPosition:r}of t.getWalker({direction:n}))if(e.checkChild(r,"$text"))return r}class dg extends $i{static get pluginName(){return"Widget"}static get requires(){return[ag,B_]}init(){const e=this.editor.editing.view,t=e.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on("selection",((e,t,n)=>{this._clearPreviouslySelectedWidgets(n.writer);const r=n.writer,i=r.document.selection,o=i.getSelectedElement();let a=null;for(const e of i.getRanges())for(const t of e){const e=t.item;G_(e)&&!ug(e,a)&&(r.addClass(V_,e),this._previouslySelected.add(e),a=e,e==o&&r.setSelection(i.getRanges(),{fake:!0,label:K_(o)}))}}),{priority:"low"}),e.addObserver(Gm),this.listenTo(t,"mousedown",((...e)=>this._onMousedown(...e))),this.listenTo(t,"arrowKey",((...e)=>{this._handleSelectionChangeOnArrowKeyPress(...e)}),{context:[G_,"$text"]}),this.listenTo(t,"arrowKey",((...e)=>{this._preventDefaultOnArrowKeyPress(...e)}),{context:"$root"}),this.listenTo(t,"arrowKey",sg(this.editor.editing),{context:"$text"}),this.listenTo(t,"delete",((e,t)=>{this._handleDelete("forward"==t.direction)&&(t.preventDefault(),e.stop())}),{context:"$root"})}_onMousedown(e,t){const n=this.editor,r=n.editing.view,i=r.document;let o=t.target;if(function(e){for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(G_(e))return!1;e=e.parent}return!1}(o)){if((Pl.isSafari||Pl.isGecko)&&t.domEvent.detail>=3){const e=n.editing.mapper,r=o.is("attributeElement")?o.findAncestor((e=>!e.is("attributeElement"))):o,i=e.toModelElement(r);t.preventDefault(),this.editor.model.change((e=>{e.setSelection(i,"in")}))}return}if(!G_(o)&&(o=o.findAncestor(G_),!o))return;Pl.isAndroid&&t.preventDefault(),i.isFocused||r.focus();const a=n.editing.mapper.toModelElement(o);this._setSelectionOverElement(a)}_handleSelectionChangeOnArrowKeyPress(e,t){const n=t.keyCode,r=this.editor.model,i=r.schema,o=r.document.selection,a=o.getSelectedElement(),s=Vl(n,this.editor.locale.contentLanguageDirection);if(a&&i.isObject(a)){const n=s?o.getLastPosition():o.getFirstPosition(),a=i.getNearestSelectionRange(n,s?"forward":"backward");return void(a&&(r.change((e=>{e.setSelection(a)})),t.preventDefault(),e.stop()))}if(!o.isCollapsed)return;const l=this._getObjectElementNextToSelection(s);l&&i.isObject(l)&&(this._setSelectionOverElement(l),t.preventDefault(),e.stop())}_preventDefaultOnArrowKeyPress(e,t){const n=this.editor.model,r=n.schema,i=n.document.selection.getSelectedElement();i&&r.isObject(i)&&(t.preventDefault(),e.stop())}_handleDelete(e){if(this.editor.isReadOnly)return;const t=this.editor.model.document.selection;if(!t.isCollapsed)return;const n=this._getObjectElementNextToSelection(e);return n?(this.editor.model.change((e=>{let r=t.anchor.parent;for(;r.isEmpty;){const t=r;r=t.parent,e.remove(t)}this._setSelectionOverElement(n)})),!0):void 0}_setSelectionOverElement(e){this.editor.model.change((t=>{t.setSelection(t.createRangeOn(e))}))}_getObjectElementNextToSelection(e){const t=this.editor.model,n=t.schema,r=t.document.selection,i=t.createSelection(r);t.modifySelection(i,{direction:e?"forward":"backward"});const o=e?i.focus.nodeBefore:i.focus.nodeAfter;return o&&n.isObject(o)?o:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(V_,t);this._previouslySelected.clear()}}function ug(e,t){return!!t&&Array.from(e.getAncestors()).includes(t)}const hg=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return lr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Cd(e,t,{leading:r,maxWait:t,trailing:i})};r(8871);class pg extends $i{static get pluginName(){return"DragDrop"}static get requires(){return[R_,dg]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,this._updateDropMarkerThrottled=hg((e=>this._updateDropMarker(e)),40),this._removeDropMarkerDelayed=_g((()=>this._removeDropMarker()),40),this._clearDraggableAttributesDelayed=_g((()=>this._clearDraggableAttributes()),40),t.addObserver(C_),t.addObserver(Gm),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDropMarker(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",((e,t,n)=>{n?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")})),this.on("change:isEnabled",((e,t,n)=>{n||this._finalizeDragging(!1)})),Pl.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._updateDropMarkerThrottled.cancel(),this._removeDropMarkerDelayed.cancel(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,n=t.document,r=e.editing.view,i=r.document;this.listenTo(i,"dragstart",((r,o)=>{const a=n.selection;if(o.target&&o.target.is("editableElement"))return void o.preventDefault();const s=o.target?gg(o.target):null;if(s){const n=e.editing.mapper.toModelElement(s);this._draggedRange=Ru.fromRange(t.createRangeOn(n))}else if(!i.selection.isCollapsed){const e=i.selection.getSelectedElement();e&&G_(e)||(this._draggedRange=Ru.fromRange(a.getFirstRange()))}if(!this._draggedRange)return void o.preventDefault();this._draggingUid=Vn(),o.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",o.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const l=t.createSelection(this._draggedRange.toRange()),c=e.data.toView(t.getSelectedContent(l));i.fire("clipboardOutput",{dataTransfer:o.dataTransfer,content:c,method:r.name}),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")}),{priority:"low"}),this.listenTo(i,"dragend",((e,t)=>{this._finalizeDragging(!t.dataTransfer.isCanceled&&"move"==t.dataTransfer.dropEffect)}),{priority:"low"}),this.listenTo(i,"dragenter",(()=>{this.isEnabled&&r.focus()})),this.listenTo(i,"dragleave",(()=>{this._removeDropMarkerDelayed()})),this.listenTo(i,"dragging",((t,n)=>{if(!this.isEnabled)return void(n.dataTransfer.dropEffect="none");this._removeDropMarkerDelayed.cancel();const r=fg(e,n.targetRanges,n.target);this._draggedRange||(n.dataTransfer.dropEffect="copy"),Pl.isGecko||("copy"==n.dataTransfer.effectAllowed?n.dataTransfer.dropEffect="copy":["all","copyMove"].includes(n.dataTransfer.effectAllowed)&&(n.dataTransfer.dropEffect="move")),r&&this._updateDropMarkerThrottled(r)}),{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"clipboardInput",((t,n)=>{if("drop"!=n.method)return;const r=fg(e,n.targetRanges,n.target);if(this._removeDropMarker(),!r)return this._finalizeDragging(!1),void t.stop();this._draggedRange&&this._draggingUid!=n.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="");if("move"==mg(n.dataTransfer)&&this._draggedRange&&this._draggedRange.containsRange(r,!0))return this._finalizeDragging(!1),void t.stop();n.targetRanges=[e.editing.mapper.toViewRange(r)]}),{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(R_);e.on("contentInsertion",((e,t)=>{if(!this.isEnabled||"drop"!==t.method)return;const n=t.targetRanges.map((e=>this.editor.editing.mapper.toModelRange(e)));this.editor.model.change((e=>e.setSelection(n)))}),{priority:"high"}),e.on("contentInsertion",((e,t)=>{if(!this.isEnabled||"drop"!==t.method)return;const n="move"==mg(t.dataTransfer),r=!t.resultRange||!t.resultRange.isCollapsed;this._finalizeDragging(r&&n)}),{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,n=t.document;this.listenTo(n,"mousedown",((r,i)=>{if(Pl.isAndroid||!i)return;this._clearDraggableAttributesDelayed.cancel();let o=gg(i.target);if(Pl.isBlink&&!e.isReadOnly&&!o&&!n.selection.isCollapsed){const e=n.selection.getSelectedElement();e&&G_(e)||(o=n.selection.editableElement)}o&&(t.change((e=>{e.setAttribute("draggable","true",o)})),this._draggableElement=e.editing.mapper.toModelElement(o))})),this.listenTo(n,"mouseup",(()=>{Pl.isAndroid||this._clearDraggableAttributesDelayed()}))}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change((t=>{this._draggableElement&&"$graveyard"!=this._draggableElement.root.rootName&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null}))}_setupDropMarker(){const e=this.editor;e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:n})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return n.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},(function(e){const t=this.toDomElement(e);return t.innerHTML="&NoBreak;<span></span>&NoBreak;",t}))}})}_updateDropMarker(e){const t=this.editor,n=t.model.markers;t.model.change((t=>{n.has("drop-target")?n.get("drop-target").getRange().isEqual(e)||t.updateMarker("drop-target",{range:e}):t.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})}))}_removeDropMarker(){const e=this.editor.model;this._removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),e.markers.has("drop-target")&&e.change((e=>{e.removeMarker("drop-target")}))}_finalizeDragging(e){const t=this.editor.model;this._removeDropMarker(),this._clearDraggableAttributes(),this._draggingUid="",this._draggedRange&&(e&&this.isEnabled&&t.deleteContent(t.createSelection(this._draggedRange),{doNotAutoparagraph:!0}),this._draggedRange.detach(),this._draggedRange=null)}}function fg(e,t,n){const r=e.model,i=e.editing.mapper;let o=null;const a=t?t[0].start:null;if(n.is("uiElement")&&(n=n.parent),o=function(e,t){const n=e.model,r=e.editing.mapper;if(G_(t))return n.createRangeOn(r.toModelElement(t));if(!t.is("editableElement")){const e=t.findAncestor((e=>G_(e)||e.is("editableElement")));if(G_(e))return n.createRangeOn(r.toModelElement(e))}return null}(e,n),o)return o;const s=function(e,t){const n=e.editing.mapper,r=e.editing.view,i=n.toModelElement(t);if(i)return i;const o=r.createPositionBefore(t),a=n.findMappedViewAncestor(o);return n.toModelElement(a)}(e,n),l=a?i.toModelPosition(a):null;return l?(o=function(e,t,n){const r=e.model;if(!r.schema.checkChild(n,"$block"))return null;const i=r.createPositionAt(n,0),o=t.path.slice(0,i.path.length),a=r.createPositionFromPath(t.root,o).nodeAfter;if(a&&r.schema.isObject(a))return r.createRangeOn(a);return null}(e,l,s),o||(o=r.schema.getNearestSelectionRange(l,Pl.isGecko?"forward":"backward"),o||function(e,t){const n=e.model;for(;t;){if(n.schema.isObject(t))return n.createRangeOn(t);t=t.parent}}(e,l.parent))):function(e,t){const n=e.model,r=n.schema,i=n.createPositionAt(t,0);return r.getNearestSelectionRange(i,"forward")}(e,s)}function mg(e){return Pl.isGecko?e.dropEffect:["all","copyMove"].includes(e.effectAllowed)?"move":"copy"}function _g(e,t){let n;function r(...i){r.cancel(),n=setTimeout((()=>e(...i)),t)}return r.cancel=()=>{clearTimeout(n)},r}function gg(e){if(e.is("editableElement"))return null;if(e.hasClass("ck-widget__selection-handle"))return e.findAncestor(G_);if(G_(e))return e;const t=e.findAncestor((e=>G_(e)||e.is("editableElement")));return G_(t)?t:null}class bg extends $i{static get pluginName(){return"PastePlainText"}static get requires(){return[R_]}init(){const e=this.editor,t=e.model,n=e.editing.view,r=n.document,i=t.document.selection;let o=!1;n.addObserver(C_),this.listenTo(r,"keydown",((e,t)=>{o=t.shiftKey})),e.plugins.get(R_).on("contentInsertion",((e,n)=>{(o||function(e,t){if(e.childCount>1)return!1;const n=e.getChild(0);if(t.isObject(n))return!1;return 0==[...n.getAttributeKeys()].length}(n.content,t.schema))&&t.change((e=>{const r=Array.from(i.getAttributes()).filter((([e])=>t.schema.getAttributeProperties(e).isFormatting));i.isCollapsed||t.deleteContent(i,{doNotAutoparagraph:!0}),r.push(...i.getAttributes());const o=e.createRangeIn(n.content);for(const t of o.getItems())t.is("$textProxy")&&e.setAttributes(r,t)}))}))}}class vg extends $i{static get pluginName(){return"Clipboard"}static get requires(){return[R_,pg,bg]}}class yg extends Qi{execute(){const e=this.editor.model,t=e.document;e.change((n=>{!function(e,t,n){const r=n.isCollapsed,i=n.getFirstRange(),o=i.start.parent,a=i.end.parent,s=o==a;if(r){const r=M_(e.schema,n.getAttributes());Eg(e,t,i.end),t.removeSelectionAttribute(n.getAttributeKeys()),t.setSelectionAttribute(r)}else{const r=!(i.start.isAtStart&&i.end.isAtEnd);e.deleteContent(n,{leaveUnmerged:r}),s?Eg(e,t,n.focus):r&&t.setSelection(a,0)}}(e,n,t.selection),this.fire("afterExecute",{writer:n})}))}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=function(e,t){if(t.rangeCount>1)return!1;const n=t.anchor;if(!n||!e.checkChild(n,"softBreak"))return!1;const r=t.getFirstRange(),i=r.start.parent,o=r.end.parent;if((wg(i,e)||wg(o,e))&&i!==o)return!1;return!0}(e.schema,t.selection)}}function Eg(e,t,n){const r=t.createElement("softBreak");e.insertContent(r,n),t.setSelection(r,"after")}function wg(e,t){return!e.is("rootElement")&&(t.isLimit(e)||wg(e.parent,t))}class Sg extends $i{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,t=e.model.schema,n=e.conversion,r=e.editing.view,i=r.document;t.register("softBreak",{allowWhere:"$text",isInline:!0}),n.for("upcast").elementToElement({model:"softBreak",view:"br"}),n.for("downcast").elementToElement({model:"softBreak",view:(e,{writer:t})=>t.createEmptyElement("br")}),r.addObserver(N_),e.commands.add("shiftEnter",new yg(e)),this.listenTo(i,"enter",((t,n)=>{n.preventDefault(),n.isSoft&&(e.execute("shiftEnter"),r.scrollToTheSelection())}),{priority:"low"})}}class Tg extends Qi{execute(){const e=this.editor.model,t=e.document.selection;let n=e.schema.getLimitElement(t);if(t.containsEntireContent(n)||!kg(e.schema,n))do{if(n=n.parent,!n)return}while(!kg(e.schema,n));e.change((e=>{e.setSelection(n,"in")}))}}function kg(e,t){return e.isLimit(t)&&(e.checkChild(t,"$text")||e.checkChild(t,"paragraph"))}const Cg=zl("Ctrl+A");class xg extends $i{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,t=e.editing.view.document;e.commands.add("selectAll",new Tg(e)),this.listenTo(t,"keydown",((t,n)=>{Ul(n)===Cg&&(e.execute("selectAll"),n.preventDefault())}))}}class Ag extends $i{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",(t=>{const n=e.commands.get("selectAll"),r=new Cf(t),i=t.t;return r.set({label:i("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),r.bind("isOn","isEnabled").to(n,"value","isEnabled"),this.listenTo(r,"execute",(()=>{e.execute("selectAll"),e.editing.view.focus()})),r}))}}class Rg extends $i{static get requires(){return[xg,Ag]}static get pluginName(){return"SelectAll"}}class Mg extends Qi{constructor(e,t){super(e),this._buffer=new I_(e.model,t),this._batches=new WeakSet}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,n=t.document,r=e.text||"",i=r.length,o=e.range?t.createSelection(e.range):n.selection,a=e.resultRange;t.enqueueChange(this._buffer.batch,(e=>{this._buffer.lock(),this._batches.add(this._buffer.batch),t.deleteContent(o),r&&t.insertContent(e.createText(r,n.selection.getAttributes()),o),a?e.setSelection(a):o.is("documentSelection")||e.setSelection(o),this._buffer.unlock(),this._buffer.input(i)}))}}function Dg(e){if(e.newChildren.length-e.oldChildren.length!=1)return;const t=function(e,t){const n=[];let r,i=0;return e.forEach((e=>{"equal"==e?(o(),i++):"insert"==e?(a("insert")?r.values.push(t[i]):(o(),r={type:"insert",index:i,values:[t[i]]}),i++):a("delete")?r.howMany++:(o(),r={type:"delete",index:i,howMany:1})})),o(),n;function o(){r&&(n.push(r),r=null)}function a(e){return r&&r.type==e}}(yc(e.oldChildren,e.newChildren,Og),e.newChildren);if(t.length>1)return;const n=t[0];return n.values[0]&&n.values[0].is("$text")?n:void 0}function Og(e,t){return e&&e.is("$text")&&t&&t.is("$text")?e.data===t.data:e===t}class Ng{constructor(e){this.editor=e,this.editing=this.editor.editing}handle(e,t){if(function(e){if(0==e.length)return!1;for(const t of e)if("children"===t.type&&!Dg(t))return!0;return!1}(e))this._handleContainerChildrenMutations(e,t);else for(const n of e)this._handleTextMutation(n,t),this._handleTextNodeInsertion(n)}_handleContainerChildrenMutations(e,t){const n=function(e){const t=e.map((e=>e.node)).reduce(((e,t)=>e.getCommonAncestor(t,{includeSelf:!0})));if(!t)return;return t.getAncestors({includeSelf:!0,parentFirst:!0}).find((e=>e.is("containerElement")||e.is("rootElement")))}(e);if(!n)return;const r=this.editor.editing.view.domConverter.mapViewToDom(n),i=new Lc(this.editor.editing.view.document),o=this.editor.data.toModel(i.domToView(r)).getChild(0),a=this.editor.editing.mapper.toModelElement(n);if(!a)return;const s=Array.from(o.getChildren()),l=Array.from(a.getChildren()),c=s[s.length-1],d=l[l.length-1],u=c&&c.is("element","softBreak"),h=d&&!d.is("element","softBreak");u&&h&&s.pop();const p=this.editor.model.schema;if(!Lg(s,p)||!Lg(l,p))return;const f=s.map((e=>e.is("$text")?e.data:"@")).join("").replace(/\u00A0/g," "),m=l.map((e=>e.is("$text")?e.data:"@")).join("").replace(/\u00A0/g," ");if(m===f)return;const _=yc(m,f),{firstChangeAt:g,insertions:b,deletions:v}=Ig(_);let y=null;t&&(y=this.editing.mapper.toModelRange(t.getFirstRange()));const E=f.substr(g,b),w=this.editor.model.createRange(this.editor.model.createPositionAt(a,g),this.editor.model.createPositionAt(a,g+v));this.editor.execute("input",{text:E,range:w,resultRange:y})}_handleTextMutation(e,t){if("text"!=e.type)return;const n=e.newText.replace(/\u00A0/g," "),r=e.oldText.replace(/\u00A0/g," ");if(r===n)return;const i=yc(r,n),{firstChangeAt:o,insertions:a,deletions:s}=Ig(i);let l=null;t&&(l=this.editing.mapper.toModelRange(t.getFirstRange()));const c=this.editing.view.createPositionAt(e.node,o),d=this.editing.mapper.toModelPosition(c),u=this.editor.model.createRange(d,d.getShiftedBy(s)),h=n.substr(o,a);this.editor.execute("input",{text:h,range:u,resultRange:l})}_handleTextNodeInsertion(e){if("children"!=e.type)return;const t=Dg(e),n=this.editing.view.createPositionAt(e.node,t.index),r=this.editing.mapper.toModelPosition(n),i=t.values[0].data;this.editor.execute("input",{text:i.replace(/\u00A0/g," "),range:this.editor.model.createRange(r)})}}function Lg(e,t){return e.every((e=>t.isInline(e)))}function Ig(e){let t=null,n=null;for(let r=0;r<e.length;r++){"equal"!=e[r]&&(t=null===t?r:t,n=r)}let r=0,i=0;for(let o=t;o<=n;o++)"insert"!=e[o]&&r++,"delete"!=e[o]&&i++;return{insertions:i,deletions:r,firstChangeAt:t}}class Pg extends $i{static get pluginName(){return"Input"}init(){const e=this.editor,t=new Mg(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t),function(e){let t=null;const n=e.model,r=e.editing.view,i=e.commands.get("input");function o(e){const o=n.document,s=r.document.isComposing,l=t&&t.isEqual(o.selection);t=null,i.isEnabled&&(ng(e)||o.selection.isCollapsed||s&&229===e.keyCode||!s&&229===e.keyCode&&l||a())}function a(){const e=i.buffer;e.lock();const t=e.batch;i._batches.add(t),n.enqueueChange(t,(()=>{n.deleteContent(n.document.selection)})),e.unlock()}Pl.isAndroid?r.document.on("beforeinput",((e,t)=>o(t)),{priority:"lowest"}):r.document.on("keydown",((e,t)=>o(t)),{priority:"lowest"}),r.document.on("compositionstart",(function(){const e=n.document,t=1!==e.selection.rangeCount||e.selection.getFirstRange().isFlat;e.selection.isCollapsed||t||a()}),{priority:"lowest"}),r.document.on("compositionend",(()=>{t=n.createSelection(n.document.selection)}),{priority:"lowest"})}(e),function(e){e.editing.view.document.on("mutations",((t,n,r)=>{new Ng(e).handle(n,r)}))}(e)}isInput(e){return this.editor.commands.get("input")._batches.has(e)}}class Fg extends $i{static get requires(){return[Pg,B_]}static get pluginName(){return"Typing"}}function Bg(e,t){let n=e.start;return{text:Array.from(e.getItems()).reduce(((e,r)=>r.is("$text")||r.is("$textProxy")?e+r.data:(n=t.createPositionAfter(r),"")),""),range:t.createRange(n,e.end)}}class Yg{constructor(e,t){this.model=e,this.testCallback=t,this.hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",(()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))})),this._startListening()}_startListening(){const e=this.model.document;this.listenTo(e.selection,"change:range",((t,{directChange:n})=>{n&&(e.selection.isCollapsed?this._evaluateTextBeforeSelection("selection"):this.hasMatch&&(this.fire("unmatched"),this.hasMatch=!1))})),this.listenTo(e,"change:data",((e,t)=>{"transparent"!=t.type&&this._evaluateTextBeforeSelection("data",{batch:t})}))}_evaluateTextBeforeSelection(e,t={}){const n=this.model,r=n.document.selection,i=n.createRange(n.createPositionAt(r.focus.parent,0),r.focus),{text:o,range:a}=Bg(i,n),s=this.testCallback(o);if(!s&&this.hasMatch&&this.fire("unmatched"),this.hasMatch=!!s,s){const n=Object.assign(t,{text:o,range:a});"object"==typeof s&&Object.assign(n,s),this.fire(`matched:${e}`,n)}}}qi(Yg,Ui);class Hg extends $i{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,n=e.editing.view,r=e.locale,i=t.document.selection;this.listenTo(n.document,"arrowKey",((e,t)=>{if(!i.isCollapsed)return;if(t.shiftKey||t.altKey||t.ctrlKey)return;const n=t.keyCode==Yl.arrowright,o=t.keyCode==Yl.arrowleft;if(!n&&!o)return;const a=r.contentLanguageDirection;let s=!1;s="ltr"===a&&n||"rtl"===a&&o?this._handleForwardMovement(t):this._handleBackwardMovement(t),!0===s&&e.stop()}),{context:"$text",priority:"highest"}),this._isNextGravityRestorationSkipped=!1,this.listenTo(i,"change:range",((e,t)=>{this._isNextGravityRestorationSkipped?this._isNextGravityRestorationSkipped=!1:this._isGravityOverridden&&(!t.directChange&&Vg(i.getFirstPosition(),this.attributes)||this._restoreGravity())}))}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,n=this.editor.model.document.selection,r=n.getFirstPosition();return!this._isGravityOverridden&&((!r.isAtStart||!Ug(n,t))&&(Vg(r,t)?(jg(e),this._overrideGravity(),!0):void 0))}_handleBackwardMovement(e){const t=this.attributes,n=this.editor.model,r=n.document.selection,i=r.getFirstPosition();return this._isGravityOverridden?(jg(e),this._restoreGravity(),zg(n,t,i),!0):i.isAtStart?!!Ug(r,t)&&(jg(e),zg(n,t,i),!0):function(e,t){return Vg(e.getShiftedBy(-1),t)}(i,t)?i.isAtEnd&&!Ug(r,t)&&Vg(i,t)?(jg(e),zg(n,t,i),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):void 0}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change((e=>e.overrideSelectionGravity()))}_restoreGravity(){this.editor.model.change((e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null}))}}function Ug(e,t){for(const n of t)if(e.hasAttribute(n))return!0;return!1}function zg(e,t,n){const r=n.nodeBefore;e.change((e=>{r?e.setSelectionAttribute(r.getAttributes()):e.removeSelectionAttribute(t)}))}function jg(e){e.preventDefault()}function Vg(e,t){const{nodeBefore:n,nodeAfter:r}=e;for(const e of t){const t=n?n.getAttribute(e):void 0;if((r?r.getAttribute(e):void 0)!==t)return!0}return!1}Gg('"'),Gg("'"),Gg("'"),Gg('"'),Gg('"'),Gg("'");function Gg(e){return new RegExp(`(^|\\s)(${e})([^${e}]*)(${e})$`)}function Wg(e,t,n,r){return r.createRange(qg(e,t,n,!0,r),qg(e,t,n,!1,r))}function qg(e,t,n,r,i){let o=e.textNode||(r?e.nodeBefore:e.nodeAfter),a=null;for(;o&&o.getAttribute(t)==n;)a=o,o=r?o.previousSibling:o.nextSibling;return a?i.createPositionAt(a,r?"before":"after"):e}function $g(e,t,n,r){const i=e.editing.view,o=new Set;i.document.registerPostFixer((i=>{const a=e.model.document.selection;let s=!1;if(a.hasAttribute(t)){const l=Wg(a.getFirstPosition(),t,a.getAttribute(t),e.model),c=e.editing.mapper.toViewRange(l);for(const e of c.getItems())e.is("element",n)&&!e.hasClass(r)&&(i.addClass(r,e),o.add(e),s=!0)}return s})),e.conversion.for("editingDowncast").add((e=>{function t(){i.change((e=>{for(const t of o.values())e.removeClass(r,t),o.delete(t)}))}e.on("insert",t,{priority:"highest"}),e.on("remove",t,{priority:"highest"}),e.on("attribute",t,{priority:"highest"}),e.on("selection",t,{priority:"highest"})}))}class Kg extends Qi{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this.listenTo(e.data,"set",(()=>this.clearStack()))}refresh(){this.isEnabled=this._stack.length>0}addBatch(e){const t=this.editor.model.document.selection,n={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:n}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,n){const r=this.editor.model,i=r.document,o=[],a=e.map((e=>e.getTransformedByOperations(n))),s=a.flat();for(const e of a){const t=e.filter((e=>e.root!=i.graveyard)).filter((e=>!Xg(e,s)));t.length&&(Qg(t),o.push(t[0]))}o.length&&r.change((e=>{e.setSelection(o,{backward:t})}))}_undo(e,t){const n=this.editor.model,r=n.document;this._createdBatches.add(t);const i=e.operations.slice().filter((e=>e.isDocumentOperation));i.reverse();for(const e of i){const i=e.baseVersion+1,o=Array.from(r.history.getOperations(i)),a=Fm([e.getReversed()],o,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(const i of a)t.addOperation(i),n.applyOperation(i),r.history.setOperationAsUndone(e,i)}}}function Qg(e){e.sort(((e,t)=>e.start.isBefore(t.start)?-1:1));for(let t=1;t<e.length;t++){const n=e[t-1].getJoined(e[t],!0);n&&(t--,e.splice(t,2,n))}}function Xg(e,t){return t.some((t=>t!==e&&t.containsRange(e,!0)))}class Zg extends Kg{execute(e=null){const t=e?this._stack.findIndex((t=>t.batch==e)):this._stack.length-1,n=this._stack.splice(t,1)[0],r=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(r,(()=>{this._undo(n.batch,r);const e=this.editor.model.document.history.getOperations(n.batch.baseVersion);this._restoreSelection(n.selection.ranges,n.selection.isBackward,e),this.fire("revert",n.batch,r)})),this.refresh()}}class Jg extends Kg{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(t,(()=>{const n=e.batch.operations[e.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(n);this._restoreSelection(e.selection.ranges,e.selection.isBackward,r),this._undo(e.batch,t)})),this.refresh()}}class eb extends $i{static get pluginName(){return"UndoEditing"}constructor(e){super(e),this._batchRegistry=new WeakSet}init(){const e=this.editor;this._undoCommand=new Zg(e),this._redoCommand=new Jg(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",((e,t)=>{const n=t[0];if(!n.isDocumentOperation)return;const r=n.batch,i=this._redoCommand._createdBatches.has(r),o=this._undoCommand._createdBatches.has(r);this._batchRegistry.has(r)||"transparent"==r.type&&!i&&!o||(i?this._undoCommand.addBatch(r):o||(this._undoCommand.addBatch(r),this._redoCommand.clearStack()),this._batchRegistry.add(r))}),{priority:"highest"}),this.listenTo(this._undoCommand,"revert",((e,t,n)=>{this._redoCommand.addBatch(n)})),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo")}}const tb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',nb='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';class rb extends $i{static get pluginName(){return"UndoUI"}init(){const e=this.editor,t=e.locale,n=e.t,r="ltr"==t.uiLanguageDirection?tb:nb,i="ltr"==t.uiLanguageDirection?nb:tb;this._addButton("undo",n("Undo"),"CTRL+Z",r),this._addButton("redo",n("Redo"),"CTRL+Y",i)}_addButton(e,t,n,r){const i=this.editor;i.ui.componentFactory.add(e,(o=>{const a=i.commands.get(e),s=new Cf(o);return s.set({label:t,icon:r,keystroke:n,tooltip:!0}),s.bind("isEnabled").to(a,"isEnabled"),this.listenTo(s,"execute",(()=>{i.execute(e),i.editing.view.focus()})),s}))}}class ib extends $i{static get requires(){return[eb,rb]}static get pluginName(){return"Undo"}}class ob extends Qi{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,n=t.document.selection,r=void 0===e.forceValue?!this.value:e.forceValue;t.change((e=>{if(n.isCollapsed)r?e.setSelectionAttribute(this.attributeKey,!0):e.removeSelectionAttribute(this.attributeKey);else{const i=t.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const t of i)r?e.setAttribute(this.attributeKey,r,t):e.removeAttribute(this.attributeKey,t)}}))}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,n=e.document.selection;if(n.isCollapsed)return n.hasAttribute(this.attributeKey);for(const e of n.getRanges())for(const n of e.getItems())if(t.checkAttribute(n,this.attributeKey))return n.hasAttribute(this.attributeKey);return!1}}const ab="bold";class sb extends $i{static get pluginName(){return"BoldEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ab}),e.model.schema.setAttributeProperties(ab,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ab,view:"strong",upcastAlso:["b",e=>{const t=e.getStyle("font-weight");return t?"bold"==t||Number(t)>=600?{name:!0,styles:["font-weight"]}:void 0:null}]}),e.commands.add(ab,new ob(e,ab)),e.keystrokes.set("CTRL+B",ab)}}const lb="bold";class cb extends $i{static get pluginName(){return"BoldUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(lb,(n=>{const r=e.commands.get(lb),i=new Cf(n);return i.set({label:t("Bold"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(lb),e.editing.view.focus()})),i}))}}class db extends $i{static get requires(){return[sb,cb]}static get pluginName(){return"Bold"}}const ub="italic";class hb extends $i{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:ub}),e.model.schema.setAttributeProperties(ub,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ub,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(ub,new ob(e,ub)),e.keystrokes.set("CTRL+I",ub)}}const pb="italic";class fb extends $i{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(pb,(n=>{const r=e.commands.get(pb),i=new Cf(n);return i.set({label:t("Italic"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',keystroke:"CTRL+I",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(pb),e.editing.view.focus()})),i}))}}class mb extends $i{static get requires(){return[hb,fb]}static get pluginName(){return"Italic"}}const _b="underline";class gb extends $i{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:_b}),e.model.schema.setAttributeProperties(_b,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:_b,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(_b,new ob(e,_b)),e.keystrokes.set("CTRL+U","underline")}}const bb="underline";class vb extends $i{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(bb,(n=>{const r=e.commands.get(bb),i=new Cf(n);return i.set({label:t("Underline"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',keystroke:"CTRL+U",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(bb),e.editing.view.focus()})),i}))}}class yb extends $i{static get requires(){return[gb,vb]}static get pluginName(){return"Underline"}}const Eb="strikethrough";class wb extends $i{static get pluginName(){return"StrikethroughEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Eb}),e.model.schema.setAttributeProperties(Eb,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Eb,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),e.commands.add(Eb,new ob(e,Eb)),e.keystrokes.set("CTRL+SHIFT+X","strikethrough")}}const Sb="strikethrough";class Tb extends $i{static get pluginName(){return"StrikethroughUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Sb,(n=>{const r=e.commands.get(Sb),i=new Cf(n);return i.set({label:t("Strikethrough"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>',keystroke:"CTRL+SHIFT+X",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(Sb),e.editing.view.focus()})),i}))}}const kb="code";class Cb extends $i{static get pluginName(){return"CodeEditing"}static get requires(){return[Hg]}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:kb}),e.model.schema.setAttributeProperties(kb,{isFormatting:!0,copyOnEnter:!1}),e.conversion.attributeToElement({model:kb,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}}),e.commands.add(kb,new ob(e,kb)),e.plugins.get(Hg).registerAttribute(kb),$g(e,kb,"code","ck-code_selected")}}r(774);const xb="code";class Ab extends $i{static get pluginName(){return"CodeUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(xb,(n=>{const r=e.commands.get(xb),i=new Cf(n);return i.set({label:t("Code"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(xb),e.editing.view.focus()})),i}))}}const Rb="subscript";class Mb extends $i{static get pluginName(){return"SubscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Rb}),e.model.schema.setAttributeProperties(Rb,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Rb,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),e.commands.add(Rb,new ob(e,Rb))}}const Db="subscript";class Ob extends $i{static get pluginName(){return"SubscriptUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Db,(n=>{const r=e.commands.get(Db),i=new Cf(n);return i.set({label:t("Subscript"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(Db),e.editing.view.focus()})),i}))}}const Nb="superscript";class Lb extends $i{static get pluginName(){return"SuperscriptEditing"}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Nb}),e.model.schema.setAttributeProperties(Nb,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Nb,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),e.commands.add(Nb,new ob(e,Nb))}}const Ib="superscript";class Pb extends $i{static get pluginName(){return"SuperscriptUI"}init(){const e=this.editor,t=e.t;e.ui.componentFactory.add(Ib,(n=>{const r=e.commands.get(Ib),i=new Cf(n);return i.set({label:t("Superscript"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>',tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(r,"value","isEnabled"),this.listenTo(i,"execute",(()=>{e.execute(Ib),e.editing.view.focus()})),i}))}}class Fb{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach((e=>this._definitions.add(e))):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",((e,t,n)=>{if(!n.consumable.test(t.item,"attribute:linkHref"))return;const r=n.writer,i=r.document.selection;for(const e of this._definitions){const o=r.createAttributeElement("a",e.attributes,{priority:5});r.setCustomProperty("link",!0,o),e.callback(t.attributeNewValue)?t.item.is("selection")?r.wrap(i.getFirstRange(),o):r.wrap(n.mapper.toViewRange(t.range),o):r.unwrap(n.mapper.toViewRange(t.range),o)}}),{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:image",((e,t,n)=>{const r=n.mapper.toViewElement(t.item),i=Array.from(r.getChildren()).find((e=>"a"===e.name));for(const e of this._definitions){const r=ws(e.attributes);if(e.callback(t.attributeNewValue))for(const[e,t]of r)"class"===e?n.writer.addClass(t,i):n.writer.setAttribute(e,t,i);else for(const[e,t]of r)"class"===e?n.writer.removeClass(t,i):n.writer.removeAttribute(e,i)}}))}}}const Bb=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:js(e,t,n)};var Yb=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Hb=function(e){return Yb.test(e)};const Ub=function(e){return e.split("")};var zb="[\\ud800-\\udfff]",jb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vb="\\ud83c[\\udffb-\\udfff]",Gb="[^\\ud800-\\udfff]",Wb="(?:\\ud83c[\\udde6-\\uddff]){2}",qb="[\\ud800-\\udbff][\\udc00-\\udfff]",$b="(?:"+jb+"|"+Vb+")"+"?",Kb="[\\ufe0e\\ufe0f]?",Qb=Kb+$b+("(?:\\u200d(?:"+[Gb,Wb,qb].join("|")+")"+Kb+$b+")*"),Xb="(?:"+[Gb+jb+"?",jb,Wb,qb,zb].join("|")+")",Zb=RegExp(Vb+"(?="+Vb+")|"+Xb+Qb,"g");const Jb=function(e){return e.match(Zb)||[]};const ev=function(e){return Hb(e)?Jb(e):Ub(e)};const tv=function(e){return function(t){t=Bs(t);var n=Hb(t)?ev(t):void 0,r=n?n[0]:t.charAt(0),i=n?Bb(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),nv=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,rv=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i,iv=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,ov=/^((\w+:(\/{2,})?)|(\W))/i,av="Ctrl+K";function sv(e,{writer:t}){const n=t.createAttributeElement("a",{href:e},{priority:5});return t.setCustomProperty("link",!0,n),n}function lv(e){return function(e){return e.replace(nv,"").match(rv)}(e=String(e))?e:"#"}function cv(e,t){return!!e&&(e.is("element","image")&&t.checkAttribute("image","linkHref"))}function dv(e,t){const n=(r=e,iv.test(r)?"mailto:":t);var r;const i=!!n&&!ov.test(e);return e&&i?n+e:e}class uv extends Qi{constructor(e){super(e),this.manualDecorators=new ls,this.automaticDecorators=new Fb}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document,n=Vd(t.selection.getSelectedBlocks());cv(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.selection.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"linkHref"));for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}execute(e,t={}){const n=this.editor.model,r=n.document.selection,i=[],o=[];for(const e in t)t[e]?i.push(e):o.push(e);n.change((t=>{if(r.isCollapsed){const a=r.getFirstPosition();if(r.hasAttribute("linkHref")){const s=Wg(a,"linkHref",r.getAttribute("linkHref"),n);t.setAttribute("linkHref",e,s),i.forEach((e=>{t.setAttribute(e,!0,s)})),o.forEach((e=>{t.removeAttribute(e,s)})),t.setSelection(t.createPositionAfter(s.end.nodeBefore))}else if(""!==e){const o=ws(r.getAttributes());o.set("linkHref",e),i.forEach((e=>{o.set(e,!0)}));const{end:s}=n.insertContent(t.createText(e,o),a);t.setSelection(s)}["linkHref",...i,...o].forEach((e=>{t.removeSelectionAttribute(e)}))}else{const a=n.schema.getValidRanges(r.getRanges(),"linkHref"),s=[];for(const e of r.getSelectedBlocks())n.schema.checkAttribute(e,"linkHref")&&s.push(t.createRangeOn(e));const l=s.slice();for(const e of a)this._isRangeToUpdate(e,s)&&l.push(e);for(const n of l)t.setAttribute("linkHref",e,n),i.forEach((e=>{t.setAttribute(e,!0,n)})),o.forEach((e=>{t.removeAttribute(e,n)}))}}))}_getDecoratorStateFromModel(e){const t=this.editor.model,n=t.document,r=Vd(n.selection.getSelectedBlocks());return cv(r,t.schema)?r.getAttribute(e):n.selection.getAttribute(e)}_isRangeToUpdate(e,t){for(const n of t)if(n.containsRange(e))return!1;return!0}}class hv extends Qi{refresh(){const e=this.editor.model,t=e.document,n=Vd(t.selection.getSelectedBlocks());cv(n,e.schema)?this.isEnabled=e.schema.checkAttribute(n,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"linkHref")}execute(){const e=this.editor,t=this.editor.model,n=t.document.selection,r=e.commands.get("link");t.change((e=>{const i=n.isCollapsed?[Wg(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),t)]:t.schema.getValidRanges(n.getRanges(),"linkHref");for(const t of i)if(e.removeAttribute("linkHref",t),r)for(const n of r.manualDecorators)e.removeAttribute(n.id,t)}))}}class pv{constructor({id:e,label:t,attributes:n,defaultValue:r}){this.id=e,this.set("value"),this.defaultValue=r,this.label=t,this.attributes=n}}qi(pv,Ui);r(9328);const fv="automatic",mv=/^(https?:)?\/\//;class _v extends $i{static get pluginName(){return"LinkEditing"}static get requires(){return[Hg,Pg,R_]}constructor(e){super(e),e.config.define("link",{addTargetToExternalLinks:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:sv}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(e,t)=>sv(lv(e),t)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:e=>e.getAttribute("href")}}),e.commands.add("link",new uv(e)),e.commands.add("unlink",new hv(e));const t=function(e,t){const n={"Open in a new tab":e("Open in a new tab"),Downloadable:e("Downloadable")};return t.forEach((e=>(e.label&&n[e.label]&&(e.label=n[e.label]),e))),t}(e.t,function(e){const t=[];if(e)for(const[n,r]of Object.entries(e)){const e=Object.assign({},r,{id:`link${tv(n)}`});t.push(e)}return t}(e.config.get("link.decorators")));this._enableAutomaticDecorators(t.filter((e=>e.mode===fv))),this._enableManualDecorators(t.filter((e=>"manual"===e.mode)));e.plugins.get(Hg).registerAttribute("linkHref"),$g(e,"linkHref","a","ck-link_selected"),this._enableInsertContentSelectionAttributesFixer(),this._enableClickingAfterLink(),this._enableTypingOverLink(),this._handleDeleteContentAfterLink()}_enableAutomaticDecorators(e){const t=this.editor,n=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&n.add({id:"linkIsExternal",mode:fv,callback:e=>mv.test(e),attributes:{target:"_blank",rel:"noopener noreferrer"}}),n.add(e),n.length&&t.conversion.for("downcast").add(n.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,n=t.commands.get("link").manualDecorators;e.forEach((e=>{t.model.schema.extend("$text",{allowAttributes:e.id}),n.add(new pv(e)),t.conversion.for("downcast").attributeToElement({model:e.id,view:(t,{writer:r})=>{if(t){const t=n.get(e.id).attributes,i=r.createAttributeElement("a",t,{priority:5});return r.setCustomProperty("link",!0,i),i}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:n.get(e.id).attributes},model:{key:e.id}})}))}_enableInsertContentSelectionAttributesFixer(){const e=this.editor,t=e.model,n=t.document.selection,r=e.commands.get("link");this.listenTo(t,"insertContent",(()=>{const e=n.anchor.nodeBefore,i=n.anchor.nodeAfter;n.hasAttribute("linkHref")&&e&&e.hasAttribute("linkHref")&&(i&&i.hasAttribute("linkHref")||t.change((e=>{gv(e,r.manualDecorators)})))}),{priority:"low"})}_enableClickingAfterLink(){const e=this.editor,t=e.commands.get("link");e.editing.view.addObserver(Gm);let n=!1;this.listenTo(e.editing.view.document,"mousedown",(()=>{n=!0})),this.listenTo(e.editing.view.document,"selectionChange",(()=>{if(!n)return;n=!1;const r=e.model.document.selection;if(!r.isCollapsed)return;if(!r.hasAttribute("linkHref"))return;const i=r.getFirstPosition(),o=Wg(i,"linkHref",r.getAttribute("linkHref"),e.model);(i.isTouching(o.start)||i.isTouching(o.end))&&e.model.change((e=>{gv(e,t.manualDecorators)}))}))}_enableTypingOverLink(){const e=this.editor,t=e.editing.view;let n,r;this.listenTo(t.document,"delete",(()=>{r=!0}),{priority:"high"}),this.listenTo(e.model,"deleteContent",(()=>{const t=e.model.document.selection;t.isCollapsed||(r?r=!1:bv(e)&&function(e){const t=e.document.selection,n=t.getFirstPosition(),r=t.getLastPosition(),i=n.nodeAfter;if(!i)return!1;if(!i.is("$text"))return!1;if(!i.hasAttribute("linkHref"))return!1;const o=r.textNode||r.nodeBefore;if(i===o)return!0;return Wg(n,"linkHref",i.getAttribute("linkHref"),e).containsRange(e.createRange(n,r),!0)}(e.model)&&(n=t.getAttributes()))}),{priority:"high"}),this.listenTo(e.model,"insertContent",((t,[i])=>{r=!1,bv(e)&&n&&(e.model.change((e=>{for(const[t,r]of n)e.setAttribute(t,r,i)})),n=null)}),{priority:"high"})}_handleDeleteContentAfterLink(){const e=this.editor,t=e.model,n=t.document.selection,r=e.editing.view,i=e.commands.get("link");let o=!1,a=!1;this.listenTo(r.document,"delete",((e,t)=>{a=t.domEvent.keyCode===Yl.backspace}),{priority:"high"}),this.listenTo(t,"deleteContent",(()=>{o=!1;const e=n.getFirstPosition(),r=n.getAttribute("linkHref");if(!r)return;const i=Wg(e,"linkHref",r,t);o=i.containsPosition(e)||i.end.isEqual(e)}),{priority:"high"}),this.listenTo(t,"deleteContent",(()=>{a&&(a=!1,o||e.model.enqueueChange((e=>{gv(e,i.manualDecorators)})))}),{priority:"low"})}}function gv(e,t){e.removeSelectionAttribute("linkHref");for(const n of t)e.removeSelectionAttribute(n.id)}function bv(e){return e.plugins.get("Input").isInput(e.model.change((e=>e.batch)))}r(4838),r(4360);class vv extends ef{constructor(e,t){super(e);const n=e.t;this.focusTracker=new Gd,this.keystrokes=new Wd,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(n("Save"),Vp,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),jp,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusables=new Jp,this._focusCycler=new Mf({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const r=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&r.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:r,tabindex:"-1"},children:this.children}),Xp(this)}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(((e,t)=>(e[t.name]=t.isOn,e)),{})}render(){super.render(),Zp({view:this});[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new sm(this.locale,lm);return t.label=e("Link URL"),t}_createButton(e,t,n,r){const i=new Cf(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const n of e.manualDecorators){const r=new xf(this.locale);r.set({name:n.id,label:n.label,withText:!0}),r.bind("isOn").toMany([n,e],"value",((e,t)=>void 0===t&&void 0===e?n.defaultValue:e)),r.on("execute",(()=>{n.set("value",!r.isOn)})),t.add(r)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const e=new ef;e.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map((e=>({tag:"li",children:[e],attributes:{class:["ck","ck-list__item"]}}))),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(e)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}}r(9677);class yv extends ef{constructor(e){super(e);const t=e.t;this.focusTracker=new Gd,this.keystrokes=new Wd,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(t("Unlink"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',"unlink"),this.editButtonView=this._createButton(t("Edit link"),$p,"edit"),this.set("href"),this._focusables=new Jp,this._focusCycler=new Mf({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render();[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)})),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createButton(e,t,n){const r=new Cf(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,n),r}_createPreviewButton(){const e=new Cf(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",(e=>e&&lv(e))),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",(e=>e||n("This link has no URL"))),e.bind("isEnabled").to(this,"href",(e=>!!e)),e.template.tag="a",e.template.eventListeners={},e}}const Ev="link-ui";class wv extends $i{static get requires(){return[bm]}static get pluginName(){return"LinkUI"}init(){const e=this.editor;e.editing.view.addObserver(Vm),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(bm),this._createToolbarLinkButton(),this._enableUserBalloonInteractions(),e.conversion.for("editingDowncast").markerToHighlight({model:Ev,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ev,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}})}destroy(){super.destroy(),this.formView.destroy()}_createActionsView(){const e=this.editor,t=new yv(e.locale),n=e.commands.get("link"),r=e.commands.get("unlink");return t.bind("href").to(n,"value"),t.editButtonView.bind("isEnabled").to(n),t.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(t,"edit",(()=>{this._addFormView()})),this.listenTo(t,"unlink",(()=>{e.execute("unlink"),this._hideUI()})),t.keystrokes.set("Esc",((e,t)=>{this._hideUI(),t()})),t.keystrokes.set(av,((e,t)=>{this._addFormView(),t()})),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),n=e.config.get("link.defaultProtocol"),r=new vv(e.locale,t);return r.urlInputView.fieldView.bind("value").to(t,"value"),r.urlInputView.bind("isReadOnly").to(t,"isEnabled",(e=>!e)),r.saveButtonView.bind("isEnabled").to(t),this.listenTo(r,"submit",(()=>{const{value:t}=r.urlInputView.fieldView.element,i=dv(t,n);e.execute("link",i,r.getDecoratorSwitchesState()),this._closeFormView()})),this.listenTo(r,"cancel",(()=>{this._closeFormView()})),r.keystrokes.set("Esc",((e,t)=>{this._closeFormView(),t()})),r}_createToolbarLinkButton(){const e=this.editor,t=e.commands.get("link"),n=e.t;e.keystrokes.set(av,((e,n)=>{n(),t.isEnabled&&this._showUI(!0)})),e.ui.componentFactory.add("link",(e=>{const r=new Cf(e);return r.isEnabled=!0,r.label=n("Link"),r.icon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',r.keystroke=av,r.tooltip=!0,r.isToggleable=!0,r.bind("isEnabled").to(t,"isEnabled"),r.bind("isOn").to(t,"value",(e=>!!e)),this.listenTo(r,"execute",(()=>this._showUI(!0))),r}))}_enableUserBalloonInteractions(){const e=this.editor.editing.view.document;this.listenTo(e,"click",(()=>{this._getSelectedLinkElement()&&this._showUI()})),this.editor.keystrokes.set("Tab",((e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())}),{priority:"high"}),this.editor.keystrokes.set("Esc",((e,t)=>{this._isUIVisible&&(this._hideUI(),t())})),Qp({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions(),this.formView.urlInputView.fieldView.element.value=e.value||""}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),void 0!==e.value?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let n=this._getSelectedLinkElement(),r=o();const i=()=>{const e=this._getSelectedLinkElement(),t=o();n&&!e||!n&&t!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=e,r=t};function o(){return t.selection.focus.getAncestors().reverse().find((e=>e.is("element")))}this.listenTo(e.ui,"update",i),this.listenTo(this._balloon,"change:visibleView",i)}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){return this._balloon.visibleView==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,n=e.document;let r=null;if(t.markers.has(Ev)){const t=Array.from(this.editor.editing.mapper.markerNameToElements(Ev)),n=e.createRange(e.createPositionBefore(t[0]),e.createPositionAfter(t[t.length-1]));r=e.domConverter.viewRangeToDom(n)}else{const t=this._getSelectedLinkElement(),i=n.selection.getFirstRange();r=t?e.domConverter.mapViewToDom(t):e.domConverter.viewRangeToDom(i)}return{target:r}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection;if(t.isCollapsed)return Sv(t.getFirstPosition());{const n=t.getFirstRange().getTrimmed(),r=Sv(n.start),i=Sv(n.end);return r&&r==i&&e.createRangeIn(r).getTrimmed().isEqual(n)?r:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change((t=>{const n=e.document.selection.getFirstRange();if(e.markers.has(Ev))t.updateMarker(Ev,{range:n});else if(n.start.isAtEnd){const r=n.start.getLastMatchingPosition((({item:t})=>!e.schema.isContent(t)),{boundaries:n});t.addMarker(Ev,{usingOperation:!1,affectsData:!1,range:t.createRange(r,n.end)})}else t.addMarker(Ev,{usingOperation:!1,affectsData:!1,range:n})}))}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ev)&&e.change((e=>{e.removeMarker(Ev)}))}}function Sv(e){return e.getAncestors().find((e=>{return(t=e).is("attributeElement")&&!!t.getCustomProperty("link");var t}))}const Tv=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i");class kv extends $i{static get pluginName(){return"AutoLink"}init(){const e=this.editor.model.document.selection;e.on("change:range",(()=>{this.isEnabled=!e.anchor.parent.is("element","codeBlock")})),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling()}_enableTypingHandling(){const e=this.editor,t=new Yg(e.model,(e=>{if(!function(e){return e.length>4&&" "===e[e.length-1]&&" "!==e[e.length-2]}(e))return;const t=Cv(e.substr(0,e.length-1));return t?{url:t}:void 0})),n=e.plugins.get("Input");t.on("matched:data",((t,r)=>{const{batch:i,range:o,url:a}=r;if(!n.isInput(i))return;const s=o.end.getShiftedBy(-1),l=s.getShiftedBy(-a.length),c=e.model.createRange(l,s);this._applyAutoLink(a,c)})),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("enter");n&&n.on("execute",(()=>{const e=t.document.selection.getFirstPosition();if(!e.parent.previousSibling)return;const n=t.createRangeIn(e.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(n)}))}_enableShiftEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("shiftEnter");n&&n.on("execute",(()=>{const e=t.document.selection.getFirstPosition(),n=t.createRange(t.createPositionAt(e.parent,0),e.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(n)}))}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:n,range:r}=Bg(e,t),i=Cv(n);if(i){const e=t.createRange(r.end.getShiftedBy(-i.length),r.end);this._applyAutoLink(i,e)}}_applyAutoLink(e,t){const n=this.editor.model;this.isEnabled&&function(e,t){return t.schema.checkAttributeInSelection(t.createSelection(e),"linkHref")}(t,n)&&n.enqueueChange((n=>{const r=this.editor.config.get("link.defaultProtocol"),i=dv(e,r);n.setAttribute("linkHref",i,t)}))}}function Cv(e){const t=Tv.exec(e);return t?t[2]:null}class xv extends $i{static get requires(){return[_v,wv,kv]}static get pluginName(){return"Link"}}class Av extends Qi{refresh(){const e=this.editor.model,t=Vd(e.document.selection.getSelectedBlocks());this.value=!!t&&t.is("element","paragraph"),this.isEnabled=!!t&&Rv(t,e.schema)}execute(e={}){const t=this.editor.model,n=t.document;t.change((r=>{const i=(e.selection||n.selection).getSelectedBlocks();for(const e of i)!e.is("element","paragraph")&&Rv(e,t.schema)&&r.rename(e,"paragraph")}))}}function Rv(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e)}class Mv extends Qi{execute(e){const t=this.editor.model;let n=e.position;t.change((e=>{const r=e.createElement("paragraph");if(!t.schema.checkChild(n.parent,r)){const i=t.schema.findAllowedParent(n,r);if(!i)return;n=e.split(n,i).position}t.insertContent(r,n),e.setSelection(r,"in")}))}}class Dv extends $i{static get pluginName(){return"Paragraph"}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new Av(e)),e.commands.add("insertParagraph",new Mv(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(e,{writer:t})=>Dv.paragraphLikeElements.has(e.name)?e.isEmpty?null:t.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}}Dv.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);class Ov{constructor(){const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=e=>{this.loaded=e.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise(((n,r)=>{t.onload=()=>{const e=t.result;this._data=e,n(e)},t.onerror=()=>{r("error")},t.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)}))}abort(){this._reader.abort()}}qi(Ov,Ui);class Nv extends $i{static get pluginName(){return"FileRepository"}static get requires(){return[zp]}init(){this.loaders=new ls,this.loaders.on("add",(()=>this._updatePendingAction())),this.loaders.on("remove",(()=>this._updatePendingAction())),this._loadersMap=new Map,this._pendingAction=null,this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",((e,t)=>t?e/t*100:0))}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return qn("filerepository-no-upload-adapter"),null;const t=new Lv(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then((e=>{this._loadersMap.set(e,t)})).catch((()=>{})),t.on("change:uploaded",(()=>{let e=0;for(const t of this.loaders)e+=t.uploaded;this.uploaded=e})),t.on("change:uploadTotal",(()=>{let e=0;for(const t of this.loaders)t.uploadTotal&&(e+=t.uploadTotal);this.uploadTotal=e})),t}destroyLoader(e){const t=e instanceof Lv?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach(((e,n)=>{e===t&&this._loadersMap.delete(n)}))}_updatePendingAction(){const e=this.editor.plugins.get(zp);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,n=e=>`${t("Upload in progress")} ${parseInt(e)}%.`;this._pendingAction=e.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else e.remove(this._pendingAction),this._pendingAction=null}}qi(Nv,Ui);class Lv{constructor(e,t){this.id=Vn(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new Ov,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",((e,t)=>t?e/t*100:0)),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then((e=>this._filePromiseWrapper?e:null)):Promise.resolve(null)}get data(){return this._reader.data}read(){if("idle"!=this.status)throw new Wn("filerepository-read-wrong-status",this);return this.status="reading",this.file.then((e=>this._reader.read(e))).then((e=>{if("reading"!==this.status)throw this.status;return this.status="idle",e})).catch((e=>{if("aborted"===e)throw this.status="aborted","aborted";throw this.status="error",this._reader.error?this._reader.error:e}))}upload(){if("idle"!=this.status)throw new Wn("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then((()=>this._adapter.upload())).then((e=>(this.uploadResponse=e,this.status="idle",e))).catch((e=>{if("aborted"===this.status)throw"aborted";throw this.status="error",e}))}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?"reading"==e?this._reader.abort():"uploading"==e&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch((()=>{})),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise(((n,r)=>{t.rejecter=r,t.isFulfilled=!1,e.then((e=>{t.isFulfilled=!0,n(e)})).catch((e=>{t.isFulfilled=!0,r(e)}))})),t}}qi(Lv,Ui);class Iv extends ef{constructor(e){super(e),this.buttonView=new Cf(e),this._fileInputView=new Pv(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.setTemplate({tag:"span",attributes:{class:"ck-file-dialog-button"},children:[this.buttonView,this._fileInputView]}),this.buttonView.on("execute",(()=>{this._fileInputView.open()}))}focus(){this.buttonView.focus()}}class Pv extends ef{constructor(e){super(e),this.set("acceptedType"),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to((()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""}))}})}open(){this.element.click()}}class Fv extends $i{static get pluginName(){return"CloudServicesUploadAdapter"}static get requires(){return["CloudServices",Nv]}init(){const e=this.editor,t=e.plugins.get("CloudServices"),n=t.token,r=t.uploadUrl;n&&(this._uploadGateway=e.plugins.get("CloudServicesCore").createUploadGateway(n,r),e.plugins.get(Nv).createUploadAdapter=e=>new Bv(this._uploadGateway,e))}}class Bv{constructor(e,t){this.uploadGateway=e,this.loader=t}upload(){return this.loader.file.then((e=>(this.fileUploader=this.uploadGateway.upload(e),this.fileUploader.on("progress",((e,t)=>{this.loader.uploadTotal=t.total,this.loader.uploaded=t.uploaded})),this.fileUploader.send())))}abort(){this.fileUploader.abort()}}class Yv{constructor(e){this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}begin(e,t,n){const r=new Fd(t);this.activeHandlePosition=function(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const n of t)if(e.classList.contains(Hv(n)))return n}(e),this._referenceCoordinates=function(e,t){const n=new Fd(e),r=t.split("-"),i={x:"right"==r[1]?n.right:n.left,y:"bottom"==r[0]?n.bottom:n.top};return i.x+=e.ownerDocument.defaultView.scrollX,i.y+=e.ownerDocument.defaultView.scrollY,i}(t,function(e){const t=e.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[t[0]]}-${n[t[1]]}`}(this.activeHandlePosition)),this.originalWidth=r.width,this.originalHeight=r.height,this.aspectRatio=r.width/r.height;const i=n.style.width;i&&i.match(/^\d+(\.\d*)?%$/)?this.originalWidthPercents=parseFloat(i):this.originalWidthPercents=function(e,t){const n=e.parentElement,r=parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width);return t.width/r*100}(n,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function Hv(e){return`ck-widget__resizer__handle-${e}`}qi(Yv,Ui);class Uv{constructor(e){this._options=e,this._domResizerWrapper=null,this._viewResizerWrapper=null,this.set("isEnabled",!0),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",(e=>{this.state.proposedWidth||this.state.proposedWidthPercents||(this._cleanup(),e.stop())}),{priority:"high"}),this.on("change:isEnabled",(()=>{this.isEnabled&&this.redraw()}))}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change((n=>{const r=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},(function(t){const n=this.toDomElement(t);return e._appendHandles(n),e._appendSizeUI(n),e._domResizerWrapper=n,e.on("change:isEnabled",((e,t,r)=>{n.style.display=r?"":"none"})),n.style.display=e.isEnabled?"":"none",n}));n.insert(n.createPositionAt(t,"end"),r),n.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=r}))}begin(e){this.state=new Yv(this._options),this._sizeUI.bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change((e=>{const n=this._options.unit||"%",r=("%"===n?t.widthPercents:t.width)+n;e.setStyle("width",r,this._options.viewElement)}));const n=this._getHandleHost(),r=new Fd(n);t.handleHostWidth=Math.round(r.width),t.handleHostHeight=Math.round(r.height);const i=new Fd(n);t.width=Math.round(i.width),t.height=Math.round(i.height),this.redraw(r),this.state.update(t)}commit(){const e=this._options.unit||"%",t=("%"===e?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change((()=>{this._cleanup(),this._options.onCommit(t)}))}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!((n=t)&&n.ownerDocument&&n.ownerDocument.contains(n)))return;var n;const r=t.parentElement,i=this._getHandleHost(),o=this._viewResizerWrapper,a=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")];let s;if(r.isSameNode(i)){const t=e||new Fd(i);s=[t.width+"px",t.height+"px",void 0,void 0]}else s=[i.offsetWidth+"px",i.offsetHeight+"px",i.offsetLeft+"px",i.offsetTop+"px"];"same"!==gs(a,s)&&this._options.editor.editing.view.change((e=>{e.setStyle({width:s[0],height:s[1],left:s[2],top:s[3]},o)}))}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeUI.dismiss(),this._sizeUI.isVisible=!1;this._options.editor.editing.view.change((e=>{e.setStyle("width",this._initialViewWidth,this._options.viewElement)}))}_proposeNewSize(e){const t=this.state,n=function(e){return{x:e.pageX,y:e.pageY}}(e),r=!this._options.isCentered||this._options.isCentered(this),i={x:t._referenceCoordinates.x-(n.x+t.originalWidth),y:n.y-t.originalHeight-t._referenceCoordinates.y};r&&t.activeHandlePosition.endsWith("-right")&&(i.x=n.x-(t._referenceCoordinates.x+t.originalWidth)),r&&(i.x*=2);const o={width:Math.abs(t.originalWidth+i.x),height:Math.abs(t.originalHeight+i.y)};o.dominant=o.width/t.aspectRatio>o.height?"width":"height",o.max=o[o.dominant];const a={width:o.width,height:o.height};return"width"==o.dominant?a.height=a.width/t.aspectRatio:a.width=a.height*t.aspectRatio,{width:Math.round(a.width),height:Math.round(a.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*a.width*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const r of t)e.appendChild(new tf({tag:"div",attributes:{class:"ck-widget__resizer__handle "+(n=r,`ck-widget__resizer__handle-${n}`)}}).render());var n}_appendSizeUI(e){const t=new zv;t.render(),this._sizeUI=t,e.appendChild(t.element)}}qi(Uv,Ui);class zv extends ef{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("activeHandlePosition",(e=>e?`ck-orientation-${e}`:""))],style:{display:e.if("isVisible","none",(e=>!e))}},children:[{text:e.to("label")}]})}bindToState(e,t){this.bind("isVisible").to(t,"proposedWidth",t,"proposedHeight",((e,t)=>null!==e&&null!==t)),this.bind("label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",((t,n,r)=>"px"===e.unit?`${t}×${n}`:`${r}%`)),this.bind("activeHandlePosition").to(t)}dismiss(){this.unbind(),this.isVisible=!1}}r(1288);qi(class extends $i{static get pluginName(){return"WidgetResize"}init(){this.set("visibleResizer",null),this.set("_activeResizer",null),this._resizers=new Map;const e=Ac.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:!0}),this.editor.editing.view.addObserver(Gm),this._observer=Object.create(Yc),this.listenTo(this.editor.editing.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(e,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(e,"mouseup",this._mouseUpListener.bind(this));const t=()=>{this.visibleResizer&&this.visibleResizer.redraw()},n=hg(t,200);this.on("change:visibleResizer",t),this.editor.ui.on("update",n),this._observer.listenTo(Ac.window,"resize",n);const r=this.editor.editing.view.document.selection;r.on("change",(()=>{const e=r.getSelectedElement();this.visibleResizer=this.getResizerByViewElement(e)||null}))}destroy(){this._observer.stopListening();for(const e of this._resizers.values())e.destroy()}attachTo(e){const t=new Uv(e),n=this.editor.plugins;if(t.attach(),n.has("WidgetToolbarRepository")){const e=n.get("WidgetToolbarRepository");t.on("begin",(()=>{e.forceDisabled("resize")}),{priority:"lowest"}),t.on("cancel",(()=>{e.clearForceDisabled("resize")}),{priority:"highest"}),t.on("commit",(()=>{e.clearForceDisabled("resize")}),{priority:"highest"})}this._resizers.set(e.viewElement,t);const r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==t&&(this.visibleResizer=t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const n=t.domTarget;Uv.isResizeHandle(n)&&(this._activeResizer=this._getResizerByHandle(n),this._activeResizer&&(this._activeResizer.begin(n),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}},Ui);class jv extends zc{observe(e){this.listenTo(e,"load",((e,t)=>{const n=t.target;this.checkShouldIgnoreEventFromTarget(n)||"IMG"==n.tagName&&this._fireEvents(t)}),{useCapture:!0})}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}function Vv(e){return!!e.getCustomProperty("image")&&G_(e)}function Gv(e){const t=e.getSelectedElement();return t&&Vv(t)?t:null}function Wv(e){return!!e&&e.is("element","image")}function qv(e,t={},n=null){e.change((r=>{const i=r.createElement("image",t),o=n||Q_(e.document.selection,e);e.insertContent(i,o),i.parent&&r.setSelection(i,"on")}))}function $v(e){const t=e.schema,n=e.document.selection;return function(e,t,n){const r=function(e,t){const n=Q_(e,t).parent;if(n.isEmpty&&!n.is("element","$root"))return n.parent;return n}(e,n);return t.checkChild(r,"image")}(n,t,e)&&!function(e,t){const n=e.getSelectedElement();return!!n&&t.isObject(n)}(n,t)&&function(e){return[...e.focus.getAncestors()].every((e=>!e.is("element","image")))}(n)}function Kv(e){const t=[];for(const n of e.getChildren())t.push(n),n.is("element")&&t.push(...n.getChildren());return t.find((e=>e.is("element","img")))}function Qv(e){return n=>{n.on(`attribute:${e}:image`,t)};function t(e,t,n){if(!n.consumable.consume(t.item,e.name))return;const r=n.writer,i=Kv(n.mapper.toViewElement(t.item));r.setAttribute(t.attributeKey,t.attributeNewValue||"",i)}}class Xv extends Qi{refresh(){this.isEnabled=$v(this.editor.model)}execute(e){const t=this.editor.model;for(const n of ds(e.source))qv(t,{src:n})}}class Zv extends $i{static get pluginName(){return"ImageEditing"}init(){const e=this.editor,t=e.model.schema,n=e.t,r=e.conversion;e.editing.view.addObserver(jv),t.register("image",{isObject:!0,isBlock:!0,allowWhere:"$block",allowAttributes:["alt","src","srcset"]}),r.for("dataDowncast").elementToElement({model:"image",view:(e,{writer:t})=>Jv(t)}),r.for("editingDowncast").elementToElement({model:"image",view:(e,{writer:t})=>function(e,t,n){return t.setCustomProperty("image",!0,e),W_(e,t,{label:function(){const t=Kv(e).getAttribute("alt");return t?`${t} ${n}`:n}})}(Jv(t),t,n("image widget"))}),r.for("downcast").add(Qv("src")).add(Qv("alt")).add(function(){return t=>{t.on("attribute:srcset:image",e)};function e(e,t,n){if(!n.consumable.consume(t.item,e.name))return;const r=n.writer,i=Kv(n.mapper.toViewElement(t.item));if(null===t.attributeNewValue){const e=t.attributeOldValue;e.data&&(r.removeAttribute("srcset",i),r.removeAttribute("sizes",i),e.width&&r.removeAttribute("width",i))}else{const e=t.attributeNewValue;e.data&&(r.setAttribute("srcset",e.data,i),r.setAttribute("sizes","100vw",i),e.width&&r.setAttribute("width",e.width,i))}}}()),r.for("upcast").elementToElement({view:{name:"img",attributes:{src:!0}},model:(e,{writer:t})=>t.createElement("image",{src:e.getAttribute("src")})}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:e=>{const t={data:e.getAttribute("srcset")};return e.hasAttribute("width")&&(t.width=e.getAttribute("width")),t}}}).add(function(){return t=>{t.on("element:figure",e)};function e(e,t,n){if(!n.consumable.test(t.viewItem,{name:!0,classes:"image"}))return;const r=Kv(t.viewItem);if(!r||!r.hasAttribute("src")||!n.consumable.test(r,{name:!0}))return;const i=Vd(n.convertItem(r,t.modelCursor).modelRange.getItems());i&&(n.convertChildren(t.viewItem,i),n.updateConversionResult(i,t))}}());const i=new Xv(e);e.commands.add("insertImage",i),e.commands.add("imageInsert",i)}}function Jv(e){const t=e.createEmptyElement("img"),n=e.createContainerElement("figure",{class:"image"});return e.insert(e.createPositionAt(n,0),t),n}class ey extends Qi{refresh(){const e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Wv(e),Wv(e)&&e.hasAttribute("alt")?this.value=e.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor.model,n=t.document.selection.getSelectedElement();t.change((t=>{t.setAttribute("alt",e.newValue,n)}))}}class ty extends $i{static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new ey(this.editor))}}r(9464);class ny extends ef{constructor(e){super(e);const t=this.locale.t;this.focusTracker=new Gd,this.keystrokes=new Wd,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),Vp,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),jp,"ck-button-cancel","cancel"),this._focusables=new Jp,this._focusCycler=new Mf({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]}),Xp(this)}render(){super.render(),this.keystrokes.listenTo(this.element),Zp({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((e=>{this._focusables.add(e),this.focusTracker.add(e.element)}))}_createButton(e,t,n,r){const i=new Cf(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:n}}),r&&i.delegate("execute").to(this,r),i}_createLabeledInputView(){const e=this.locale.t,t=new sm(this.locale,lm);return t.label=e("Text alternative"),t}}function ry(e){const t=e.editing.view,n=pm.defaultPositions;return{target:t.domConverter.viewToDom(t.document.selection.getSelectedElement()),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]}}class iy extends $i{static get requires(){return[bm]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton(),this._createForm()}destroy(){super.destroy(),this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",(n=>{const r=e.commands.get("imageTextAlternative"),i=new Cf(n);return i.set({label:t("Change image text alternative"),icon:Wp,tooltip:!0}),i.bind("isEnabled").to(r,"isEnabled"),this.listenTo(i,"execute",(()=>{this._showForm()})),i}))}_createForm(){const e=this.editor,t=e.editing.view.document;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new ny(e.locale),this._form.render(),this.listenTo(this._form,"submit",(()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)})),this.listenTo(this._form,"cancel",(()=>{this._hideForm(!0)})),this._form.keystrokes.set("Esc",((e,t)=>{this._hideForm(!0),t()})),this.listenTo(e.ui,"update",(()=>{Gv(t.selection)?this._isVisible&&function(e){const t=e.plugins.get("ContextualBalloon");if(Gv(e.editing.view.document.selection)){const n=ry(e);t.updatePosition(n)}}(e):this._hideForm(!0)})),Qp({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;const e=this.editor,t=e.commands.get("imageTextAlternative"),n=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:ry(e)}),n.fieldView.value=n.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView===this._form}get _isInBalloon(){return this._balloon.hasView(this._form)}}class oy extends $i{static get requires(){return[ty,iy]}static get pluginName(){return"ImageTextAlternative"}}r(2722);function ay(e){const t=e.map((e=>e.replace("+","\\+")));return new RegExp(`^image\\/(${t.join("|")})$`)}function sy(e){return new Promise(((t,n)=>{const r=e.getAttribute("src");fetch(r).then((e=>e.blob())).then((e=>{const n=ly(e,r),i=n.replace("image/",""),o=new File([e],`image.${i}`,{type:n});t(o)})).catch((e=>e&&"TypeError"===e.name?function(e){return function(e){return new Promise(((t,n)=>{const r=Ac.document.createElement("img");r.addEventListener("load",(()=>{const e=Ac.document.createElement("canvas");e.width=r.width,e.height=r.height;e.getContext("2d").drawImage(r,0,0),e.toBlob((e=>e?t(e):n()))})),r.addEventListener("error",(()=>n())),r.src=e}))}(e).then((t=>{const n=ly(t,e),r=n.replace("image/","");return new File([t],`image.${r}`,{type:n})}))}(r).then(t).catch(n):n(e)))}))}function ly(e,t){return e.type?e.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}class cy extends $i{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,t=e.t,n=n=>{const r=new Iv(n),i=e.commands.get("uploadImage"),o=e.config.get("image.upload.types"),a=ay(o);return r.set({acceptedType:o.map((e=>`image/${e}`)).join(","),allowMultipleFiles:!0}),r.buttonView.set({label:t("Insert image"),icon:qp,tooltip:!0}),r.buttonView.bind("isEnabled").to(i),r.on("done",((t,n)=>{const r=Array.from(n).filter((e=>a.test(e.type)));r.length&&e.execute("uploadImage",{file:r})})),r};e.ui.componentFactory.add("uploadImage",n),e.ui.componentFactory.add("imageUpload",n)}}r(5097),r(9617),r(671);class dy extends $i{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>')}init(){this.editor.editing.downcastDispatcher.on("attribute:uploadStatus:image",((...e)=>this.uploadStatusChange(...e)))}uploadStatusChange(e,t,n){const r=this.editor,i=t.item,o=i.getAttribute("uploadId");if(!n.consumable.consume(t.item,e.name))return;const a=r.plugins.get(Nv),s=o?t.attributeNewValue:null,l=this.placeholder,c=r.editing.mapper.toViewElement(i),d=n.writer;if("reading"==s)return uy(c,d),void hy(l,c,d);if("uploading"==s){const e=a.loaders.get(o);return uy(c,d),void(e?(py(c,d),function(e,t,n,r){const i=function(e){const t=e.createUIElement("div",{class:"ck-progress-bar"});return e.setCustomProperty("progressBar",!0,t),t}(t);t.insert(t.createPositionAt(e,"end"),i),n.on("change:uploadedPercent",((e,t,n)=>{r.change((e=>{e.setStyle("width",n+"%",i)}))}))}(c,d,e,r.editing.view),function(e,t,n){if(n.data){const r=Kv(e);t.setAttribute("src",n.data,r)}}(c,d,e)):hy(l,c,d))}"complete"==s&&a.loaders.get(o)&&function(e,t,n){const r=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),r),setTimeout((()=>{n.change((e=>e.remove(e.createRangeOn(r))))}),3e3)}(c,d,r.editing.view),function(e,t){my(e,t,"progressBar")}(c,d),py(c,d),function(e,t){t.removeClass("ck-appear",e)}(c,d)}}function uy(e,t){e.hasClass("ck-appear")||t.addClass("ck-appear",e)}function hy(e,t,n){t.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",t);const r=Kv(t);r.getAttribute("src")!==e&&n.setAttribute("src",e,r),fy(t,"placeholder")||n.insert(n.createPositionAfter(r),function(e){const t=e.createUIElement("div",{class:"ck-upload-placeholder-loader"});return e.setCustomProperty("placeholder",!0,t),t}(n))}function py(e,t){e.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",e),my(e,t,"placeholder")}function fy(e,t){for(const n of e.getChildren())if(n.getCustomProperty(t))return n}function my(e,t,n){const r=fy(e,n);r&&t.remove(t.createRangeOn(r))}class _y extends Qi{refresh(){const e=this.editor.model.document.selection.getSelectedElement(),t=e&&"image"===e.name||!1;this.isEnabled=$v(this.editor.model)||t}execute(e){const t=this.editor,n=t.model,r=t.plugins.get(Nv);for(const t of ds(e.file))gy(n,r,t)}}function gy(e,t,n){const r=t.createLoader(n);r&&qv(e,{uploadId:r.id})}class by extends $i{static get requires(){return[Nv,cm,R_]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}})}init(){const e=this.editor,t=e.model.document,n=e.model.schema,r=e.conversion,i=e.plugins.get(Nv),o=ay(e.config.get("image.upload.types"));n.extend("image",{allowAttributes:["uploadId","uploadStatus"]});const a=new _y(e);e.commands.add("uploadImage",a),e.commands.add("imageUpload",a),r.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",((t,n)=>{if(r=n.dataTransfer,Array.from(r.types).includes("text/html")&&""!==r.getData("text/html"))return;var r;const i=Array.from(n.dataTransfer.files).filter((e=>!!e&&o.test(e.type)));i.length&&(t.stop(),e.model.change((t=>{n.targetRanges&&t.setSelection(n.targetRanges.map((t=>e.editing.mapper.toModelRange(t)))),e.model.enqueueChange("default",(()=>{e.execute("uploadImage",{file:i})}))})))})),this.listenTo(e.plugins.get("ClipboardPipeline"),"inputTransformation",((t,n)=>{const r=Array.from(e.editing.view.createRangeIn(n.content)).filter((e=>{return!(!(t=e.item).is("element","img")||!t.getAttribute("src"))&&(t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||t.getAttribute("src").match(/^blob:/g))&&!e.item.getAttribute("uploadProcessed");var t})).map((e=>({promise:sy(e.item),imageElement:e.item})));if(!r.length)return;const o=new Wm(e.editing.view.document);for(const e of r){o.setAttribute("uploadProcessed",!0,e.imageElement);const t=i.createLoader(e.promise);t&&(o.setAttribute("src","",e.imageElement),o.setAttribute("uploadId",t.id,e.imageElement))}})),e.editing.view.document.on("dragover",((e,t)=>{t.preventDefault()})),t.on("change",(()=>{const n=t.differ.getChanges({includeChangesInGraveyard:!0});for(const t of n)if("insert"==t.type&&"$text"!=t.name){const n=t.position.nodeAfter,r="$graveyard"==t.position.root.rootName;for(const t of vy(e,n)){const e=t.getAttribute("uploadId");if(!e)continue;const n=i.loaders.get(e);n&&(r?n.abort():"idle"==n.status&&this._readAndUpload(n,t))}}})),this.on("uploadComplete",((e,{imageElement:t,data:n})=>{const r=n.urls?n.urls:n;this.editor.model.change((e=>{e.setAttribute("src",r.default,t),this._parseAndSetSrcsetAttributeOnImage(r,t,e)}))}),{priority:"low"})}_readAndUpload(e,t){const n=this.editor,r=n.model,i=n.locale.t,o=n.plugins.get(Nv),a=n.plugins.get(cm);return r.enqueueChange("transparent",(e=>{e.setAttribute("uploadStatus","reading",t)})),e.read().then((()=>{const i=e.upload();if(Pl.isSafari){const e=Kv(n.editing.mapper.toViewElement(t));n.editing.view.once("render",(()=>{if(!e.parent)return;const t=n.editing.view.domConverter.mapViewToDom(e.parent);if(!t)return;const r=t.style.display;t.style.display="none",t._ckHack=t.offsetHeight,t.style.display=r}))}return r.enqueueChange("transparent",(e=>{e.setAttribute("uploadStatus","uploading",t)})),i})).then((e=>{r.enqueueChange("transparent",(n=>{n.setAttribute("uploadStatus","complete",t),this.fire("uploadComplete",{data:e,imageElement:t})})),s()})).catch((n=>{if("error"!==e.status&&"aborted"!==e.status)throw n;"error"==e.status&&n&&a.showWarning(n,{title:i("Upload failed"),namespace:"upload"}),s(),r.enqueueChange("transparent",(e=>{e.remove(t)}))}));function s(){r.enqueueChange("transparent",(e=>{e.removeAttribute("uploadId",t),e.removeAttribute("uploadStatus",t)})),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,n){let r=0;const i=Object.keys(e).filter((e=>{const t=parseInt(e,10);if(!isNaN(t))return r=Math.max(r,t),!0})).map((t=>`${e[t]} ${t}w`)).join(", ");""!=i&&n.setAttribute("srcset",{data:i,width:r},t)}}function vy(e,t){return Array.from(e.model.createRangeOn(t)).filter((e=>e.item.is("element","image"))).map((e=>e.item))}const yy={autoRefresh:!0},Ey=36e5;class wy{constructor(e,t=yy){if(!e)throw new Wn("token-missing-token-url",this);t.initValue&&this._validateTokenValue(t.initValue),this.set("value",t.initValue),this._refresh="function"==typeof e?e:()=>{return t=e,new Promise(((e,n)=>{const r=new XMLHttpRequest;r.open("GET",t),r.addEventListener("load",(()=>{const t=r.status,i=r.response;return t<200||t>299?n(new Wn("token-cannot-download-new-token",null)):e(i)})),r.addEventListener("error",(()=>n(new Error("Network Error")))),r.addEventListener("abort",(()=>n(new Error("Abort")))),r.send()}));var t},this._options=Object.assign({},yy,t)}init(){return new Promise(((e,t)=>{this.value?(this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)):this.refreshToken().then(e).catch(t)}))}refreshToken(){return this._refresh().then((e=>{this._validateTokenValue(e),this.set("value",e),this._options.autoRefresh&&this._registerRefreshTokenTimeout()})).then((()=>this))}destroy(){clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const t="string"==typeof e,n=!/^".*"$/.test(e),r=t&&3===e.split(".").length;if(!n||!r)throw new Wn("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(){const e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout((()=>{this.refreshToken()}),e)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:t}=JSON.parse(atob(e));if(!t)return Ey;return Math.floor((1e3*t-Date.now())/2)}catch(e){return Ey}}static create(e,t=yy){return new wy(e,t).init()}}qi(wy,Ui);const Sy=wy,Ty=/^data:(\S*?);base64,/;class ky{constructor(e,t,n){if(!e)throw new Wn("fileuploader-missing-file",null);if(!t)throw new Wn("fileuploader-missing-token",null);if(!n)throw new Wn("fileuploader-missing-api-address",null);this.file=function(e){if("string"!=typeof e)return!1;const t=e.match(Ty);return!(!t||!t.length)}(e)?function(e,t=512){try{const n=e.match(Ty)[1],r=atob(e.replace(Ty,"")),i=[];for(let e=0;e<r.length;e+=t){const n=r.slice(e,e+t),o=new Array(n.length);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);i.push(new Uint8Array(o))}return new Blob(i,{type:n})}catch(e){throw new Wn("fileuploader-decoding-image-data-error",null)}}(e):e,this._token=t,this._apiAddress=n}onProgress(e){return this.on("progress",((t,n)=>e(n))),this}onError(e){return this.once("error",((t,n)=>e(n))),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this,t=this.xhr;function n(t){return()=>e.fire("error",t)}t.addEventListener("error",n("Network Error")),t.addEventListener("abort",n("Abort")),t.upload&&t.upload.addEventListener("progress",(e=>{e.lengthComputable&&this.fire("progress",{total:e.total,uploaded:e.loaded})})),t.addEventListener("load",(()=>{const e=t.status,n=t.response;if(e<200||e>299)return this.fire("error",n.message||n.error)}))}_sendRequest(){const e=new FormData,t=this.xhr;return e.append("file",this.file),new Promise(((n,r)=>{t.addEventListener("load",(()=>{const e=t.status,i=t.response;return e<200||e>299?i.message?r(new Wn("fileuploader-uploading-data-failed",this,{message:i.message})):r(i.error):n(i)})),t.addEventListener("error",(()=>r(new Error("Network Error")))),t.addEventListener("abort",(()=>r(new Error("Abort")))),t.send(e)}))}}qi(ky,er);class Cy{constructor(e,t){if(!e)throw new Wn("uploadgateway-missing-token",null);if(!t)throw new Wn("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t}upload(e){return new ky(e,this._token,this._apiAddress)}}class xy extends _s{static get pluginName(){return"CloudServicesCore"}createToken(e,t){return new Sy(e,t)}createUploadGateway(e,t){return new Cy(e,t)}}class Ay extends Qi{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,n=t.document.selection,r=e.value;t.change((e=>{if(n.isCollapsed)r?e.setSelectionAttribute(this.attributeKey,r):e.removeSelectionAttribute(this.attributeKey);else{const i=t.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const t of i)r?e.setAttribute(this.attributeKey,r,t):e.removeAttribute(this.attributeKey,t)}}))}}class Ry extends ls{constructor(e){super(e),this.set("isEmpty",!0),this.on("change",(()=>{this.set("isEmpty",0===this.length)}))}add(e,t){this.find((t=>t.color===e.color))||super.add(e,t)}hasColor(e){return!!this.find((t=>t.color===e))}}qi(Ry,Ui);r(5405);class My extends ef{constructor(e,{colors:t,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o}){super(e),this.items=this.createCollection(),this.colorDefinitions=t,this.focusTracker=new Gd,this.keystrokes=new Wd,this.set("selectedColor"),this.removeButtonLabel=r,this.columns=n,this.documentColors=new Ry,this.documentColorsCount=o,this._focusCycler=new Mf({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this._documentColorsLabel=i,this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-table"]},children:this.items}),this.items.add(this._removeColorButton())}updateDocumentColors(e,t){const n=e.document,r=this.documentColorsCount;this.documentColors.clear();for(const i of n.getRootNames()){const o=n.getRoot(i),a=e.createRangeIn(o);for(const e of a.getItems())if(e.is("$textProxy")&&e.hasAttribute(t)&&(this._addColorToDocumentColors(e.getAttribute(t)),this.documentColors.length>=r))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,n=this.selectedColor;t.selectedColor=n,e&&(e.selectedColor=n)}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}appendGrids(){if(!this.staticColorsGrid&&(this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount)){const e=tf.bind(this.documentColors,this.documentColors),t=new nm(this.locale);t.text=this._documentColorsLabel,t.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_removeColorButton(){const e=new Cf;return e.set({withText:!0,icon:Gp,tooltip:!0,label:this.removeButtonLabel}),e.class="ck-color-table__remove-color",e.on("execute",(()=>{this.fire("execute",{value:null})})),e}_createStaticColorsGrid(){const e=new Of(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.delegate("execute").to(this),e}_createDocumentColorsGrid(){const e=tf.bind(this.documentColors,this.documentColors),t=new Of(this.locale,{columns:this.columns});return t.delegate("execute").to(this),t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using((e=>{const t=new Rf;return t.set({color:e.color,hasBorder:e.options&&e.options.hasBorder}),e.label&&t.set({label:e.label,tooltip:!0}),t.on("execute",(()=>{this.fire("execute",{value:e.color})})),t})),this.documentColors.on("change:isEmpty",((e,n,r)=>{r&&(t.selectedColor=null)})),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find((t=>t.color===e));t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}const Dy="fontSize",Oy="fontFamily",Ny="fontColor",Ly="fontBackgroundColor";function Iy(e,t){const n={model:{key:e,values:[]},view:{},upcastAlso:{}};for(const e of t)n.model.values.push(e.model),n.view[e.model]=e.view,e.upcastAlso&&(n.upcastAlso[e.model]=e.upcastAlso);return n}function Py(e){return t=>t.getStyle(e).replace(/\s/g,"")}function Fy(e){return(t,{writer:n})=>n.createAttributeElement("span",{style:`${e}:${t}`},{priority:7})}class By extends Ay{constructor(e){super(e,Oy)}}function Yy(e){return e.map(Hy).filter((e=>!!e))}function Hy(e){return"object"==typeof e?e:"default"===e?{title:"Default",model:void 0}:"string"==typeof e?function(e){const t=e.replace(/"|'/g,"").split(","),n=t[0],r=t.map(Uy).join(", ");return{title:n,model:r,view:{name:"span",styles:{"font-family":r},priority:7}}}(e):void 0}function Uy(e){return(e=e.trim()).indexOf(" ")>0&&(e=`'${e}'`),e}class zy extends $i{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(Oy,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Oy}),e.model.schema.setAttributeProperties(Oy,{isFormatting:!0,copyOnEnter:!0});const t=Yy(e.config.get("fontFamily.options")).filter((e=>e.model)),n=Iy(Oy,t);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(n),e.commands.add(Oy,new By(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:Oy,view:(e,{writer:t})=>t.createAttributeElement("span",{style:"font-family:"+e},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:Oy,value:e=>e.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:Oy,value:e=>e.getAttribute("face")}})}}class jy extends $i{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,t=e.t,n=this._getLocalizedOptions(),r=e.commands.get(Oy);e.ui.componentFactory.add(Oy,(i=>{const o=Zf(i);return em(o,function(e,t){const n=new ls;for(const r of e){const e={type:"button",model:new dm({commandName:Oy,commandParam:r.model,label:r.title,withText:!0})};e.model.bind("isOn").to(t,"value",(e=>e===r.model||!(!e||!r.model)&&e.split(",")[0].replace(/'/g,"").toLowerCase()===r.model.toLowerCase())),r.view&&r.view.styles&&e.model.set("labelStyle",`font-family: ${r.view.styles["font-family"]}`),n.add(e)}return n}(n,r)),o.buttonView.set({label:t("Font Family"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>',tooltip:!0}),o.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),o.bind("isEnabled").to(r),this.listenTo(o,"execute",(t=>{e.execute(t.source.commandName,{value:t.source.commandParam}),e.editing.view.focus()})),o}))}_getLocalizedOptions(){const e=this.editor,t=e.t;return Yy(e.config.get(Oy).options).map((e=>("Default"===e.title&&(e.title=t("Default")),e)))}}class Vy extends $i{static get requires(){return[zy,jy]}static get pluginName(){return"FontFamily"}}class Gy extends Ay{constructor(e){super(e,Dy)}}function Wy(e){return e.map((e=>function(e){if(t=e,"object"==typeof t&&t.title&&t.model&&t.view)return $y(e);var t;const n=function(e){return qy[e]||qy[e.model]}(e);if(n)return $y(n);if("default"===e)return{model:void 0,title:"Default"};if(function(e){let t;if("object"==typeof e){if(!e.model)throw new Wn("font-size-invalid-definition",null,e);t=parseFloat(e.model)}else t=parseFloat(e);return isNaN(t)}(e))return;return function(e){"number"!=typeof e&&"string"!=typeof e||(e={title:String(e),model:`${parseFloat(e)}px`});return e.view={name:"span",styles:{"font-size":e.model}},$y(e)}(e)}(e))).filter((e=>!!e))}const qy={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function $y(e){return e.view.priority||(e.view.priority=7),e}const Ky=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class Qy extends $i{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(Dy,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Dy}),e.model.schema.setAttributeProperties(Dy,{isFormatting:!0,copyOnEnter:!0});const t=e.config.get("fontSize.supportAllValues"),n=Wy(this.editor.config.get("fontSize.options")).filter((e=>e.model)),r=Iy(Dy,n);t?(this._prepareAnyValueConverters(r),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(r),e.commands.add(Dy,new Gy(e))}_prepareAnyValueConverters(e){const t=this.editor,n=e.model.values.filter((e=>{return!(t=String(e),e_.test(t)||function(e){return t_.test(e)}(String(e)));var t}));if(n.length)throw new Wn("font-size-invalid-use-of-named-presets",null,{presets:n});t.conversion.for("downcast").attributeToElement({model:Dy,view:(e,{writer:t})=>{if(e)return t.createAttributeElement("span",{style:"font-size:"+e},{priority:7})}}),t.conversion.for("upcast").elementToAttribute({model:{key:Dy,value:e=>e.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Dy,value:e=>{const t=e.getAttribute("size"),n="-"===t[0]||"+"===t[0];let r=parseInt(t,10);n&&(r=3+r);const i=Ky.length-1,o=Math.min(Math.max(r,0),i);return Ky[o]}}})}}r(7074);class Xy extends $i{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,t=e.t,n=this._getLocalizedOptions(),r=e.commands.get(Dy);e.ui.componentFactory.add(Dy,(i=>{const o=Zf(i);return em(o,function(e,t){const n=new ls;for(const r of e){const e={type:"button",model:new dm({commandName:Dy,commandParam:r.model,label:r.title,class:"ck-fontsize-option",withText:!0})};r.view&&r.view.styles&&e.model.set("labelStyle",`font-size:${r.view.styles["font-size"]}`),r.view&&r.view.classes&&e.model.set("class",`${e.model.class} ${r.view.classes}`),e.model.bind("isOn").to(t,"value",(e=>e===r.model)),n.add(e)}return n}(n,r)),o.buttonView.set({label:t("Font Size"),icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>',tooltip:!0}),o.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),o.bind("isEnabled").to(r),this.listenTo(o,"execute",(t=>{e.execute(t.source.commandName,{value:t.source.commandParam}),e.editing.view.focus()})),o}))}_getLocalizedOptions(){const e=this.editor,t=e.t,n={Default:t("Default"),Tiny:t("Tiny"),Small:t("Small"),Big:t("Big"),Huge:t("Huge")};return Wy(e.config.get(Dy).options).map((e=>{const t=n[e.title];return t&&t!=e.title&&(e=Object.assign({},e,{title:t})),e}))}}class Zy extends $i{static get requires(){return[Qy,Xy]}static get pluginName(){return"FontSize"}}class Jy extends Ay{constructor(e){super(e,Ny)}}class eE extends $i{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(Ny,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Ny,value:Py("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Ny,value:e=>e.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:Ny,view:Fy("color")}),e.commands.add(Ny,new Jy(e)),e.model.schema.extend("$text",{allowAttributes:Ny}),e.model.schema.setAttributeProperties(Ny,{isFormatting:!0,copyOnEnter:!0})}}class tE extends $i{constructor(e,{commandName:t,icon:n,componentName:r,dropdownLabel:i}){super(e),this.commandName=t,this.componentName=r,this.icon=n,this.dropdownLabel=i,this.columns=e.config.get(`${this.componentName}.columns`),this.colorTableView=void 0}init(){const e=this.editor,t=e.locale,n=t.t,r=e.commands.get(this.commandName);const i=function(e,t){const n=e.t,r={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return t.map((e=>{const t=r[e.label];return t&&t!=e.label&&(e.label=t),e}))}(t,e.config.get(this.componentName).colors.map(Af).filter((e=>!!e))),o=e.config.get(`${this.componentName}.documentColors`);e.ui.componentFactory.add(this.componentName,(t=>{const a=Zf(t);return this.colorTableView=function({dropdownView:e,colors:t,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o}){const a=e.locale,s=new My(a,{colors:t,columns:n,removeButtonLabel:r,documentColorsLabel:i,documentColorsCount:o});return e.colorTableView=s,e.panelView.children.add(s),s.delegate("execute").to(e,"execute"),s}({dropdownView:a,colors:i.map((e=>({label:e.label,color:e.model,options:{hasBorder:e.hasBorder}}))),columns:this.columns,removeButtonLabel:n("Remove color"),documentColorsLabel:0!==o?n("Document colors"):void 0,documentColorsCount:void 0===o?this.columns:o}),this.colorTableView.bind("selectedColor").to(r,"value"),a.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),a.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),a.bind("isEnabled").to(r),a.on("execute",((t,n)=>{e.execute(this.commandName,n),e.editing.view.focus()})),a.on("change:isOpen",((t,n,r)=>{a.colorTableView.appendGrids(),r&&(0!==o&&this.colorTableView.updateDocumentColors(e.model,this.componentName),this.colorTableView.updateSelectedColors())})),a}))}}class nE extends tE{constructor(e){const t=e.locale.t;super(e,{commandName:Ny,componentName:Ny,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>',dropdownLabel:t("Font Color")})}static get pluginName(){return"FontColorUI"}}class rE extends $i{static get requires(){return[eE,nE]}static get pluginName(){return"FontColor"}}class iE extends Ay{constructor(e){super(e,Ly)}}class oE extends $i{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(Ly,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(d_),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Ly,value:Py("background-color")}}),e.conversion.for("downcast").attributeToElement({model:Ly,view:Fy("background-color")}),e.commands.add(Ly,new iE(e)),e.model.schema.extend("$text",{allowAttributes:Ly}),e.model.schema.setAttributeProperties(Ly,{isFormatting:!0,copyOnEnter:!0})}}class aE extends tE{constructor(e){const t=e.locale.t;super(e,{commandName:Ly,componentName:Ly,icon:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>',dropdownLabel:t("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class sE extends $i{static get requires(){return[oE,aE]}static get pluginName(){return"FontBackgroundColor"}}class lE extends Qi{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=Vd(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some((t=>cE(e,t,this.editor.model.schema)))}execute(e){const t=this.editor.model,n=t.document,r=e.value;t.change((e=>{const i=Array.from(n.selection.getSelectedBlocks()).filter((e=>cE(e,r,t.schema)));for(const t of i)t.is("element",r)||e.rename(t,r)}))}}function cE(e,t,n){return n.checkChild(e.parent,t)&&!n.isObject(e)}const dE="paragraph";class uE extends $i{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Dv]}init(){const e=this.editor,t=e.config.get("heading.options"),n=[];for(const r of t)r.model!==dE&&(e.model.schema.register(r.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(r),n.push(r.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new lE(e,n))}afterInit(){const e=this.editor,t=e.commands.get("enter"),n=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",((t,r)=>{const i=e.model.document.selection.getFirstPosition().parent;n.some((e=>i.is("element",e.model)))&&!i.is("element",dE)&&0===i.childCount&&r.writer.rename(i,dE)}))}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Gn.get("low")+1})}}function hE(e){const t=e.t,n={Paragraph:t("Paragraph"),"Heading 1":t("Heading 1"),"Heading 2":t("Heading 2"),"Heading 3":t("Heading 3"),"Heading 4":t("Heading 4"),"Heading 5":t("Heading 5"),"Heading 6":t("Heading 6")};return e.config.get("heading.options").map((e=>{const t=n[e.title];return t&&t!=e.title&&(e.title=t),e}))}r(3044);class pE extends $i{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,t=e.t,n=hE(e),r=t("Choose heading"),i=t("Heading");e.ui.componentFactory.add("heading",(t=>{const o={},a=new ls,s=e.commands.get("heading"),l=e.commands.get("paragraph"),c=[s];for(const e of n){const t={type:"button",model:new dm({label:e.title,class:e.class,withText:!0})};"paragraph"===e.model?(t.model.bind("isOn").to(l,"value"),t.model.set("commandName","paragraph"),c.push(l)):(t.model.bind("isOn").to(s,"value",(t=>t===e.model)),t.model.set({commandName:"heading",commandValue:e.model})),a.add(t),o[e.model]=e.title}const d=Zf(t);return em(d,a),d.buttonView.set({isOn:!1,withText:!0,tooltip:i}),d.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),d.bind("isEnabled").toMany(c,"isEnabled",((...e)=>e.some((e=>e)))),d.buttonView.bind("label").to(s,"value",l,"value",((e,t)=>{const n=e||t&&"paragraph";return o[n]?o[n]:r})),this.listenTo(d,"execute",(t=>{e.execute(t.source.commandName,t.source.commandValue?{value:t.source.commandValue}:void 0),e.editing.view.focus()})),d}))}}const fE={heading1:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',heading2:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',heading3:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',heading4:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',heading5:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',heading6:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>'};class mE extends Qi{refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}execute(e={}){const t=this.editor.model,n=t.document.selection,r=e.value;t.change((e=>{const i=t.schema.getValidRanges(n.getRanges(),"highlight");if(n.isCollapsed){const t=n.getFirstPosition();if(n.hasAttribute("highlight")){const n=e=>e.item.hasAttribute("highlight")&&e.item.getAttribute("highlight")===this.value,i=t.getLastMatchingPosition(n,{direction:"backward"}),o=t.getLastMatchingPosition(n),a=e.createRange(i,o);r&&this.value!==r?(e.setAttribute("highlight",r,a),e.setSelectionAttribute("highlight",r)):(e.removeAttribute("highlight",a),e.removeSelectionAttribute("highlight"))}else r&&e.setSelectionAttribute("highlight",r)}else for(const t of i)r?e.setAttribute("highlight",r,t):e.removeAttribute("highlight",t)}))}}class _E extends $i{static get pluginName(){return"HighlightEditing"}constructor(e){super(e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});const t=e.config.get("highlight.options");e.conversion.attributeToElement(function(e){const t={model:{key:"highlight",values:[]},view:{}};for(const n of e)t.model.values.push(n.model),t.view[n.model]={name:"mark",classes:n.class};return t}(t)),e.commands.add("highlight",new mE(e))}}r(9838);class gE extends $i{get localizedOptionTitles(){const e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}static get pluginName(){return"HighlightUI"}init(){const e=this.editor.config.get("highlight.options");for(const t of e)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(e)}_addRemoveHighlightButton(){const e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),Gp,null,(e=>{e.bind("isEnabled").to(t,"isEnabled")}))}_addHighlighterButton(e){const t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,bE(e.type),e.model,(function(n){n.bind("isEnabled").to(t,"isEnabled"),n.bind("isOn").to(t,"value",(t=>t===e.model)),n.iconView.fillColor=e.color,n.isToggleable=!0}))}_addButton(e,t,n,r,i){const o=this.editor;o.ui.componentFactory.add(e,(e=>{const a=new Cf(e),s=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return a.set({label:s,icon:n,tooltip:!0}),a.on("execute",(()=>{o.execute("highlight",{value:r}),o.editing.view.focus()})),i(a),a}))}_addDropdown(e){const t=this.editor,n=t.t,r=t.ui.componentFactory,i=e[0],o=e.reduce(((e,t)=>(e[t.model]=t,e)),{});r.add("highlight",(a=>{const s=t.commands.get("highlight"),l=Zf(a,If),c=l.buttonView;c.set({tooltip:n("Highlight"),lastExecuted:i.model,commandValue:i.model,isToggleable:!0}),c.bind("icon").to(s,"value",(e=>bE(u(e,"type")))),c.bind("color").to(s,"value",(e=>u(e,"color"))),c.bind("commandValue").to(s,"value",(e=>u(e,"model"))),c.bind("isOn").to(s,"value",(e=>!!e)),c.delegate("execute").to(l);const d=e.map((e=>{const t=r.create("highlight:"+e.model);return this.listenTo(t,"execute",(()=>l.buttonView.set({lastExecuted:e.model}))),t}));function u(e,t){const n=e&&e!==c.lastExecuted?e:c.lastExecuted;return o[n][t]}return l.bind("isEnabled").toMany(d,"isEnabled",((...e)=>e.some((e=>e)))),d.push(new zf),d.push(r.create("removeHighlight")),Jf(l,d),function(e){e.buttonView.actionView.iconView.bind("fillColor").to(e.buttonView,"color")}(l),l.toolbarView.ariaLabel=n("Text highlight toolbar"),c.on("execute",(()=>{t.execute("highlight",{value:c.commandValue}),t.editing.view.focus()})),l}))}}function bE(e){return"marker"===e?'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>':'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>'}var vE=r(5553),yE={plugins:[Dv,db,yb,mb,xv],toolbar:{items:["bold","italic","underline","link"]}},EE={cloudServices:{tokenUrl:"",uploadUrl:""},plugins:[class extends $i{static get requires(){return[Vy,Zy,rE,sE]}static get pluginName(){return"Font"}},class extends $i{static get requires(){return[vg,L_,Rg,Sg,Fg,ib]}static get pluginName(){return"Essentials"}},db,yb,class extends $i{static get requires(){return[wb,Tb]}static get pluginName(){return"Strikethrough"}},mb,xv,Dv,class extends $i{static get requires(){return[Cb,Ab]}static get pluginName(){return"Code"}},class extends $i{static get requires(){return[Mb,Ob]}static get pluginName(){return"Subscript"}},class extends $i{static get requires(){return[Lb,Pb]}static get pluginName(){return"Superscript"}},class extends $i{static get requires(){return[Fv,"Image","ImageUpload"]}static get pluginName(){return"EasyImage"}},class extends $i{static get requires(){return[Zv,dg,oy]}static get pluginName(){return"Image"}isImageWidget(e){return Vv(e)}},class extends $i{static get pluginName(){return"ImageUpload"}static get requires(){return[by,cy,dy]}},class extends _s{static get pluginName(){return"CloudServices"}static get requires(){return[xy]}init(){const e=this.context.config.get("cloudServices")||{};for(const t in e)this[t]=e[t];if(this._tokens=new Map,this.tokenUrl)return this.token=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl),this._tokens.set(this.tokenUrl,this.token),this.token.init();this.token=null}registerTokenUrl(e){if(this._tokens.has(e))return Promise.resolve(this.getTokenFor(e));const t=this.context.plugins.get("CloudServicesCore").createToken(e);return this._tokens.set(e,t),t.init()}getTokenFor(e){const t=this._tokens.get(e);if(!t)throw new Wn("cloudservices-token-not-registered",this);return t}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}},class extends $i{static get requires(){return[uE,pE]}static get pluginName(){return"Heading"}},class extends $i{init(){hE(this.editor).filter((e=>"paragraph"!==e.model)).map((e=>this._createButton(e)))}_createButton(e){const t=this.editor;t.ui.componentFactory.add(e.model,(n=>{const r=new Cf(n),i=t.commands.get("heading");return r.label=e.title,r.icon=e.icon||fE[e.model],r.tooltip=!0,r.isToggleable=!0,r.bind("isEnabled").to(i),r.bind("isOn").to(i,"value",(t=>t==e.model)),r.on("execute",(()=>{t.execute("heading",{value:e.model}),t.editing.view.focus()})),r}))}},class extends $i{static get requires(){return[_E,gE]}static get pluginName(){return"Highlight"}}],toolbar:{items:["fontSize","fontFamily","fontColor","fontBackgroundColor","bold","italic","underline","strikethrough","code","subscript","superscript","link","undo","redo","imageUpload","highlight"]}};vE(".editor").each((function(){var e=f_,t=EE,n=this;vE(n).data("simple-toolbar")&&(t=yE),"inline"==vE(n).data("editor")?e=b_:"balloon"==vE(n).data("editor")?e=E_:"document"==vE(n).data("editor")&&(e=T_,n=vE(n).find(".document-editor__editable")[0]),e.create(n,t).then((function(e){"document"==vE(n).closest(".editor").data("editor")&&vE(n).closest(".editor").find(".document-editor__toolbar").append(e.ui.view.toolbar.element),vE(n).attr("name")&&(window[vE(n).attr("name")]=e)})).catch((function(e){console.error(e.stack)}))}));var wE=r(9305),SE=r.n(wE),TE=r(8588),kE=r.n(TE);!function(e){e(".validate-form").each((function(){var t=new(SE())(this,{classTo:"input-form",errorClass:"has-error",errorTextParent:"input-form",errorTextClass:"text-theme-24 mt-2"});t.addValidator(e(this).find('input[type="url"]')[0],(function(e){var t=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/gi);return!!(!e.length||e.length&&e.match(t))}),"This field is URL format only",2,!1),e(this).on("submit",(function(n){n.preventDefault(),function(t){t.validate()?kE()({node:e("#success-notification-content").clone().removeClass("hidden")[0],duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast():kE()({node:e("#failed-notification-content").clone().removeClass("hidden")[0],duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}(t)}))}))}(r(5553));r(5429);!function(e){e("#basic-non-sticky-notification-toggle").on("click",(function(){kE()({node:e("#basic-non-sticky-notification-content").clone().removeClass("hidden")[0],duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()})),e("#basic-sticky-notification-toggle").on("click",(function(){kE()({node:e("#basic-non-sticky-notification-content").clone().removeClass("hidden")[0],duration:-1,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()})),e("#success-notification-toggle").on("click",(function(){kE()({node:e("#success-notification-content").clone().removeClass("hidden")[0],duration:-1,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()})),e("#notification-with-actions-toggle").on("click",(function(){kE()({node:e("#notification-with-actions-content").clone().removeClass("hidden")[0],duration:-1,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()})),e("#notification-with-avatar-toggle").on("click",(function(){var t=kE()({node:e("#notification-with-avatar-content").clone().removeClass("hidden")[0],duration:-1,newWindow:!0,close:!1,gravity:"top",position:"right",stopOnFocus:!0}).showToast();e(t.toastElement).find('[data-dismiss="notification"]').on("click",(function(){t.hideToast()}))})),e("#notification-with-split-buttons-toggle").on("click",(function(){var t=kE()({node:e("#notification-with-split-buttons-content").clone().removeClass("hidden")[0],duration:-1,newWindow:!0,close:!1,gravity:"top",position:"right",stopOnFocus:!0}).showToast();e(t.toastElement).find('[data-dismiss="notification"]').on("click",(function(){t.hideToast()}))})),e("#notification-with-buttons-below-toggle").on("click",(function(){kE()({node:e("#notification-with-buttons-below-content").clone().removeClass("hidden")[0],duration:-1,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0}).showToast()}))}(r(5553));var CE=r(7921),xE=r.n(CE),AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return i;i++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i++}}}),String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var i=0|t,o=Math.max(i>=0?i:r-Math.abs(i),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;o<r;){if(a(n[o],e))return!0;o++}return!1}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0});var RE=function(e){this.table=e,this.blockHozScrollEvent=!1,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)};RE.prototype.createHeadersElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-headers"),e},RE.prototype.createHeaderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-header"),this.table.options.headerVisible||e.classList.add("tabulator-header-hidden"),e},RE.prototype.initialize=function(){},RE.prototype.setRowManager=function(e){this.rowManager=e},RE.prototype.getElement=function(){return this.element},RE.prototype.getHeadersElement=function(){return this.headersElement},RE.prototype.scrollHorizontal=function(e){var t=0,n=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=e,e>n?(t=e-n,this.element.style.marginLeft=-t+"px"):this.element.style.marginLeft=0,this.scrollLeft=e,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.scrollHorizontal()},RE.prototype.generateColumnsFromRowData=function(e){var t,n,r=[],i=this.table.options.autoColumnsDefinitions;if(e&&e.length){for(var o in t=e[0]){var a={field:o,title:o},s=t[o];switch(void 0===s?"undefined":AE(s)){case"undefined":n="string";break;case"boolean":n="boolean";break;case"object":n=Array.isArray(s)?"array":"string";break;default:n=isNaN(s)||""===s?s.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}a.sorter=n,r.push(a)}if(i)switch(void 0===i?"undefined":AE(i)){case"function":this.table.options.columns=i.call(this.table,r);break;case"object":Array.isArray(i)?r.forEach((function(e){var t=i.find((function(t){return t.field===e.field}));t&&Object.assign(e,t)})):r.forEach((function(e){i[e.field]&&Object.assign(e,i[e.field])})),this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}},RE.prototype.setColumns=function(e,t){for(var n=this;n.headersElement.firstChild;)n.headersElement.removeChild(n.headersElement.firstChild);n.columns=[],n.columnsByIndex=[],n.columnsByField={},n.table.modExists("frozenColumns")&&n.table.modules.frozenColumns.reset(),e.forEach((function(e,t){n._addColumn(e)})),n._reIndexColumns(),n.table.options.responsiveLayout&&n.table.modExists("responsiveLayout",!0)&&n.table.modules.responsiveLayout.initialize(),this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!1,!0),n.redraw(!0)},RE.prototype._addColumn=function(e,t,n){var r=new DE(e,this),i=r.getElement(),o=n?this.findColumnIndex(n):n;if(n&&o>-1){var a=this.columns.indexOf(n.getTopColumn()),s=n.getElement();t?(this.columns.splice(a,0,r),s.parentNode.insertBefore(i,s)):(this.columns.splice(a+1,0,r),s.parentNode.insertBefore(i,s.nextSibling))}else t?(this.columns.unshift(r),this.headersElement.insertBefore(r.getElement(),this.headersElement.firstChild)):(this.columns.push(r),this.headersElement.appendChild(r.getElement())),r.columnRendered();return r},RE.prototype.registerColumnField=function(e){e.definition.field&&(this.columnsByField[e.definition.field]=e)},RE.prototype.registerColumnPosition=function(e){this.columnsByIndex.push(e)},RE.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach((function(e){e.reRegisterPosition()}))},RE.prototype._verticalAlignHeaders=function(){var e=this,t=0;e.columns.forEach((function(e){var n;e.clearVerticalAlign(),(n=e.getHeight())>t&&(t=n)})),e.columns.forEach((function(n){n.verticalAlign(e.table.options.columnHeaderVertAlign,t)})),e.rowManager.adjustTableSize()},RE.prototype.findColumn=function(e){return"object"!=(void 0===e?"undefined":AE(e))?this.columnsByField[e]||!1:e instanceof DE?e:e instanceof ME?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&this.columns.find((function(t){return t.element===e}))||!1},RE.prototype.getColumnByField=function(e){return this.columnsByField[e]},RE.prototype.getColumnsByFieldRoot=function(e){var t=this,n=[];return Object.keys(this.columnsByField).forEach((function(r){r.split(".")[0]===e&&n.push(t.columnsByField[r])})),n},RE.prototype.getColumnByIndex=function(e){return this.columnsByIndex[e]},RE.prototype.getFirstVisibileColumn=function(e){return(e=this.columnsByIndex.findIndex((function(e){return e.visible})))>-1&&this.columnsByIndex[e]},RE.prototype.getColumns=function(){return this.columns},RE.prototype.findColumnIndex=function(e){return this.columnsByIndex.findIndex((function(t){return e===t}))},RE.prototype.getRealColumns=function(){return this.columnsByIndex},RE.prototype.traverse=function(e){this.columnsByIndex.forEach((function(t,n){e(t,n)}))},RE.prototype.getDefinitions=function(e){var t=[];return this.columnsByIndex.forEach((function(n){(!e||e&&n.visible)&&t.push(n.getDefinition())})),t},RE.prototype.getDefinitionTree=function(){var e=[];return this.columns.forEach((function(t){e.push(t.getDefinition(!0))})),e},RE.prototype.getComponents=function(e){var t=[];return(e?this.columns:this.columnsByIndex).forEach((function(e){t.push(e.getComponent())})),t},RE.prototype.getWidth=function(){var e=0;return this.columnsByIndex.forEach((function(t){t.visible&&(e+=t.getWidth())})),e},RE.prototype.moveColumn=function(e,t,n){this.moveColumnActual(e,t,n),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t.element.parentNode.insertBefore(e.element,t.element),n&&t.element.parentNode.insertBefore(t.element,e.element),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},RE.prototype.moveColumnActual=function(e,t,n){e.parent.isGroup?this._moveColumnInArray(e.parent.columns,e,t,n):this._moveColumnInArray(this.columns,e,t,n),this._moveColumnInArray(this.columnsByIndex,e,t,n,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize(!0),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,e.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},RE.prototype._moveColumnInArray=function(e,t,n,r,i){var o,a=this,s=e.indexOf(t),l=[];s>-1&&(e.splice(s,1),(o=e.indexOf(n))>-1?r&&(o+=1):o=s,e.splice(o,0,t),i&&(this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.rowManager.rows.forEach((function(e){l=l.concat(a.table.modules.dataTree.getTreeChildren(e,!1,!0))})),(l=l.concat(this.table.rowManager.rows)).forEach((function(e){if(e.cells.length){var t=e.cells.splice(s,1)[0];e.cells.splice(o,0,t)}}))))},RE.prototype.scrollToColumn=function(e,t,n){var r=this,i=0,o=0,a=0,s=e.getElement();return new Promise((function(l,c){if(void 0===t&&(t=r.table.options.scrollToColumnPosition),void 0===n&&(n=r.table.options.scrollToColumnIfVisible),e.visible){switch(t){case"middle":case"center":a=-r.element.clientWidth/2;break;case"right":a=s.clientWidth-r.headersElement.clientWidth}if(!n&&(o=s.offsetLeft)>0&&o+s.offsetWidth<r.element.clientWidth)return!1;i=s.offsetLeft+a,i=Math.max(Math.min(i,r.table.rowManager.element.scrollWidth-r.table.rowManager.element.clientWidth),0),r.table.rowManager.scrollHorizontal(i),r.scrollHorizontal(i),l()}else console.warn("Scroll Error - Column not visible"),c("Scroll Error - Column not visible")}))},RE.prototype.generateCells=function(e){var t=[];return this.columnsByIndex.forEach((function(n){t.push(n.generateCell(e))})),t},RE.prototype.getFlexBaseWidth=function(){var e=this,t=e.table.element.clientWidth,n=0;return e.rowManager.element.scrollHeight>e.rowManager.element.clientHeight&&(t-=e.rowManager.element.offsetWidth-e.rowManager.element.clientWidth),this.columnsByIndex.forEach((function(r){var i,o,a;r.visible&&(i=r.definition.width||0,o=void 0===r.minWidth?e.table.options.columnMinWidth:parseInt(r.minWidth),a="string"==typeof i?i.indexOf("%")>-1?t/100*parseInt(i):parseInt(i):i,n+=a>o?a:o)})),n},RE.prototype.addColumn=function(e,t,n){var r=this;return new Promise((function(i,o){var a=r._addColumn(e,t,n);r._reIndexColumns(),r.table.options.responsiveLayout&&r.table.modExists("responsiveLayout",!0)&&r.table.modules.responsiveLayout.initialize(),r.table.modExists("columnCalcs")&&r.table.modules.columnCalcs.recalc(r.table.rowManager.activeRows),r.redraw(!0),"fitColumns"!=r.table.modules.layout.getMode()&&a.reinitializeWidth(),r._verticalAlignHeaders(),r.table.rowManager.reinitialize(),r.table.options.virtualDomHoz&&r.table.vdomHoz.reinitialize(),i(a)}))},RE.prototype.deregisterColumn=function(e){var t,n=e.getField();n&&delete this.columnsByField[n],(t=this.columnsByIndex.indexOf(e))>-1&&this.columnsByIndex.splice(t,1),(t=this.columns.indexOf(e))>-1&&this.columns.splice(t,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this._verticalAlignHeaders(),this.redraw()},RE.prototype.redraw=function(e){e&&(YE.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),["fitColumns","fitDataStretch"].indexOf(this.table.modules.layout.getMode())>-1||e?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),e&&(this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var ME=function(e){this._column=e,this.type="ColumnComponent"};ME.prototype.getElement=function(){return this._column.getElement()},ME.prototype.getDefinition=function(){return this._column.getDefinition()},ME.prototype.getField=function(){return this._column.getField()},ME.prototype.getCells=function(){var e=[];return this._column.cells.forEach((function(t){e.push(t.getComponent())})),e},ME.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._column.visible},ME.prototype.isVisible=function(){return this._column.visible},ME.prototype.show=function(){this._column.isGroup?this._column.columns.forEach((function(e){e.show()})):this._column.show()},ME.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach((function(e){e.hide()})):this._column.hide()},ME.prototype.toggle=function(){this._column.visible?this.hide():this.show()},ME.prototype.delete=function(){return this._column.delete()},ME.prototype.getSubColumns=function(){var e=[];return this._column.columns.length&&this._column.columns.forEach((function(t){e.push(t.getComponent())})),e},ME.prototype.getParentColumn=function(){return this._column.parent instanceof DE&&this._column.parent.getComponent()},ME.prototype._getSelf=function(){return this._column},ME.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},ME.prototype.getTable=function(){return this._column.table},ME.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},ME.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},ME.prototype.getHeaderFilterValue=function(){if(this._column.table.modExists("filter",!0))return this._column.table.modules.filter.getHeaderFilterValue(this._column)},ME.prototype.setHeaderFilterValue=function(e){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,e)},ME.prototype.move=function(e,t){var n=this._column.table.columnManager.findColumn(e);n?this._column.table.columnManager.moveColumn(this._column,n,t):console.warn("Move Error - No matching column found:",n)},ME.prototype.getNextColumn=function(){var e=this._column.nextColumn();return!!e&&e.getComponent()},ME.prototype.getPrevColumn=function(){var e=this._column.prevColumn();return!!e&&e.getComponent()},ME.prototype.updateDefinition=function(e){return this._column.updateDefinition(e)},ME.prototype.getWidth=function(){return this._column.getWidth()},ME.prototype.setWidth=function(e){var t;return t=!0===e?this._column.reinitializeWidth(!0):this._column.setWidth(e),this._column.table.options.virtualDomHoz&&this._column.table.vdomHoz.reinitialize(!0),t},ME.prototype.validate=function(){return this._column.validate()};var DE=function e(t,n){var r=this;this.table=n.table,this.definition=t,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.setField(this.definition.field),this.table.options.invalidOptionWarnings&&this.checkDefinition(),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this._mapDepricatedFunctionality(),t.columns?(this.isGroup=!0,t.columns.forEach((function(t,n){var i=new e(t,r);r.attachColumn(i)})),r.checkColumnVisibility()):n.registerColumnField(this),t.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader(),this.bindModuleColumns()};DE.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e},DE.prototype.createGroupElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e},DE.prototype.checkDefinition=function(){var e=this;Object.keys(this.definition).forEach((function(t){-1===e.defaultOptionList.indexOf(t)&&console.warn("Invalid column definition option in '"+(e.field||e.definition.title)+"' column:",t)}))},DE.prototype.setField=function(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData},DE.prototype.registerColumnPosition=function(e){this.parent.registerColumnPosition(e)},DE.prototype.registerColumnField=function(e){this.parent.registerColumnField(e)},DE.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach((function(e){e.reRegisterPosition()})):this.registerColumnPosition(this)},DE.prototype._mapDepricatedFunctionality=function(){void 0!==this.definition.hideInHtml&&(this.definition.htmlOutput=!this.definition.hideInHtml,console.warn("hideInHtml column definition property is deprecated, you should now use htmlOutput")),void 0!==this.definition.align&&(this.definition.hozAlign=this.definition.align,console.warn("align column definition property is deprecated, you should now use hozAlign")),void 0!==this.definition.downloadTitle&&(this.definition.titleDownload=this.definition.downloadTitle,console.warn("downloadTitle definition property is deprecated, you should now use titleDownload"))},DE.prototype.setTooltip=function(){var e=this,t=e.definition,n=t.headerTooltip||!1===t.tooltip?t.headerTooltip:e.table.options.tooltipsHeader;n?!0===n?t.field?e.table.modules.localize.bind("columns|"+t.field,(function(n){e.element.setAttribute("title",n||t.title)})):e.element.setAttribute("title",t.title):("function"==typeof n&&!1===(n=n(e.getComponent()))&&(n=""),e.element.setAttribute("title",n)):e.element.setAttribute("title","")},DE.prototype._buildHeader=function(){for(var e=this,t=e.definition;e.element.firstChild;)e.element.removeChild(e.element.firstChild);t.headerVertical&&(e.element.classList.add("tabulator-col-vertical"),"flip"===t.headerVertical&&e.element.classList.add("tabulator-col-vertical-flip")),e.contentElement=e._bindEvents(),e.contentElement=e._buildColumnHeaderContent(),e.element.appendChild(e.contentElement),e.isGroup?e._buildGroupHeader():e._buildColumnHeader(),e.setTooltip(),e.table.options.resizableColumns&&e.table.modExists("resizeColumns")&&e.table.modules.resizeColumns.initializeColumn("header",e,e.element),t.headerFilter&&e.table.modExists("filter")&&e.table.modExists("edit")&&(void 0!==t.headerFilterPlaceholder&&t.field&&e.table.modules.localize.setHeaderFilterColumnPlaceholder(t.field,t.headerFilterPlaceholder),e.table.modules.filter.initializeColumn(e)),e.table.modExists("frozenColumns")&&e.table.modules.frozenColumns.initializeColumn(e),e.table.options.movableColumns&&!e.isGroup&&e.table.modExists("moveColumn")&&e.table.modules.moveColumn.initializeColumn(e),(t.topCalc||t.bottomCalc)&&e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.initializeColumn(e),e.table.modExists("persistence")&&e.table.modules.persistence.config.columns&&e.table.modules.persistence.initializeColumn(e),e.element.addEventListener("mouseenter",(function(t){e.setTooltip()}))},DE.prototype._bindEvents=function(){var e,t,n,r=this,i=r.definition;"function"==typeof i.headerClick&&r.element.addEventListener("click",(function(e){i.headerClick(e,r.getComponent())})),"function"==typeof i.headerDblClick&&r.element.addEventListener("dblclick",(function(e){i.headerDblClick(e,r.getComponent())})),"function"==typeof i.headerContext&&r.element.addEventListener("contextmenu",(function(e){i.headerContext(e,r.getComponent())})),"function"==typeof i.headerTap&&(n=!1,r.element.addEventListener("touchstart",(function(e){n=!0}),{passive:!0}),r.element.addEventListener("touchend",(function(e){n&&i.headerTap(e,r.getComponent()),n=!1}))),"function"==typeof i.headerDblTap&&(e=null,r.element.addEventListener("touchend",(function(t){e?(clearTimeout(e),e=null,i.headerDblTap(t,r.getComponent())):e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),"function"==typeof i.headerTapHold&&(t=null,r.element.addEventListener("touchstart",(function(e){clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,n=!1,i.headerTapHold(e,r.getComponent())}),1e3)}),{passive:!0}),r.element.addEventListener("touchend",(function(e){clearTimeout(t),t=null}))),"function"==typeof i.cellClick&&(r.cellEvents.cellClick=i.cellClick),"function"==typeof i.cellDblClick&&(r.cellEvents.cellDblClick=i.cellDblClick),"function"==typeof i.cellContext&&(r.cellEvents.cellContext=i.cellContext),"function"==typeof i.cellMouseEnter&&(r.cellEvents.cellMouseEnter=i.cellMouseEnter),"function"==typeof i.cellMouseLeave&&(r.cellEvents.cellMouseLeave=i.cellMouseLeave),"function"==typeof i.cellMouseOver&&(r.cellEvents.cellMouseOver=i.cellMouseOver),"function"==typeof i.cellMouseOut&&(r.cellEvents.cellMouseOut=i.cellMouseOut),"function"==typeof i.cellMouseMove&&(r.cellEvents.cellMouseMove=i.cellMouseMove),"function"==typeof i.cellTap&&(r.cellEvents.cellTap=i.cellTap),"function"==typeof i.cellDblTap&&(r.cellEvents.cellDblTap=i.cellDblTap),"function"==typeof i.cellTapHold&&(r.cellEvents.cellTapHold=i.cellTapHold),"function"==typeof i.cellEdited&&(r.cellEvents.cellEdited=i.cellEdited),"function"==typeof i.cellEditing&&(r.cellEvents.cellEditing=i.cellEditing),"function"==typeof i.cellEditCancelled&&(r.cellEvents.cellEditCancelled=i.cellEditCancelled)},DE.prototype._buildColumnHeader=function(){var e=this,t=this.definition,n=this.table;(n.modExists("sort")&&n.modules.sort.initializeColumn(this,this.titleHolderElement),(t.headerContextMenu||t.headerClickMenu||t.headerMenu)&&n.modExists("menu")&&n.modules.menu.initializeColumnHeader(this),n.modExists("format")&&n.modules.format.initializeColumn(this),void 0!==t.editor&&n.modExists("edit")&&n.modules.edit.initializeColumn(this),void 0!==t.validator&&n.modExists("validate")&&n.modules.validate.initializeColumn(this),n.modExists("mutator")&&n.modules.mutator.initializeColumn(this),n.modExists("accessor")&&n.modules.accessor.initializeColumn(this),AE(n.options.responsiveLayout)&&n.modExists("responsiveLayout")&&n.modules.responsiveLayout.initializeColumn(this),void 0!==t.visible&&(t.visible?this.show(!0):this.hide(!0)),t.cssClass)&&t.cssClass.split(" ").forEach((function(t){e.element.classList.add(t)}));t.field&&this.element.setAttribute("tabulator-field",t.field),this.setMinWidth(void 0===t.minWidth?this.table.options.columnMinWidth:parseInt(t.minWidth)),(t.maxWidth||this.table.options.columnMaxWidth)&&!1!==t.maxWidth&&this.setMaxWidth(void 0===t.maxWidth?this.table.options.columnMaxWidth:parseInt(t.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip||!1===this.definition.tooltip?this.definition.tooltip:this.table.options.tooltips,this.hozAlign=void 0===this.definition.hozAlign?this.table.options.cellHozAlign:this.definition.hozAlign,this.vertAlign=void 0===this.definition.vertAlign?this.table.options.cellVertAlign:this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign},DE.prototype._buildColumnHeaderContent=function(){this.definition,this.table;var e=document.createElement("div");return e.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),e.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),e},DE.prototype._buildColumnHeaderTitle=function(){var e=this,t=e.definition,n=e.table,r=document.createElement("div");if(r.classList.add("tabulator-col-title"),t.editableTitle){var i=document.createElement("input");i.classList.add("tabulator-title-editor"),i.addEventListener("click",(function(e){e.stopPropagation(),i.focus()})),i.addEventListener("change",(function(){t.title=i.value,n.options.columnTitleChanged.call(e.table,e.getComponent())})),r.appendChild(i),t.field?n.modules.localize.bind("columns|"+t.field,(function(e){i.value=e||t.title||"&nbsp;"})):i.value=t.title||"&nbsp;"}else t.field?n.modules.localize.bind("columns|"+t.field,(function(n){e._formatColumnHeaderTitle(r,n||t.title||"&nbsp;")})):e._formatColumnHeaderTitle(r,t.title||"&nbsp;");return r},DE.prototype._formatColumnHeaderTitle=function(e,t){var n,r,i,o,a,s=this;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(n=this.table.modules.format.getFormatter(this.definition.titleFormatter),a=function(e){s.titleFormatterRendered=e},o={getValue:function(){return t},getElement:function(){return e}},i="function"==typeof(i=this.definition.titleFormatterParams||{})?i():i,void 0===(r=n.call(this.table.modules.format,o,i,a))?"undefined":AE(r)){case"object":r instanceof Node?e.appendChild(r):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",r));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=r}else e.innerHTML=t},DE.prototype._buildGroupHeader=function(){var e=this;(this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass)&&this.definition.cssClass.split(" ").forEach((function(t){e.element.classList.add(t)}));(this.definition.headerContextMenu||this.definition.headerMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeColumnHeader(this),this.titleElement.style.textAlign=this.definition.headerHozAlign||this.table.options.headerHozAlign,this.element.appendChild(this.groupElement)},DE.prototype._getFlatData=function(e){return e[this.field]},DE.prototype._getNestedData=function(e){for(var t,n=e,r=this.fieldStructure,i=r.length,o=0;o<i&&(t=n=n[r[o]],n);o++);return t},DE.prototype._setFlatData=function(e,t){this.field&&(e[this.field]=t)},DE.prototype._setNestedData=function(e,t){for(var n=e,r=this.fieldStructure,i=r.length,o=0;o<i;o++)if(o==i-1)n[r[o]]=t;else{if(!n[r[o]]){if(void 0===t)break;n[r[o]]={}}n=n[r[o]]}},DE.prototype.attachColumn=function(e){var t=this;t.groupElement?(t.columns.push(e),t.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},DE.prototype.verticalAlign=function(e,t){var n=this.parent.isGroup?this.parent.getGroupElement().clientHeight:t||this.parent.getHeadersElement().clientHeight;this.element.style.height=n+"px",this.isGroup&&(this.groupElement.style.minHeight=n-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===e||(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach((function(t){t.verticalAlign(e)}))},DE.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach((function(e){e.clearVerticalAlign()}))},DE.prototype.bindModuleColumns=function(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)},DE.prototype.getElement=function(){return this.element},DE.prototype.getGroupElement=function(){return this.groupElement},DE.prototype.getField=function(){return this.field},DE.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},DE.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},DE.prototype.getColumns=function(){return this.columns},DE.prototype.getCells=function(){return this.cells},DE.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},DE.prototype.getDefinition=function(e){var t=[];return this.isGroup&&e&&(this.columns.forEach((function(e){t.push(e.getDefinition(!0))})),this.definition.columns=t),this.definition},DE.prototype.checkColumnVisibility=function(){var e=!1;this.columns.forEach((function(t){t.visible&&(e=!0)})),e?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},DE.prototype.show=function(e,t){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(e){e.show()})),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),e||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())},DE.prototype.hide=function(e,t){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach((function(e){e.hide()})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns"),!t&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),e||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),!this.silent&&this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitialize())},DE.prototype.matchChildWidths=function(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach((function(t){t.visible&&(e+=t.getWidth())})),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())},DE.prototype.removeChild=function(e){var t=this.columns.indexOf(e);t>-1&&this.columns.splice(t,1),this.columns.length||this.delete()},DE.prototype.setWidth=function(e){this.widthFixed=!0,this.setWidthActual(e)},DE.prototype.setWidthActual=function(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach((function(e){e.setWidth()})),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},DE.prototype.checkCellHeights=function(){var e=[];this.cells.forEach((function(t){t.row.heightInitialized&&(null!==t.row.getElement().offsetParent?(e.push(t.row),t.row.clearCellHeight()):t.row.heightInitialized=!1)})),e.forEach((function(e){e.calcHeight()})),e.forEach((function(e){e.setCellHeight()}))},DE.prototype.getWidth=function(){var e=0;return this.isGroup?this.columns.forEach((function(t){t.visible&&(e+=t.getWidth())})):e=this.width,e},DE.prototype.getHeight=function(){return this.element.offsetHeight},DE.prototype.setMinWidth=function(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach((function(e){e.setMinWidth()}))},DE.prototype.setMaxWidth=function(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach((function(e){e.setMaxWidth()}))},DE.prototype.delete=function(){var e=this;return new Promise((function(t,n){e.isGroup&&e.columns.forEach((function(e){e.delete()})),e.table.modExists("edit")&&e.table.modules.edit.currentCell.column===e&&e.table.modules.edit.cancelEdit();for(var r=e.cells.length,i=0;i<r;i++)e.cells[0].delete();e.element.parentNode&&e.element.parentNode.removeChild(e.element),e.element=!1,e.contentElement=!1,e.titleElement=!1,e.groupElement=!1,e.parent.isGroup&&e.parent.removeChild(e),e.table.columnManager.deregisterColumn(e),e.table.options.virtualDomHoz&&e.table.vdomHoz.reinitialize(!0),t()}))},DE.prototype.columnRendered=function(){this.titleFormatterRendered&&this.titleFormatterRendered()},DE.prototype.validate=function(){var e=[];return this.cells.forEach((function(t){t.validate()||e.push(t.getComponent())})),!e.length||e},DE.prototype.generateCell=function(e){var t=new FE(this,e);return this.cells.push(t),t},DE.prototype.nextColumn=function(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)},DE.prototype._nextVisibleColumn=function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._nextVisibleColumn(e+1)},DE.prototype.prevColumn=function(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)},DE.prototype._prevVisibleColumn=function(e){var t=this.table.columnManager.getColumnByIndex(e);return!t||t.visible?t:this._prevVisibleColumn(e-1)},DE.prototype.reinitializeWidth=function(e){this.widthFixed=!1,void 0===this.definition.width||e||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},DE.prototype.fitToData=function(){var e=this;this.widthFixed||(this.element.style.width="",e.cells.forEach((function(e){e.clearWidth()})));var t=this.element.offsetWidth;e.width&&this.widthFixed||(e.cells.forEach((function(e){var n=e.getWidth();n>t&&(t=n)})),t&&e.setWidthActual(t+1))},DE.prototype.updateDefinition=function(e){var t=this;return new Promise((function(n,r){var i;t.isGroup||t.parent.isGroup?(console.warn("Column Update Error - The updateDefinition function is only available on ungrouped columns"),r("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(i=Object.assign({},t.getDefinition()),i=Object.assign(i,e),t.table.columnManager.addColumn(i,!1,t).then((function(e){i.field==t.field&&(t.field=!1),t.delete().then((function(){n(e.getComponent())})).catch((function(e){r(e)}))})).catch((function(e){r(e)})))}))},DE.prototype.deleteCell=function(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)},DE.prototype.defaultOptionList=["title","field","columns","visible","align","hozAlign","vertAlign","width","minWidth","maxWidth","widthGrow","widthShrink","resizable","frozen","responsive","tooltip","cssClass","rowHandle","hideInHtml","print","htmlOutput","sorter","sorterParams","formatter","formatterParams","variableHeight","editable","editor","editorParams","validator","mutator","mutatorParams","mutatorData","mutatorDataParams","mutatorEdit","mutatorEditParams","mutatorClipboard","mutatorClipboardParams","accessor","accessorParams","accessorData","accessorDataParams","accessorDownload","accessorDownloadParams","accessorClipboard","accessorClipboardParams","accessorPrint","accessorPrintParams","accessorHtmlOutput","accessorHtmlOutputParams","clipboard","download","downloadTitle","topCalc","topCalcParams","topCalcFormatter","topCalcFormatterParams","bottomCalc","bottomCalcParams","bottomCalcFormatter","bottomCalcFormatterParams","cellClick","cellDblClick","cellContext","cellTap","cellDblTap","cellTapHold","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellEditing","cellEdited","cellEditCancelled","headerSort","headerSortStartingDir","headerSortTristate","headerClick","headerDblClick","headerContext","headerTap","headerDblTap","headerTapHold","headerTooltip","headerVertical","headerHozAlign","editableTitle","titleFormatter","titleFormatterParams","headerFilter","headerFilterPlaceholder","headerFilterParams","headerFilterEmptyCheck","headerFilterFunc","headerFilterFuncParams","headerFilterLiveFilter","print","headerContextMenu","headerMenu","contextMenu","clickMenu","formatterPrint","formatterPrintParams","formatterClipboard","formatterClipboardParams","formatterHtmlOutput","formatterHtmlOutputParams","titlePrint","titleClipboard","titleHtmlOutput","titleDownload"],DE.prototype.getComponent=function(){return this.component||(this.component=new ME(this)),this.component};var OE=function(e){this.table=e,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[],this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1};OE.prototype.createHolderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-tableHolder"),e.setAttribute("tabindex",0),e},OE.prototype.createTableElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-table"),e},OE.prototype.getElement=function(){return this.element},OE.prototype.getTableElement=function(){return this.tableElement},OE.prototype.getRowPosition=function(e,t){return t?this.activeRows.indexOf(e):this.rows.indexOf(e)},OE.prototype.setColumnManager=function(e){this.columnManager=e},OE.prototype.initialize=function(){var e=this;e.setRenderMode(),e.element.appendChild(e.tableElement),e.firstRender=!0,e.element.addEventListener("scroll",(function(){var t=e.element.scrollLeft;e.scrollLeft!=t&&(e.columnManager.scrollHorizontal(t),e.table.options.groupBy&&e.table.modules.groupRows.scrollHeaders(t),e.table.modExists("columnCalcs")&&e.table.modules.columnCalcs.scrollHorizontal(t),e.table.options.scrollHorizontal(t)),e.scrollLeft=t})),"virtual"===this.renderMode&&e.element.addEventListener("scroll",(function(){var t=e.element.scrollTop,n=e.scrollTop>t;e.scrollTop!=t?(e.scrollTop=t,e.scrollVertical(n),"scroll"==e.table.options.ajaxProgressiveLoad&&e.table.modules.ajax.nextPage(e.element.scrollHeight-e.element.clientHeight-t),e.table.options.scrollVertical(t)):e.scrollTop=t}))},OE.prototype.findRow=function(e){var t=this;return"object"!=(void 0===e?"undefined":AE(e))?null!=e&&(t.rows.find((function(n){return n.data[t.table.options.index]==e}))||!1):e instanceof IE?e:e instanceof LE?e._getSelf()||!1:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.rows.find((function(t){return t.getElement()===e}))||!1},OE.prototype.getRowFromDataObject=function(e){return this.rows.find((function(t){return t.data===e}))||!1},OE.prototype.getRowFromPosition=function(e,t){return t?this.activeRows[e]:this.rows[e]},OE.prototype.scrollToRow=function(e,t,n){var r,i=this,o=this.getDisplayRows().indexOf(e),a=e.getElement(),s=0;return new Promise((function(e,l){if(o>-1){if(void 0===t&&(t=i.table.options.scrollToRowPosition),void 0===n&&(n=i.table.options.scrollToRowIfVisible),"nearest"===t)switch(i.renderMode){case"classic":r=YE.prototype.helpers.elOffset(a).top,t=Math.abs(i.element.scrollTop-r)>Math.abs(i.element.scrollTop+i.element.clientHeight-r)?"bottom":"top";break;case"virtual":t=Math.abs(i.vDomTop-o)>Math.abs(i.vDomBottom-o)?"bottom":"top"}if(!n&&YE.prototype.helpers.elVisible(a)&&(s=YE.prototype.helpers.elOffset(a).top-YE.prototype.helpers.elOffset(i.element).top)>0&&s<i.element.clientHeight-a.offsetHeight)return!1;switch(i.renderMode){case"classic":i.element.scrollTop=YE.prototype.helpers.elOffset(a).top-YE.prototype.helpers.elOffset(i.element).top+i.element.scrollTop;break;case"virtual":i._virtualRenderFill(o,!0)}switch(t){case"middle":case"center":i.element.scrollHeight-i.element.scrollTop==i.element.clientHeight?i.element.scrollTop=i.element.scrollTop+(a.offsetTop-i.element.scrollTop)-(i.element.scrollHeight-a.offsetTop)/2:i.element.scrollTop=i.element.scrollTop-i.element.clientHeight/2;break;case"bottom":i.element.scrollHeight-i.element.scrollTop==i.element.clientHeight?i.element.scrollTop=i.element.scrollTop-(i.element.scrollHeight-a.offsetTop)+a.offsetHeight:i.element.scrollTop=i.element.scrollTop-i.element.clientHeight+a.offsetHeight}e()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")}))},OE.prototype.setData=function(e,t,n){var r=this,i=this;return new Promise((function(o,a){t&&r.getDisplayRows().length?i.table.options.pagination?i._setDataActual(e,!0):r.reRenderInPosition((function(){i._setDataActual(e)})):(r.table.options.autoColumns&&n&&r.table.columnManager.generateColumnsFromRowData(e),r.resetScroll(),r._setDataActual(e)),o()}))},OE.prototype._setDataActual=function(e,t){var n=this;n.table.options.dataLoading.call(this.table,e),this._wipeElements(),this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(e)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchData(e),e.forEach((function(e,t){if(e&&"object"===(void 0===e?"undefined":AE(e))){var r=new IE(e,n);n.rows.push(r)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",e)})),n.refreshActiveData(!1,!1,t),n.table.options.dataLoaded.call(this.table,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===e?"undefined":AE(e),"\nData:     ",e)},OE.prototype._wipeElements=function(){this.rows.forEach((function(e){e.wipe()})),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.wipe(),this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()},OE.prototype.deleteRow=function(e,t){var n=this.rows.indexOf(e),r=this.activeRows.indexOf(e);r>-1&&this.activeRows.splice(r,1),n>-1&&this.rows.splice(n,1),this.setActiveRows(this.activeRows),this.displayRowIterator((function(t){var n=t.indexOf(e);n>-1&&t.splice(n,1)})),t||this.reRenderInPosition(),this.regenerateRowNumbers(),this.table.options.rowDeleted.call(this.table,e.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},OE.prototype.addRow=function(e,t,n,r){var i=this.addRowActual(e,t,n,r);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",i,{data:e,pos:t,index:n}),i},OE.prototype.addRows=function(e,t,n){var r=this,i=this,o=[];return new Promise((function(a,s){t=r.findAddRowPos(t),Array.isArray(e)||(e=[e]),e.length-1,(void 0===n&&t||void 0!==n&&!t)&&e.reverse(),e.forEach((function(e,r){var a=i.addRow(e,t,n,!0);o.push(a)})),r.table.options.groupBy&&r.table.modExists("groupRows")?r.table.modules.groupRows.updateGroupRows(!0):r.table.options.pagination&&r.table.modExists("page")?r.refreshActiveData(!1,!1,!0):r.reRenderInPosition(),r.table.modExists("columnCalcs")&&r.table.modules.columnCalcs.recalc(r.table.rowManager.activeRows),r.regenerateRowNumbers(),a(o)}))},OE.prototype.findAddRowPos=function(e){return void 0===e&&(e=this.table.options.addRowPos),"pos"===e&&(e=!0),"bottom"===e&&(e=!1),e},OE.prototype.addRowActual=function(e,t,n,r){var i,o,a=e instanceof IE?e:new IE(e||{},this),s=this.findAddRowPos(t),l=-1;if(!n&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(o=this.getDisplayRows(),s?o.length?n=o[0]:this.activeRows.length&&(n=this.activeRows[this.activeRows.length-1],s=!1):o.length&&(n=o[o.length-1],s=!(o.length<this.table.modules.page.getPageSize()))),void 0!==n&&(n=this.findRow(n)),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(a);var c=a.getGroup().rows;c.length>1&&(!n||n&&-1==c.indexOf(n)?s?c[0]!==a&&(n=c[0],this._moveRowInArray(a.getGroup().rows,a,n,!s)):c[c.length-1]!==a&&(n=c[c.length-1],this._moveRowInArray(a.getGroup().rows,a,n,!s)):this._moveRowInArray(a.getGroup().rows,a,n,!s))}return n&&(l=this.rows.indexOf(n)),n&&l>-1?(i=this.activeRows.indexOf(n),this.displayRowIterator((function(e){var t=e.indexOf(n);t>-1&&e.splice(s?t:t+1,0,a)})),i>-1&&this.activeRows.splice(s?i:i+1,0,a),this.rows.splice(s?l:l+1,0,a)):s?(this.displayRowIterator((function(e){e.unshift(a)})),this.activeRows.unshift(a),this.rows.unshift(a)):(this.displayRowIterator((function(e){e.push(a)})),this.activeRows.push(a),this.rows.push(a)),this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,a.getComponent()),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.getData()),r||this.reRenderInPosition(),a},OE.prototype.moveRow=function(e,t,n){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",e,{posFrom:this.getRowPosition(e),posTo:this.getRowPosition(t),to:t,after:n}),this.moveRowActual(e,t,n),this.regenerateRowNumbers(),this.table.options.rowMoved.call(this.table,e.getComponent())},OE.prototype.moveRowActual=function(e,t,n){var r=this;if(this._moveRowInArray(this.rows,e,t,n),this._moveRowInArray(this.activeRows,e,t,n),this.displayRowIterator((function(i){r._moveRowInArray(i,e,t,n)})),this.table.options.groupBy&&this.table.modExists("groupRows")){!n&&t instanceof ow&&(t=this.table.rowManager.prevDisplayRow(e)||t);var i=t.getGroup(),o=e.getGroup();i===o?this._moveRowInArray(i.rows,e,t,n):(o&&o.removeRow(e),i.insertRow(e,t,n))}},OE.prototype._moveRowInArray=function(e,t,n,r){var i,o,a;if(t!==n&&((i=e.indexOf(t))>-1&&(e.splice(i,1),(o=e.indexOf(n))>-1?r?e.splice(o+1,0,t):e.splice(o,0,t):e.splice(i,0,t)),e===this.getDisplayRows())){a=o>i?o:i+1;for(var s=i<o?i:o;s<=a;s++)e[s]&&this.styleRow(e[s],s)}},OE.prototype.clearData=function(){this.setData([])},OE.prototype.getRowIndex=function(e){return this.findRowIndex(e,this.rows)},OE.prototype.getDisplayRowIndex=function(e){var t=this.getDisplayRows().indexOf(e);return t>-1&&t},OE.prototype.nextDisplayRow=function(e,t){var n=this.getDisplayRowIndex(e),r=!1;return!1!==n&&n<this.displayRowsCount-1&&(r=this.getDisplayRows()[n+1]),!r||r instanceof IE&&"row"==r.type?r:this.nextDisplayRow(r,t)},OE.prototype.prevDisplayRow=function(e,t){var n=this.getDisplayRowIndex(e),r=!1;return n&&(r=this.getDisplayRows()[n-1]),!t||!r||r instanceof IE&&"row"==r.type?r:this.prevDisplayRow(r,t)},OE.prototype.findRowIndex=function(e,t){var n;return!!((e=this.findRow(e))&&(n=t.indexOf(e))>-1)&&n},OE.prototype.getData=function(e,t){var n=[];return this.getRows(e).forEach((function(e){"row"==e.type&&n.push(e.getData(t||"data"))})),n},OE.prototype.getComponents=function(e){var t=[];return this.getRows(e).forEach((function(e){t.push(e.getComponent())})),t},OE.prototype.getDataCount=function(e){return this.getRows(e).length},OE.prototype._genRemoteRequest=function(){var e=this,t=this.table,n=t.options,r={};if(t.modExists("page")){if(n.ajaxSorting){var i=this.table.modules.sort.getSort();i.forEach((function(e){delete e.column})),r[this.table.modules.page.paginationDataSentNames.sorters]=i}if(n.ajaxFiltering){var o=this.table.modules.filter.getFilters(!0,!0);r[this.table.modules.page.paginationDataSentNames.filters]=o}this.table.modules.ajax.setParams(r,!0)}t.modules.ajax.sendRequest().then((function(t){e._setDataActual(t,!0)})).catch((function(e){}))},OE.prototype.filterRefresh=function(){var e=this.table,t=e.options,n=this.scrollLeft;t.ajaxFiltering?"remote"==t.pagination&&e.modExists("page")?(e.modules.page.reset(!0),e.modules.page.setPage(1).then((function(){})).catch((function(){}))):t.ajaxProgressiveLoad?e.modules.ajax.loadData().then((function(){})).catch((function(){})):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(n)},OE.prototype.sorterRefresh=function(e){var t=this.table,n=this.table.options,r=this.scrollLeft;n.ajaxSorting?("remote"==n.pagination||n.progressiveLoad)&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then((function(){})).catch((function(){}))):n.ajaxProgressiveLoad?t.modules.ajax.loadData().then((function(){})).catch((function(){})):this._genRemoteRequest():this.refreshActiveData(e?"filter":"sort"),this.scrollHorizontal(r)},OE.prototype.scrollHorizontal=function(e){this.scrollLeft=e,this.element.scrollLeft=e,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(e),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(e)},OE.prototype.refreshActiveData=function(e,t,n){var r,i=this,o=this.table,a=["all","filter","sort","display","freeze","group","tree","page"];if(this.redrawBlock)(!this.redrawBlockRestoreConfig||a.indexOf(e)<a.indexOf(this.redrawBlockRestoreConfig.stage))&&(this.redrawBlockRestoreConfig={stage:e,skipStage:t,renderInPosition:n});else{switch(i.table.modExists("edit")&&i.table.modules.edit.cancelEdit(),e||(e="all"),o.options.selectable&&!o.options.selectablePersistence&&o.modExists("selectRow")&&o.modules.selectRow.deselectRows(),e){case"all":case"filter":t?t=!1:o.modExists("filter")?i.setActiveRows(o.modules.filter.filter(i.rows)):i.setActiveRows(i.rows.slice(0));case"sort":t?t=!1:o.modExists("sort")&&o.modules.sort.sort(this.activeRows),this.regenerateRowNumbers();case"display":this.resetDisplayRows();case"freeze":t?t=!1:this.table.modExists("frozenRows")&&o.modules.frozenRows.isFrozen()&&(o.modules.frozenRows.getDisplayIndex()||o.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),r=o.modules.frozenRows.getDisplayIndex(),!0!==(r=i.setDisplayRows(o.modules.frozenRows.getRows(this.getDisplayRows(r-1)),r))&&o.modules.frozenRows.setDisplayIndex(r));case"group":t?t=!1:o.options.groupBy&&o.modExists("groupRows")&&(o.modules.groupRows.getDisplayIndex()||o.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),r=o.modules.groupRows.getDisplayIndex(),!0!==(r=i.setDisplayRows(o.modules.groupRows.getRows(this.getDisplayRows(r-1)),r))&&o.modules.groupRows.setDisplayIndex(r));case"tree":t?t=!1:o.options.dataTree&&o.modExists("dataTree")&&(o.modules.dataTree.getDisplayIndex()||o.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),r=o.modules.dataTree.getDisplayIndex(),!0!==(r=i.setDisplayRows(o.modules.dataTree.getRows(this.getDisplayRows(r-1)),r))&&o.modules.dataTree.setDisplayIndex(r)),o.options.pagination&&o.modExists("page")&&!n&&"local"==o.modules.page.getMode()&&o.modules.page.reset();case"page":t?t=!1:o.options.pagination&&o.modExists("page")&&(o.modules.page.getDisplayIndex()||o.modules.page.setDisplayIndex(this.getNextDisplayIndex()),r=o.modules.page.getDisplayIndex(),"local"==o.modules.page.getMode()&&o.modules.page.setMaxRows(this.getDisplayRows(r-1).length),!0!==(r=i.setDisplayRows(o.modules.page.getRows(this.getDisplayRows(r-1)),r))&&o.modules.page.setDisplayIndex(r))}YE.prototype.helpers.elVisible(i.element)&&(n?i.reRenderInPosition():("all"===e&&this.table.options.virtualDomHoz&&this.table.vdomHoz.dataChange(),i.renderTable(),o.options.layoutColumnsOnNewData&&i.table.columnManager.redraw(!0))),o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(this.activeRows)}},OE.prototype.regenerateRowNumbers=function(){var e=this;this.rowNumColumn&&this.activeRows.forEach((function(t){var n=t.getCell(e.rowNumColumn);n&&n._generateContents()}))},OE.prototype.setActiveRows=function(e){this.activeRows=e,this.activeRowsCount=this.activeRows.length},OE.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},OE.prototype.getNextDisplayIndex=function(){return this.displayRows.length},OE.prototype.setDisplayRows=function(e,t){var n=!0;return t&&void 0!==this.displayRows[t]?(this.displayRows[t]=e,n=!0):(this.displayRows.push(e),n=t=this.displayRows.length-1),t==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),n},OE.prototype.getDisplayRows=function(e){return void 0===e?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[e]||[]},OE.prototype.getVisibleRows=function(e){var t=this.element.scrollTop,n=this.element.clientHeight+t,r=!1,i=0,o=0,a=this.getDisplayRows();if(e){this.getDisplayRows();for(var s=this.vDomTop;s<=this.vDomBottom;s++)if(a[s])if(r){if(!(n-a[s].getElement().offsetTop>=0))break;o=s}else if(t-a[s].getElement().offsetTop>=0)i=s;else{if(r=!0,!(n-a[s].getElement().offsetTop>=0))break;o=s}}else i=this.vDomTop,o=this.vDomBottom;return a.slice(i,o+1)},OE.prototype.displayRowIterator=function(e){this.displayRows.forEach(e),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},OE.prototype.getRows=function(e){var t;switch(e){case"active":t=this.activeRows;break;case"display":t=this.table.rowManager.getDisplayRows();break;case"visible":t=this.getVisibleRows(!0);break;case"selected":t=this.table.modules.selectRow.selectedRows;break;default:t=this.rows}return t},OE.prototype.reRenderInPosition=function(e){if("virtual"==this.getRenderMode())if(this.redrawBlock)e?e():this.redrawBlockRederInPosition=!0;else{for(var t=this.element.scrollTop,n=!1,r=!1,i=this.scrollLeft,o=this.getDisplayRows(),a=this.vDomTop;a<=this.vDomBottom;a++)if(o[a]){var s=t-o[a].getElement().offsetTop;if(!(!1===r||Math.abs(s)<r))break;r=s,n=a}e&&e(),this._virtualRenderFill(!1===n?this.displayRowsCount-1:n,!0,r||0),this.scrollHorizontal(i)}else this.renderTable(),e&&e()},OE.prototype.setRenderMode=function(){this.table.options.virtualDom?(this.renderMode="virtual",this.table.element.clientHeight||this.table.options.height?this.fixedHeight=!0:this.fixedHeight=!1):this.renderMode="classic"},OE.prototype.getRenderMode=function(){return this.renderMode},OE.prototype.renderTable=function(){switch(this.table.options.renderStarted.call(this.table),this.element.scrollTop=0,this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill()}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll()),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.displayRowsCount||this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px"),this.table.options.renderComplete.call(this.table)},OE.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},OE.prototype.checkClassicModeGroupHeaderWidth=function(){var e=this,t=this.tableElement,n=!0;e.getDisplayRows().forEach((function(r,i){e.styleRow(r,i),t.appendChild(r.getElement()),r.initialize(!0),"group"!==r.type&&(n=!1)})),t.style.minWidth=n?e.table.columnManager.getWidth()+"px":""},OE.prototype.renderEmptyScroll=function(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"},OE.prototype._clearVirtualDom=function(){var e=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);e.firstChild;)e.removeChild(e.firstChild);e.style.paddingTop="",e.style.paddingBottom="",e.style.minWidth="",e.style.minHeight="",e.style.display="",e.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},OE.prototype.styleRow=function(e,t){var n=e.getElement();t%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))},OE.prototype._virtualRenderFill=function(e,t,n){var r=this,i=r.tableElement,o=r.element,a=0,s=0,l=0,c=0,d=!0,u=r.getDisplayRows();if(n=n||0,e=e||0){for(;i.firstChild;)i.removeChild(i.firstChild);var h=(r.displayRowsCount-e+1)*r.vDomRowHeight;h<r.height&&(e-=Math.ceil((r.height-h)/r.vDomRowHeight))<0&&(e=0),e-=a=Math.min(Math.max(Math.floor(r.vDomWindowBuffer/r.vDomRowHeight),r.vDomWindowMinMarginRows),e)}else r._clearVirtualDom();if(r.displayRowsCount&&YE.prototype.helpers.elVisible(r.element)){for(r.vDomTop=e,r.vDomBottom=e-1;(s<=r.height+r.vDomWindowBuffer||c<r.vDomWindowMinTotalRows)&&r.vDomBottom<r.displayRowsCount-1;){var p,f=r.vDomBottom+1,m=u[f];r.styleRow(m,f),i.appendChild(m.getElement()),m.initialize(),m.heightInitialized||m.normalizeHeight(!0),p=m.getHeight(),c<a?l+=p:s+=p,p>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*p),"group"!==m.type&&(d=!1),r.vDomBottom++,c++}e?(r.vDomTopPad=t?r.vDomRowHeight*this.vDomTop+n:r.scrollTop-l,r.vDomBottomPad=r.vDomBottom==r.displayRowsCount-1?0:Math.max(r.vDomScrollHeight-r.vDomTopPad-s-l,0)):(this.vDomTopPad=0,r.vDomRowHeight=Math.floor((s+l)/c),r.vDomBottomPad=r.vDomRowHeight*(r.displayRowsCount-r.vDomBottom-1),r.vDomScrollHeight=l+s+r.vDomBottomPad-r.height),i.style.paddingTop=r.vDomTopPad+"px",i.style.paddingBottom=r.vDomBottomPad+"px",t&&(this.scrollTop=r.vDomTopPad+l+n-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&t&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,o.scrollTop=this.scrollTop,i.style.minWidth=d?r.table.columnManager.getWidth()+"px":"",r.table.options.groupBy&&"fitDataFill"!=r.table.modules.layout.getMode()&&r.displayRowsCount==r.table.modules.groupRows.countGroups()&&(r.tableElement.style.minWidth=r.table.columnManager.getWidth())}else this.renderEmptyScroll();this.fixedHeight||this.adjustTableSize()},OE.prototype.scrollVertical=function(e){var t=this.scrollTop-this.vDomScrollPosTop,n=this.scrollTop-this.vDomScrollPosBottom,r=2*this.vDomWindowBuffer;if(-t>r||n>r){var i=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(i)}else e?(t<0&&this._addTopRow(-t),n<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(-n):this.vDomScrollPosBottom=this.scrollTop)):(t>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(t):this.vDomScrollPosTop=this.scrollTop),n>=0&&this._addBottomRow(n))},OE.prototype._addTopRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.tableElement,r=this.getDisplayRows();if(this.vDomTop){var i=this.vDomTop-1,o=r[i],a=o.getHeight()||this.vDomRowHeight;e>=a&&(this.styleRow(o,i),n.insertBefore(o.getElement(),n.firstChild),o.initialized&&o.heightInitialized||(this.vDomTopNewRows.push(o),o.heightInitialized||o.clearCellHeight()),o.initialize(),this.vDomTopPad-=a,this.vDomTopPad<0&&(this.vDomTopPad=i*this.vDomRowHeight),i||(this.vDomTopPad=0),n.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=a,this.vDomTop--),e=-(this.scrollTop-this.vDomScrollPosTop),o.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*o.getHeight()),t<this.vDomMaxRenderChain&&this.vDomTop&&e>=(r[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(e,t+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},OE.prototype._removeTopRow=function(e){var t=this.tableElement,n=this.getDisplayRows()[this.vDomTop],r=n.getHeight()||this.vDomRowHeight;if(e>=r){var i=n.getElement();i.parentNode.removeChild(i),this.vDomTopPad+=r,t.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?r:r+this.vDomWindowBuffer,this.vDomTop++,e=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(e)}},OE.prototype._addBottomRow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.tableElement,r=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var i=this.vDomBottom+1,o=r[i],a=o.getHeight()||this.vDomRowHeight;e>=a&&(this.styleRow(o,i),n.appendChild(o.getElement()),o.initialized&&o.heightInitialized||(this.vDomBottomNewRows.push(o),o.heightInitialized||o.clearCellHeight()),o.initialize(),this.vDomBottomPad-=a,(this.vDomBottomPad<0||i==this.displayRowsCount-1)&&(this.vDomBottomPad=0),n.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=a,this.vDomBottom++),e=this.scrollTop-this.vDomScrollPosBottom,o.getHeight()>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*o.getHeight()),t<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&e>=(r[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(e,t+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},OE.prototype._removeBottomRow=function(e){var t=this.tableElement,n=this.getDisplayRows()[this.vDomBottom],r=n.getHeight()||this.vDomRowHeight;if(e>=r){var i=n.getElement();i.parentNode&&i.parentNode.removeChild(i),this.vDomBottomPad+=r,this.vDomBottomPad<0&&(this.vDomBottomPad=0),t.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=r,this.vDomBottom--,e=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(e)}},OE.prototype._quickNormalizeRowHeight=function(e){e.forEach((function(e){e.calcHeight()})),e.forEach((function(e){e.setCellHeight()})),e.length=0},OE.prototype.normalizeHeight=function(){this.activeRows.forEach((function(e){e.normalizeHeight()}))},OE.prototype.adjustTableSize=function(){var e,t=this.element.clientHeight;if("virtual"===this.renderMode){var n=Math.floor(this.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+n+"px)",this.element.style.height="calc(100% - "+n+"px)",this.element.style.maxHeight="calc(100% - "+n+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-n+"px",this.element.scrollTop=this.scrollTop),this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height,this.fixedHeight||t==this.element.clientHeight||((e=this.table.modExists("resizeTable"))&&!this.table.modules.resizeTable.autoResize||!e)&&this.redraw()}},OE.prototype.reinitialize=function(){this.rows.forEach((function(e){e.reinitialize(!0)}))},OE.prototype.blockRedraw=function(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1},OE.prototype.restoreRedraw=function(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.stage,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1},OE.prototype.redraw=function(e){var t=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,e?this.renderTable():("classic"==this.renderMode?this.table.options.groupBy?this.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(t)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},OE.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var e=document.createEvent("Event");e.initEvent("scroll",!1,!0),this.element.dispatchEvent(e)}else this.element.dispatchEvent(new Event("scroll"))};var NE=function(e){this.table=e,this.element=this.table.rowManager.tableElement,this.holderEl=this.table.rowManager.element,this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[],this.compatabilityCheck()&&this.initialize()};NE.prototype.compatabilityCheck=function(){var e=this.table.options,t=!0;return"fitDataTable"==e.layout&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),t=!1),e.responsiveLayout&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),t=!1),this.table.rtl&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),t=!1),e.columns&&e.columns.find((function(e){return e.frozen}))&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),t=!1),t||(e.virtualDomHoz=!1),t},NE.prototype.initialize=function(){var e=this;this.holderEl.addEventListener("scroll",(function(){var t=e.holderEl.scrollLeft;e.scrollLeft!=t&&(e.scrollLeft=t,e.scroll(t-(e.vDomScrollPosLeft+e.window)))}))},NE.prototype.deinitialize=function(){this.initialized=!1},NE.prototype.clear=function(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0},NE.prototype.dataChange=function(){var e,t,n=!1,r=0,i=0;if("fitData"===this.table.options.layout){if(this.table.columnManager.columnsByIndex.forEach((function(e){!e.definition.width&&e.visible&&(n=!0)})),n&&n&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window,e=this.table.options.groupBy?this.table.modules.groupRows.getGroups(!1)[0].getRows(!1)[0]:this.table.rowManager.getDisplayRows()[0])){t=e.getElement(),e.generateCells(),this.element.appendChild(t);for(i=0;i<e.cells.length;i++){var o=e.cells[i];if(t.appendChild(o.getElement()),o.column.reinitializeWidth(),(r+=o.column.getWidth())>this.vDomScrollPosRight)break}for(t.parentNode.removeChild(t),this.fitDataColAvg=Math.floor(r/(i+1));i<this.table.columnManager.columnsByIndex.length;i++)this.table.columnManager.columnsByIndex[i].setWidth(this.fitDataColAvg);this.reinitialize(!1,!0)}}else"fitColumns"===this.table.options.layout&&(this.table.modules.layout.layout(),this.table.vdomHoz.reinitialize(!1,!0))},NE.prototype.fitDataLayoutOverride=function(){for(var e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()},NE.prototype.reinitialize=function(e,t){var n=this,r={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!e||this.initialized){this.clear(),this.scrollLeft=this.holderEl.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.holderEl.clientWidth+this.window;var i=0;this.table.columnManager.columnsByIndex.forEach((function(e){var t={};if(e.visible){var r=e.getWidth();t.leftPos=i,t.rightPos=i+r,i+r>n.vDomScrollPosLeft&&i<n.vDomScrollPosRight?(-1==n.leftCol&&(n.leftCol=n.columns.length,n.vDomPadLeft=i),n.rightCol=n.columns.length):-1!==n.leftCol&&(n.vDomPadRight+=r),n.columns.push(e),e.modules.vdomHoz=t,i+=r}})),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.element.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,t||e&&!this.reinitChanged(r)||this.renitializeRows(),this.holderEl.scrollLeft=this.scrollLeft}},NE.prototype.reinitChanged=function(e){var t=this,n=!0;return e.cols.length!==this.columns.length||e.leftCol!==this.leftCol||e.rightCol!==this.rightCol||(e.cols.forEach((function(e,r){e!==t.columns[r]&&(n=!1)})),!n)},NE.prototype.renitializeRows=function(){var e=this;this.table.rowManager.getVisibleRows().forEach((function(t){e.reinitializeRow(t,!0)}))},NE.prototype.scroll=function(e){this.vDomScrollPosLeft+=e,this.vDomScrollPosRight+=e,e>.8*this.holderEl.clientWidth?this.reinitialize():e>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())},NE.prototype.colPositionAdjust=function(e,t,n){for(var r=e;r<t;r++){var i=this.columns[r];i.modules.vdomHoz.leftPos-=n,i.modules.vdomHoz.rightPos-=n}},NE.prototype.addColRight=function(){var e,t,n=this.columns[this.rightCol+1];n&&n.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach((function(e){if("group"!==e.type){var t=e.getCell(n);e.getElement().appendChild(t.getElement()),t.cellRendered()}})),this.fitDataColAvg&&(e=n.getWidth())===this.fitDataColAvg&&(n.reinitializeWidth(),(t=e-n.getWidth())&&(n.modules.vdomHoz.rightPos-=t,this.colPositionAdjust(this.rightCol+1,this.columns.length,t))),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=n.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.addColRight())},NE.prototype.addColLeft=function(){var e=this.columns[this.leftCol-1];e&&e.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach((function(t){if("group"!==t.type){var n=t.getCell(e);t.getElement().prepend(n.getElement()),n.cellRendered()}})),this.leftCol?this.vDomPadLeft-=e.getWidth():this.vDomPadLeft=0,this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())},NE.prototype.removeColRight=function(e){var t;(e=this.columns[this.rightCol])&&e.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(t=this.table.rowManager.getVisibleRows(),e.modules.vdomHoz.visible=!1,t.forEach((function(t){if("group"!==t.type){var n=t.getCell(e);t.getElement().removeChild(n.getElement())}})),this.vDomPadRight+=e.getWidth(),this.element.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())},NE.prototype.removeColLeft=function(){var e=this.columns[this.leftCol];e&&e.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach((function(t){if("group"!==t.type){var n=t.getCell(e);t.getElement().removeChild(n.getElement())}})),this.vDomPadLeft+=e.getWidth(),this.element.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())},NE.prototype.initializeRow=function(e){if("group"!==e.type){e.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(var t=this.leftCol;t<=this.rightCol;t++){var n=this.columns[t];if(n&&n.visible){var r=e.getCell(n);e.getElement().appendChild(r.getElement()),r.cellRendered()}}}},NE.prototype.reinitializeRow=function(e,t){if("group"!==e.type&&(t||!e.modules.vdomHoz||e.modules.vdomHoz.leftCol!==this.leftCol||e.modules.vdomHoz.rightCol!==this.rightCol)){for(var n=e.getElement();n.firstChild;)n.removeChild(n.firstChild);this.initializeRow(e)}};var LE=function(e){this._row=e};LE.prototype.getData=function(e){return this._row.getData(e)},LE.prototype.getElement=function(){return this._row.getElement()},LE.prototype.getCells=function(){var e=[];return this._row.getCells().forEach((function(t){e.push(t.getComponent())})),e},LE.prototype.getCell=function(e){var t=this._row.getCell(e);return!!t&&t.getComponent()},LE.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},LE.prototype.getPosition=function(e){return this._row.table.rowManager.getRowPosition(this._row,e)},LE.prototype.delete=function(){return this._row.delete()},LE.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},LE.prototype.pageTo=function(){if(this._row.table.modExists("page",!0))return this._row.table.modules.page.setPageToRow(this._row)},LE.prototype.move=function(e,t){this._row.moveToRow(e,t)},LE.prototype.update=function(e){return this._row.updateData(e)},LE.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},LE.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},LE.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},LE.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},LE.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},LE.prototype._getSelf=function(){return this._row},LE.prototype.validate=function(){return this._row.validate()},LE.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},LE.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},LE.prototype.isFrozen=function(){return!!this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.rows.indexOf(this._row)>-1},LE.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},LE.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},LE.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},LE.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},LE.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row,!0)},LE.prototype.addTreeChild=function(e,t,n){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.addTreeChildRow(this._row,e,t,n)},LE.prototype.reformat=function(){return this._row.reinitialize()},LE.prototype.getGroup=function(){return this._row.getGroup().getComponent()},LE.prototype.getTable=function(){return this._row.table},LE.prototype.getNextRow=function(){var e=this._row.nextRow();return e?e.getComponent():e},LE.prototype.getPrevRow=function(){var e=this._row.prevRow();return e?e.getComponent():e};var IE=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"row";this.table=t.table,this.parent=t,this.data={},this.type=n,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(e)};IE.prototype.create=function(){this.created||(this.created=!0,this.generateElement())},IE.prototype.createElement=function(){var e=document.createElement("div");e.classList.add("tabulator-row"),e.setAttribute("role","row"),this.element=e},IE.prototype.getElement=function(){return this.create(),this.element},IE.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},IE.prototype.generateElement=function(){var e,t,n,r=this;this.createElement(),!1!==r.table.options.selectable&&r.table.modExists("selectRow")&&r.table.modules.selectRow.initializeRow(this),!1!==r.table.options.movableRows&&r.table.modExists("moveRow")&&r.table.modules.moveRow.initializeRow(this),!1!==r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.initializeRow(this),"collapse"===r.table.options.responsiveLayout&&r.table.modExists("responsiveLayout")&&r.table.modules.responsiveLayout.initializeRow(this),(r.table.options.rowContextMenu||r.table.options.rowClickMenu)&&this.table.modExists("menu")&&r.table.modules.menu.initializeRow(this),r.table.options.rowClick&&r.element.addEventListener("click",(function(e){r.table.options.rowClick(e,r.getComponent())})),r.table.options.rowDblClick&&r.element.addEventListener("dblclick",(function(e){r.table.options.rowDblClick(e,r.getComponent())})),r.table.options.rowContext&&r.element.addEventListener("contextmenu",(function(e){r.table.options.rowContext(e,r.getComponent())})),r.table.options.rowMouseEnter&&r.element.addEventListener("mouseenter",(function(e){r.table.options.rowMouseEnter(e,r.getComponent())})),r.table.options.rowMouseLeave&&r.element.addEventListener("mouseleave",(function(e){r.table.options.rowMouseLeave(e,r.getComponent())})),r.table.options.rowMouseOver&&r.element.addEventListener("mouseover",(function(e){r.table.options.rowMouseOver(e,r.getComponent())})),r.table.options.rowMouseOut&&r.element.addEventListener("mouseout",(function(e){r.table.options.rowMouseOut(e,r.getComponent())})),r.table.options.rowMouseMove&&r.element.addEventListener("mousemove",(function(e){r.table.options.rowMouseMove(e,r.getComponent())})),r.table.options.rowTap&&(n=!1,r.element.addEventListener("touchstart",(function(e){n=!0}),{passive:!0}),r.element.addEventListener("touchend",(function(e){n&&r.table.options.rowTap(e,r.getComponent()),n=!1}))),r.table.options.rowDblTap&&(e=null,r.element.addEventListener("touchend",(function(t){e?(clearTimeout(e),e=null,r.table.options.rowDblTap(t,r.getComponent())):e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),r.table.options.rowTapHold&&(t=null,r.element.addEventListener("touchstart",(function(e){clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,n=!1,r.table.options.rowTapHold(e,r.getComponent())}),1e3)}),{passive:!0}),r.element.addEventListener("touchend",(function(e){clearTimeout(t),t=null})))},IE.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},IE.prototype.initialize=function(e){var t=this;if(this.create(),!this.initialized||e){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),this.table.options.virtualDomHoz&&this.table.vdomHoz.initialized?this.table.vdomHoz.initializeRow(this):this.cells.forEach((function(e){t.element.appendChild(e.getElement()),e.cellRendered()})),e&&this.normalizeHeight(),this.table.options.dataTree&&this.table.modExists("dataTree")&&this.table.modules.dataTree.layoutRow(this),"collapse"===this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout")&&this.table.modules.responsiveLayout.layoutRow(this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.table.options.resizableRows&&this.table.modExists("resizeRows")&&this.table.modules.resizeRows.initializeRow(this),this.initialized=!0}else this.table.options.virtualDomHoz&&this.table.vdomHoz.reinitializeRow(this)},IE.prototype.reinitializeHeight=function(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)},IE.prototype.reinitialize=function(e){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.getTreeChildren(this,!1,!0).forEach((function(e){e.reinitialize(!0)}))},IE.prototype.calcHeight=function(e){var t=0,n=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach((function(e){var n=e.getHeight();n>t&&(t=n)})),this.height=e?Math.max(t,n):this.manualHeight?this.height:Math.max(t,n),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight},IE.prototype.setCellHeight=function(){this.cells.forEach((function(e){e.setHeight()})),this.heightInitialized=!0},IE.prototype.clearCellHeight=function(){this.cells.forEach((function(e){e.clearHeight()}))},IE.prototype.normalizeHeight=function(e){e&&this.clearCellHeight(),this.calcHeight(e),this.setCellHeight()},IE.prototype.setHeight=function(e,t){(this.height!=e||t)&&(this.manualHeight=!0,this.height=e,this.heightStyled=e?e+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},IE.prototype.getHeight=function(){return this.outerHeight},IE.prototype.getWidth=function(){return this.element.offsetWidth},IE.prototype.deleteCell=function(e){var t=this.cells.indexOf(e);t>-1&&this.cells.splice(t,1)},IE.prototype.setData=function(e){this.table.modExists("mutator")&&(e=this.table.modules.mutator.transformRow(e,"data")),this.data=e,this.table.options.reactiveData&&this.table.modExists("reactiveData",!0)&&this.table.modules.reactiveData.watchRow(this)},IE.prototype.updateData=function(e){var t,n=this,r=this.element&&YE.prototype.helpers.elVisible(this.element),i={};return new Promise((function(o,a){for(var s in"string"==typeof e&&(e=JSON.parse(e)),n.table.options.reactiveData&&n.table.modExists("reactiveData",!0)&&n.table.modules.reactiveData.block(),n.table.modExists("mutator")?(i=Object.assign(i,n.data),i=Object.assign(i,e),t=n.table.modules.mutator.transformRow(i,"data",e)):t=e,t)n.data[s]=t[s];for(var s in n.table.options.reactiveData&&n.table.modExists("reactiveData",!0)&&n.table.modules.reactiveData.unblock(),e){n.table.columnManager.getColumnsByFieldRoot(s).forEach((function(e){var i=n.getCell(e.getField());if(i){var o=e.getFieldValue(t);i.getValue()!=o&&(i.setValueProcessData(o),r&&i.cellRendered())}}))}n.table.options.groupUpdateOnCellEdit&&n.table.options.groupBy&&n.table.modExists("groupRows")&&n.table.modules.groupRows.reassignRowToGroup(n.row),r?(n.normalizeHeight(!0),n.table.options.rowFormatter&&n.table.options.rowFormatter(n.getComponent())):(n.initialized=!1,n.height=0,n.heightStyled=""),!1!==n.table.options.dataTree&&n.table.modExists("dataTree")&&n.table.modules.dataTree.redrawNeeded(e)&&(n.table.modules.dataTree.initializeRow(n),r&&(n.table.modules.dataTree.layoutRow(n),n.table.rowManager.refreshActiveData("tree",!1,!0))),n.table.options.rowUpdated.call(n.table,n.getComponent()),n.table.options.dataChanged&&n.table.options.dataChanged.call(n.table,n.table.rowManager.getData()),o()}))},IE.prototype.getData=function(e){return e&&this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this,e):this.data},IE.prototype.getCell=function(e){return e=this.table.columnManager.findColumn(e),this.cells.find((function(t){return t.column===e}))},IE.prototype.getCellIndex=function(e){return this.cells.findIndex((function(t){return t===e}))},IE.prototype.findNextEditableCell=function(e){var t=!1;if(e<this.cells.length-1)for(var n=e+1;n<this.cells.length;n++){var r=this.cells[n];if(r.column.modules.edit&&YE.prototype.helpers.elVisible(r.getElement())){var i=!0;if("function"==typeof r.column.modules.edit.check&&(i=r.column.modules.edit.check(r.getComponent())),i){t=r;break}}}return t},IE.prototype.findPrevEditableCell=function(e){var t=!1;if(e>0)for(var n=e-1;n>=0;n--){var r=this.cells[n],i=!0;if(r.column.modules.edit&&YE.prototype.helpers.elVisible(r.getElement())&&("function"==typeof r.column.modules.edit.check&&(i=r.column.modules.edit.check(r.getComponent())),i)){t=r;break}}return t},IE.prototype.getCells=function(){return this.cells},IE.prototype.nextRow=function(){return this.table.rowManager.nextDisplayRow(this,!0)||!1},IE.prototype.prevRow=function(){return this.table.rowManager.prevDisplayRow(this,!0)||!1},IE.prototype.moveToRow=function(e,t){var n=this.table.rowManager.findRow(e);n?(this.table.rowManager.moveRowActual(this,n,!t),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",e)},IE.prototype.validate=function(){var e=[];return this.cells.forEach((function(t){t.validate()||e.push(t.getComponent())})),!e.length||e},IE.prototype.delete=function(){var e=this;return new Promise((function(t,n){var r,i;e.table.options.history&&e.table.modExists("history")&&(e.table.options.groupBy&&e.table.modExists("groupRows")?(r=(i=e.getGroup().rows).indexOf(e))&&(r=i[r-1]):(r=e.table.rowManager.getRowIndex(e))&&(r=e.table.rowManager.rows[r-1]),e.table.modules.history.action("rowDelete",e,{data:e.getData(),pos:!r,index:r})),e.deleteActual(),t()}))},IE.prototype.deleteActual=function(e){this.table.rowManager.getRowIndex(this);this.detatchModules(),this.table.options.reactiveData&&this.table.modExists("reactiveData",!0),this.modules.group&&this.modules.group.removeRow(this),this.table.rowManager.deleteRow(this,e),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.table.options.dataTree&&this.table.modExists("dataTree",!0)&&this.table.modules.dataTree.rowDelete(this),this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},IE.prototype.detatchModules=function(){this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.modExists("edit")&&this.table.modules.edit.currentCell.row===this&&this.table.modules.edit.cancelEdit(),this.table.modExists("frozenRows")&&this.table.modules.frozenRows.detachRow(this)},IE.prototype.deleteCells=function(){for(var e=this.cells.length,t=0;t<e;t++)this.cells[0].delete()},IE.prototype.wipe=function(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}},IE.prototype.getGroup=function(){return this.modules.group||!1},IE.prototype.getComponent=function(){return this.component||(this.component=new LE(this)),this.component};var PE=function(e){this._cell=e};PE.prototype.getValue=function(){return this._cell.getValue()},PE.prototype.getOldValue=function(){return this._cell.getOldValue()},PE.prototype.getInitialValue=function(){return this._cell.initialValue},PE.prototype.getElement=function(){return this._cell.getElement()},PE.prototype.getRow=function(){return this._cell.row.getComponent()},PE.prototype.getData=function(){return this._cell.row.getData()},PE.prototype.getField=function(){return this._cell.column.getField()},PE.prototype.getColumn=function(){return this._cell.column.getComponent()},PE.prototype.setValue=function(e,t){void 0===t&&(t=!0),this._cell.setValue(e,t)},PE.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},PE.prototype.restoreInitialValue=function(){this._cell.setValueActual(this._cell.initialValue)},PE.prototype.edit=function(e){return this._cell.edit(e)},PE.prototype.cancelEdit=function(){this._cell.cancelEdit()},PE.prototype.isEdited=function(){return!!this._cell.modules.edit&&this._cell.modules.edit.edited},PE.prototype.clearEdited=function(){self.table.modExists("edit",!0)&&this._cell.table.modules.edit.clearEdited(this._cell)},PE.prototype.isValid=function(){return!this._cell.modules.validate||!this._cell.modules.validate.invalid},PE.prototype.validate=function(){return this._cell.validate()},PE.prototype.clearValidation=function(){this._cell.table.modExists("validate",!0)&&this._cell.table.modules.validate.clearValidation(this._cell)},PE.prototype.nav=function(){return this._cell.nav()},PE.prototype.checkHeight=function(){this._cell.checkHeight()},PE.prototype.getTable=function(){return this._cell.table},PE.prototype._getSelf=function(){return this._cell};var FE=function(e,t){this.table=e.table,this.column=e,this.row=t,this.element=null,this.value=null,this.initialValue,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()};FE.prototype.build=function(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value},FE.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},FE.prototype._configureCell=function(){var e=this,t=e.column.cellEvents,n=e.element,r=this.column.getField();(n.style.textAlign=e.column.hozAlign,e.column.vertAlign&&(n.style.display="inline-flex",n.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[e.column.vertAlign]||"",e.column.hozAlign&&(n.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[e.column.hozAlign]||"")),r&&n.setAttribute("tabulator-field",r),e.column.definition.cssClass)&&e.column.definition.cssClass.split(" ").forEach((function(e){n.classList.add(e)}));"hover"===this.table.options.tooltipGenerationMode&&n.addEventListener("mouseenter",(function(t){e._generateTooltip()})),e._bindClickEvents(t),e._bindTouchEvents(t),e._bindMouseEvents(t),e.column.modules.edit&&e.table.modules.edit.bindEditor(e),e.column.definition.rowHandle&&!1!==e.table.options.movableRows&&e.table.modExists("moveRow")&&e.table.modules.moveRow.initializeCell(e),e.column.visible||e.hide()},FE.prototype._bindClickEvents=function(e){var t=this,n=t.element;(e.cellClick||t.table.options.cellClick)&&n.addEventListener("click",(function(n){var r=t.getComponent();e.cellClick&&e.cellClick.call(t.table,n,r),t.table.options.cellClick&&t.table.options.cellClick.call(t.table,n,r)})),e.cellDblClick||this.table.options.cellDblClick?n.addEventListener("dblclick",(function(n){var r=t.getComponent();e.cellDblClick&&e.cellDblClick.call(t.table,n,r),t.table.options.cellDblClick&&t.table.options.cellDblClick.call(t.table,n,r)})):n.addEventListener("dblclick",(function(e){if(!t.table.modExists("edit")||t.table.modules.edit.currentCell!==t){e.preventDefault();try{if(document.selection)(n=document.body.createTextRange()).moveToElementText(t.element),n.select();else if(window.getSelection){var n;(n=document.createRange()).selectNode(t.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(n)}}catch(e){}}})),(e.cellContext||this.table.options.cellContext)&&n.addEventListener("contextmenu",(function(n){var r=t.getComponent();e.cellContext&&e.cellContext.call(t.table,n,r),t.table.options.cellContext&&t.table.options.cellContext.call(t.table,n,r)}))},FE.prototype._bindMouseEvents=function(e){var t=this,n=t.element;(e.cellMouseEnter||t.table.options.cellMouseEnter)&&n.addEventListener("mouseenter",(function(n){var r=t.getComponent();e.cellMouseEnter&&e.cellMouseEnter.call(t.table,n,r),t.table.options.cellMouseEnter&&t.table.options.cellMouseEnter.call(t.table,n,r)})),(e.cellMouseLeave||t.table.options.cellMouseLeave)&&n.addEventListener("mouseleave",(function(n){var r=t.getComponent();e.cellMouseLeave&&e.cellMouseLeave.call(t.table,n,r),t.table.options.cellMouseLeave&&t.table.options.cellMouseLeave.call(t.table,n,r)})),(e.cellMouseOver||t.table.options.cellMouseOver)&&n.addEventListener("mouseover",(function(n){var r=t.getComponent();e.cellMouseOver&&e.cellMouseOver.call(t.table,n,r),t.table.options.cellMouseOver&&t.table.options.cellMouseOver.call(t.table,n,r)})),(e.cellMouseOut||t.table.options.cellMouseOut)&&n.addEventListener("mouseout",(function(n){var r=t.getComponent();e.cellMouseOut&&e.cellMouseOut.call(t.table,n,r),t.table.options.cellMouseOut&&t.table.options.cellMouseOut.call(t.table,n,r)})),(e.cellMouseMove||t.table.options.cellMouseMove)&&n.addEventListener("mousemove",(function(n){var r=t.getComponent();e.cellMouseMove&&e.cellMouseMove.call(t.table,n,r),t.table.options.cellMouseMove&&t.table.options.cellMouseMove.call(t.table,n,r)}))},FE.prototype._bindTouchEvents=function(e){var t,n,r,i=this,o=i.element;(e.cellTap||this.table.options.cellTap)&&(r=!1,o.addEventListener("touchstart",(function(e){r=!0}),{passive:!0}),o.addEventListener("touchend",(function(t){if(r){var n=i.getComponent();e.cellTap&&e.cellTap.call(i.table,t,n),i.table.options.cellTap&&i.table.options.cellTap.call(i.table,t,n)}r=!1}))),(e.cellDblTap||this.table.options.cellDblTap)&&(t=null,o.addEventListener("touchend",(function(n){if(t){clearTimeout(t),t=null;var r=i.getComponent();e.cellDblTap&&e.cellDblTap.call(i.table,n,r),i.table.options.cellDblTap&&i.table.options.cellDblTap.call(i.table,n,r)}else t=setTimeout((function(){clearTimeout(t),t=null}),300)}))),(e.cellTapHold||this.table.options.cellTapHold)&&(n=null,o.addEventListener("touchstart",(function(t){clearTimeout(n),n=setTimeout((function(){clearTimeout(n),n=null,r=!1;var o=i.getComponent();e.cellTapHold&&e.cellTapHold.call(i.table,t,o),i.table.options.cellTapHold&&i.table.options.cellTapHold.call(i.table,t,o)}),1e3)}),{passive:!0}),o.addEventListener("touchend",(function(e){clearTimeout(n),n=null})))},FE.prototype._generateContents=function(){var e;switch(void 0===(e=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":AE(e)){case"object":if(e instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e)}else this.element.innerHTML="",null!=e&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",e);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=e}},FE.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},FE.prototype._generateTooltip=function(){var e=this.column.tooltip;e?(!0===e?e=this.value:"function"==typeof e&&!1===(e=e(this.getComponent()))&&(e=""),void 0===e&&(e=""),this.element.setAttribute("title",e)):this.element.setAttribute("title","")},FE.prototype.getElement=function(e){return this.loaded||(this.loaded=!0,e||this.layoutElement()),this.element},FE.prototype.getValue=function(){return this.value},FE.prototype.getOldValue=function(){return this.oldValue},FE.prototype.setValue=function(e,t){var n;this.setValueProcessData(e,t)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),n=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,n),this.table.options.groupUpdateOnCellEdit&&this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.reassignRowToGroup(this.row),this.cellRendered(),this.table.options.cellEdited.call(this.table,n),this.table.options.dataChanged&&this.table.options.dataChanged.call(this.table,this.table.rowManager.getData()))},FE.prototype.setValueProcessData=function(e,t){var n=!1;return this.value!=e&&(n=!0,t&&this.column.modules.mutate&&(e=this.table.modules.mutator.transformCell(this,e))),this.setValueActual(e),n&&this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?("table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs||this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),"table"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.recalcRowGroup(this.row)):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows)),n},FE.prototype.setValueActual=function(e){this.oldValue=this.value,this.value=e,this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.block(),this.column.setFieldValue(this.row.data,e),this.table.options.reactiveData&&this.table.modExists("reactiveData")&&this.table.modules.reactiveData.unblock(),this.loaded&&this.layoutElement()},FE.prototype.layoutElement=function(){this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&"row"===this.row.type&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),(this.column.definition.contextMenu||this.column.definition.clickMenu)&&this.table.modExists("menu")&&this.table.modules.menu.initializeCell(this),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},FE.prototype.setWidth=function(){this.width=this.column.width,this.element.style.width=this.column.widthStyled},FE.prototype.clearWidth=function(){this.width="",this.element.style.width=""},FE.prototype.getWidth=function(){return this.width||this.element.offsetWidth},FE.prototype.setMinWidth=function(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled},FE.prototype.setMaxWidth=function(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled},FE.prototype.checkHeight=function(){this.row.reinitializeHeight()},FE.prototype.clearHeight=function(){this.element.style.height="",this.height=null},FE.prototype.setHeight=function(){this.height=this.row.height,this.element.style.height=this.row.heightStyled},FE.prototype.getHeight=function(){return this.height||this.element.offsetHeight},FE.prototype.show=function(){this.element.style.display=this.column.vertAlign?"inline-flex":""},FE.prototype.hide=function(){this.element.style.display="none"},FE.prototype.edit=function(e){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,e)},FE.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var e=this.table.modules.edit.getCurrentCell();e&&e._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},FE.prototype.validate=function(){return!this.column.modules.validate||!this.table.modExists("validate",!0)||!0===this.table.modules.validate.validate(this.column.modules.validate,this,this.getValue())},FE.prototype.delete=function(){!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.modules.validate&&this.modules.validate.invalid&&this.table.modules.validate.clearValidation(this),this.modules.edit&&this.modules.edit.edited&&this.table.modules.edit.clearEdited(this),this.table.options.history&&this.table.modules.history.clearComponentHistory(this),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}},FE.prototype.nav=function(){var e=this,t=!1,n=this.row.getCellIndex(this);return{next:function(){var t,n=this.right();return!!n||!(!(t=e.table.rowManager.nextDisplayRow(e.row,!0))||!(n=t.findNextEditableCell(-1)))&&(n.edit(),!0)},prev:function(){var t,n=this.left();return!!n||!(!(t=e.table.rowManager.prevDisplayRow(e.row,!0))||!(n=t.findPrevEditableCell(t.cells.length)))&&(n.edit(),!0)},left:function(){return!!(t=e.row.findPrevEditableCell(n))&&(t.edit(),!0)},right:function(){return!!(t=e.row.findNextEditableCell(n))&&(t.edit(),!0)},up:function(){var t=e.table.rowManager.prevDisplayRow(e.row,!0);t&&t.cells[n].edit()},down:function(){var t=e.table.rowManager.nextDisplayRow(e.row,!0);t&&t.cells[n].edit()}}},FE.prototype.getIndex=function(){this.row.getCellIndex(this)},FE.prototype.getComponent=function(){return this.component||(this.component=new PE(this)),this.component};var BE=function(e){this.table=e,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()};BE.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-footer"),e},BE.prototype._initialize=function(e){if(this.table.options.footerElement)switch(AE(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}},BE.prototype.getElement=function(){return this.element},BE.prototype.append=function(e,t){this.activate(t),this.element.appendChild(e),this.table.rowManager.adjustTableSize()},BE.prototype.prepend=function(e,t){this.activate(t),this.element.insertBefore(e,this.element.firstChild),this.table.rowManager.adjustTableSize()},BE.prototype.remove=function(e){e.parentNode.removeChild(e),this.deactivate()},BE.prototype.deactivate=function(e){this.element.firstChild&&!e||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},BE.prototype.activate=function(e){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),e&&this.links.push(e)},BE.prototype.redraw=function(){this.links.forEach((function(e){e.footerRedraw()}))};var YE=function e(t,n){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.modules={},this.initializeElement(t)&&(this.initializeOptions(n||{}),this._create()),e.prototype.comms.register(this)};YE.prototype.defaultOptions={height:!1,minHeight:!1,maxHeight:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnMaxWidth:!1,columnHeaderVertAlign:"top",columnVertAlign:!1,resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],cellHozAlign:"",cellVertAlign:"",headerHozAlign:"",data:[],autoColumns:!1,autoColumnsDefinitions:!1,reactiveData:!1,nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,initialHeaderFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,headerSort:!0,headerSortTristate:!1,headerSortElement:"<div class='tabulator-arrow'></div>",footerElement:!1,index:"id",textDirection:"auto",keybindings:[],tabEndNewRow:!1,invalidOptionWarnings:!0,clipboard:!1,clipboardCopyStyled:!0,clipboardCopyConfig:!1,clipboardCopyFormatter:!1,clipboardCopyRowRange:"active",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(e,t){return t},downloadComplete:!1,downloadConfig:{},downloadRowRange:"active",dataTree:!1,dataTreeFilter:!0,dataTreeSort:!0,dataTreeElementColumn:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},dataTreeChildColumnCalcs:!1,dataTreeSelectPropagate:!1,printAsHtml:!1,printFormatter:!1,printHeader:!1,printFooter:!1,printCopyStyle:!0,printStyled:!0,printVisibleRows:!0,printRowRange:"visible",printConfig:{},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(e,t){return!0},headerFilterLiveFilterDelay:300,headerFilterPlaceholder:!1,headerVisible:!0,history:!1,locale:!1,langs:{},virtualDom:!0,virtualDomBuffer:0,virtualDomHoz:!1,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,persistenceReaderFunc:!1,persistenceWriterFunc:!1,persistence:!1,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationInitialPage:1,paginationButtonCount:5,paginationSizeSelector:!1,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupUpdateOnCellEdit:!1,groupHeader:!1,groupHeaderPrint:null,groupHeaderClipboard:null,groupHeaderHtmlOutput:null,groupHeaderDownload:null,htmlOutputConfig:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsConnectedElements:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},movableRowsElementDrop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowMouseEnter:!1,rowMouseLeave:!1,rowMouseOver:!1,rowMouseOut:!1,rowMouseMove:!1,rowContextMenu:!1,rowClickMenu:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellMouseEnter:!1,cellMouseLeave:!1,cellMouseOver:!1,cellMouseOut:!1,cellMouseMove:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:!1,dataChanged:!1,ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupContextMenu:!1,groupClickMenu:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationMode:"blocking",validationFailed:function(){},historyUndo:function(){},historyRedo:function(){},scrollHorizontal:function(){},scrollVertical:function(){}},YE.prototype.initializeOptions=function(e){if(!1!==e.invalidOptionWarnings)for(var t in e)void 0===this.defaultOptions[t]&&console.warn("Invalid table constructor option:",t);for(var t in this.defaultOptions)t in e?this.options[t]=e[t]:Array.isArray(this.defaultOptions[t])?this.options[t]=Object.assign([],this.defaultOptions[t]):"object"===AE(this.defaultOptions[t])&&null!==this.defaultOptions[t]?this.options[t]=Object.assign({},this.defaultOptions[t]):this.options[t]=this.defaultOptions[t]},YE.prototype.initializeElement=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)},YE.prototype.rtlCheck=function(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}},YE.prototype._mapDepricatedFunctionality=function(){(this.options.persistentLayout||this.options.persistentSort||this.options.persistentFilter)&&(this.options.persistence||(this.options.persistence={})),this.options.dataEdited&&(console.warn("DEPRECATION WARNING - dataEdited option has been deprecated, please use the dataChanged option instead"),this.options.dataChanged=this.options.dataEdited),this.options.downloadDataFormatter&&console.warn("DEPRECATION WARNING - downloadDataFormatter option has been deprecated"),void 0!==this.options.clipboardCopyHeader&&(this.options.columnHeaders=this.options.clipboardCopyHeader,console.warn("DEPRECATION WARNING - clipboardCopyHeader option has been deprecated, please use the columnHeaders property on the clipboardCopyConfig option")),!0!==this.options.printVisibleRows&&(console.warn("printVisibleRows option is deprecated, you should now use the printRowRange option"),this.options.persistence.printRowRange="active"),!0!==this.options.printCopyStyle&&(console.warn("printCopyStyle option is deprecated, you should now use the printStyled option"),this.options.persistence.printStyled=this.options.printCopyStyle),this.options.persistentLayout&&(console.warn("persistentLayout option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.columns&&(this.options.persistence.columns=!0)),this.options.persistentSort&&(console.warn("persistentSort option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.sort&&(this.options.persistence.sort=!0)),this.options.persistentFilter&&(console.warn("persistentFilter option is deprecated, you should now use the persistence option"),!0!==this.options.persistence&&void 0===this.options.persistence.filter&&(this.options.persistence.filter=!0)),this.options.columnVertAlign&&(console.warn("columnVertAlign option is deprecated, you should now use the columnHeaderVertAlign option"),this.options.columnHeaderVertAlign=this.options.columnVertAlign)},YE.prototype._clearSelection=function(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")},YE.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),this.rtlCheck(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new RE(this),this.rowManager=new OE(this),this.footerManager=new BE(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this.options.virtualDomHoz&&(this.vdomHoz=new NE(this)),this._buildElement(),this._loadInitialData()},YE.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.reactiveData||(this.options.data=this.options.data.slice(0))},YE.prototype._buildElement=function(){var e=this,t=this.element,n=this.modules,r=this.options;for(r.tableBuilding.call(this),t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);for(var i in r.height&&(r.height=isNaN(r.height)?r.height:r.height+"px",t.style.height=r.height),!1!==r.minHeight&&(r.minHeight=isNaN(r.minHeight)?r.minHeight:r.minHeight+"px",t.style.minHeight=r.minHeight),!1!==r.maxHeight&&(r.maxHeight=isNaN(r.maxHeight)?r.maxHeight:r.maxHeight+"px",t.style.maxHeight=r.maxHeight),this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&n.layout.initialize(r.layout),n.localize.initialize(),!1!==r.headerFilterPlaceholder&&n.localize.setHeaderFilterPlaceholder(r.headerFilterPlaceholder),r.langs)n.localize.installLang(i,r.langs[i]);if(n.localize.setLocale(r.locale),"string"==typeof r.placeholder){var o=document.createElement("div");o.classList.add("tabulator-placeholder");var a=document.createElement("span");a.innerHTML=r.placeholder,o.appendChild(a),r.placeholder=o}if(t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),r.footerElement&&this.footerManager.activate(),r.persistence&&this.modExists("persistence",!0)&&n.persistence.initialize(),r.movableRows&&this.modExists("moveRow")&&n.moveRow.initialize(),r.autoColumns&&this.options.data&&this.columnManager.generateColumnsFromRowData(this.options.data),this.modExists("columnCalcs")&&n.columnCalcs.initialize(),this.columnManager.setColumns(r.columns),r.dataTree&&this.modExists("dataTree",!0)&&n.dataTree.initialize(),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(r.persistence&&this.modExists("persistence",!0)&&n.persistence.config.sort||r.initialSort)&&this.modExists("sort",!0)){var s=[];r.persistence&&this.modExists("persistence",!0)&&n.persistence.config.sort?!1===(s=n.persistence.load("sort"))&&r.initialSort&&(s=r.initialSort):r.initialSort&&(s=r.initialSort),n.sort.setSort(s)}if((r.persistence&&this.modExists("persistence",!0)&&n.persistence.config.filter||r.initialFilter)&&this.modExists("filter",!0)){var l=[];r.persistence&&this.modExists("persistence",!0)&&n.persistence.config.filter?!1===(l=n.persistence.load("filter"))&&r.initialFilter&&(l=r.initialFilter):r.initialFilter&&(l=r.initialFilter),n.filter.setFilter(l)}r.initialHeaderFilter&&this.modExists("filter",!0)&&r.initialHeaderFilter.forEach((function(t){var r=e.columnManager.findColumn(t.field);if(!r)return console.warn("Column Filter Error - No matching column found:",t.field),!1;n.filter.setHeaderFilterValue(r,t.value)})),this.modExists("ajax")&&n.ajax.initialize(),r.pagination&&this.modExists("page",!0)&&n.page.initialize(),r.groupBy&&this.modExists("groupRows",!0)&&n.groupRows.initialize(),this.modExists("keybindings")&&n.keybindings.initialize(),this.modExists("selectRow")&&n.selectRow.clearSelectionData(!0),r.autoResize&&this.modExists("resizeTable")&&n.resizeTable.initialize(),this.modExists("clipboard")&&n.clipboard.initialize(),r.printAsHtml&&this.modExists("print")&&n.print.initialize(),r.tableBuilt.call(this)},YE.prototype._loadInitialData=function(){var e=this;if(e.options.pagination&&e.modExists("page"))if(e.modules.page.reset(!0,!0),"local"==e.options.pagination){if(e.options.data.length)e.rowManager.setData(e.options.data,!1,!0);else{if((e.options.ajaxURL||e.options.ajaxURLGenerator)&&e.modExists("ajax"))return void e.modules.ajax.loadData(!1,!0).then((function(){})).catch((function(){e.options.paginationInitialPage&&e.modules.page.setPage(e.options.paginationInitialPage)}));e.rowManager.setData(e.options.data,!1,!0)}e.options.paginationInitialPage&&e.modules.page.setPage(e.options.paginationInitialPage)}else e.options.ajaxURL?e.modules.page.setPage(e.options.paginationInitialPage).then((function(){})).catch((function(){})):e.rowManager.setData([],!1,!0);else e.options.data.length?e.rowManager.setData(e.options.data):(e.options.ajaxURL||e.options.ajaxURLGenerator)&&e.modExists("ajax")?e.modules.ajax.loadData(!1,!0).then((function(){})).catch((function(){})):e.rowManager.setData(e.options.data,!1,!0)},YE.prototype.destroy=function(){var e=this.element;for(YE.prototype.comms.deregister(this),this.options.reactiveData&&this.modExists("reactiveData",!0)&&this.modules.reactiveData.unwatchData(),this.rowManager.rows.forEach((function(e){e.wipe()})),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")},YE.prototype._detectBrowser=function(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))},YE.prototype.blockRedraw=function(){return this.rowManager.blockRedraw()},YE.prototype.restoreRedraw=function(){return this.rowManager.restoreRedraw()},YE.prototype.setDataFromLocalFile=function(e){var t=this;return new Promise((function(n,r){var i=document.createElement("input");i.type="file",i.accept=e||".json,application/json",i.addEventListener("change",(function(e){var o,a=i.files[0],s=new FileReader;s.readAsText(a),s.onload=function(e){try{o=JSON.parse(s.result)}catch(e){return console.warn("File Load Error - File contents is invalid JSON",e),void r(e)}t.setData(o).then((function(e){n(e)})).catch((function(e){n(e)}))},s.onerror=function(e){console.warn("File Load Error - Unable to read file"),r()}})),i.click()}))},YE.prototype.setData=function(e,t,n){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(e,t,n,!1,!0)},YE.prototype._setData=function(e,t,n,r,i){var o=this;return"string"!=typeof e?e?o.rowManager.setData(e,r,i):o.modExists("ajax")&&(o.modules.ajax.getUrl||o.options.ajaxURLGenerator)?"remote"==o.options.pagination&&o.modExists("page",!0)?(o.modules.page.reset(!0,!0),o.modules.page.setPage(1)):o.modules.ajax.loadData(r,i):o.rowManager.setData([],r,i):0==e.indexOf("{")||0==e.indexOf("[")?o.rowManager.setData(JSON.parse(e),r,i):o.modExists("ajax",!0)?(t&&o.modules.ajax.setParams(t),n&&o.modules.ajax.setConfig(n),o.modules.ajax.setUrl(e),"remote"==o.options.pagination&&o.modExists("page",!0)?(o.modules.page.reset(!0,!0),o.modules.page.setPage(1)):o.modules.ajax.loadData(r,i)):void 0},YE.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},YE.prototype.getData=function(e){return!0===e&&(console.warn("passing a boolean to the getData function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getData(e)},YE.prototype.getDataCount=function(e){return!0===e&&(console.warn("passing a boolean to the getDataCount function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getDataCount(e)},YE.prototype.searchRows=function(e,t,n){if(this.modExists("filter",!0))return this.modules.filter.search("rows",e,t,n)},YE.prototype.searchData=function(e,t,n){if(this.modExists("filter",!0))return this.modules.filter.search("data",e,t,n)},YE.prototype.getHtml=function(e,t,n){if(this.modExists("export",!0))return this.modules.export.getHtml(e,t,n)},YE.prototype.print=function(e,t,n){if(this.modExists("print",!0))return this.modules.print.printFullscreen(e,t,n)},YE.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},YE.prototype.replaceData=function(e,t,n){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(e,t,n,!0)},YE.prototype.updateData=function(e){var t=this,n=this,r=0;return new Promise((function(i,o){t.modExists("ajax")&&t.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach((function(e){var t=n.rowManager.findRow(e[n.options.index]);t&&(r++,t.updateData(e).then((function(){--r||i()})))})):(console.warn("Update Error - No data provided"),o("Update Error - No data provided"))}))},YE.prototype.addData=function(e,t,n){var r=this;return new Promise((function(i,o){r.modExists("ajax")&&r.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?r.rowManager.addRows(e,t,n).then((function(e){var t=[];e.forEach((function(e){t.push(e.getComponent())})),i(t)})):(console.warn("Update Error - No data provided"),o("Update Error - No data provided"))}))},YE.prototype.updateOrAddData=function(e){var t=this,n=this,r=[],i=0;return new Promise((function(o,a){t.modExists("ajax")&&t.modules.ajax.blockActiveRequest(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach((function(e){var t=n.rowManager.findRow(e[n.options.index]);i++,t?t.updateData(e).then((function(){i--,r.push(t.getComponent()),i||o(r)})):n.rowManager.addRows(e).then((function(e){i--,r.push(e[0].getComponent()),i||o(r)}))})):(console.warn("Update Error - No data provided"),a("Update Error - No data provided"))}))},YE.prototype.getRow=function(e){var t=this.rowManager.findRow(e);return t?t.getComponent():(console.warn("Find Error - No matching row found:",e),!1)},YE.prototype.getRowFromPosition=function(e,t){var n=this.rowManager.getRowFromPosition(e,t);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)},YE.prototype.deleteRow=function(e){var t=this;return new Promise((function(n,r){var i=t,o=0,a=0,s=[];function l(){++o==e.length&&a&&(i.rowManager.reRenderInPosition(),n())}Array.isArray(e)||(e=[e]),e.forEach((function(e){var n=t.rowManager.findRow(e,!0);n?s.push(n):(console.warn("Delete Error - No matching row found:",e),r("Delete Error - No matching row found"),l())})),s.sort((function(e,n){return t.rowManager.rows.indexOf(e)>t.rowManager.rows.indexOf(n)?1:-1})),s.forEach((function(e){e.delete().then((function(){a++,l()})).catch((function(e){l(),r(e)}))}))}))},YE.prototype.addRow=function(e,t,n){var r=this;return new Promise((function(i,o){"string"==typeof e&&(e=JSON.parse(e)),r.rowManager.addRows(e,t,n).then((function(e){r.modExists("columnCalcs")&&r.modules.columnCalcs.recalc(r.rowManager.activeRows),i(e[0].getComponent())}))}))},YE.prototype.updateOrAddRow=function(e,t){var n=this;return new Promise((function(r,i){var o=n.rowManager.findRow(e);"string"==typeof t&&(t=JSON.parse(t)),o?o.updateData(t).then((function(){n.modExists("columnCalcs")&&n.modules.columnCalcs.recalc(n.rowManager.activeRows),r(o.getComponent())})).catch((function(e){i(e)})):o=n.rowManager.addRows(t).then((function(e){n.modExists("columnCalcs")&&n.modules.columnCalcs.recalc(n.rowManager.activeRows),r(e[0].getComponent())})).catch((function(e){i(e)}))}))},YE.prototype.updateRow=function(e,t){var n=this;return new Promise((function(r,i){var o=n.rowManager.findRow(e);"string"==typeof t&&(t=JSON.parse(t)),o?o.updateData(t).then((function(){r(o.getComponent())})).catch((function(e){i(e)})):(console.warn("Update Error - No matching row found:",e),i("Update Error - No matching row found"))}))},YE.prototype.scrollToRow=function(e,t,n){var r=this;return new Promise((function(i,o){var a=r.rowManager.findRow(e);a?r.rowManager.scrollToRow(a,t,n).then((function(){i()})).catch((function(e){o(e)})):(console.warn("Scroll Error - No matching row found:",e),o("Scroll Error - No matching row found"))}))},YE.prototype.moveRow=function(e,t,n){var r=this.rowManager.findRow(e);r?r.moveToRow(t,n):console.warn("Move Error - No matching row found:",e)},YE.prototype.getRows=function(e){return!0===e&&(console.warn("passing a boolean to the getRows function is deprecated, you should now pass the string 'active'"),e="active"),this.rowManager.getComponents(e)},YE.prototype.getRowPosition=function(e,t){var n=this.rowManager.findRow(e);return n?this.rowManager.getRowPosition(n,t):(console.warn("Position Error - No matching row found:",e),!1)},YE.prototype.copyToClipboard=function(e){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(e)},YE.prototype.setColumns=function(e){this.columnManager.setColumns(e)},YE.prototype.getColumns=function(e){return this.columnManager.getComponents(e)},YE.prototype.getColumn=function(e){var t=this.columnManager.findColumn(e);return t?t.getComponent():(console.warn("Find Error - No matching column found:",e),!1)},YE.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},YE.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},YE.prototype.setColumnLayout=function(e){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,e)),!0)},YE.prototype.showColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Show Error - No matching column found:",e),!1;t.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},YE.prototype.hideColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Hide Error - No matching column found:",e),!1;t.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},YE.prototype.toggleColumn=function(e){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;t.visible?t.hide():t.show()},YE.prototype.addColumn=function(e,t,n){var r=this;return new Promise((function(i,o){var a=r.columnManager.findColumn(n);r.columnManager.addColumn(e,t,a).then((function(e){i(e.getComponent())})).catch((function(e){o(e)}))}))},YE.prototype.deleteColumn=function(e){var t=this;return new Promise((function(n,r){var i=t.columnManager.findColumn(e);i?i.delete().then((function(){n()})).catch((function(e){r(e)})):(console.warn("Column Delete Error - No matching column found:",e),r())}))},YE.prototype.updateColumnDefinition=function(e,t){var n=this;return new Promise((function(r,i){var o=n.columnManager.findColumn(e);o?o.updateDefinition(t).then((function(e){r(e)})).catch((function(e){i(e)})):(console.warn("Column Update Error - No matching column found:",e),i())}))},YE.prototype.moveColumn=function(e,t,n){var r=this.columnManager.findColumn(e),i=this.columnManager.findColumn(t);r?i?this.columnManager.moveColumn(r,i,n):console.warn("Move Error - No matching column found:",i):console.warn("Move Error - No matching column found:",e)},YE.prototype.scrollToColumn=function(e,t,n){var r=this;return new Promise((function(i,o){var a=r.columnManager.findColumn(e);a?r.columnManager.scrollToColumn(a,t,n).then((function(){i()})).catch((function(e){o(e)})):(console.warn("Scroll Error - No matching column found:",e),o("Scroll Error - No matching column found"))}))},YE.prototype.setLocale=function(e){this.modules.localize.setLocale(e)},YE.prototype.getLocale=function(){return this.modules.localize.getLocale()},YE.prototype.getLang=function(e){return this.modules.localize.getLang(e)},YE.prototype.redraw=function(e){this.columnManager.redraw(e),this.rowManager.redraw(e)},YE.prototype.setHeight=function(e){"classic"!==this.rowManager.renderMode?(this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.setRenderMode(),this.rowManager.redraw()):console.warn("setHeight function is not available in classic render mode")},YE.prototype.setSort=function(e,t){this.modExists("sort",!0)&&(this.modules.sort.setSort(e,t),this.rowManager.sorterRefresh())},YE.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},YE.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},YE.prototype.setFilter=function(e,t,n,r){this.modExists("filter",!0)&&(this.modules.filter.setFilter(e,t,n,r),this.rowManager.filterRefresh())},YE.prototype.refreshFilter=function(){this.modExists("filter",!0)&&this.rowManager.filterRefresh()},YE.prototype.addFilter=function(e,t,n,r){this.modExists("filter",!0)&&(this.modules.filter.addFilter(e,t,n,r),this.rowManager.filterRefresh())},YE.prototype.getFilters=function(e){if(this.modExists("filter",!0))return this.modules.filter.getFilters(e)},YE.prototype.setHeaderFilterFocus=function(e){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(e);if(!t)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.modules.filter.setHeaderFilterFocus(t)}},YE.prototype.getHeaderFilterValue=function(e){if(this.modExists("filter",!0)){var t=this.columnManager.findColumn(e);if(t)return this.modules.filter.getHeaderFilterValue(t);console.warn("Column Filter Error - No matching column found:",e)}},YE.prototype.setHeaderFilterValue=function(e,t){if(this.modExists("filter",!0)){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Filter Error - No matching column found:",e),!1;this.modules.filter.setHeaderFilterValue(n,t)}},YE.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},YE.prototype.removeFilter=function(e,t,n){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(e,t,n),this.rowManager.filterRefresh())},YE.prototype.clearFilter=function(e){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(e),this.rowManager.filterRefresh())},YE.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},YE.prototype.selectRow=function(e){this.modExists("selectRow",!0)&&(!0===e&&(console.warn("passing a boolean to the selectRowselectRow function is deprecated, you should now pass the string 'active'"),e="active"),this.modules.selectRow.selectRows(e))},YE.prototype.deselectRow=function(e){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(e)},YE.prototype.toggleSelectRow=function(e){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(e)},YE.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},YE.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},YE.prototype.getInvalidCells=function(){if(this.modExists("validate",!0))return this.modules.validate.getInvalidCells()},YE.prototype.clearCellValidation=function(e){var t=this;this.modExists("validate",!0)&&(e||(e=this.modules.validate.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach((function(e){t.modules.validate.clearValidation(e._getSelf())})))},YE.prototype.validate=function(e){var t=[];return this.rowManager.rows.forEach((function(e){var n=e.validate();!0!==n&&(t=t.concat(n))})),!t.length||t},YE.prototype.setMaxPage=function(e){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(e)},YE.prototype.setPage=function(e){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(e):new Promise((function(e,t){t()}))},YE.prototype.setPageToRow=function(e){var t=this;return new Promise((function(n,r){t.options.pagination&&t.modExists("page")&&(e=t.rowManager.findRow(e))?t.modules.page.setPageToRow(e).then((function(){n()})).catch((function(){r()})):r()}))},YE.prototype.setPageSize=function(e){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(e),this.modules.page.setPage(1).then((function(){})).catch((function(){}))},YE.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},YE.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},YE.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},YE.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},YE.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},YE.prototype.setGroupBy=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=e,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},YE.prototype.setGroupValues=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupValues=e,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")},YE.prototype.setGroupStartOpen=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=e,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},YE.prototype.setGroupHeader=function(e){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=e,this.modules.groupRows.initialize(),this.options.groupBy?(this.rowManager.refreshActiveData("group"),this.options.persistence&&this.modExists("persistence",!0)&&this.modules.persistence.config.group&&this.modules.persistence.save("group")):console.warn("Grouping Update - cant refresh view, no groups have been set")},YE.prototype.getGroups=function(e){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},YE.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},YE.prototype.getEditedCells=function(){if(this.modExists("edit",!0))return this.modules.edit.getEditedCells()},YE.prototype.clearCellEdited=function(e){var t=this;this.modExists("edit",!0)&&(e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach((function(e){t.modules.edit.clearEdited(e._getSelf())})))},YE.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},YE.prototype.recalc=function(){this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.recalcAll(this.rowManager.activeRows)},YE.prototype.navigatePrev=function(){var e=!1;return!(!this.modExists("edit",!0)||!(e=this.modules.edit.currentCell))&&e.nav().prev()},YE.prototype.navigateNext=function(){var e=!1;return!(!this.modExists("edit",!0)||!(e=this.modules.edit.currentCell))&&e.nav().next()},YE.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},YE.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},YE.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},YE.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().down())},YE.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},YE.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},YE.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},YE.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},YE.prototype.clearHistory=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.clear()},YE.prototype.download=function(e,t,n,r){this.modExists("download",!0)&&this.modules.download.download(e,t,n,r)},YE.prototype.downloadToTab=function(e,t,n,r){this.modExists("download",!0)&&this.modules.download.download(e,t,n,r,!0)},YE.prototype.tableComms=function(e,t,n,r){this.modules.comms.receive(e,t,n,r)},YE.prototype.moduleBindings={},YE.prototype.extendModule=function(e,t,n){if(YE.prototype.moduleBindings[e]){var r=YE.prototype.moduleBindings[e].prototype[t];if(r)if("object"==(void 0===n?"undefined":AE(n)))for(var i in n)r[i]=n[i];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",t)}else console.warn("Module Error - module does not exist:",e)},YE.prototype.registerModule=function(e,t){YE.prototype.moduleBindings[e]=t},YE.prototype.bindModules=function(){for(var e in this.modules={},YE.prototype.moduleBindings)this.modules[e]=new YE.prototype.moduleBindings[e](this)},YE.prototype.modExists=function(e,t){return!!this.modules[e]||(t&&console.error("Tabulator Module Not Installed: "+e),!1)},YE.prototype.helpers={elVisible:function(e){return!(e.offsetWidth<=0&&e.offsetHeight<=0)},elOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(e){var t=Object.assign(Array.isArray(e)?[]:{},e);for(var n in e)null!=e[n]&&"object"===AE(e[n])&&(e[n]instanceof Date?t[n]=new Date(e[n]):t[n]=this.deepClone(e[n]));return t}},YE.prototype.comms={tables:[],register:function(e){YE.prototype.comms.tables.push(e)},deregister:function(e){var t=YE.prototype.comms.tables.indexOf(e);t>-1&&YE.prototype.comms.tables.splice(t,1)},lookupTable:function(e,t){var n,r,i=[];if("string"==typeof e){if((n=document.querySelectorAll(e)).length)for(var o=0;o<n.length;o++)(r=YE.prototype.comms.matchElement(n[o]))&&i.push(r)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof YE?(r=YE.prototype.comms.matchElement(e))&&i.push(r):Array.isArray(e)?e.forEach((function(e){i=i.concat(YE.prototype.comms.lookupTable(e))})):t||console.warn("Table Connection Error - Invalid Selector",e);return i},matchElement:function(e){return YE.prototype.comms.tables.find((function(t){return e instanceof YE?t===e:t.element===e}))}},YE.prototype.findTable=function(e){var t=YE.prototype.comms.lookupTable(e,!0);return!(Array.isArray(t)&&!t.length)&&t};var HE=function(e){this.table=e,this.mode=null};HE.prototype.initialize=function(e){this.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},HE.prototype.getMode=function(){return this.mode},HE.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),0===this.mode.indexOf("fitData")&&this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.columns&&this.table.modules.persistence.save("columns")},HE.prototype.modes={fitData:function(e){this.table.options.virtualDomHoz?this.table.vdomHoz.fitDataLayoutOverride():e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(e){e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataTable:function(e){e.forEach((function(e){e.reinitializeWidth()})),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataStretch:function(e){var t=this,n=0,r=this.table.rowManager.element.clientWidth,i=0,o=!1;e.forEach((function(e,r){e.widthFixed||e.reinitializeWidth(),(t.table.options.responsiveLayout?e.modules.responsive.visible:e.visible)&&(o=e),e.visible&&(n+=e.getWidth())})),o?(i=r-n+o.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(o.setWidth(0),this.table.modules.responsiveLayout.update()),i>0?o.setWidth(i):o.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(e){var t,n,r=this.table.element.clientWidth,i=0,o=0,a=0,s=[],l=[],c=0,d=0;function u(e){return"string"==typeof e?e.indexOf("%")>-1?r/100*parseInt(e):parseInt(e):e}function h(e,t,n,r){var i=[],o=0,s=0,l=0,c=a,d=0,p=0,f=[];function m(e){return n*(e.column.definition.widthGrow||1)}function _(e){return u(e.width)-n*(e.column.definition.widthShrink||0)}return e.forEach((function(e,o){var a=r?_(e):m(e);e.column.minWidth>=a?i.push(e):e.column.maxWidth&&e.column.maxWidth<a?(e.width=e.column.maxWidth,t-=e.column.maxWidth,(c-=r?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)&&(n=Math.floor(t/c))):(f.push(e),p+=r?e.column.definition.widthShrink||1:e.column.definition.widthGrow||1)})),i.length?(i.forEach((function(e){o+=r?e.width-e.column.minWidth:e.column.minWidth,e.width=e.column.minWidth})),d=(s=t-o)-(l=p?Math.floor(s/p):s)*p,d+=h(f,s,l,r)):(d=p?t-Math.floor(t/p)*p:t,f.forEach((function(e){e.width=r?_(e):m(e)}))),d}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(r-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),e.forEach((function(e){var t,n,r;e.visible&&(t=e.definition.width,n=parseInt(e.minWidth),t?(r=u(t),i+=r>n?r:n,e.definition.widthShrink&&(l.push({column:e,width:r>n?r:n}),c+=e.definition.widthShrink)):(s.push({column:e,width:0}),a+=e.definition.widthGrow||1))})),o=r-i,t=Math.floor(o/a);d=h(s,o,t,!1);s.length&&d>0&&(s[s.length-1].width+=+d),s.forEach((function(e){o-=e.width})),(n=Math.abs(d)+o)>0&&c&&(d=h(l,n,Math.floor(n/c),!0)),l.length&&(l[l.length-1].width-=d),s.forEach((function(e){e.column.setWidth(e.width)})),l.forEach((function(e){e.column.setWidth(e.width)}))}},YE.prototype.registerModule("layout",HE);var UE=function(e){this.table=e,this.locale="default",this.lang=!1,this.bindings={},this.langList={}};UE.prototype.initialize=function(){this.langList=YE.prototype.helpers.deepClone(this.langs)},UE.prototype.setHeaderFilterPlaceholder=function(e){this.langList.default.headerFilters.default=e},UE.prototype.setHeaderFilterColumnPlaceholder=function(e,t){this.langList.default.headerFilters.columns[e]=t,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=t)},UE.prototype.installLang=function(e,t){this.langList[e]?this._setLangProp(this.langList[e],t):this.langList[e]=t},UE.prototype._setLangProp=function(e,t){for(var n in t)e[n]&&"object"==AE(e[n])?this._setLangProp(e[n],t[n]):e[n]=t[n]},UE.prototype.setLocale=function(e){var t=this;if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!t.langList[e]){var n=e.split("-")[0];t.langList[n]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,n),e=n):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}t.locale=e,t.lang=YE.prototype.helpers.deepClone(t.langList.default||{}),"default"!=e&&function e(t,n){for(var r in t)"object"==AE(t[r])?(n[r]||(n[r]={}),e(t[r],n[r])):n[r]=t[r]}(t.langList[e],t.lang),t.table.options.localized.call(t.table,t.locale,t.lang),t._executeBindings()},UE.prototype.getLocale=function(e){return self.locale},UE.prototype.getLang=function(e){return e?this.langList[e]:this.lang},UE.prototype.getText=function(e,t){var n=(e=t?e+"|"+t:e).split("|");return this._getLangElement(n,this.locale)||""},UE.prototype._getLangElement=function(e,t){var n=this.lang;return e.forEach((function(e){var t;n&&(t=n[e],n=void 0!==t&&t)})),n},UE.prototype.bind=function(e,t){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(t),t(this.getText(e),this.lang)},UE.prototype._executeBindings=function(){var e=this,t=function(t){e.bindings[t].forEach((function(n){n(e.getText(t),e.lang)}))};for(var n in e.bindings)t(n)},UE.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},YE.prototype.registerModule("localize",UE);var zE=function(e){this.table=e};zE.prototype.getConnections=function(e){var t=this,n=[];return YE.prototype.comms.lookupTable(e).forEach((function(e){t.table!==e&&n.push(e)})),n},zE.prototype.send=function(e,t,n,r){var i=this,o=this.getConnections(e);o.forEach((function(e){e.tableComms(i.table.element,t,n,r)})),!o.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)},zE.prototype.receive=function(e,t,n,r){if(this.table.modExists(t))return this.table.modules[t].commsReceived(e,n,r);console.warn("Inter-table Comms Error - no such module:",t)},YE.prototype.registerModule("comms",zE);var jE=function(e){this.table=e,this.allowedTypes=["","data","download","clipboard","print","htmlOutput"]};jE.prototype.initializeColumn=function(e){var t=this,n=!1,r={};this.allowedTypes.forEach((function(i){var o,a="accessor"+(i.charAt(0).toUpperCase()+i.slice(1));e.definition[a]&&(o=t.lookupAccessor(e.definition[a]))&&(n=!0,r[a]={accessor:o,params:e.definition[a+"Params"]||{}})})),n&&(e.modules.accessor=r)},jE.prototype.lookupAccessor=function(e){var t=!1;switch(void 0===e?"undefined":AE(e)){case"string":this.accessors[e]?t=this.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":t=e}return t},jE.prototype.transformRow=function(e,t){var n="accessor"+(t.charAt(0).toUpperCase()+t.slice(1)),r=e.getComponent(),i=YE.prototype.helpers.deepClone(e.data||{});return this.table.columnManager.traverse((function(e){var o,a,s,l;e.modules.accessor&&(a=e.modules.accessor[n]||e.modules.accessor.accessor||!1)&&"undefined"!=(o=e.getFieldValue(i))&&(l=e.getComponent(),s="function"==typeof a.params?a.params(o,i,t,l,r):a.params,e.setFieldValue(i,a.accessor(o,i,t,s,l,r)))})),i},jE.prototype.accessors={},YE.prototype.registerModule("accessor",jE);var VE=function(e){this.table=e,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0};VE.prototype.initialize=function(){var e;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((e=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=e.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&("string"==typeof this.table.options.ajaxLoaderError?((e=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderError.trim(),this.errorElement=e.content.firstChild):this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},VE.prototype.createLoaderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-loader"),e},VE.prototype.createMsgElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-loader-msg"),e.setAttribute("role","alert"),e},VE.prototype.setParams=function(e,t){if(t)for(var n in this.params=this.params||{},e)this.params[n]=e[n];else this.params=e},VE.prototype.getParams=function(){return this.params||{}},VE.prototype.setConfig=function(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(var t in e)this.config[t]=e[t]},VE.prototype._loadDefaultConfig=function(e){var t=this;if(!t.config||e)for(var n in t.config={},t.defaultConfig)t.config[n]=t.defaultConfig[n]},VE.prototype.setUrl=function(e){this.url=e},VE.prototype.getUrl=function(){return this.url},VE.prototype.loadData=function(e,t){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(e,t)},VE.prototype.nextPage=function(e){this.loading||e<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then((function(){})).catch((function(){}))},VE.prototype.blockActiveRequest=function(){this.requestOrder++},VE.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},VE.prototype._loadDataStandard=function(e,t){var n=this;return new Promise((function(r,i){n.sendRequest(e).then((function(o){n.table.rowManager.setData(o,e,t).then((function(){r()})).catch((function(e){i(e)}))})).catch((function(e){i(e)}))}))},VE.prototype.generateParamsList=function(e,t){var n=this,r=[];if(t=t||"",Array.isArray(e))e.forEach((function(e,i){r=r.concat(n.generateParamsList(e,t?t+"["+i+"]":i))}));else if("object"===(void 0===e?"undefined":AE(e)))for(var i in e)r=r.concat(n.generateParamsList(e[i],t?t+"["+i+"]":i));else r.push({key:t,value:e});return r},VE.prototype.serializeParams=function(e){var t=this.generateParamsList(e),n=[];return t.forEach((function(e){n.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value))})),n.join("&")},VE.prototype.sendRequest=function(e){var t,n=this,r=this,i=r.url;return r.requestOrder++,t=r.requestOrder,r._loadDefaultConfig(),new Promise((function(o,a){!1!==r.table.options.ajaxRequesting.call(n.table,r.url,r.params)?(r.loading=!0,e||r.showLoader(),n.loaderPromise(i,r.config,r.params).then((function(e){t===r.requestOrder?(r.table.options.ajaxResponse&&(e=r.table.options.ajaxResponse.call(r.table,r.url,r.params,e)),o(e),r.hideLoader(),r.loading=!1):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made")})).catch((function(e){console.error("Ajax Load Error: ",e),r.table.options.ajaxError.call(r.table,e),r.showError(),setTimeout((function(){r.hideLoader()}),3e3),r.loading=!1,a(e)}))):a()}))},VE.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},VE.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},VE.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},VE.prototype.defaultConfig={method:"GET"},VE.prototype.defaultURLGenerator=function(e,t,n){return e&&n&&Object.keys(n).length&&(t.method&&"get"!=t.method.toLowerCase()||(t.method="get",e+=(e.includes("?")?"&":"?")+this.modules.ajax.serializeParams(n))),e},VE.prototype.defaultLoaderPromise=function(e,t,n){var r,i=this;return new Promise((function(o,a){if(e=i.urlGenerator.call(i.table,e,t,n),"GET"!=t.method.toUpperCase())if(r="object"===AE(i.table.options.ajaxContentType)?i.table.options.ajaxContentType:i.contentTypeFormatters[i.table.options.ajaxContentType]){for(var s in r.headers)t.headers||(t.headers={}),void 0===t.headers[s]&&(t.headers[s]=r.headers[s]);t.body=r.body.call(i,e,t,n)}else console.warn("Ajax Error - Invalid ajaxContentType value:",i.table.options.ajaxContentType);e?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers["Access-Control-Allow-Origin"]&&(t.headers["Access-Control-Allow-Origin"]=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(e,t).then((function(e){e.ok?e.json().then((function(e){o(e)})).catch((function(e){a(e),console.warn("Ajax Load Error - Invalid JSON returned",e)})):(console.error("Ajax Load Error - Connection Error: "+e.status,e.statusText),a(e))})).catch((function(e){console.error("Ajax Load Error - Connection Error: ",e),a(e)}))):(console.warn("Ajax Load Error - No URL Set"),o([]))}))},VE.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(e,t,n){return JSON.stringify(n)}},form:{headers:{},body:function(e,t,n){var r=this.generateParamsList(n),i=new FormData;return r.forEach((function(e){i.append(e.key,e.value)})),i}}},YE.prototype.registerModule("ajax",VE);var GE=function(e){this._row=e};GE.prototype.getData=function(e){return this._row.getData(e)},GE.prototype.getElement=function(){return this._row.getElement()},GE.prototype.getTable=function(){return this._row.table},GE.prototype.getCells=function(){var e=[];return this._row.getCells().forEach((function(t){e.push(t.getComponent())})),e},GE.prototype.getCell=function(e){var t=this._row.getCell(e);return!!t&&t.getComponent()},GE.prototype._getSelf=function(){return this._row};var WE=function(e){this.table=e,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()};WE.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e},WE.prototype.initialize=function(){this.genColumn=new DE({field:"value"},this)},WE.prototype.registerColumnField=function(){},WE.prototype.initializeColumn=function(e){var t=e.definition,n={topCalcParams:t.topCalcParams||{},botCalcParams:t.bottomCalcParams||{}};if(t.topCalc){switch(AE(t.topCalc)){case"string":this.calculations[t.topCalc]?n.topCalc=this.calculations[t.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.topCalc);break;case"function":n.topCalc=t.topCalc}n.topCalc&&(e.modules.columnCalcs=n,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(t.bottomCalc){switch(AE(t.bottomCalc)){case"string":this.calculations[t.bottomCalc]?n.botCalc=this.calculations[t.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",t.bottomCalc);break;case"function":n.botCalc=t.bottomCalc}n.botCalc&&(e.modules.columnCalcs=n,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},WE.prototype.removeCalcs=function(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()},WE.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},WE.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},WE.prototype.scrollHorizontal=function(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")},WE.prototype.recalc=function(e){var t;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),t=this.generateRow("top",this.rowsToData(e)),this.topRow=t;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(t.getElement()),t.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),t=this.generateRow("bottom",this.rowsToData(e)),this.botRow=t;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(t.getElement()),t.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},WE.prototype.recalcRowGroup=function(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))},WE.prototype.recalcAll=function(){var e=this;(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalc(this.table.rowManager.activeRows),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs&&table.modules.groupRows.getChildGroups().forEach((function(t){e.recalcGroup(t)})))},WE.prototype.recalcGroup=function(e){var t,n;e&&e.calcs&&(e.calcs.bottom&&(t=this.rowsToData(e.rows),n=this.generateRowData("bottom",t),e.calcs.bottom.updateData(n),e.calcs.bottom.reinitialize()),e.calcs.top&&(t=this.rowsToData(e.rows),n=this.generateRowData("top",t),e.calcs.top.updateData(n),e.calcs.top.reinitialize()))},WE.prototype.generateTopRow=function(e){return this.generateRow("top",this.rowsToData(e))},WE.prototype.generateBottomRow=function(e){return this.generateRow("bottom",this.rowsToData(e))},WE.prototype.rowsToData=function(e){var t=this,n=[];return e.forEach((function(e){if(n.push(e.getData()),t.table.options.dataTree&&t.table.options.dataTreeChildColumnCalcs&&e.modules.dataTree.open){var r=t.rowsToData(t.table.modules.dataTree.getFilteredTreeChildren(e));n=n.concat(r)}})),n},WE.prototype.generateRow=function(e,t){var n,r=this,i=this.generateRowData(e,t);return r.table.modExists("mutator")&&r.table.modules.mutator.disable(),n=new IE(i,this,"calc"),r.table.modExists("mutator")&&r.table.modules.mutator.enable(),n.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),n.component=!1,n.getComponent=function(){return this.component||(this.component=new GE(this)),this.component},n.generateCells=function(){var t=[];r.table.columnManager.columnsByIndex.forEach((function(i){r.genColumn.setField(i.getField()),r.genColumn.hozAlign=i.hozAlign,i.definition[e+"CalcFormatter"]&&r.table.modExists("format")?r.genColumn.modules.format={formatter:r.table.modules.format.getFormatter(i.definition[e+"CalcFormatter"]),params:i.definition[e+"CalcFormatterParams"]||{}}:r.genColumn.modules.format={formatter:r.table.modules.format.getFormatter("plaintext"),params:{}},r.genColumn.definition.cssClass=i.definition.cssClass;var o=new FE(r.genColumn,n);o.getElement(),o.column=i,o.setWidth(),i.cells.push(o),t.push(o),i.visible||o.hide()})),this.cells=t},n},WE.prototype.generateRowData=function(e,t){var n,r,i={},o="top"==e?this.topCalcs:this.botCalcs,a="top"==e?"topCalc":"botCalc";return o.forEach((function(e){var o=[];e.modules.columnCalcs&&e.modules.columnCalcs[a]&&(t.forEach((function(t){o.push(e.getFieldValue(t))})),r=a+"Params",n="function"==typeof e.modules.columnCalcs[r]?e.modules.columnCalcs[r](o,t):e.modules.columnCalcs[r],e.setFieldValue(i,e.modules.columnCalcs[a](o,t,n)))})),i},WE.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},WE.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},WE.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},WE.prototype.getResults=function(){var e=this,t={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach((function(n){t[n.getKey()]=e.getGroupResults(n)})):t={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},t},WE.prototype.getGroupResults=function(e){var t=this,n=e._getSelf(),r=e.getSubGroups(),i={};return r.forEach((function(e){i[e.getKey()]=t.getGroupResults(e)})),{top:n.calcs.top?n.calcs.top.getData():{},bottom:n.calcs.bottom?n.calcs.bottom.getData():{},groups:i}},WE.prototype.calculations={avg:function(e,t,n){var r=0,i=void 0!==n.precision?n.precision:2;return e.length&&(r=e.reduce((function(e,t){return Number(e)+Number(t)})),r/=e.length,r=!1!==i?r.toFixed(i):r),parseFloat(r).toString()},max:function(e,t,n){var r=null,i=void 0!==n.precision&&n.precision;return e.forEach((function(e){((e=Number(e))>r||null===r)&&(r=e)})),null!==r?!1!==i?r.toFixed(i):r:""},min:function(e,t,n){var r=null,i=void 0!==n.precision&&n.precision;return e.forEach((function(e){((e=Number(e))<r||null===r)&&(r=e)})),null!==r?!1!==i?r.toFixed(i):r:""},sum:function(e,t,n){var r=0,i=void 0!==n.precision&&n.precision;return e.length&&e.forEach((function(e){e=Number(e),r+=isNaN(e)?0:Number(e)})),!1!==i?r.toFixed(i):r},concat:function(e,t,n){var r=0;return e.length&&(r=e.reduce((function(e,t){return String(e)+String(t)}))),r},count:function(e,t,n){var r=0;return e.length&&e.forEach((function(e){e&&r++})),r}},YE.prototype.registerModule("columnCalcs",WE);var qE=function(e){this.table=e,this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0};qE.prototype.initialize=function(){var e=this;this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",(function(t){var n,r;if(!e.blocked){if(t.preventDefault(),e.customSelection)n=e.customSelection,e.table.options.clipboardCopyFormatter&&(n=e.table.options.clipboardCopyFormatter("plain",n));else{var i=e.table.modules.export.generateExportList(e.table.options.clipboardCopyConfig,e.table.options.clipboardCopyStyled,e.rowRange,"clipboard");n=(r=e.table.modules.export.genereateHTMLTable(i))?e.generatePlainContent(i):"",e.table.options.clipboardCopyFormatter&&(n=e.table.options.clipboardCopyFormatter("plain",n),r=e.table.options.clipboardCopyFormatter("html",r))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",n):t.clipboardData&&t.clipboardData.setData?(t.clipboardData.setData("text/plain",n),r&&t.clipboardData.setData("text/html",r)):t.originalEvent&&t.originalEvent.clipboardData.setData&&(t.originalEvent.clipboardData.setData("text/plain",n),r&&t.originalEvent.clipboardData.setData("text/html",r)),e.table.options.clipboardCopied.call(e.table,n,r),e.reset()}})),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",(function(t){e.paste(t)})),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},qE.prototype.reset=function(){this.blocked=!0,this.customSelection=!1},qE.prototype.generatePlainContent=function(e){var t=[];return e.forEach((function(e){var n=[];e.columns.forEach((function(t){var r="";if(t)if("group"===e.type&&(t.value=t.component.getKey()),null===t.value)r="";else switch(AE(t.value)){case"object":r=JSON.stringify(t.value);break;case"undefined":r="";break;default:r=t.value}n.push(r)})),t.push(n.join("\t"))})),t.join("\n")},qE.prototype.copy=function(e,t){var n,r;this.blocked=!1,this.customSelection=!1,!0!==this.mode&&"copy"!==this.mode||(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(n=window.getSelection()).toString()&&t&&(this.customSelection=n.toString()),n.removeAllRanges(),n.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((r=document.body.createTextRange()).moveToElementText(this.table.element),r.select()),document.execCommand("copy"),n&&n.removeAllRanges())},qE.prototype.setPasteAction=function(e){switch(void 0===e?"undefined":AE(e)){case"string":this.pasteAction=this.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}},qE.prototype.setPasteParser=function(e){switch(void 0===e?"undefined":AE(e)){case"string":this.pasteParser=this.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}},qE.prototype.paste=function(e){var t,n,r;this.checkPaseOrigin(e)&&(t=this.getPasteData(e),(n=this.pasteParser.call(this,t))?(e.preventDefault(),this.table.modExists("mutator")&&(n=this.mutateData(n)),r=this.pasteAction.call(this,n),this.table.options.clipboardPasted.call(this.table,t,n,r)):this.table.options.clipboardPasteError.call(this.table,t))},qE.prototype.mutateData=function(e){var t=this,n=[];return Array.isArray(e)?e.forEach((function(e){n.push(t.table.modules.mutator.transformRow(e,"clipboard"))})):n=e,n},qE.prototype.checkPaseOrigin=function(e){var t=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(t=!1),t},qE.prototype.getPasteData=function(e){var t;return window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(t=e.originalEvent.clipboardData.getData("text/plain")),t},qE.prototype.pasteParsers={table:function(e){var t=[],n=!0,r=this.table.columnManager.columns,i=[],o=[];return(e=e.split("\n")).forEach((function(e){t.push(e.split("\t"))})),!(!t.length||1===t.length&&t[0].length<2)&&(!0,t[0].forEach((function(e){var t=r.find((function(t){return e&&t.definition.title&&e.trim()&&t.definition.title.trim()===e.trim()}));t?i.push(t):n=!1})),n||(n=!0,i=[],t[0].forEach((function(e){var t=r.find((function(t){return e&&t.field&&e.trim()&&t.field.trim()===e.trim()}));t?i.push(t):n=!1})),n||(i=this.table.columnManager.columnsByIndex)),n&&t.shift(),t.forEach((function(e){var t={};e.forEach((function(e,n){i[n]&&(t[i[n].field]=e)})),o.push(t)})),o)}},qE.prototype.pasteActions={replace:function(e){return this.table.setData(e)},update:function(e){return this.table.updateOrAddData(e)},insert:function(e){return this.table.addData(e)}},YE.prototype.registerModule("clipboard",qE);var $E=function(e){this.table=e,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0};$E.prototype.initialize=function(){var e=null,t=this.table.columnManager.getFirstVisibileColumn(),n=this.table.options;switch(this.field=n.dataTreeChildField,this.indent=n.dataTreeChildIndent,this.elementField=n.dataTreeElementColumn||!!t&&t.field,n.dataTreeBranchElement&&(!0===n.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof n.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=n.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=n.dataTreeBranchElement),n.dataTreeCollapseElement?"string"==typeof n.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=n.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=n.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),n.dataTreeExpandElement?"string"==typeof n.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=n.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=n.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),AE(n.dataTreeStartExpanded)){case"boolean":this.startOpen=function(e,t){return n.dataTreeStartExpanded};break;case"function":this.startOpen=n.dataTreeStartExpanded;break;default:this.startOpen=function(e,t){return n.dataTreeStartExpanded[t]}}},$E.prototype.initializeRow=function(e){var t=e.getData()[this.field],n=Array.isArray(t),r=n||!n&&"object"===(void 0===t?"undefined":AE(t))&&null!==t;!r&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!r&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!r&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!r)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!r)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:r}},$E.prototype.layoutRow=function(e){var t=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),n=e.modules.dataTree;n.branchEl&&(n.branchEl.parentNode&&n.branchEl.parentNode.removeChild(n.branchEl),n.branchEl=!1),n.controlEl&&(n.controlEl.parentNode&&n.controlEl.parentNode.removeChild(n.controlEl),n.controlEl=!1),this.generateControlElement(e,t),e.getElement().classList.add("tabulator-tree-level-"+n.index),n.index&&(this.branchEl?(n.branchEl=this.branchEl.cloneNode(!0),t.insertBefore(n.branchEl,t.firstChild),this.table.rtl?n.branchEl.style.marginRight=(n.branchEl.offsetWidth+n.branchEl.style.marginLeft)*(n.index-1)+n.index*this.indent+"px":n.branchEl.style.marginLeft=(n.branchEl.offsetWidth+n.branchEl.style.marginRight)*(n.index-1)+n.index*this.indent+"px"):this.table.rtl?t.style.paddingRight=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-right"))+n.index*this.indent+"px":t.style.paddingLeft=parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-left"))+n.index*this.indent+"px")},$E.prototype.generateControlElement=function(e,t){var n=this,r=e.modules.dataTree,i=(t=t||e.getCells()[0].getElement(),r.controlEl);!1!==r.children&&(r.open?(r.controlEl=this.collapseEl.cloneNode(!0),r.controlEl.addEventListener("click",(function(t){t.stopPropagation(),n.collapseRow(e)}))):(r.controlEl=this.expandEl.cloneNode(!0),r.controlEl.addEventListener("click",(function(t){t.stopPropagation(),n.expandRow(e)}))),r.controlEl.addEventListener("mousedown",(function(e){e.stopPropagation()})),i&&i.parentNode===t?i.parentNode.replaceChild(r.controlEl,i):t.insertBefore(r.controlEl,t.firstChild))},$E.prototype.setDisplayIndex=function(e){this.displayIndex=e},$E.prototype.getDisplayIndex=function(){return this.displayIndex},$E.prototype.getRows=function(e){var t=this,n=[];return e.forEach((function(e,r){var i;n.push(e),e instanceof IE&&(e.create(),(i=e.modules.dataTree.children).index||!1===i.children||t.getChildren(e).forEach((function(e){e.create(),n.push(e)})))})),n},$E.prototype.getChildren=function(e,t){var n=this,r=e.modules.dataTree,i=[],o=[];return!1!==r.children&&(r.open||t)&&(Array.isArray(r.children)||(r.children=this.generateChildren(e)),i=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(r.children):r.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(i),i.forEach((function(e){o.push(e),n.getChildren(e).forEach((function(e){o.push(e)}))}))),o},$E.prototype.generateChildren=function(e){var t=this,n=[],r=e.getData()[this.field];return Array.isArray(r)||(r=[r]),r.forEach((function(r){var i=new IE(r||{},t.table.rowManager);i.create(),i.modules.dataTree.index=e.modules.dataTree.index+1,i.modules.dataTree.parent=e,i.modules.dataTree.children&&(i.modules.dataTree.open=t.startOpen(i.getComponent(),i.modules.dataTree.index)),n.push(i)})),n},$E.prototype.expandRow=function(e,t){var n=e.modules.dataTree;!1!==n.children&&(n.open=!0,e.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(e.getComponent(),e.modules.dataTree.index))},$E.prototype.collapseRow=function(e){var t=e.modules.dataTree;!1!==t.children&&(t.open=!1,e.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(e.getComponent(),e.modules.dataTree.index))},$E.prototype.toggleRow=function(e){var t=e.modules.dataTree;!1!==t.children&&(t.open?this.collapseRow(e):this.expandRow(e))},$E.prototype.getTreeParent=function(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()},$E.prototype.getFilteredTreeChildren=function(e){var t=e.modules.dataTree,n=[];return t.children&&(Array.isArray(t.children)||(t.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(t.children):t.children).forEach((function(e){e instanceof IE&&n.push(e)}))),n},$E.prototype.rowDelete=function(e){var t,n=e.modules.dataTree.parent;n&&(!1!==(t=this.findChildIndex(e,n))&&n.data[this.field].splice(t,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.table.rowManager.refreshActiveData("tree",!1,!0)},$E.prototype.addTreeChildRow=function(e,t,n,r){var i=!1;"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==r&&!1!==(i=this.findChildIndex(r,e))&&e.data[this.field].splice(n?i:i+1,0,t),!1===i&&(n?e.data[this.field].unshift(t):e.data[this.field].push(t)),this.initializeRow(e),this.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)},$E.prototype.findChildIndex=function(e,t){var n=this,r=!1;return"object"==(void 0===e?"undefined":AE(e))?e instanceof IE?r=e.data:e instanceof LE?r=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&t.modules.dataTree&&(r=t.modules.dataTree.children.find((function(t){return t instanceof IE&&t.element===e})))&&(r=r.data):r=null!=e&&t.data[this.field].find((function(t){return t.data[n.table.options.index]==e})),r&&(Array.isArray(t.data[this.field])&&(r=t.data[this.field].indexOf(r)),-1==r&&(r=!1)),r},$E.prototype.getTreeChildren=function(e,t,n){var r=this,i=e.modules.dataTree,o=[];return i.children&&(Array.isArray(i.children)||(i.children=this.generateChildren(e)),i.children.forEach((function(e){e instanceof IE&&(o.push(t?e.getComponent():e),n&&(o=o.concat(r.getTreeChildren(e,t,n))))}))),o},$E.prototype.checkForRestyle=function(e){e.row.cells.indexOf(e)||e.row.reinitialize()},$E.prototype.getChildField=function(){return this.field},$E.prototype.redrawNeeded=function(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]},YE.prototype.registerModule("dataTree",$E);var KE=function(e){this.table=e};KE.prototype.download=function(e,t,n,r,i){var o=this,a=!1;if("function"==typeof e?a=e:o.downloaders[e]?a=o.downloaders[e]:console.warn("Download Error - No such download type found: ",e),a){var s=this.generateExportList(r);a.call(this.table,s,n||{},(function(n,r){i?!0===i?o.triggerDownload(n,r,e,t,!0):i(n):o.triggerDownload(n,r,e,t)}))}},KE.prototype.generateExportList=function(e){var t=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),n=this.table.options.groupHeaderDownload;return n&&!Array.isArray(n)&&(n=[n]),t.forEach((function(e){var t;"group"===e.type&&(t=e.columns[0],n&&n[e.indent]&&(t.value=n[e.indent](t.value,e.component._group.getRowCount(),e.component._group.getData(),e.component)))})),t},KE.prototype.triggerDownload=function(e,t,n,r,i){var o=document.createElement("a"),a=new Blob([e],{type:t});r=r||"Tabulator."+("function"==typeof n?"txt":n);(a=this.table.options.downloadReady.call(this.table,e,a))&&(i?window.open(window.URL.createObjectURL(a)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,r):(o.setAttribute("href",window.URL.createObjectURL(a)),o.setAttribute("download",r),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},KE.prototype.commsReceived=function(e,t,n){switch(t){case"intercept":this.download(n.type,"",n.options,n.active,n.intercept)}},KE.prototype.downloaders={csv:function(e,t,n){var r=t&&t.delimiter?t.delimiter:",",i=[],o=[];e.forEach((function(e){var t=[];switch(e.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":e.columns.forEach((function(e,t){e&&1===e.depth&&(o[t]=void 0===e.value||null===e.value?"":'"'+String(e.value).split('"').join('""')+'"')}));break;case"row":e.columns.forEach((function(e){if(e){switch(AE(e.value)){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value=""}t.push('"'+String(e.value).split('"').join('""')+'"')}})),i.push(t.join(r))}})),o.length&&i.unshift(o.join(r)),i=i.join("\n"),t.bom&&(i="\ufeff"+i),n(i,"text/csv")},json:function(e,t,n){var r=[];e.forEach((function(e){var t={};switch(e.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":e.columns.forEach((function(e){e&&(t[e.component.getField()]=e.value)})),r.push(t)}})),n(r=JSON.stringify(r,null,"\t"),"application/json")},pdf:function(e,t,n){var r=[],i=[],o={},a=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},s=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},l=t.jsPDF||{},c=t&&t.title?t.title:"";function d(e,t){var n=[];return e.columns.forEach((function(e){var r;if(e){switch(AE(e.value)){case"object":e.value=JSON.stringify(e.value);break;case"undefined":case"null":e.value=""}r={content:e.value,colSpan:e.width,rowSpan:e.height},t&&(r.styles=t),n.push(r)}else n.push("")})),n}l.orientation||(l.orientation=t.orientation||"landscape"),l.unit||(l.unit="pt"),e.forEach((function(e){switch(e.type){case"header":r.push(d(e));break;case"group":i.push(d(e,a));break;case"calc":i.push(d(e,s));break;case"row":i.push(d(e))}}));var u=new jsPDF(l);t&&t.autoTable&&(o="function"==typeof t.autoTable?t.autoTable(u)||{}:t.autoTable),c&&(o.addPageContent=function(e){u.text(c,40,30)}),o.head=r,o.body=i,u.autoTable(o),t&&t.documentProcessing&&t.documentProcessing(u),n(u.output("arraybuffer"),"application/pdf")},xlsx:function(e,t,n){var r=t.sheetName||"Sheet1",i=XLSX.utils.book_new();function o(){var t=[],n=[],r={},i={s:{c:0,r:0},e:{c:e[0]?e[0].columns.reduce((function(e,t){return e+(t&&t.width?t.width:1)}),0):0,r:e.length}};return e.forEach((function(e,r){var i=[];e.columns.forEach((function(e,t){e?(i.push(e.value instanceof Date||"object"!==AE(e.value)?e.value:JSON.stringify(e.value)),(e.width>1||e.height>-1)&&n.push({s:{r,c:t},e:{r:r+e.height-1,c:t+e.width-1}})):i.push("")})),t.push(i)})),XLSX.utils.sheet_add_aoa(r,t),r["!ref"]=XLSX.utils.encode_range(i),n.length&&(r["!merges"]=n),r}if(i.SheetNames=[],i.Sheets={},t.sheetOnly)n(o());else{if(t.sheets)for(var a in t.sheets)!0===t.sheets[a]?(i.SheetNames.push(a),i.Sheets[a]=o()):(i.SheetNames.push(a),this.modules.comms.send(t.sheets[a],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(e){i.Sheets[a]=e}}));else i.SheetNames.push(r),i.Sheets[r]=o();t.documentProcessing&&(i=t.documentProcessing(i)),n(function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}(XLSX.write(i,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(e,t,n){this.modExists("export",!0)&&n(this.modules.export.genereateHTMLTable(e),"text/html")}},YE.prototype.registerModule("download",KE);var QE=function(e){this.table=e,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[]};QE.prototype.initializeColumn=function(e){var t=this,n={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(AE(e.definition.editor)){case"string":"tick"===e.definition.editor&&(e.definition.editor="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),t.editors[e.definition.editor]?n.editor=t.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":n.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?("tick"===e.definition.formatter&&(e.definition.formatter="tickCross",console.warn("DEPRECATION WARNING - the tick editor has been deprecated, please use the tickCross editor")),t.editors[e.definition.formatter]?n.editor=t.editors[e.definition.formatter]:n.editor=t.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}n.editor&&(e.modules.edit=n)},QE.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},QE.prototype.clearEditor=function(e){var t,n=this.currentCell;if(this.invalidEdit=!1,n){for(this.currentCell=!1,t=n.getElement(),e?n.validate():t.classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);n.row.getElement().classList.remove("tabulator-row-editing")}},QE.prototype.cancelEdit=function(){if(this.currentCell){var e=this.currentCell,t=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.cellEvents.cellEditCancelled&&e.column.cellEvents.cellEditCancelled.call(this.table,t),this.table.options.cellEditCancelled.call(this.table,t)}},QE.prototype.bindEditor=function(e){var t=this,n=e.getElement(!0);n.setAttribute("tabindex",0),n.addEventListener("click",(function(e){n.classList.contains("tabulator-editing")||n.focus({preventScroll:!0})})),n.addEventListener("mousedown",(function(e){2===e.button?e.preventDefault():t.mouseClick=!0})),n.addEventListener("focus",(function(n){t.recursionBlock||t.edit(e,n,!1)}))},QE.prototype.focusCellNoEvent=function(e,t){this.recursionBlock=!0,t&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1},QE.prototype.editCell=function(e,t){this.focusCellNoEvent(e),this.edit(e,!1,t)},QE.prototype.focusScrollAdjust=function(e){if("virtual"==this.table.rowManager.getRenderMode()){var t=this.table.rowManager.element.scrollTop,n=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,r=e.row.getElement();r.offsetTop;r.offsetTop<t?this.table.rowManager.element.scrollTop-=t-r.offsetTop:r.offsetTop+r.offsetHeight>n&&(this.table.rowManager.element.scrollTop+=r.offsetTop+r.offsetHeight-n);var i=this.table.rowManager.element.scrollLeft,o=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,a=e.getElement();a.offsetLeft;this.table.modExists("frozenColumns")&&(i+=parseInt(this.table.modules.frozenColumns.leftMargin),o-=parseInt(this.table.modules.frozenColumns.rightMargin)),this.table.options.virtualDomHoz&&(i-=parseInt(this.table.vdomHoz.vDomPadLeft),o-=parseInt(this.table.vdomHoz.vDomPadLeft)),a.offsetLeft<i?this.table.rowManager.element.scrollLeft-=i-a.offsetLeft:a.offsetLeft+a.offsetWidth>o&&(this.table.rowManager.element.scrollLeft+=a.offsetLeft+a.offsetWidth-o)}},QE.prototype.edit=function(e,t,n){var r,i,o,a=this,s=!0,l=function(){},c=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,c.blur(),!1;switch(t&&t.stopPropagation(),AE(e.column.modules.edit.check)){case"function":s=e.column.modules.edit.check(e.getComponent());break;case"boolean":s=e.column.modules.edit.check}if(s||n){if(a.cancelEdit(),a.currentCell=e,this.focusScrollAdjust(e),i=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.cellEvents.cellClick&&e.column.cellEvents.cellClick.call(this.table,t,i)),e.column.cellEvents.cellEditing&&e.column.cellEvents.cellEditing.call(this.table,i),a.table.options.cellEditing.call(this.table,i),o="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(i):e.column.modules.edit.params,!1===(r=e.column.modules.edit.editor.call(a,i,(function(e){l=e}),(function(t){if(a.currentCell===e){var n=!0;return e.column.modules.validate&&a.table.modExists("validate")&&"manual"!=a.table.options.validationMode&&(n=a.table.modules.validate.validate(e.column.modules.validate,e,t)),!0===n||"highlight"===a.table.options.validationMode?(a.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==a.editedCells.indexOf(e)&&a.editedCells.push(e),e.setValue(t,!0),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(e),!0===n||(c.classList.add("tabulator-validation-fail"),a.table.options.validationFailed.call(a.table,e.getComponent(),t,n),!1)):(a.invalidEdit=!0,c.classList.add("tabulator-validation-fail"),a.focusCellNoEvent(e,!0),l(),a.table.options.validationFailed.call(a.table,e.getComponent(),t,n),!1)}}),(function(){a.currentCell===e&&(a.cancelEdit(),a.table.options.dataTree&&a.table.modExists("dataTree")&&a.table.modules.dataTree.checkForRestyle(e))}),o)))return c.blur(),!1;if(!(r instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",r),c.blur(),!1;for(c.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");c.firstChild;)c.removeChild(c.firstChild);c.appendChild(r),l();for(var d=c.children,u=0;u<d.length;u++)d[u].addEventListener("click",(function(e){e.stopPropagation()}));return!0}return this.mouseClick=!1,c.blur(),!1}this.invalidEdit||this.cancelEdit()},QE.prototype.maskInput=function(e,t){var n=t.mask,r=void 0!==t.maskLetterChar?t.maskLetterChar:"A",i=void 0!==t.maskNumberChar?t.maskNumberChar:"9",o=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function a(t){var s=n[t];void 0!==s&&s!==o&&s!==r&&s!==i&&(e.value=e.value+""+s,a(t+1))}e.addEventListener("keydown",(function(t){var a=e.value.length,s=t.key;if(t.keyCode>46){if(a>=n.length)return t.preventDefault(),t.stopPropagation(),!1,!1;switch(n[a]){case r:if(s.toUpperCase()==s.toLowerCase())return t.preventDefault(),t.stopPropagation(),!1,!1;break;case i:if(isNaN(s))return t.preventDefault(),t.stopPropagation(),!1,!1;break;case o:break;default:if(s!==n[a])return t.preventDefault(),t.stopPropagation(),!1,!1}!0}})),e.addEventListener("keyup",(function(n){n.keyCode>46&&t.maskAutoFill&&a(e.value.length)})),e.placeholder||(e.placeholder=n),t.maskAutoFill&&a(e.value.length)},QE.prototype.getEditedCells=function(){var e=[];return this.editedCells.forEach((function(t){e.push(t.getComponent())})),e},QE.prototype.clearEdited=function(e){var t;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(t=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(t,1)},QE.prototype.editors={input:function(e,t,n,r,i){var o=e.getValue(),a=document.createElement("input");if(a.setAttribute("type",i.search?"search":"text"),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var s in i.elementAttributes)"+"==s.charAt(0)?(s=s.slice(1),a.setAttribute(s,a.getAttribute(s)+i.elementAttributes["+"+s])):a.setAttribute(s,i.elementAttributes[s]);function l(e){null==o&&""!==a.value||a.value!==o?n(a.value)&&(o=a.value):r()}return a.value=void 0!==o?o:"",t((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("change",l),a.addEventListener("blur",l),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:l();break;case 27:r();break;case 35:case 36:e.stopPropagation()}})),i.mask&&this.table.modules.edit.maskInput(a,i),a},textarea:function(e,t,n,r,i){var o=e.getValue(),a=i.verticalNavigation||"hybrid",s=String(null!=o?o:""),l=((s.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),c=0;if(l.style.display="block",l.style.padding="2px",l.style.height="100%",l.style.width="100%",l.style.boxSizing="border-box",l.style.whiteSpace="pre-wrap",l.style.resize="none",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var d in i.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),l.setAttribute(d,l.getAttribute(d)+i.elementAttributes["+"+d])):l.setAttribute(d,i.elementAttributes[d]);function u(t){null==o&&""!==l.value||l.value!==o?(n(l.value)&&(o=l.value),setTimeout((function(){e.getRow().normalizeHeight()}),300)):r()}return l.value=s,t((function(){l.focus({preventScroll:!0}),l.style.height="100%",l.scrollHeight,l.style.height=l.scrollHeight+"px",e.getRow().normalizeHeight()})),l.addEventListener("change",u),l.addEventListener("blur",u),l.addEventListener("keyup",(function(){l.style.height="";var t=l.scrollHeight;l.style.height=t+"px",t!=c&&(c=t,e.getRow().normalizeHeight())})),l.addEventListener("keydown",(function(e){switch(e.keyCode){case 27:r();break;case 38:("editor"==a||"hybrid"==a&&l.selectionStart)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 40:("editor"==a||"hybrid"==a&&l.selectionStart!==l.value.length)&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 35:case 36:e.stopPropagation()}})),i.mask&&this.table.modules.edit.maskInput(l,i),l},number:function(e,t,n,r,i){var o=e.getValue(),a=i.verticalNavigation||"editor",s=document.createElement("input");if(s.setAttribute("type","number"),void 0!==i.max&&s.setAttribute("max",i.max),void 0!==i.min&&s.setAttribute("min",i.min),void 0!==i.step&&s.setAttribute("step",i.step),s.style.padding="4px",s.style.width="100%",s.style.boxSizing="border-box",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var l in i.elementAttributes)"+"==l.charAt(0)?(l=l.slice(1),s.setAttribute(l,s.getAttribute(l)+i.elementAttributes["+"+l])):s.setAttribute(l,i.elementAttributes[l]);s.value=o;var c=function(e){d()};function d(){var e=s.value;isNaN(e)||""===e||(e=Number(e)),e!==o?n(e)&&(o=e):r()}return t((function(){s.removeEventListener("blur",c),s.focus({preventScroll:!0}),s.style.height="100%",s.addEventListener("blur",c)})),s.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:d();break;case 27:r();break;case 38:case 40:"editor"==a&&(e.stopImmediatePropagation(),e.stopPropagation());break;case 35:case 36:e.stopPropagation()}})),i.mask&&this.table.modules.edit.maskInput(s,i),s},range:function(e,t,n,r,i){var o=e.getValue(),a=document.createElement("input");if(a.setAttribute("type","range"),void 0!==i.max&&a.setAttribute("max",i.max),void 0!==i.min&&a.setAttribute("min",i.min),void 0!==i.step&&a.setAttribute("step",i.step),a.style.padding="4px",a.style.width="100%",a.style.boxSizing="border-box",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var s in i.elementAttributes)"+"==s.charAt(0)?(s=s.slice(1),a.setAttribute(s,a.getAttribute(s)+i.elementAttributes["+"+s])):a.setAttribute(s,i.elementAttributes[s]);function l(){var e=a.value;isNaN(e)||""===e||(e=Number(e)),e!=o?n(e)&&(o=e):r()}return a.value=o,t((function(){a.focus({preventScroll:!0}),a.style.height="100%"})),a.addEventListener("blur",(function(e){l()})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 13:l();break;case 27:r()}})),a},select:function(e,t,n,r,i){var o=this,a=this,s=e.getElement(),l=e.getValue(),c=i.verticalNavigation||"editor",d=void 0!==l||null===l?Array.isArray(l)?l:[l]:void 0!==i.defaultValue?i.defaultValue:[],u=document.createElement("input"),h=document.createElement("div"),p=i.multiselect,f=[],m={},_=[],g=[],b=!0,v=!1,y="",E=null;function w(t){var n,r={},i=a.table.getData();return(n=t?a.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?i.forEach((function(e){var t=n.getFieldValue(e);null!=t&&""!==t&&(r[t]=!0)})):console.warn("unable to find matching column to create select lookup list:",t),Object.keys(r)}function S(t,n){var r=[],o=[];function a(e){e={label:e.label,value:e.value,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1};return n.indexOf(e.value)>-1&&k(e),r.push(e),o.push(e),e}if("function"==typeof t&&(t=t(e)),Array.isArray(t))t.forEach((function(e){var t;"object"===(void 0===e?"undefined":AE(e))?e.options?(t={label:e.label,group:!0,itemParams:e.itemParams,elementAttributes:e.elementAttributes,element:!1},o.push(t),e.options.forEach((function(e){a(e)}))):a(e):(t={label:e,value:e,element:!1},n.indexOf(t.value)>-1&&k(t),r.push(t),o.push(t))}));else for(var s in t){var l={label:t[s],value:s,element:!1};n.indexOf(l.value)>-1&&k(l),r.push(l),o.push(l)}i.sortValuesList&&(r.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0})),o.sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0})),"asc"!==i.sortValuesList&&(r.reverse(),o.reverse())),f=r,_=o,function(){for(;h.firstChild;)h.removeChild(h.firstChild);_.forEach((function(t){var n=t.element;if(!n){if(n=document.createElement("div"),t.label=i.listItemFormatter?i.listItemFormatter(t.value,t.label,e,n,t.itemParams):t.label,t.group?(n.classList.add("tabulator-edit-select-list-group"),n.tabIndex=0,n.innerHTML=""===t.label?"&nbsp;":t.label):(n.classList.add("tabulator-edit-select-list-item"),n.tabIndex=0,n.innerHTML=""===t.label?"&nbsp;":t.label,n.addEventListener("click",(function(){v=!0,setTimeout((function(){v=!1}),10),p?(x(t),u.focus()):A(t)})),g.indexOf(t)>-1&&n.classList.add("active")),t.elementAttributes&&"object"==AE(t.elementAttributes))for(var r in t.elementAttributes)"+"==r.charAt(0)?(r=r.slice(1),n.setAttribute(r,u.getAttribute(r)+t.elementAttributes["+"+r])):n.setAttribute(r,t.elementAttributes[r]);n.addEventListener("mousedown",(function(){b=!1,setTimeout((function(){b=!0}),10)})),t.element=n}h.appendChild(n)}))}()}function T(e,t){!p&&m&&m.element&&m.element.classList.remove("active"),m&&m.element&&m.element.classList.remove("focused"),m=e,e.element&&(e.element.classList.add("focused"),t&&e.element.classList.add("active")),e&&e.element&&e.element.scrollIntoView&&e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function k(e){-1==g.indexOf(e)&&(g.push(e),T(e,!0)),M()}function C(e){var t=g[e];e>-1&&(g.splice(e,1),t.element&&t.element.classList.remove("active"))}function x(e){e||(e=m);var t=g.indexOf(e);t>-1?C(t):(!0!==p&&g.length>=p&&C(0),k(e)),M()}function A(e){O(),e||(e=m),e&&(u.value=e.label,n(e.value)),d=[e.value]}function R(e){e||O();var t=[];g.forEach((function(e){t.push(e.value)})),d=t,n(t)}function M(){var e=[];g.forEach((function(t){e.push(t.label)})),u.value=e.join(", "),!1===a.currentCell&&R(!0)}function D(){O(),r()}function O(){h.parentNode&&h.parentNode.removeChild(h),a.table.rowManager.element.removeEventListener("scroll",D)}if((Array.isArray(i)||!Array.isArray(i)&&"object"===(void 0===i?"undefined":AE(i))&&!i.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),i={values:i}),u.setAttribute("type","text"),u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",u.style.cursor="default",u.readOnly=0!=this.currentCell,i.elementAttributes&&"object"==AE(i.elementAttributes))for(var N in i.elementAttributes)"+"==N.charAt(0)?(N=N.slice(1),u.setAttribute(N,u.getAttribute(N)+i.elementAttributes["+"+N])):u.setAttribute(N,i.elementAttributes[N]);return u.value=void 0!==l||null===l?l:"",u.addEventListener("search",(function(e){u.value||(!function(){for(var e=g.length,t=0;t<e;t++)C(0)}(),R())})),u.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=f.indexOf(m),("editor"==c||"hybrid"==c&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t>0&&T(f[t-1],!p));break;case 40:t=f.indexOf(m),("editor"==c||"hybrid"==c&&t<f.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<f.length-1&&T(-1==t?f[0]:f[t+1],!p));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault();break;case 13:p?x():A();break;case 27:D();break;case 9:break;default:!1===a.currentCell&&e.preventDefault(),e.keyCode>=38&&e.keyCode<=90&&function(e){clearTimeout(E);var t=String.fromCharCode(event.keyCode).toLowerCase();y+=t.toLowerCase();var n=f.find((function(e){return void 0!==e.label&&e.label.toLowerCase().startsWith(y)}));n&&T(n,!p),E=setTimeout((function(){y=""}),800)}(e.keyCode)}})),u.addEventListener("blur",(function(e){b&&(p?R():D())})),u.addEventListener("focus",(function(e){v||function(){if(g=[],!h.parentNode){!0===i.values?S(w(),d):"string"==typeof i.values?S(w(i.values),d):S(i.values||[],d);var e=YE.prototype.helpers.elOffset(s);h.style.minWidth=s.offsetWidth+"px",h.style.top=e.top+s.offsetHeight+"px",h.style.left=e.left+"px",h.addEventListener("mousedown",(function(e){b=!1,setTimeout((function(){b=!0}),10)})),document.body.appendChild(h)}}()})),(h=document.createElement("div")).classList.add("tabulator-edit-select-list"),t((function(){u.style.height="100%",u.focus({preventScroll:!0})})),setTimeout((function(){o.table.rowManager.element.addEventListener("scroll",D)}),10),u},autocomplete:function(e,t,n,r,i){var o=this,a=this,s=e.getElement(),l=e.getValue(),c=i.verticalNavigation||"editor",d=void 0!==l||null===l?l:void 0!==i.defaultValue?i.defaultValue:"",u=document.createElement("input"),h=document.createElement("div"),p=[],f=!1,m=!0,_=!1;if(u.setAttribute("type","search"),u.style.padding="4px",u.style.width="100%",u.style.boxSizing="border-box",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var g in i.elementAttributes)"+"==g.charAt(0)?(g=g.slice(1),u.setAttribute(g,u.getAttribute(g)+i.elementAttributes["+"+g])):u.setAttribute(g,i.elementAttributes[g]);function b(){!0===i.values?_=v():"string"==typeof i.values&&(_=v(i.values))}function v(t){var n,r={},o=a.table.getData();return(n=t?a.table.columnManager.getColumnByField(t):e.getColumn()._getSelf())?(o.forEach((function(e){var t=n.getFieldValue(e);null!=t&&""!==t&&(r[t]=!0)})),r=i.sortValuesList?"asc"==i.sortValuesList?Object.keys(r).sort():Object.keys(r).sort().reverse():Object.keys(r)):console.warn("unable to find matching column to create autocomplete lookup list:",t),r}function y(e,t){var n,r,o=[];n=_||(i.values||[]),i.searchFunc?(o=i.searchFunc(e,n))instanceof Promise?(E(void 0!==i.searchingPlaceholder?i.searchingPlaceholder:"Searching..."),o.then((function(e){T(w(e),t)})).catch((function(e){console.err("error in autocomplete search promise:",e)}))):T(w(o),t):(r=w(n),""===e?i.showListOnEmpty&&(o=r):r.forEach((function(t){null===t.value&&void 0===t.value||(String(t.value).toLowerCase().indexOf(String(e).toLowerCase())>-1||String(t.title).toLowerCase().indexOf(String(e).toLowerCase())>-1)&&o.push(t)})),T(o,t))}function E(e){var t=document.createElement("div");S(),!1!==e&&(t.classList.add("tabulator-edit-select-list-notice"),t.tabIndex=0,e instanceof Node?t.appendChild(e):t.innerHTML=e,h.appendChild(t))}function w(e){var t=[];if(Array.isArray(e))e.forEach((function(e){var n={};"object"===(void 0===e?"undefined":AE(e))?(n.title=i.listItemFormatter?i.listItemFormatter(e.value,e.label):e.label,n.value=e.value):(n.title=i.listItemFormatter?i.listItemFormatter(e,e):e,n.value=e),t.push(n)}));else for(var n in e){var r={title:i.listItemFormatter?i.listItemFormatter(n,e[n]):e[n],value:n};t.push(r)}return t}function S(){for(;h.firstChild;)h.removeChild(h.firstChild)}function T(e,t){e.length?function(e,t){var n=!1;S(),(p=e).forEach((function(e){var r=e.element;r||((r=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),r.tabIndex=0,r.innerHTML=e.title,r.addEventListener("click",(function(t){C(e),k()})),r.addEventListener("mousedown",(function(e){m=!1,setTimeout((function(){m=!0}),10)})),e.element=r,t&&e.value==l&&(u.value=e.title,e.element.classList.add("active"),n=!0),e===f&&(e.element.classList.add("active"),n=!0)),h.appendChild(r)})),n||C(!1)}(e,t):i.emptyPlaceholder&&E(i.emptyPlaceholder)}function k(){x(),f?l!==f.value?(l=f.value,u.value=f.title,n(f.value)):r():i.freetext||i.allowEmpty&&""===u.value?(l=u.value,n(u.value)):r()}function C(e,t){f&&f.element&&f.element.classList.remove("active"),f=e,e&&e.element&&e.element.classList.add("active"),e&&e.element&&e.element.scrollIntoView&&e.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function x(){h.parentNode&&h.parentNode.removeChild(h),a.table.rowManager.element.removeEventListener("scroll",A)}function A(){x(),r()}return h.classList.add("tabulator-edit-select-list"),h.addEventListener("mousedown",(function(e){m=!1,setTimeout((function(){m=!0}),10)})),u.addEventListener("keydown",(function(e){var t;switch(e.keyCode){case 38:t=p.indexOf(f),("editor"==c||"hybrid"==c&&t)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),C(t>0&&p[t-1]));break;case 40:t=p.indexOf(f),("editor"==c||"hybrid"==c&&t<p.length-1)&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t<p.length-1&&C(-1==t?p[0]:p[t+1]));break;case 37:case 39:e.stopImmediatePropagation(),e.stopPropagation();break;case 13:k();break;case 27:A();break;case 36:case 35:e.stopImmediatePropagation()}})),u.addEventListener("keyup",(function(e){switch(e.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:y(u.value)}})),u.addEventListener("search",(function(e){y(u.value)})),u.addEventListener("blur",(function(e){m&&k()})),u.addEventListener("focus",(function(e){var t=d;b(),function(){if(!h.parentNode){for(console.log("show",d);h.firstChild;)h.removeChild(h.firstChild);var e=YE.prototype.helpers.elOffset(s);h.style.minWidth=s.offsetWidth+"px",h.style.top=e.top+s.offsetHeight+"px",h.style.left=e.left+"px",document.body.appendChild(h)}}(),u.value=t,y(t,!0)})),t((function(){u.style.height="100%",u.focus({preventScroll:!0})})),i.mask&&this.table.modules.edit.maskInput(u,i),setTimeout((function(){o.table.rowManager.element.addEventListener("scroll",A)}),10),b(),u.value=d,y(d,!0),u},star:function(e,t,n,r,i){var o=this,a=e.getElement(),s=e.getValue(),l=a.getElementsByTagName("svg").length||5,c=a.getElementsByTagName("svg")[0]?a.getElementsByTagName("svg")[0].getAttribute("width"):14,d=[],u=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");function p(e){d.forEach((function(t,n){n<e?("ie"==o.table.browser?t.setAttribute("class","tabulator-star-active"):t.classList.replace("tabulator-star-inactive","tabulator-star-active"),t.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==o.table.browser?t.setAttribute("class","tabulator-star-inactive"):t.classList.replace("tabulator-star-active","tabulator-star-inactive"),t.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')}))}function f(e){var t=document.createElement("span"),r=h.cloneNode(!0);d.push(r),t.addEventListener("mouseenter",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),p(e)})),t.addEventListener("mousemove",(function(e){e.stopPropagation(),e.stopImmediatePropagation()})),t.addEventListener("click",(function(t){t.stopPropagation(),t.stopImmediatePropagation(),n(e),a.blur()})),t.appendChild(r),u.appendChild(t)}function m(e){s=e,p(e)}if(a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",u.style.verticalAlign="middle",u.style.display="inline-block",u.style.padding="4px",h.setAttribute("width",c),h.setAttribute("height",c),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var _ in i.elementAttributes)"+"==_.charAt(0)?(_=_.slice(1),u.setAttribute(_,u.getAttribute(_)+i.elementAttributes["+"+_])):u.setAttribute(_,i.elementAttributes[_]);for(var g=1;g<=l;g++)f(g);return p(s=Math.min(parseInt(s),l)),u.addEventListener("mousemove",(function(e){p(0)})),u.addEventListener("click",(function(e){n(0)})),a.addEventListener("blur",(function(e){r()})),a.addEventListener("keydown",(function(e){switch(e.keyCode){case 39:m(s+1);break;case 37:m(s-1);break;case 13:n(s);break;case 27:r()}})),u},progress:function(e,t,n,r,i){var o,a,s=e.getElement(),l=void 0===i.max?s.getElementsByTagName("div")[0].getAttribute("max")||100:i.max,c=void 0===i.min?s.getElementsByTagName("div")[0].getAttribute("min")||0:i.min,d=(l-c)/100,u=e.getValue()||0,h=document.createElement("div"),p=document.createElement("div");function f(){var e=window.getComputedStyle(s,null),t=d*Math.round(p.offsetWidth/((s.clientWidth-parseInt(e.getPropertyValue("padding-left"))-parseInt(e.getPropertyValue("padding-right")))/100))+c;n(t),s.setAttribute("aria-valuenow",t),s.setAttribute("aria-label",u)}if(h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),p.style.display="inline-block",p.style.position="relative",p.style.height="100%",p.style.backgroundColor="#488CE9",p.style.maxWidth="100%",p.style.minWidth="0%",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var m in i.elementAttributes)"+"==m.charAt(0)?(m=m.slice(1),p.setAttribute(m,p.getAttribute(m)+i.elementAttributes["+"+m])):p.setAttribute(m,i.elementAttributes[m]);return s.style.padding="4px 4px",u=Math.min(parseFloat(u),l),u=Math.max(parseFloat(u),c),u=Math.round((u-c)/d),p.style.width=u+"%",s.setAttribute("aria-valuemin",c),s.setAttribute("aria-valuemax",l),p.appendChild(h),h.addEventListener("mousedown",(function(e){o=e.screenX,a=p.offsetWidth})),h.addEventListener("mouseover",(function(){h.style.cursor="ew-resize"})),s.addEventListener("mousemove",(function(e){o&&(p.style.width=a+e.screenX-o+"px")})),s.addEventListener("mouseup",(function(e){o&&(e.stopPropagation(),e.stopImmediatePropagation(),o=!1,a=!1,f())})),s.addEventListener("keydown",(function(e){switch(e.keyCode){case 39:e.preventDefault(),p.style.width=p.clientWidth+s.clientWidth/100+"px";break;case 37:e.preventDefault(),p.style.width=p.clientWidth-s.clientWidth/100+"px";break;case 9:case 13:f();break;case 27:r()}})),s.addEventListener("blur",(function(){r()})),p},tickCross:function(e,t,n,r,i){var o=e.getValue(),a=document.createElement("input"),s=i.tristate,l=void 0===i.indeterminateValue?null:i.indeterminateValue,c=!1;if(a.setAttribute("type","checkbox"),a.style.marginTop="5px",a.style.boxSizing="border-box",i.elementAttributes&&"object"==AE(i.elementAttributes))for(var d in i.elementAttributes)"+"==d.charAt(0)?(d=d.slice(1),a.setAttribute(d,a.getAttribute(d)+i.elementAttributes["+"+d])):a.setAttribute(d,i.elementAttributes[d]);function u(e){return s?e?c?l:a.checked:a.checked&&!c?(a.checked=!1,a.indeterminate=!0,c=!0,l):(c=!1,a.checked):a.checked}return a.value=o,!s||void 0!==o&&o!==l&&""!==o||(c=!0,a.indeterminate=!0),"firefox"!=this.table.browser&&t((function(){a.focus({preventScroll:!0})})),a.checked=!0===o||"true"===o||"True"===o||1===o,t((function(){a.focus()})),a.addEventListener("change",(function(e){n(u())})),a.addEventListener("blur",(function(e){n(u(!0))})),a.addEventListener("keydown",(function(e){13==e.keyCode&&n(u()),27==e.keyCode&&r()})),a}},YE.prototype.registerModule("edit",QE);var XE=function(e,t,n,r){this.type=e,this.columns=t,this.component=n||!1,this.indent=r||0},ZE=function(e,t,n,r,i){this.value=e,this.component=t||!1,this.width=n,this.height=r,this.depth=i},JE=function(e){this.table=e,this.config={},this.cloneTableStyle=!0,this.colVisProp=""};JE.prototype.generateExportList=function(e,t,n,r){this.cloneTableStyle=t,this.config=e||{},this.colVisProp=r;var i=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],o=this.bodyToExportRows(this.rowLookup(n));return i.concat(o)},JE.prototype.genereateTable=function(e,t,n,r){var i=this.generateExportList(e,t,n,r);return this.genereateTableElement(i)},JE.prototype.rowLookup=function(e){var t=this,n=[];if("function"==typeof e)e.call(this.table).forEach((function(e){(e=t.table.rowManager.findRow(e))&&n.push(e)}));else switch(e){case!0:case"visible":n=this.table.rowManager.getVisibleRows(!0);break;case"all":n=this.table.rowManager.rows;break;case"selected":n=this.table.modules.selectRow.selectedRows;break;case"active":default:n=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],n)},JE.prototype.generateColumnGroupHeaders=function(){var e=this,t=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach((function(n){var r=e.processColumnGroup(n);r&&t.push(r)})),t},JE.prototype.processColumnGroup=function(e){var t=this,n=e.columns,r=0,i={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(n.length){if(i.subGroups=[],i.width=0,n.forEach((function(e){var n=t.processColumnGroup(e);n&&(i.width+=n.width,i.subGroups.push(n),n.depth>r&&(r=n.depth))})),i.depth+=r,!i.width)return!1}else{if(!this.columnVisCheck(e))return!1;i.width=1}return i},JE.prototype.columnVisCheck=function(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])},JE.prototype.headersToExportRows=function(e){var t=[],n=0,r=[];function i(e,r){var o=n-r;if(void 0===t[r]&&(t[r]=[]),e.height=e.subGroups?1:o-e.depth+1,t[r].push(e),e.height>1)for(var a=1;a<e.height;a++)void 0===t[r+a]&&(t[r+a]=[]),t[r+a].push(!1);if(e.width>1)for(var s=1;s<e.width;s++)t[r].push(!1);e.subGroups&&e.subGroups.forEach((function(e){i(e,r+1)}))}return e.forEach((function(e){e.depth>n&&(n=e.depth)})),e.forEach((function(e){i(e,0)})),t.forEach((function(e){var t=[];e.forEach((function(e){e?t.push(new ZE(e.title,e.column.getComponent(),e.width,e.height,e.depth)):t.push(null)})),r.push(new XE("header",t))})),r},JE.prototype.bodyToExportRows=function(e){var t=this,n=[],r=[];return this.table.columnManager.columnsByIndex.forEach((function(e){t.columnVisCheck(e)&&n.push(e.getComponent())})),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter((function(e){switch(e.type){case"group":return!1!==t.config.rowGroups;case"calc":return!1!==t.config.columnCalcs;case"row":return!(t.table.options.dataTree&&!1===t.config.dataTree&&e.modules.dataTree.parent)}return!0}))).forEach((function(e,i){var o=e.getData(t.colVisProp),a=[],s=0;switch(e.type){case"group":s=e.level,a.push(new ZE(e.key,e.getComponent(),n.length,1));break;case"calc":case"row":n.forEach((function(e){a.push(new ZE(e._column.getFieldValue(o),e,1,1))})),t.table.options.dataTree&&!1!==t.config.dataTree&&(s=e.modules.dataTree.index)}r.push(new XE(e.type,a,e.getComponent(),s))})),r},JE.prototype.genereateTableElement=function(e){var t=this,n=document.createElement("table"),r=document.createElement("thead"),i=document.createElement("tbody"),o=this.lookupTableStyles(),a=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],s={};return s.rowFormatter=null!==a?a:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(s.treeElementField=this.table.modules.dataTree.elementField),s.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],s.groupHeader&&!Array.isArray(s.groupHeader)&&(s.groupHeader=[s.groupHeader]),n.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),r,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((function(e,n){switch(e.type){case"header":r.appendChild(t.genereateHeaderElement(e,s,o));break;case"group":i.appendChild(t.genereateGroupElement(e,s,o));break;case"calc":i.appendChild(t.genereateCalcElement(e,s,o));break;case"row":var a=t.genereateRowElement(e,s,o);t.mapElementStyles(n%2&&o.evenRow?o.evenRow:o.oddRow,a,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),i.appendChild(a)}})),r.innerHTML&&n.appendChild(r),n.appendChild(i),this.mapElementStyles(this.table.element,n,["border-top","border-left","border-right","border-bottom"]),n},JE.prototype.lookupTableStyles=function(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e},JE.prototype.genereateHeaderElement=function(e,t,n){var r=this,i=document.createElement("tr");return e.columns.forEach((function(e){if(e){var t=document.createElement("th"),n=e.component._column.definition.cssClass?e.component._column.definition.cssClass.split(" "):[];t.colSpan=e.width,t.rowSpan=e.height,t.innerHTML=e.value,r.cloneTableStyle&&(t.style.boxSizing="border-box"),n.forEach((function(e){t.classList.add(e)})),r.mapElementStyles(e.component.getElement(),t,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),r.mapElementStyles(e.component._column.contentElement,t,["padding-top","padding-left","padding-right","padding-bottom"]),e.component._column.visible?r.mapElementStyles(e.component.getElement(),t,["width"]):e.component._column.definition.width&&(t.style.width=e.component._column.definition.width+"px"),e.component._column.parent&&r.mapElementStyles(e.component._column.parent.groupElement,t,["border-top"]),i.appendChild(t)}})),i},JE.prototype.genereateGroupElement=function(e,t,n){var r=document.createElement("tr"),i=document.createElement("td"),o=e.columns[0];return r.classList.add("tabulator-print-table-row"),t.groupHeader&&t.groupHeader[e.indent]?o.value=t.groupHeader[e.indent](o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===t.groupHeader?o.value=o.value:o.value=e.component._group.generator(o.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),i.colSpan=o.width,i.innerHTML=o.value,r.classList.add("tabulator-print-table-group"),r.classList.add("tabulator-group-level-"+e.indent),o.component.isVisible()&&r.classList.add("tabulator-group-visible"),this.mapElementStyles(n.firstGroup,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(n.firstGroup,i,["padding-top","padding-left","padding-right","padding-bottom"]),r.appendChild(i),r},JE.prototype.genereateCalcElement=function(e,t,n){var r=this.genereateRowElement(e,t,n);return r.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(n.calcRow,r,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),r},JE.prototype.genereateRowElement=function(e,t,n){var r=this,o=document.createElement("tr");return o.classList.add("tabulator-print-table-row"),e.columns.forEach((function(a){if(a){var s=document.createElement("td"),l=a.component._column,c=a.value,d={modules:{},getValue:function(){return c},getField:function(){return l.definition.field},getElement:function(){return s},getColumn:function(){return l.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return d},column:l};if((l.definition.cssClass?l.definition.cssClass.split(" "):[]).forEach((function(e){s.classList.add(e)})),r.table.modExists("format")&&!1!==r.config.formatCells)c=r.table.modules.format.formatExportValue(d,r.colVisProp);else switch(void 0===c?"undefined":AE(c)){case"object":c=JSON.stringify(c);break;case"undefined":case"null":c="";break;default:c=c}c instanceof Node?s.appendChild(c):s.innerHTML=c,n.firstCell&&(r.mapElementStyles(n.firstCell,s,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),l.definition.align&&(s.style.textAlign=l.definition.align)),r.table.options.dataTree&&!1!==r.config.dataTree&&(t.treeElementField&&t.treeElementField==l.field||!t.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&s.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),s.firstChild),e.component._row.modules.dataTree.branchEl&&s.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),s.firstChild)),o.appendChild(s),d.modules.format&&d.modules.format.renderedCallback&&d.modules.format.renderedCallback(),t.rowFormatter&&!1!==r.config.formatCells&&t.rowFormatter(e.component)}})),o},JE.prototype.genereateHTMLTable=function(e){var t=document.createElement("div");return t.appendChild(this.genereateTableElement(e)),t.innerHTML},JE.prototype.getHtml=function(e,t,n,r){var i=this.generateExportList(n||this.table.options.htmlOutputConfig,t,e,r||"htmlOutput");return this.genereateHTMLTable(i)},JE.prototype.mapElementStyles=function(e,t,n){if(this.cloneTableStyle&&e&&t){var r={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var i=window.getComputedStyle(e);n.forEach((function(e){t.style[r[e]]=i.getPropertyValue(e)}))}}},YE.prototype.registerModule("export",JE);var ew=function(e){this.table=e,this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1};ew.prototype.initializeColumn=function(e,t){var n=this,r=e.getField();e.modules.filter={success:function(t){var i,o="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",a="",s="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==t){if(e.modules.filter.prevSuccess=t,e.modules.filter.emptyFunc(t))delete n.headerFilters[r];else{switch(e.modules.filter.value=t,AE(e.definition.headerFilterFunc)){case"string":n.filters[e.definition.headerFilterFunc]?(a=e.definition.headerFilterFunc,i=function(r){var i=e.definition.headerFilterFuncParams||{},o=e.getFieldValue(r);return i="function"==typeof i?i(t,o,r):i,n.filters[e.definition.headerFilterFunc](t,o,r,i)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":a=i=function(n){var r=e.definition.headerFilterFuncParams||{},i=e.getFieldValue(n);return r="function"==typeof r?r(t,i,n):r,e.definition.headerFilterFunc(t,i,n,r)}}if(!i)switch(o){case"partial":i=function(n){var r=e.getFieldValue(n);return null!=r&&String(r).toLowerCase().indexOf(String(t).toLowerCase())>-1},a="like";break;default:i=function(n){return e.getFieldValue(n)==t},a="="}n.headerFilters[r]={value:t,func:i,type:a,params:{}}}s=JSON.stringify(n.headerFilters),n.prevHeaderFilterChangeCheck!==s&&(n.prevHeaderFilterChangeCheck=s,n.changed=!0,n.table.rowManager.filterRefresh())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)},ew.prototype.generateHeaderFilterElement=function(e,t,n){var r,i,o,a,s,l,c,d=this,u=this,h=e.modules.filter.success,p=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),p){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(e){return!e&&"0"!==e&&0!==e},(r=document.createElement("div")).classList.add("tabulator-header-filter"),AE(e.definition.headerFilter)){case"string":u.table.modules.edit.editors[e.definition.headerFilter]?(i=u.table.modules.edit.editors[e.definition.headerFilter],"tick"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":i=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?i=e.modules.edit.editor:e.definition.formatter&&u.table.modules.edit.editors[e.definition.formatter]?(i=u.table.modules.edit.editors[e.definition.formatter],"tick"!==e.definition.formatter&&"tickCross"!==e.definition.formatter||e.definition.headerFilterEmptyCheck||(e.modules.filter.emptyFunc=function(e){return!0!==e&&!1!==e})):i=u.table.modules.edit.editors.input}if(i){if(a={getValue:function(){return void 0!==t?t:""},getField:function(){return e.definition.field},getElement:function(){return r},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},c="function"==typeof(c=e.definition.headerFilterParams||{})?c.call(u.table):c,!(o=i.call(this.table.modules.edit,a,(function(){}),h,(function(){}),c)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(o instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",o);p?u.table.modules.localize.bind("headerFilters|columns|"+e.definition.field,(function(e){o.setAttribute("placeholder",void 0!==e&&e?e:u.table.modules.localize.getText("headerFilters|default"))})):u.table.modules.localize.bind("headerFilters|default",(function(e){o.setAttribute("placeholder",void 0!==u.column.definition.headerFilterPlaceholder&&u.column.definition.headerFilterPlaceholder?u.column.definition.headerFilterPlaceholder:e)})),o.addEventListener("click",(function(e){e.stopPropagation(),o.focus()})),o.addEventListener("focus",(function(e){var t=d.table.columnManager.element.scrollLeft;t!==d.table.rowManager.element.scrollLeft&&(d.table.rowManager.scrollHorizontal(t),d.table.columnManager.scrollHorizontal(t))})),s=!1,l=function(e){s&&clearTimeout(s),s=setTimeout((function(){h(o.value)}),u.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=o,e.modules.filter.attrType=o.hasAttribute("type")?o.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=o.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"!==e.definition.headerFilter&&"tickCross"!==e.definition.headerFilter&&("autocomplete"!==e.definition.editor&&"tickCross"!==e.definition.editor||!0!==e.definition.headerFilter)&&(o.addEventListener("keyup",l),o.addEventListener("search",l),"number"==e.modules.filter.attrType&&o.addEventListener("change",(function(e){h(o.value)})),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&o.setAttribute("type","search")),"input"!=e.modules.filter.tagType&&"select"!=e.modules.filter.tagType&&"textarea"!=e.modules.filter.tagType||o.addEventListener("mousedown",(function(e){e.stopPropagation()}))),r.appendChild(o),e.contentElement.appendChild(r),n||u.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)},ew.prototype.hideHeaderFilterElements=function(){this.headerFilterColumns.forEach((function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")}))},ew.prototype.showHeaderFilterElements=function(){this.headerFilterColumns.forEach((function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")}))},ew.prototype.setHeaderFilterFocus=function(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())},ew.prototype.getHeaderFilterValue=function(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())},ew.prototype.setHeaderFilterValue=function(e,t){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,t,!0),e.modules.filter.success(t)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))},ew.prototype.reloadHeaderFilter=function(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))},ew.prototype.hasChanged=function(){var e=this.changed;return this.changed=!1,e},ew.prototype.setFilter=function(e,t,n,r){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:t,value:n,params:r}]),this.addFilter(e)},ew.prototype.addFilter=function(e,t,n,r){var i=this;Array.isArray(e)||(e=[{field:e,type:t,value:n,params:r}]),e.forEach((function(e){(e=i.findFilter(e))&&(i.filterList.push(e),i.changed=!0)})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},ew.prototype.findFilter=function(e){var t,n=this;if(Array.isArray(e))return this.findSubFilters(e);var r=!1;return"function"==typeof e.field?r=function(t){return e.field(t,e.type||{})}:n.filters[e.type]?r=(t=n.table.columnManager.getColumnByField(e.field))?function(r){return n.filters[e.type](e.value,t.getFieldValue(r),r,e.params||{})}:function(t){return n.filters[e.type](e.value,t[e.field],t,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=r,!!e.func&&e},ew.prototype.findSubFilters=function(e){var t=this,n=[];return e.forEach((function(e){(e=t.findFilter(e))&&n.push(e)})),!!n.length&&n},ew.prototype.getFilters=function(e,t){var n=[];return e&&(n=this.getHeaderFilters()),t&&n.forEach((function(e){"function"==typeof e.type&&(e.type="function")})),n=n.concat(this.filtersToArray(this.filterList,t))},ew.prototype.filtersToArray=function(e,t){var n=this,r=[];return e.forEach((function(e){var i;Array.isArray(e)?r.push(n.filtersToArray(e,t)):(i={field:e.field,type:e.type,value:e.value},t&&"function"==typeof i.type&&(i.type="function"),r.push(i))})),r},ew.prototype.getHeaderFilters=function(){var e=[];for(var t in this.headerFilters)e.push({field:t,type:this.headerFilters[t].type,value:this.headerFilters[t].value});return e},ew.prototype.removeFilter=function(e,t,n){var r=this;Array.isArray(e)||(e=[{field:e,type:t,value:n}]),e.forEach((function(e){var t=-1;(t="object"==AE(e.field)?r.filterList.findIndex((function(t){return e===t})):r.filterList.findIndex((function(t){return e.field===t.field&&e.type===t.type&&e.value===t.value})))>-1?(r.filterList.splice(t,1),r.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",e.type)})),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},ew.prototype.clearFilter=function(e){this.filterList=[],e&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.filter&&this.table.modules.persistence.save("filter")},ew.prototype.clearHeaderFilter=function(){var e=this;this.headerFilters={},e.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach((function(t){void 0!==t.modules.filter.value&&delete t.modules.filter.value,t.modules.filter.prevSuccess=void 0,e.reloadHeaderFilter(t)})),this.changed=!0},ew.prototype.search=function(e,t,n,r){var i=this,o=[],a=[];return Array.isArray(t)||(t=[{field:t,type:n,value:r}]),t.forEach((function(e){(e=i.findFilter(e))&&a.push(e)})),this.table.rowManager.rows.forEach((function(t){var n=!0;a.forEach((function(e){i.filterRecurse(e,t.getData())||(n=!1)})),n&&o.push("data"===e?t.getData("data"):t.getComponent())})),o},ew.prototype.filter=function(e,t){var n=this,r=[],i=[];return n.table.options.dataFiltering&&n.table.options.dataFiltering.call(n.table,n.getFilters()),n.table.options.ajaxFiltering||!n.filterList.length&&!Object.keys(n.headerFilters).length?r=e.slice(0):e.forEach((function(e){n.filterRow(e)&&r.push(e)})),n.table.options.dataFiltered&&(r.forEach((function(e){i.push(e.getComponent())})),n.table.options.dataFiltered.call(n.table,n.getFilters(),i)),r},ew.prototype.filterRow=function(e,t){var n=this,r=!0,i=e.getData();for(var o in n.filterList.forEach((function(e){n.filterRecurse(e,i)||(r=!1)})),n.headerFilters)n.headerFilters[o].func(i)||(r=!1);return r},ew.prototype.filterRecurse=function(e,t){var n=this,r=!1;return Array.isArray(e)?e.forEach((function(e){n.filterRecurse(e,t)&&(r=!0)})):r=e.func(t),r},ew.prototype.filters={"=":function(e,t,n,r){return t==e},"<":function(e,t,n,r){return t<e},"<=":function(e,t,n,r){return t<=e},">":function(e,t,n,r){return t>e},">=":function(e,t,n,r){return t>=e},"!=":function(e,t,n,r){return t!=e},regex:function(e,t,n,r){return"string"==typeof e&&(e=new RegExp(e)),e.test(t)},like:function(e,t,n,r){return null==e?t===e:null!=t&&String(t).toLowerCase().indexOf(e.toLowerCase())>-1},keywords:function(e,t,n,r){var i=e.toLowerCase().split(void 0===r.separator?" ":r.separator),o=String(null==t?"":t).toLowerCase(),a=[];return i.forEach((function(e){o.includes(e)&&a.push(!0)})),r.matchAll?a.length===i.length:!!a.length},starts:function(e,t,n,r){return null==e?t===e:null!=t&&String(t).toLowerCase().startsWith(e.toLowerCase())},ends:function(e,t,n,r){return null==e?t===e:null!=t&&String(t).toLowerCase().endsWith(e.toLowerCase())},in:function(e,t,n,r){return Array.isArray(e)?!e.length||e.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",e),!1)}},YE.prototype.registerModule("filter",ew);var tw=function(e){this.table=e};tw.prototype.initializeColumn=function(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))},tw.prototype.lookupFormatter=function(e,t){var n={params:e.definition["formatter"+t+"Params"]||{}},r=e.definition["formatter"+t];switch(void 0===r?"undefined":AE(r)){case"string":"tick"===r&&(r="tickCross",void 0===n.params.crossElement&&(n.params.crossElement=!1),console.warn("DEPRECATION WARNING - the tick formatter has been deprecated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[r]?n.formatter=this.formatters[r]:(console.warn("Formatter Error - No such formatter found: ",r),n.formatter=this.formatters.plaintext);break;case"function":n.formatter=r;break;default:n.formatter=this.formatters.plaintext}return n},tw.prototype.cellRendered=function(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)},tw.prototype.formatValue=function(e){var t=e.getComponent(),n="function"==typeof e.column.modules.format.params?e.column.modules.format.params(t):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,t,n,(function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1}))},tw.prototype.formatExportValue=function(e,t){var n,r=e.column.modules.format[t];if(r){return n="function"==typeof r.params?r.params(component):r.params,r.formatter.call(this,e.getComponent(),n,(function(t){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=t,e.modules.format.rendered=!1}))}return this.formatValue(e)},tw.prototype.sanitizeHTML=function(e){if(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}return e},tw.prototype.emptyToSpace=function(e){return null==e||""===e?"&nbsp;":e},tw.prototype.getFormatter=function(e){switch(void 0===e?"undefined":AE(e)){case"string":this.formatters[e]?e=this.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=this.formatters.plaintext);break;case"function":e=e;break;default:e=this.formatters.plaintext}return e},tw.prototype.formatters={plaintext:function(e,t,n){return this.emptyToSpace(this.sanitizeHTML(e.getValue()))},html:function(e,t,n){return e.getValue()},textarea:function(e,t,n){return e.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(e.getValue()))},money:function(e,t,n){var r,i,o,a,s=parseFloat(e.getValue()),l=t.decimal||".",c=t.thousand||",",d=t.symbol||"",u=!!t.symbolAfter,h=void 0!==t.precision?t.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(e.getValue()));for(r=!1!==h?s.toFixed(h):s,i=(r=String(r).split("."))[0],o=r.length>1?l+r[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1"+c+"$2");return u?i+o+d:d+i+o},link:function(e,t,n){var r=e.getValue(),i=t.urlPrefix||"",o=t.download,a=r,s=document.createElement("a");if(t.labelField&&(a=e.getData()[t.labelField]),t.label)switch(AE(t.label)){case"string":a=t.label;break;case"function":a=t.label(e)}if(a){if(t.urlField&&(r=e.getData()[t.urlField]),t.url)switch(AE(t.url)){case"string":r=t.url;break;case"function":r=t.url(e)}return s.setAttribute("href",i+r),t.target&&s.setAttribute("target",t.target),t.download&&(o="function"==typeof o?o(e):!0===o?"":o,s.setAttribute("download",o)),s.innerHTML=this.emptyToSpace(this.sanitizeHTML(a)),s}return"&nbsp;"},image:function(e,t,n){var r=document.createElement("img"),i=e.getValue();switch(t.urlPrefix&&(i=t.urlPrefix+e.getValue()),t.urlSuffix&&(i+=t.urlSuffix),r.setAttribute("src",i),AE(t.height)){case"number":r.style.height=t.height+"px";break;case"string":r.style.height=t.height}switch(AE(t.width)){case"number":r.style.width=t.width+"px";break;case"string":r.style.width=t.width}return r.addEventListener("load",(function(){e.getRow().normalizeHeight()})),r},tickCross:function(e,t,n){var r=e.getValue(),i=e.getElement(),o=t.allowEmpty,a=t.allowTruthy,s=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',l=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return a&&r||!0===r||"true"===r||"True"===r||1===r||"1"===r?(i.setAttribute("aria-checked",!0),s||""):!o||"null"!==r&&""!==r&&null!=r?(i.setAttribute("aria-checked",!1),l||""):(i.setAttribute("aria-checked","mixed"),"")},datetime:function(e,t,n){var r=t.inputFormat||"YYYY-MM-DD hh:mm:ss",i=t.outputFormat||"DD/MM/YYYY hh:mm:ss",o=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",a=e.getValue(),s=moment(a,r);return s.isValid()?t.timezone?s.tz(t.timezone).format(i):s.format(i):!0===o?a:"function"==typeof o?o(a):o},datetimediff:function(e,t,n){var r=t.inputFormat||"YYYY-MM-DD hh:mm:ss",i=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",o=void 0!==t.suffix&&t.suffix,a=void 0!==t.unit?t.unit:void 0,s=void 0!==t.humanize&&t.humanize,l=void 0!==t.date?t.date:moment(),c=e.getValue(),d=moment(c,r);return d.isValid()?s?moment.duration(d.diff(l)).humanize(o):d.diff(l,a)+(o?" "+o:""):!0===i?c:"function"==typeof i?i(c):i},lookup:function(e,t,n){var r=e.getValue();return void 0===t[r]?(console.warn("Missing display value for "+r),r):t[r]},star:function(e,t,n){var r=e.getValue(),i=e.getElement(),o=t&&t.stars?t.stars:5,a=document.createElement("span"),s=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.verticalAlign="middle",s.setAttribute("width","14"),s.setAttribute("height","14"),s.setAttribute("viewBox","0 0 512 512"),s.setAttribute("xml:space","preserve"),s.style.padding="0 1px",r=r&&!isNaN(r)?parseInt(r):0,r=Math.max(0,Math.min(r,o));for(var l=1;l<=o;l++){var c=s.cloneNode(!0);c.innerHTML=l<=r?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',a.appendChild(c)}return i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.textOverflow="ellipsis",i.setAttribute("aria-label",r),a},traffic:function(e,t,n){var r,i,o=this.sanitizeHTML(e.getValue())||0,a=document.createElement("span"),s=t&&t.max?t.max:100,l=t&&t.min?t.min:0,c=t&&void 0!==t.color?t.color:["red","orange","green"],d="#666666";if(!isNaN(o)&&void 0!==e.getValue()){switch(a.classList.add("tabulator-traffic-light"),i=parseFloat(o)<=s?parseFloat(o):s,i=parseFloat(i)>=l?parseFloat(i):l,r=(s-l)/100,i=Math.round((i-l)/r),void 0===c?"undefined":AE(c)){case"string":d=c;break;case"function":d=c(o);break;case"object":if(Array.isArray(c)){var u=100/c.length,h=Math.floor(i/u);h=Math.min(h,c.length-1),d=c[h=Math.max(h,0)];break}}return a.style.backgroundColor=d,a}},progress:function(e,t,n){var r,i,o,a,s,l=this.sanitizeHTML(e.getValue())||0,c=e.getElement(),d=t&&t.max?t.max:100,u=t&&t.min?t.min:0,h=t&&t.legendAlign?t.legendAlign:"center";switch(i=parseFloat(l)<=d?parseFloat(l):d,i=parseFloat(i)>=u?parseFloat(i):u,r=(d-u)/100,i=Math.round((i-u)/r),AE(t.color)){case"string":o=t.color;break;case"function":o=t.color(l);break;case"object":if(Array.isArray(t.color)){var p=100/t.color.length,f=Math.floor(i/p);f=Math.min(f,t.color.length-1),f=Math.max(f,0),o=t.color[f];break}default:o="#2DC214"}switch(AE(t.legend)){case"string":a=t.legend;break;case"function":a=t.legend(l);break;case"boolean":a=l;break;default:a=!1}switch(AE(t.legendColor)){case"string":s=t.legendColor;break;case"function":s=t.legendColor(l);break;case"object":if(Array.isArray(t.legendColor)){p=100/t.legendColor.length,f=Math.floor(i/p);f=Math.min(f,t.legendColor.length-1),f=Math.max(f,0),s=t.legendColor[f]}break;default:s="#000"}c.style.minWidth="30px",c.style.position="relative",c.setAttribute("aria-label",i);var m=document.createElement("div");if(m.style.display="inline-block",m.style.position="relative",m.style.width=i+"%",m.style.backgroundColor=o,m.style.height="100%",m.setAttribute("data-max",d),m.setAttribute("data-min",u),a){var _=document.createElement("div");_.style.position="absolute",_.style.top="4px",_.style.left=0,_.style.textAlign=h,_.style.width="100%",_.style.color=s,_.innerHTML=a}return n((function(){if(!(e instanceof PE)){var t=document.createElement("div");t.style.position="absolute",t.style.top="4px",t.style.bottom="4px",t.style.left="4px",t.style.right="4px",c.appendChild(t),c=t}c.appendChild(m),a&&c.appendChild(_)})),""},color:function(e,t,n){return e.getElement().style.backgroundColor=this.sanitizeHTML(e.getValue()),""},buttonTick:function(e,t,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(e,t,n){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(e,t,n){return this.table.rowManager.activeRows.indexOf(e.getRow()._getSelf())+1},handle:function(e,t,n){return e.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(e,t,n){var r=document.createElement("div"),i=e.getRow()._row.modules.responsiveLayout;function o(e){var t=i.element;i.open=e,t&&(i.open?(r.classList.add("open"),t.style.display=""):(r.classList.remove("open"),t.style.display="none"))}return r.classList.add("tabulator-responsive-collapse-toggle"),r.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",e.getElement().classList.add("tabulator-row-handle"),r.addEventListener("click",(function(e){e.stopImmediatePropagation(),o(!i.open)})),o(i.open),r},rowSelection:function(e,t,n){var r=this,i=document.createElement("input");if(i.type="checkbox",this.table.modExists("selectRow",!0))if(i.addEventListener("click",(function(e){e.stopPropagation()})),"function"==typeof e.getRow){var o=e.getRow();o instanceof LE?(i.addEventListener("change",(function(e){o.toggleSelect()})),i.checked=o.isSelected&&o.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(o,i)):i=""}else i.addEventListener("change",(function(e){r.table.modules.selectRow.selectedRows.length?r.table.deselectRow():r.table.selectRow(t.rowRange)})),this.table.modules.selectRow.registerHeaderSelectCheckbox(i);return i}},YE.prototype.registerModule("format",tw);var nw=function(e){this.table=e,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1};nw.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0},nw.prototype.initializeColumn=function(e){var t={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(t.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=t):this.initializationMode="right")},nw.prototype.frozenCheck=function(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen},nw.prototype.scrollHorizontal=function(){var e,t=this;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout((function(){t.layout()}),100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach((function(e){"row"===e.type&&t.layoutRow(e)})),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},nw.prototype.calcMargins=function(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft},nw.prototype.layoutCalcRows=function(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow))},nw.prototype.layoutColumnPosition=function(e){var t=this,n=[];this.leftColumns.forEach((function(r,i){if(r.modules.frozen.margin=t._calcSpace(t.leftColumns,i)+t.table.columnManager.scrollLeft+"px",i==t.leftColumns.length-1?r.modules.frozen.edge=!0:r.modules.frozen.edge=!1,r.parent.isGroup){var o=t.getColGroupParentElement(r);n.includes(o)||(t.layoutElement(o,r),n.push(o)),r.modules.frozen.edge&&o.classList.add("tabulator-frozen-"+r.modules.frozen.position)}else t.layoutElement(r.getElement(),r);e&&r.cells.forEach((function(e){t.layoutElement(e.getElement(!0),r)}))})),this.rightColumns.forEach((function(n,r){n.modules.frozen.margin=t.rightPadding-t._calcSpace(t.rightColumns,r+1)+"px",r==t.rightColumns.length-1?n.modules.frozen.edge=!0:n.modules.frozen.edge=!1,n.parent.isGroup?t.layoutElement(t.getColGroupParentElement(n),n):t.layoutElement(n.getElement(),n),e&&n.cells.forEach((function(e){t.layoutElement(e.getElement(!0),n)}))}))},nw.prototype.getColGroupParentElement=function(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()},nw.prototype.layout=function(){var e=this;e.active&&(this.calcMargins(),e.table.rowManager.getDisplayRows().forEach((function(t){"row"===t.type&&e.layoutRow(t)})),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)},nw.prototype.layoutRow=function(e){var t=this;e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach((function(n){var r=e.getCell(n);r&&t.layoutElement(r.getElement(!0),n)})),this.rightColumns.forEach((function(n){var r=e.getCell(n);r&&t.layoutElement(r.getElement(!0),n)}))},nw.prototype.layoutElement=function(e,t){t.modules.frozen&&(e.style.position="absolute",e.style.left=t.modules.frozen.margin,e.classList.add("tabulator-frozen"),t.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+t.modules.frozen.position))},nw.prototype._calcSpace=function(e,t){for(var n=0,r=0;r<t;r++)e[r].visible&&(n+=e[r].getWidth());return n},YE.prototype.registerModule("frozenColumns",nw);var rw=function(e){this.table=e,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0};rw.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},rw.prototype.setDisplayIndex=function(e){this.displayIndex=e},rw.prototype.getDisplayIndex=function(){return this.displayIndex},rw.prototype.isFrozen=function(){return!!this.rows.length},rw.prototype.getRows=function(e){var t=e.slice(0);return this.rows.forEach((function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)})),t},rw.prototype.freezeRow=function(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.table.rowManager.refreshActiveData("display"),this.styleRows())},rw.prototype.unfreezeRow=function(e){this.rows.indexOf(e);e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")},rw.prototype.detachRow=function(e){var t=this.rows.indexOf(e);if(t>-1){var n=e.getElement();n.parentNode.removeChild(n),this.rows.splice(t,1)}},rw.prototype.styleRows=function(e){var t=this;this.rows.forEach((function(e,n){t.table.rowManager.styleRow(e,n)}))},YE.prototype.registerModule("frozenRows",rw);var iw=function(e){this._group=e,this.type="GroupComponent"};iw.prototype.getKey=function(){return this._group.key},iw.prototype.getField=function(){return this._group.field},iw.prototype.getElement=function(){return this._group.element},iw.prototype.getRows=function(){return this._group.getRows(!0)},iw.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},iw.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},iw.prototype.getVisibility=function(){return console.warn("getVisibility function is deprecated, you should now use the isVisible function"),this._group.visible},iw.prototype.isVisible=function(){return this._group.visible},iw.prototype.show=function(){this._group.show()},iw.prototype.hide=function(){this._group.hide()},iw.prototype.toggle=function(){this._group.toggleVisibility()},iw.prototype._getSelf=function(){return this._group},iw.prototype.getTable=function(){return this._group.groupManager.table};var ow=function(e,t,n,r,i,o,a){this.groupManager=e,this.parent=t,this.key=r,this.level=n,this.field=i,this.hasSubGroups=n<e.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=a,this.rows=[],this.groups=[],this.groupList=[],this.generator=o,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=a?a.visible:void 0!==e.startOpen[n]?e.startOpen[n]:e.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()};ow.prototype.wipe=function(){this.groupList.length?this.groupList.forEach((function(e){e.wipe()})):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)},ow.prototype.createElements=function(){var e=document.createElement("div");e.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(e),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)},ow.prototype.createValueGroups=function(){var e=this,t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach((function(n){e._createGroup(n,t)}))},ow.prototype.addBindings=function(){var e,t,n,r=this;r.groupManager.table.options.groupClick&&r.element.addEventListener("click",(function(e){r.groupManager.table.options.groupClick.call(r.groupManager.table,e,r.getComponent())})),r.groupManager.table.options.groupDblClick&&r.element.addEventListener("dblclick",(function(e){r.groupManager.table.options.groupDblClick.call(r.groupManager.table,e,r.getComponent())})),r.groupManager.table.options.groupContext&&r.element.addEventListener("contextmenu",(function(e){r.groupManager.table.options.groupContext.call(r.groupManager.table,e,r.getComponent())})),(r.groupManager.table.options.groupContextMenu||r.groupManager.table.options.groupClickMenu)&&r.groupManager.table.modExists("menu")&&r.groupManager.table.modules.menu.initializeGroup.call(r.groupManager.table.modules.menu,r),r.groupManager.table.options.groupTap&&(n=!1,r.element.addEventListener("touchstart",(function(e){n=!0}),{passive:!0}),r.element.addEventListener("touchend",(function(e){n&&r.groupManager.table.options.groupTap(e,r.getComponent()),n=!1}))),r.groupManager.table.options.groupDblTap&&(e=null,r.element.addEventListener("touchend",(function(t){e?(clearTimeout(e),e=null,r.groupManager.table.options.groupDblTap(t,r.getComponent())):e=setTimeout((function(){clearTimeout(e),e=null}),300)}))),r.groupManager.table.options.groupTapHold&&(t=null,r.element.addEventListener("touchstart",(function(e){clearTimeout(t),t=setTimeout((function(){clearTimeout(t),t=null,n=!1,r.groupManager.table.options.groupTapHold(e,r.getComponent())}),1e3)}),{passive:!0}),r.element.addEventListener("touchend",(function(e){clearTimeout(t),t=null}))),r.groupManager.table.options.groupToggleElement&&("arrow"==r.groupManager.table.options.groupToggleElement?r.arrowElement:r.element).addEventListener("click",(function(e){e.stopPropagation(),e.stopImmediatePropagation(),r.toggleVisibility()}))},ow.prototype._createGroup=function(e,t){var n=t+"_"+e,r=new ow(this.groupManager,this,t,e,this.groupManager.groupIDLookups[t].field,this.groupManager.headerGenerator[t]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[n]);this.groups[n]=r,this.groupList.push(r)},ow.prototype._addRowToGroup=function(e){var t=this.level+1;if(this.hasSubGroups){var n=this.groupManager.groupIDLookups[t].func(e.getData()),r=t+"_"+n;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]?this.groups[r]&&this.groups[r].addRow(e):(this.groups[r]||this._createGroup(n,t),this.groups[r].addRow(e))}},ow.prototype._addRow=function(e){this.rows.push(e),e.modules.group=this},ow.prototype.insertRow=function(e,t,n){var r=this.conformRowData({});e.updateData(r);var i=this.rows.indexOf(t);i>-1?n?this.rows.splice(i+1,0,e):this.rows.splice(i,0,e):n?this.rows.push(e):this.rows.unshift(e),e.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)},ow.prototype.scrollHeader=function(e){this.arrowElement.style.marginLeft=e,this.groupList.forEach((function(t){t.scrollHeader(e)}))},ow.prototype.getRowIndex=function(e){},ow.prototype.conformRowData=function(e){return this.field?e[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(e=this.parent.conformRowData(e)),e},ow.prototype.removeRow=function(e){var t=this.rows.indexOf(e),n=e.getElement();t>-1&&this.rows.splice(t,1),this.groupManager.table.options.groupValues||this.rows.length?(n.parentNode&&n.parentNode.removeChild(n),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},ow.prototype.removeGroup=function(e){var t,n=e.level+"_"+e.key;this.groups[n]&&(delete this.groups[n],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},ow.prototype.getHeadersAndRows=function(e){var t=[];return t.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach((function(n){t=t.concat(n.getHeadersAndRows(e))})):(!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top)),t=t.concat(this.rows),!e&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom))):this.groupList.length||"table"==this.groupManager.table.options.columnCalcs||this.groupManager.table.modExists("columnCalcs")&&(!e&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),t.push(this.calcs.top))),!e&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),t.push(this.calcs.bottom)))),t},ow.prototype.getData=function(e,t){var n=[];return this._visSet(),(!e||e&&this.visible)&&this.rows.forEach((function(e){n.push(e.getData(t||"data"))})),n},ow.prototype.getRowCount=function(){var e=0;return this.groupList.length?this.groupList.forEach((function(t){e+=t.getRowCount()})):e=this.rows.length,e},ow.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},ow.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach((function(e){e.getHeadersAndRows().forEach((function(e){e.detachElement()}))})):this.rows.forEach((function(e){var t=e.getElement();t.parentNode.removeChild(t)})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},ow.prototype.show=function(){var e=this;if(e.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=e.getElement();this.groupList.length?this.groupList.forEach((function(e){e.getHeadersAndRows().forEach((function(e){var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n}))})):e.rows.forEach((function(e){var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n})),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},ow.prototype._visSet=function(){var e=[];"function"==typeof this.visible&&(this.rows.forEach((function(t){e.push(t.getData())})),this.visible=this.visible(this.key,this.getRowCount(),e,this.getComponent()))},ow.prototype.getRowGroup=function(e){var t=!1;return this.groupList.length?this.groupList.forEach((function(n){var r=n.getRowGroup(e);r&&(t=r)})):this.rows.find((function(t){return t===e}))&&(t=this),t},ow.prototype.getSubGroups=function(e){var t=[];return this.groupList.forEach((function(n){t.push(e?n.getComponent():n)})),t},ow.prototype.getRows=function(e){var t=[];return this.rows.forEach((function(n){t.push(e?n.getComponent():n)})),t},ow.prototype.generateGroupHeaderContents=function(){var e=[];for(this.rows.forEach((function(t){e.push(t.getData())})),this.elementContents=this.generator(this.key,this.getRowCount(),e,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},ow.prototype.getPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.unshift(this.key),this.parent&&this.parent.getPath(e),e},ow.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var e=0;e<this.element.childNodes.length;++e)this.element.childNodes[e].parentNode.removeChild(this.element.childNodes[e]);return this.generateGroupHeaderContents(),this.element},ow.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},ow.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},ow.prototype.initialize=function(e){this.initialized&&!e||(this.normalizeHeight(),this.initialized=!0)},ow.prototype.reinitialize=function(){this.initialized=!1,this.height=0,YE.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},ow.prototype.setHeight=function(e){this.height!=e&&(this.height=e,this.outerHeight=this.element.offsetHeight)},ow.prototype.getHeight=function(){return this.outerHeight},ow.prototype.getGroup=function(){return this},ow.prototype.reinitializeHeight=function(){},ow.prototype.calcHeight=function(){},ow.prototype.setCellHeight=function(){},ow.prototype.clearCellHeight=function(){},ow.prototype.getComponent=function(){return this.component||(this.component=new iw(this)),this.component};var aw=function(e){this.table=e,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0};aw.prototype.initialize=function(){var e=this,t=e.table.options.groupBy,n=e.table.options.groupStartOpen,r=e.table.options.groupHeader;(this.allowedValues=e.table.options.groupValues,Array.isArray(t)&&Array.isArray(r)&&t.length>r.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),e.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],e.table.modules.localize.bind("groups|item",(function(t,n){e.headerGenerator[0]=function(e,r,i){return(void 0===e?"":e)+"<span>("+r+" "+(1===r?t:n.groups.items)+")</span>"}})),this.groupIDLookups=[],Array.isArray(t)||t)?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach((function(t){t.definition.topCalc&&e.table.modules.columnCalcs.initializeTopRow(),t.definition.bottomCalc&&e.table.modules.columnCalcs.initializeBottomRow()}));Array.isArray(t)||(t=[t]),t.forEach((function(t,n){var r,i;r="function"==typeof t?t:(i=e.table.columnManager.getColumnByField(t))?function(e){return i.getFieldValue(e)}:function(e){return e[t]},e.groupIDLookups.push({field:"function"!=typeof t&&t,func:r,values:!!e.allowedValues&&e.allowedValues[n]})})),n&&(Array.isArray(n)||(n=[n]),n.forEach((function(e){e="function"==typeof e?e:function(){return!0}})),e.startOpen=n),r&&(e.headerGenerator=Array.isArray(r)?r:[r]),this.initialized=!0},aw.prototype.setDisplayIndex=function(e){this.displayIndex=e},aw.prototype.getDisplayIndex=function(){return this.displayIndex},aw.prototype.getRows=function(e){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(e),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):e.slice(0)},aw.prototype.getGroups=function(e){var t=[];return this.groupList.forEach((function(n){t.push(e?n.getComponent():n)})),t},aw.prototype.getChildGroups=function(e){var t=this,n=[];return e||(e=this),e.groupList.forEach((function(e){e.groupList.length?n=n.concat(t.getChildGroups(e)):n.push(e)})),n},aw.prototype.wipe=function(){this.groupList.forEach((function(e){e.wipe()}))},aw.prototype.pullGroupListData=function(e){var t=this,n=[];return e.forEach((function(e){var r={level:0,rowCount:0,headerContent:""},i=[];e.hasSubGroups?(i=t.pullGroupListData(e.groupList),r.level=e.level,r.rowCount=i.length-e.groupList.length,r.headerContent=e.generator(e.key,r.rowCount,e.rows,e),n.push(r),n=n.concat(i)):(r.level=e.level,r.headerContent=e.generator(e.key,e.rows.length,e.rows,e),r.rowCount=e.getRows().length,n.push(r),e.getRows().forEach((function(e){n.push(e.getData("data"))})))})),n},aw.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},aw.prototype.getRowGroup=function(e){var t=!1;return this.groupList.forEach((function(n){var r=n.getRowGroup(e);r&&(t=r)})),t},aw.prototype.countGroups=function(){return this.groupList.length},aw.prototype.generateGroups=function(e){var t=this,n=t.groups;t.groups={},t.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach((function(e){t.createGroup(e,0,n)})),e.forEach((function(e){t.assignRowToExistingGroup(e,n)}))):e.forEach((function(e){t.assignRowToGroup(e,n)}))},aw.prototype.createGroup=function(e,t,n){var r,i=t+"_"+e;n=n||[],r=new ow(this,!1,t,e,this.groupIDLookups[0].field,this.headerGenerator[0],n[i]),this.groups[i]=r,this.groupList.push(r)},aw.prototype.assignRowToExistingGroup=function(e,t){var n="0_"+this.groupIDLookups[0].func(e.getData());this.groups[n]&&this.groups[n].addRow(e)},aw.prototype.assignRowToGroup=function(e,t){var n=this.groupIDLookups[0].func(e.getData()),r=!this.groups["0_"+n];return r&&this.createGroup(n,0,t),this.groups["0_"+n].addRow(e),!r},aw.prototype.reassignRowToGroup=function(e){var t=e.getGroup(),n=t.getPath(),r=this.getExpectedPath(e);n.length==r.length&&n.every((function(e,t){return e===r[t]}))||(t.removeRow(e),this.assignRowToGroup(e,self.groups),this.table.rowManager.refreshActiveData("group",!1,!0))},aw.prototype.getExpectedPath=function(e){var t=[],n=e.getData();return this.groupIDLookups.forEach((function(e){t.push(e.func(n))})),t},aw.prototype.updateGroupRows=function(e){var t=this,n=[];if(t.groupList.forEach((function(e){n=n.concat(e.getHeadersAndRows())})),e){var r=t.table.rowManager.setDisplayRows(n,this.getDisplayIndex());!0!==r&&this.setDisplayIndex(r),t.table.rowManager.refreshActiveData("group",!0,!0)}return n},aw.prototype.scrollHeaders=function(e){this.table.options.virtualDomHoz&&(e-=this.table.vdomHoz.vDomPadLeft),e+="px",this.groupList.forEach((function(t){t.scrollHeader(e)}))},aw.prototype.removeGroup=function(e){var t,n=e.level+"_"+e.key;this.groups[n]&&(delete this.groups[n],(t=this.groupList.indexOf(e))>-1&&this.groupList.splice(t,1))},YE.prototype.registerModule("groupRows",aw);var sw=function(e){this.table=e,this.history=[],this.index=-1};sw.prototype.clear=function(){this.history=[],this.index=-1},sw.prototype.action=function(e,t,n){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:t,data:n}),this.index++},sw.prototype.getHistoryUndoSize=function(){return this.index+1},sw.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},sw.prototype.clearComponentHistory=function(e){var t=this.history.findIndex((function(t){return t.component===e}));t>-1&&(this.history.splice(t,1),t<=this.index&&this.index--,this.clearComponentHistory(e))},sw.prototype.undo=function(){if(this.index>-1){var e=this.history[this.index];return this.undoers[e.type].call(this,e),this.index--,this.table.options.historyUndo.call(this.table,e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},sw.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var e=this.history[this.index];return this.redoers[e.type].call(this,e),this.table.options.historyRedo.call(this.table,e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},sw.prototype.undoers={cellEdit:function(e){e.component.setValueProcessData(e.data.oldValue)},rowAdd:function(e){e.component.deleteActual()},rowDelete:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posFrom],!e.data.after),this.table.rowManager.redraw()}},sw.prototype.redoers={cellEdit:function(e){e.component.setValueProcessData(e.data.newValue)},rowAdd:function(e){var t=this.table.rowManager.addRowActual(e.data.data,e.data.pos,e.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(e.component,t)},rowDelete:function(e){e.component.deleteActual()},rowMove:function(e){this.table.rowManager.moveRowActual(e.component,this.table.rowManager.rows[e.data.posTo],e.data.after),this.table.rowManager.redraw()}},sw.prototype._rebindRow=function(e,t){this.history.forEach((function(n){if(n.component instanceof IE)n.component===e&&(n.component=t);else if(n.component instanceof FE&&n.component.row===e){var r=n.component.column.getField();r&&(n.component=t.getCell(r))}}))},YE.prototype.registerModule("history",sw);var lw=function(e){this.table=e,this.fieldIndex=[],this.hasIndex=!1};lw.prototype.parseTable=function(){var e=this,t=e.table.element,n=e.table.options,r=(n.columns,t.getElementsByTagName("th")),i=t.getElementsByTagName("tbody")[0],o=[];e.hasIndex=!1,e.table.options.htmlImporting.call(this.table),i=i?i.getElementsByTagName("tr"):[],e._extractOptions(t,n),r.length?e._extractHeaders(r,i):e._generateBlankHeaders(r,i);for(var a=0;a<i.length;a++){var s=i[a].getElementsByTagName("td"),l={};e.hasIndex||(l[n.index]=a);for(var c=0;c<s.length;c++){var d=s[c];void 0!==this.fieldIndex[c]&&(l[this.fieldIndex[c]]=d.innerHTML)}o.push(l)}var u=document.createElement("div"),h=t.attributes;for(var c in h)"object"==AE(h[c])&&u.setAttribute(h[c].name,h[c].value);t.parentNode.replaceChild(u,t),n.data=o,e.table.options.htmlImported.call(this.table),this.table.element=u},lw.prototype._extractOptions=function(e,t,n){var r=e.attributes,i=n?Object.assign([],n):Object.keys(t),o={};for(var a in i.forEach((function(e){o[e.toLowerCase()]=e})),r){var s,l=r[a];l&&"object"==(void 0===l?"undefined":AE(l))&&l.name&&0===l.name.indexOf("tabulator-")&&(s=l.name.replace("tabulator-",""),void 0!==o[s]&&(t[o[s]]=this._attribValue(l.value)))}},lw.prototype._attribValue=function(e){return"true"===e||"false"!==e&&e},lw.prototype._findCol=function(e){return this.table.options.columns.find((function(t){return t.title===e}))||!1},lw.prototype._extractHeaders=function(e,t){for(var n=0;n<e.length;n++){var r,i=e[n],o=!1,a=this._findCol(i.textContent);a?o=!0:a={title:i.textContent.trim()},a.field||(a.field=i.textContent.trim().toLowerCase().replace(" ","_")),(r=i.getAttribute("width"))&&!a.width&&(a.width=r),i.attributes,this._extractOptions(i,a,DE.prototype.defaultOptionList),this.fieldIndex[n]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),o||this.table.options.columns.push(a)}},lw.prototype._generateBlankHeaders=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i={title:"",field:"col"+n};this.fieldIndex[n]=i.field;var o=r.getAttribute("width");o&&(i.width=o),this.table.options.columns.push(i)}},YE.prototype.registerModule("htmlTableImport",lw);var cw=function(e){this.table=e,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1};cw.prototype.initialize=function(){var e=this.table.options.keybindings,t={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(var n in this.bindings)t[n]=this.bindings[n];if(Object.keys(e).length)for(var r in e)t[r]=e[r];this.mapBindings(t),this.bindEvents()}},cw.prototype.mapBindings=function(e){var t=this,n=this,r=function(r){t.actions[r]?e[r]&&("object"!==AE(e[r])&&(e[r]=[e[r]]),e[r].forEach((function(e){n.mapBinding(r,e)}))):console.warn("Key Binding Error - no such action:",r)};for(var i in e)r(i)},cw.prototype.mapBinding=function(e,t){var n=this,r={action:this.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};t.toString().toLowerCase().split(" ").join("").split("+").forEach((function(e){switch(e){case"ctrl":r.ctrl=!0;break;case"shift":r.shift=!0;break;case"meta":r.meta=!0;break;default:e=parseInt(e),r.keys.push(e),n.watchKeys[e]||(n.watchKeys[e]=[]),n.watchKeys[e].push(r)}}))},cw.prototype.bindEvents=function(){var e=this;this.keyupBinding=function(t){var n=t.keyCode,r=e.watchKeys[n];r&&(e.pressedKeys.push(n),r.forEach((function(n){e.checkBinding(t,n)})))},this.keydownBinding=function(t){var n=t.keyCode;if(e.watchKeys[n]){var r=e.pressedKeys.indexOf(n);r>-1&&e.pressedKeys.splice(r,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},cw.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},cw.prototype.checkBinding=function(e,t){var n=this,r=!0;return e.ctrlKey==t.ctrl&&e.shiftKey==t.shift&&e.metaKey==t.meta&&(t.keys.forEach((function(e){-1==n.pressedKeys.indexOf(e)&&(r=!1)})),r&&t.action.call(n,e),!0)},cw.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},cw.prototype.actions={keyBlock:function(e){e.stopPropagation(),e.preventDefault()},scrollPageUp:function(e){var t=this.table.rowManager,n=t.scrollTop-t.height;t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(n>=0?t.element.scrollTop=n:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(e){var t=this.table.rowManager,n=t.scrollTop+t.height,r=t.element.scrollHeight;e.preventDefault(),t.displayRowsCount&&(n<=r?t.element.scrollTop=n:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(e){var t=this.table.rowManager;e.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().prev())},navNext:function(e){var t,n=!1,r=this.table.options.tabEndNewRow;this.table.modExists("edit")&&(n=this.table.modules.edit.currentCell)&&(e.preventDefault(),(t=n.nav()).next()||r&&(n.getElement().firstChild.blur(),(r=!0===r?this.table.addRow({}):"function"==typeof r?this.table.addRow(r(n.row.getComponent())):this.table.addRow(Object.assign({},r))).then((function(){setTimeout((function(){t.next()}))}))))},navLeft:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().left())},navRight:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().right())},navUp:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().up())},navDown:function(e){var t=!1;this.table.modExists("edit")&&(t=this.table.modules.edit.currentCell)&&(e.preventDefault(),t.nav().down())},undo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.undo()))},redo:function(e){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(e.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(e){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}},YE.prototype.registerModule("keybindings",cw);var dw=function(e){this.table=e,this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1};dw.prototype.initializeColumnHeader=function(e){var t,n=this;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((t=document.createElement("span")).classList.add("tabulator-header-menu-button"),t.innerHTML="&vellip;",t.addEventListener("click",(function(t){t.stopPropagation(),t.preventDefault(),n.LoadMenuEvent(e,e.definition.headerMenu,t)})),e.titleElement.insertBefore(t,e.titleElement.firstChild))},dw.prototype.LoadMenuEvent=function(e,t,n){t="function"==typeof t?t.call(this.table,e.getComponent(),n):t,this.loadMenu(n,e,t)},dw.prototype.tapHold=function(e,t){var n=this,r=e.getElement(),i=null,o=!1;r.addEventListener("touchstart",(function(r){clearTimeout(i),o=!1,i=setTimeout((function(){clearTimeout(i),i=null,o=!0,n.LoadMenuEvent(e,t,r)}),1e3)}),{passive:!0}),r.addEventListener("touchend",(function(e){clearTimeout(i),i=null,o&&e.preventDefault()}))},dw.prototype.initializeCell=function(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))},dw.prototype.initializeRow=function(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))},dw.prototype.initializeGroup=function(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))},dw.prototype.loadMenu=function(e,t,n,r){var i=this,o=!(e instanceof MouseEvent),a=document.createElement("div");if(a.classList.add("tabulator-menu"),o||e.preventDefault(),n&&n.length){if(!r){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout((function(){i.nestedMenuBlock=!1}),100);this.hideMenu(),this.menuElements=[]}n.forEach((function(e){var n=document.createElement("div"),r=e.label,o=e.disabled;e.separator?n.classList.add("tabulator-menu-separator"):(n.classList.add("tabulator-menu-item"),"function"==typeof r&&(r=r.call(i.table,t.getComponent())),r instanceof Node?n.appendChild(r):n.innerHTML=r,"function"==typeof o&&(o=o.call(i.table,t.getComponent())),o?(n.classList.add("tabulator-menu-item-disabled"),n.addEventListener("click",(function(e){e.stopPropagation()}))):e.menu&&e.menu.length?n.addEventListener("click",(function(r){r.stopPropagation(),i.hideOldSubMenus(a),i.loadMenu(r,t,e.menu,n)})):e.action&&n.addEventListener("click",(function(n){e.action(n,t.getComponent())})),e.menu&&e.menu.length&&n.classList.add("tabulator-menu-item-submenu")),a.appendChild(n)})),a.addEventListener("click",(function(e){i.hideMenu()})),this.menuElements.push(a),this.positionMenu(a,r,o,e)}},dw.prototype.hideOldSubMenus=function(e){var t=this.menuElements.indexOf(e);if(t>-1)for(var n=this.menuElements.length-1;n>t;n--){var r=this.menuElements[n];r.parentNode&&r.parentNode.removeChild(r),this.menuElements.pop()}},dw.prototype.positionMenu=function(e,t,n,r){var i,o,a,s=this,l=Math.max(document.body.offsetHeight,window.innerHeight);t?(i=(a=YE.prototype.helpers.elOffset(t)).left+t.offsetWidth,o=a.top-1):(i=n?r.touches[0].pageX:r.pageX,o=n?r.touches[0].pageY:r.pageY,this.positionReversedX=!1),e.style.top=o+"px",e.style.left=i+"px",setTimeout((function(){s.table.rowManager.element.addEventListener("scroll",s.blurEvent),document.body.addEventListener("click",s.blurEvent),document.body.addEventListener("contextmenu",s.blurEvent),window.addEventListener("resize",s.blurEvent),document.body.addEventListener("keydown",s.escEvent)}),100),document.body.appendChild(e),o+e.offsetHeight>=l&&(e.style.top="",e.style.bottom=t?l-a.top-t.offsetHeight-1+"px":l-o+"px"),(i+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=t?document.documentElement.offsetWidth-a.left+"px":document.documentElement.offsetWidth-i+"px",this.positionReversedX=!0)},dw.prototype.isOpen=function(){return!!this.menuElements.length},dw.prototype.escMenu=function(e){27==e.keyCode&&this.hideMenu()},dw.prototype.hideMenu=function(){this.menuElements.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)},dw.prototype.menus={},YE.prototype.registerModule("menu",dw);var uw=function(e){this.table=e,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};uw.prototype.createPlaceholderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e},uw.prototype.initializeColumn=function(e){var t,n=this,r={};e.modules.frozen||(t=e.getElement(),r.mousemove=function(r){e.parent===n.moving.parent&&((n.touchMove?r.touches[0].pageX:r.pageX)-YE.prototype.helpers.elOffset(t).left+n.table.columnManager.element.scrollLeft>e.getWidth()/2?n.toCol===e&&n.toColAfter||(t.parentNode.insertBefore(n.placeholderElement,t.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(t.parentNode.insertBefore(n.placeholderElement,t),n.moveColumn(e,!1)))}.bind(n),t.addEventListener("mousedown",(function(t){n.touchMove=!1,1===t.which&&(n.checkTimeout=setTimeout((function(){n.startMove(t,e)}),n.checkPeriod))})),t.addEventListener("mouseup",(function(e){1===e.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)})),n.bindTouchEvents(e)),e.modules.moveColumn=r},uw.prototype.bindTouchEvents=function(e){var t,n,r,i,o,a,s=this,l=e.getElement(),c=!1;l.addEventListener("touchstart",(function(l){s.checkTimeout=setTimeout((function(){s.touchMove=!0,e,t=e.nextColumn(),r=t?t.getWidth()/2:0,n=e.prevColumn(),i=n?n.getWidth()/2:0,o=0,a=0,c=!1,s.startMove(l,e)}),s.checkPeriod)}),{passive:!0}),l.addEventListener("touchmove",(function(l){var d,u;s.moving&&(s.moveHover(l),c||(c=l.touches[0].pageX),(d=l.touches[0].pageX-c)>0?t&&d-o>r&&(u=t)!==e&&(c=l.touches[0].pageX,u.getElement().parentNode.insertBefore(s.placeholderElement,u.getElement().nextSibling),s.moveColumn(u,!0)):n&&-d-a>i&&(u=n)!==e&&(c=l.touches[0].pageX,u.getElement().parentNode.insertBefore(s.placeholderElement,u.getElement()),s.moveColumn(u,!1)),u&&(u,t=u.nextColumn(),o=r,r=t?t.getWidth()/2:0,n=u.prevColumn(),a=i,i=n?n.getWidth()/2:0))}),{passive:!0}),l.addEventListener("touchend",(function(e){s.checkTimeout&&clearTimeout(s.checkTimeout),s.moving&&s.endMove(e)}))},uw.prototype.startMove=function(e,t){var n=t.getElement();this.moving=t,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-YE.prototype.helpers.elOffset(n).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)},uw.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach((function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)}))},uw.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach((function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)}))},uw.prototype.moveColumn=function(e,t){var n=this.moving.getCells();this.toCol=e,this.toColAfter=t,t?e.getCells().forEach((function(e,t){var r=e.getElement(!0);r.parentNode.insertBefore(n[t].getElement(),r.nextSibling)})):e.getCells().forEach((function(e,t){var r=e.getElement(!0);r.parentNode.insertBefore(n[t].getElement(),r)}))},uw.prototype.endMove=function(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))},uw.prototype.moveHover=function(e){var t,n=this,r=n.table.columnManager.getElement(),i=r.scrollLeft,o=(n.touchMove?e.touches[0].pageX:e.pageX)-YE.prototype.helpers.elOffset(r).left+i;n.hoverElement.style.left=o-n.startX+"px",o-i<n.autoScrollMargin&&(n.autoScrollTimeout||(n.autoScrollTimeout=setTimeout((function(){t=Math.max(0,i-5),n.table.rowManager.getElement().scrollLeft=t,n.autoScrollTimeout=!1}),1))),i+r.clientWidth-o<n.autoScrollMargin&&(n.autoScrollTimeout||(n.autoScrollTimeout=setTimeout((function(){t=Math.min(r.clientWidth,i+5),n.table.rowManager.getElement().scrollLeft=t,n.autoScrollTimeout=!1}),1)))},YE.prototype.registerModule("moveColumn",uw);var hw=function(e){this.table=e,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1};hw.prototype.createPlaceholderElement=function(){var e=document.createElement("div");return e.classList.add("tabulator-row"),e.classList.add("tabulator-row-placeholder"),e},hw.prototype.initialize=function(e){this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements},hw.prototype.setHandle=function(e){this.hasHandle=e},hw.prototype.initializeGroupHeader=function(e){var t=this,n={};n.mouseup=function(e){t.tableRowDrop(e,row)}.bind(t),n.mousemove=function(n){var r;n.pageY-YE.prototype.helpers.elOffset(e.element).top+t.table.rowManager.element.scrollTop>e.getHeight()/2?t.toRow===e&&t.toRowAfter||((r=e.getElement()).parentNode.insertBefore(t.placeholderElement,r.nextSibling),t.moveRow(e,!0)):(t.toRow!==e||t.toRowAfter)&&(r=e.getElement()).previousSibling&&(r.parentNode.insertBefore(t.placeholderElement,r),t.moveRow(e,!1))}.bind(t),e.modules.moveRow=n},hw.prototype.initializeRow=function(e){var t,n=this,r={};r.mouseup=function(t){n.tableRowDrop(t,e)}.bind(n),r.mousemove=function(t){var r=e.getElement();t.pageY-YE.prototype.helpers.elOffset(r).top+n.table.rowManager.element.scrollTop>e.getHeight()/2?n.toRow===e&&n.toRowAfter||(r.parentNode.insertBefore(n.placeholderElement,r.nextSibling),n.moveRow(e,!0)):(n.toRow!==e||n.toRowAfter)&&(r.parentNode.insertBefore(n.placeholderElement,r),n.moveRow(e,!1))}.bind(n),this.hasHandle||((t=e.getElement()).addEventListener("mousedown",(function(t){1===t.which&&(n.checkTimeout=setTimeout((function(){n.startMove(t,e)}),n.checkPeriod))})),t.addEventListener("mouseup",(function(e){1===e.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)})),this.bindTouchEvents(e,e.getElement())),e.modules.moveRow=r},hw.prototype.initializeCell=function(e){var t=this,n=e.getElement(!0);n.addEventListener("mousedown",(function(n){1===n.which&&(t.checkTimeout=setTimeout((function(){t.startMove(n,e.row)}),t.checkPeriod))})),n.addEventListener("mouseup",(function(e){1===e.which&&t.checkTimeout&&clearTimeout(t.checkTimeout)})),this.bindTouchEvents(e.row,n)},hw.prototype.bindTouchEvents=function(e,t){var n,r,i,o,a,s,l=this,c=!1;t.addEventListener("touchstart",(function(t){l.checkTimeout=setTimeout((function(){l.touchMove=!0,e,n=e.nextRow(),i=n?n.getHeight()/2:0,r=e.prevRow(),o=r?r.getHeight()/2:0,a=0,s=0,c=!1,l.startMove(t,e)}),l.checkPeriod)}),{passive:!0}),this.moving,this.toRow,this.toRowAfter,t.addEventListener("touchmove",(function(t){var d,u;l.moving&&(t.preventDefault(),l.moveHover(t),c||(c=t.touches[0].pageY),(d=t.touches[0].pageY-c)>0?n&&d-a>i&&(u=n)!==e&&(c=t.touches[0].pageY,u.getElement().parentNode.insertBefore(l.placeholderElement,u.getElement().nextSibling),l.moveRow(u,!0)):r&&-d-s>o&&(u=r)!==e&&(c=t.touches[0].pageY,u.getElement().parentNode.insertBefore(l.placeholderElement,u.getElement()),l.moveRow(u,!1)),u&&(u,n=u.nextRow(),a=i,i=n?n.getHeight()/2:0,r=u.prevRow(),s=o,o=r?r.getHeight()/2:0))})),t.addEventListener("touchend",(function(e){l.checkTimeout&&clearTimeout(l.checkTimeout),l.moving&&(l.endMove(e),l.touchMove=!1)}))},hw.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach((function(e){"row"!==e.type&&"group"!==e.type||!e.modules.moveRow.mousemove||e.getElement().addEventListener("mousemove",e.modules.moveRow.mousemove)}))},hw.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach((function(e){"row"!==e.type&&"group"!==e.type||!e.modules.moveRow.mousemove||e.getElement().removeEventListener("mousemove",e.modules.moveRow.mousemove)}))},hw.prototype.startMove=function(e,t){var n=t.getElement();this.setStartPosition(e,t),this.moving=t,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=t.getWidth()+"px",this.placeholderElement.style.height=t.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(t)):(n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n)),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(e)},hw.prototype.setStartPosition=function(e,t){var n,r,i=this.touchMove?e.touches[0].pageX:e.pageX,o=this.touchMove?e.touches[0].pageY:e.pageY;n=t.getElement(),this.connection?(r=n.getBoundingClientRect(),this.startX=r.left-i+window.pageXOffset,this.startY=r.top-o+window.pageYOffset):this.startY=o-n.getBoundingClientRect().top},hw.prototype.endMove=function(e){e&&1!==e.which&&!this.touchMove||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},hw.prototype.moveRow=function(e,t){this.toRow=e,this.toRowAfter=t},hw.prototype.moveHover=function(e){this.connection?this.moveHoverConnections.call(this,e):this.moveHoverTable.call(this,e)},hw.prototype.moveHoverTable=function(e){var t=this.table.rowManager.getElement(),n=t.scrollTop,r=(this.touchMove?e.touches[0].pageY:e.pageY)-t.getBoundingClientRect().top+n;this.hoverElement.style.top=r-this.startY+"px"},hw.prototype.moveHoverConnections=function(e){this.hoverElement.style.left=this.startX+(this.touchMove?e.touches[0].pageX:e.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?e.touches[0].pageY:e.pageY)+"px"},hw.prototype.elementRowDrop=function(e,t,n){this.table.options.movableRowsElementDrop&&this.table.options.movableRowsElementDrop(e,t,!!n&&n.getComponent())},hw.prototype.connectToTables=function(e){var t,n=this;this.connectionSelectorsTables&&(t=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStart.call(this.table,t),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","connect",{row:e})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach((function(e){"string"==typeof e?n.connectionElements=n.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(e))):n.connectionElements.push(e)})),this.connectionElements.forEach((function(e){var t=function(t){n.elementRowDrop(t,e,n.moving)};e.addEventListener("mouseup",t),e.tabulatorElementDropEvent=t,e.classList.add("tabulator-movingrow-receiving")})))},hw.prototype.disconnectFromTables=function(){var e;this.connectionSelectorsTables&&(e=this.table.modules.comms.getConnections(this.connectionSelectorsTables),this.table.options.movableRowsSendingStop.call(this.table,e),this.table.modules.comms.send(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach((function(e){e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent}))},hw.prototype.connect=function(e,t){var n=this;return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=e,this.connectedRow=t,this.table.element.classList.add("tabulator-movingrow-receiving"),n.table.rowManager.getDisplayRows().forEach((function(e){"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().addEventListener("mouseup",e.modules.moveRow.mouseup)})),n.tableRowDropEvent=n.tableRowDrop.bind(n),n.table.element.addEventListener("mouseup",n.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,t,e),!0)},hw.prototype.disconnect=function(e){var t=this;e===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),t.table.rowManager.getDisplayRows().forEach((function(e){"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)})),t.table.element.removeEventListener("mouseup",t.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,e)):console.warn("Move Row Error - trying to disconnect from non connected table")},hw.prototype.dropComplete=function(e,t,n){var r=!1;if(n){switch(AE(this.table.options.movableRowsSender)){case"string":r=this.senders[this.table.options.movableRowsSender];break;case"function":r=this.table.options.movableRowsSender}r?r.call(this,this.moving.getComponent(),t?t.getComponent():void 0,e):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),t?t.getComponent():void 0,e)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),t?t.getComponent():void 0,e);this.endMove()},hw.prototype.tableRowDrop=function(e,t){var n=!1,r=!1;switch(e.stopImmediatePropagation(),AE(this.table.options.movableRowsReceiver)){case"string":n=this.receivers[this.table.options.movableRowsReceiver];break;case"function":n=this.table.options.movableRowsReceiver}n?r=n.call(this,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),r?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),t?t.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:t,success:r})},hw.prototype.receivers={insert:function(e,t,n){return this.table.addRow(e.getData(),void 0,t),!0},add:function(e,t,n){return this.table.addRow(e.getData()),!0},update:function(e,t,n){return!!t&&(t.update(e.getData()),!0)},replace:function(e,t,n){return!!t&&(this.table.addRow(e.getData(),void 0,t),t.delete(),!0)}},hw.prototype.senders={delete:function(e,t,n){e.delete()}},hw.prototype.commsReceived=function(e,t,n){switch(t){case"connect":return this.connect(e,n.row);case"disconnect":return this.disconnect(e);case"dropcomplete":return this.dropComplete(e,n.row,n.success)}},YE.prototype.registerModule("moveRow",hw);var pw=function(e){this.table=e,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0};pw.prototype.initializeColumn=function(e){var t=this,n=!1,r={};this.allowedTypes.forEach((function(i){var o,a="mutator"+(i.charAt(0).toUpperCase()+i.slice(1));e.definition[a]&&(o=t.lookupMutator(e.definition[a]))&&(n=!0,r[a]={mutator:o,params:e.definition[a+"Params"]||{}})})),n&&(e.modules.mutate=r)},pw.prototype.lookupMutator=function(e){var t=!1;switch(void 0===e?"undefined":AE(e)){case"string":this.mutators[e]?t=this.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":t=e}return t},pw.prototype.transformRow=function(e,t,n){var r,i="mutator"+(t.charAt(0).toUpperCase()+t.slice(1));return this.enabled&&this.table.columnManager.traverse((function(o){var a,s,l;o.modules.mutate&&(a=o.modules.mutate[i]||o.modules.mutate.mutator||!1)&&(r=o.getFieldValue(void 0!==n?n:e),"data"!=t&&void 0===r||(l=o.getComponent(),s="function"==typeof a.params?a.params(r,e,t,l):a.params,o.setFieldValue(e,a.mutator(r,e,t,s,l))))})),e},pw.prototype.transformCell=function(e,t){var n=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,r={};return n?(r=Object.assign(r,e.row.getData()),e.column.setFieldValue(r,t),n.mutator(t,r,"edit",n.params,e.getComponent())):t},pw.prototype.enable=function(){this.enabled=!0},pw.prototype.disable=function(){this.enabled=!1},pw.prototype.mutators={},YE.prototype.registerModule("mutator",pw);var fw=function(e){this.table=e,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.createElements()};fw.prototype.createElements=function(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))},fw.prototype.generatePageSizeSelectList=function(){var e=this,t=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))t=this.table.options.paginationSizeSelector,this.pageSizes=t,-1==this.pageSizes.indexOf(this.size)&&t.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){t=[];for(var n=1;n<5;n++)t.push(this.size*n);this.pageSizes=t}else t=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);t.forEach((function(t){var n=document.createElement("option");n.value=t,!0===t?e.table.modules.localize.bind("pagination|all",(function(e){n.innerHTML=e})):n.innerHTML=t,e.pageSizeSelect.appendChild(n)})),this.pageSizeSelect.value=this.size}},fw.prototype.initialize=function(e){var t,n,r,i=this;this.dataSentNames=Object.assign({},this.paginationDataSentNames),this.dataSentNames=Object.assign(this.dataSentNames,this.table.options.paginationDataSent),this.dataReceivedNames=Object.assign({},this.paginationDataReceivedNames),this.dataReceivedNames=Object.assign(this.dataReceivedNames,this.table.options.paginationDataReceived),i.table.modules.localize.bind("pagination|first",(function(e){i.firstBut.innerHTML=e})),i.table.modules.localize.bind("pagination|first_title",(function(e){i.firstBut.setAttribute("aria-label",e),i.firstBut.setAttribute("title",e)})),i.table.modules.localize.bind("pagination|prev",(function(e){i.prevBut.innerHTML=e})),i.table.modules.localize.bind("pagination|prev_title",(function(e){i.prevBut.setAttribute("aria-label",e),i.prevBut.setAttribute("title",e)})),i.table.modules.localize.bind("pagination|next",(function(e){i.nextBut.innerHTML=e})),i.table.modules.localize.bind("pagination|next_title",(function(e){i.nextBut.setAttribute("aria-label",e),i.nextBut.setAttribute("title",e)})),i.table.modules.localize.bind("pagination|last",(function(e){i.lastBut.innerHTML=e})),i.table.modules.localize.bind("pagination|last_title",(function(e){i.lastBut.setAttribute("aria-label",e),i.lastBut.setAttribute("title",e)})),i.firstBut.addEventListener("click",(function(){i.setPage(1).then((function(){})).catch((function(){}))})),i.prevBut.addEventListener("click",(function(){i.previousPage().then((function(){})).catch((function(){}))})),i.nextBut.addEventListener("click",(function(){i.nextPage().then((function(){})).catch((function(){}))})),i.lastBut.addEventListener("click",(function(){i.setPage(i.max).then((function(){})).catch((function(){}))})),i.table.options.paginationElement&&(i.element=i.table.options.paginationElement),this.pageSizeSelect&&(t=document.createElement("label"),i.table.modules.localize.bind("pagination|page_size",(function(e){i.pageSizeSelect.setAttribute("aria-label",e),i.pageSizeSelect.setAttribute("title",e),t.innerHTML=e})),i.element.appendChild(t),i.element.appendChild(i.pageSizeSelect),i.pageSizeSelect.addEventListener("change",(function(e){i.setPageSize("true"==i.pageSizeSelect.value||i.pageSizeSelect.value),i.setPage(1).then((function(){})).catch((function(){}))}))),i.element.appendChild(i.firstBut),i.element.appendChild(i.prevBut),i.element.appendChild(i.pagesElement),i.element.appendChild(i.nextBut),i.element.appendChild(i.lastBut),i.table.options.paginationElement||e||i.table.footerManager.append(i.element,i),i.mode=i.table.options.pagination,i.table.options.paginationSize?i.size=i.table.options.paginationSize:((n=document.createElement("div")).classList.add("tabulator-row"),n.style.visibility=e,(r=document.createElement("div")).classList.add("tabulator-cell"),r.innerHTML="Page Row Test",n.appendChild(r),i.table.rowManager.getTableElement().appendChild(n),i.size=Math.floor(i.table.rowManager.getElement().clientHeight/n.offsetHeight),i.table.rowManager.getTableElement().removeChild(n)),i.count=i.table.options.paginationButtonCount,i.generatePageSizeSelectList()},fw.prototype.initializeProgressive=function(e){this.initialize(!0),this.mode="progressive_"+e,this.progressiveLoad=!0},fw.prototype.setDisplayIndex=function(e){this.displayIndex=e},fw.prototype.getDisplayIndex=function(){return this.displayIndex},fw.prototype.setMaxRows=function(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)},fw.prototype.reset=function(e,t){return("local"==this.mode||e)&&(this.page=1),t&&(this.initialLoad=!0),!0},fw.prototype.setMaxPage=function(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())},fw.prototype.setPage=function(e){var t=this,n=this;switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return new Promise((function(r,i){(e=parseInt(e))>0&&e<=t.max||"local"!==t.mode?(t.page=e,t.trigger().then((function(){r()})).catch((function(){i()})),n.table.options.persistence&&n.table.modExists("persistence",!0)&&n.table.modules.persistence.config.page&&n.table.modules.persistence.save("page")):(console.warn("Pagination Error - Requested page is out of range of 1 - "+t.max+":",e),i())}))},fw.prototype.setPageToRow=function(e){var t=this;return new Promise((function(n,r){var i=t.table.rowManager.getDisplayRows(t.displayIndex-1).indexOf(e);if(i>-1){var o=!0===t.size?1:Math.ceil((i+1)/t.size);t.setPage(o).then((function(){n()})).catch((function(){r()}))}else console.warn("Pagination Error - Requested row is not visible"),r()}))},fw.prototype.setPageSize=function(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.page&&this.table.modules.persistence.save("page")},fw.prototype._setPageButtons=function(){for(var e=this,t=Math.floor((this.count-1)/2),n=Math.ceil((this.count-1)/2),r=this.max-this.page+t+1<this.count?this.max-this.count+1:Math.max(this.page-t,1),i=this.page<=n?Math.min(this.count,this.max):Math.min(this.page+n,this.max);e.pagesElement.firstChild;)e.pagesElement.removeChild(e.pagesElement.firstChild);1==e.page?(e.firstBut.disabled=!0,e.prevBut.disabled=!0):(e.firstBut.disabled=!1,e.prevBut.disabled=!1),e.page==e.max?(e.lastBut.disabled=!0,e.nextBut.disabled=!0):(e.lastBut.disabled=!1,e.nextBut.disabled=!1);for(var o=r;o<=i;o++)o>0&&o<=e.max&&e.pagesElement.appendChild(e._generatePageButton(o));this.footerRedraw()},fw.prototype._generatePageButton=function(e){var t=this,n=document.createElement("button");return n.classList.add("tabulator-page"),e==t.page&&n.classList.add("active"),n.setAttribute("type","button"),n.setAttribute("role","button"),t.table.modules.localize.bind("pagination|page_title",(function(t){n.setAttribute("aria-label",t+" "+e),n.setAttribute("title",t+" "+e)})),n.setAttribute("data-page",e),n.textContent=e,n.addEventListener("click",(function(n){t.setPage(e).then((function(){})).catch((function(){}))})),n},fw.prototype.previousPage=function(){var e=this;return new Promise((function(t,n){e.page>1?(e.page--,e.trigger().then((function(){t()})).catch((function(){n()})),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(console.warn("Pagination Error - Previous page would be less than page 1:",0),n())}))},fw.prototype.nextPage=function(){var e=this;return new Promise((function(t,n){e.page<e.max?(e.page++,e.trigger().then((function(){t()})).catch((function(){n()})),e.table.options.persistence&&e.table.modExists("persistence",!0)&&e.table.modules.persistence.config.page&&e.table.modules.persistence.save("page")):(e.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+e.max+":",e.max+1),n())}))},fw.prototype.getPage=function(){return this.page},fw.prototype.getPageMax=function(){return this.max},fw.prototype.getPageSize=function(e){return this.size},fw.prototype.getMode=function(){return this.mode},fw.prototype.getRows=function(e){var t,n,r;if("local"==this.mode){t=[],!0===this.size?(n=0,r=e.length):r=(n=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var i=n;i<r;i++)e[i]&&t.push(e[i]);return t}return this._setPageButtons(),e.slice(0)},fw.prototype.trigger=function(){var e,t=this;return new Promise((function(n,r){switch(t.mode){case"local":e=t.table.rowManager.scrollLeft,t.table.rowManager.refreshActiveData("page"),t.table.rowManager.scrollHorizontal(e),t.table.options.pageLoaded.call(t.table,t.getPage()),n();break;case"remote":case"progressive_load":case"progressive_scroll":t.table.modules.ajax.blockActiveRequest(),t._getRemotePage().then((function(){n()})).catch((function(){r()}));break;default:console.warn("Pagination Error - no such pagination mode:",t.mode),r()}}))},fw.prototype._getRemotePage=function(){var e,t,n=this,r=this;return new Promise((function(i,o){if(r.table.modExists("ajax",!0)||o(),e=YE.prototype.helpers.deepClone(r.table.modules.ajax.getParams()||{}),(t=r.table.modules.ajax.getParams())[n.dataSentNames.page]=r.page,n.size&&(t[n.dataSentNames.size]=n.size),n.table.options.ajaxSorting&&n.table.modExists("sort")){var a=r.table.modules.sort.getSort();a.forEach((function(e){delete e.column})),t[n.dataSentNames.sorters]=a}if(n.table.options.ajaxFiltering&&n.table.modExists("filter")){var s=r.table.modules.filter.getFilters(!0,!0);t[n.dataSentNames.filters]=s}r.table.modules.ajax.setParams(t),r.table.modules.ajax.sendRequest(n.progressiveLoad).then((function(e){r._parseRemoteData(e),i()})).catch((function(e){o()})),r.table.modules.ajax.setParams(e)}))},fw.prototype._parseRemoteData=function(e){var t,n,r=this;if(void 0===e[this.dataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e[this.dataReceivedNames.data]){if(this.max=parseInt(e[this.dataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page):this.table.rowManager.addRows(e[this.dataReceivedNames.data]),this.page<this.max&&setTimeout((function(){r.nextPage().then((function(){})).catch((function(){}))}),r.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e[this.dataReceivedNames.data]),this.table.rowManager.setData(e,!0,this.initialLoad&&1==this.page),n=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,r.table.rowManager.element.scrollHeight<=r.table.rowManager.element.clientHeight+n&&r.nextPage().then((function(){})).catch((function(){}))}else t=this.table.rowManager.scrollLeft,this.table.rowManager.setData(e[this.dataReceivedNames.data],!1,this.initialLoad&&1==this.page),this.table.rowManager.scrollHorizontal(t),this.table.columnManager.scrollHorizontal(t),this.table.options.pageLoaded.call(this.table,this.getPage());this.initialLoad=!1}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property")},fw.prototype.footerRedraw=function(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))},fw.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},fw.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},YE.prototype.registerModule("page",fw);var mw=function(e){this.table=e,this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1};mw.prototype.localStorageTest=function(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}},mw.prototype.initialize=function(){var e,t=this.table.options.persistenceMode,n=this.table.options.persistenceID;this.mode=!0!==t?t:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:this.readers[this.table.options.persistenceReaderFunc]?this.readFunc=this.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):this.readers[this.mode]?this.readFunc=this.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:this.readers[this.table.options.persistenceWriterFunc]?this.writeFunc=this.readers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):this.writers[this.mode]?this.writeFunc=this.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(e=this.retreiveData("page"))&&(void 0===e.paginationSize||!0!==this.config.page&&!this.config.page.size||(this.table.options.paginationSize=e.paginationSize),void 0===e.paginationInitialPage||!0!==this.config.page&&!this.config.page.page||(this.table.options.paginationInitialPage=e.paginationInitialPage)),this.config.group&&(e=this.retreiveData("group"))&&(void 0===e.groupBy||!0!==this.config.group&&!this.config.group.groupBy||(this.table.options.groupBy=e.groupBy),void 0===e.groupStartOpen||!0!==this.config.group&&!this.config.group.groupStartOpen||(this.table.options.groupStartOpen=e.groupStartOpen),void 0===e.groupHeader||!0!==this.config.group&&!this.config.group.groupHeader||(this.table.options.groupHeader=e.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns))},mw.prototype.initializeColumn=function(e){var t,n=this;this.config.columns&&(this.defWatcherBlock=!0,t=e.getDefinition(),(!0===this.config.columns?Object.keys(t):this.config.columns).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e),i=t[e];r&&Object.defineProperty(t,e,{set:function(e){i=e,n.defWatcherBlock||n.save("columns"),r.set&&r.set(e)},get:function(){return r.get&&r.get(),i}})})),this.defWatcherBlock=!1)},mw.prototype.load=function(e,t){var n=this.retreiveData(e);return t&&(n=n?this.mergeDefinition(t,n):t),n},mw.prototype.retreiveData=function(e){return!!this.readFunc&&this.readFunc(this.id,e)},mw.prototype.mergeDefinition=function(e,t){var n=this,r=[];return(t=t||[]).forEach((function(t,i){var o,a=n._findColumn(e,t);a&&(!0===n.config.columns||null==n.config.columns?(o=Object.keys(a)).push("width"):o=n.config.columns,o.forEach((function(e){"columns"!==e&&void 0!==t[e]&&(a[e]=t[e])})),a.columns&&(a.columns=n.mergeDefinition(a.columns,t.columns)),r.push(a))})),e.forEach((function(e,i){n._findColumn(t,e)||(r.length>i?r.splice(i,0,e):r.push(e))})),r},mw.prototype._findColumn=function(e,t){var n=t.columns?"group":t.field?"field":"object";return e.find((function(e){switch(n){case"group":return e.title===t.title&&e.columns.length===t.columns.length;case"field":return e.field===t.field;case"object":return e===t}}))},mw.prototype.save=function(e){var t={};switch(e){case"columns":t=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":t=this.table.modules.filter.getFilters();break;case"sort":t=this.validateSorters(this.table.modules.sort.getSort());break;case"group":t=this.getGroupConfig();break;case"page":t=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,t)},mw.prototype.validateSorters=function(e){return e.forEach((function(e){e.column=e.field,delete e.field})),e},mw.prototype.getGroupConfig=function(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e},mw.prototype.getPageConfig=function(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e},mw.prototype.parseColumns=function(e){var t=this,n=[],r=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach((function(e){var i,o={},a=e.getDefinition();e.isGroup?(o.title=a.title,o.columns=t.parseColumns(e.getColumns())):(o.field=e.getField(),!0===t.config.columns||null==t.config.columns?(i=Object.keys(a)).push("width"):i=t.config.columns,i.forEach((function(t){switch(t){case"width":o.width=e.getWidth();break;case"visible":o.visible=e.visible;break;default:"function"!=typeof a[t]&&-1===r.indexOf(t)&&(o[t]=a[t])}}))),n.push(o)})),n},mw.prototype.readers={local:function(e,t){var n=localStorage.getItem(e+"-"+t);return!!n&&JSON.parse(n)},cookie:function(e,t){var n,r,i=document.cookie,o=e+"-"+t,a=i.indexOf(o+"=");return a>-1&&(i=i.substr(a),(n=i.indexOf(";"))>-1&&(i=i.substr(0,n)),r=i.replace(o+"=","")),!!r&&JSON.parse(r)}},mw.prototype.writers={local:function(e,t,n){localStorage.setItem(e+"-"+t,JSON.stringify(n))},cookie:function(e,t,n){var r=new Date;r.setDate(r.getDate()+1e4),document.cookie=e+"-"+t+"="+JSON.stringify(n)+"; expires="+r.toUTCString()}},YE.prototype.registerModule("persistence",mw);var _w=function(e){this.table=e,this.element=!1,this.manualBlock=!1};_w.prototype.initialize=function(){window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))},_w.prototype.replaceTable=function(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))},_w.prototype.cleanup=function(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")},_w.prototype.printFullscreen=function(e,t,n){var r,i,o=window.scrollX,a=window.scrollY,s=document.createElement("div"),l=document.createElement("div"),c=this.table.modules.export.genereateTable(void 0!==n?n:this.table.options.printConfig,void 0!==t?t:this.table.options.printStyled,e,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(s.classList.add("tabulator-print-header"),"string"==typeof(r="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?s.innerHTML=r:s.appendChild(r),this.element.appendChild(s)),this.element.appendChild(c),this.table.options.printFooter&&(l.classList.add("tabulator-print-footer"),"string"==typeof(i="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?l.innerHTML=i:l.appendChild(i),this.element.appendChild(l)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,c),window.print(),this.cleanup(),window.scrollTo(o,a),this.manualBlock=!1},YE.prototype.registerModule("print",_w);var gw=function(e){this.table=e,this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0};gw.prototype.watchData=function(e){var t,n=this;this.currentVersion++,t=this.currentVersion,n.unwatchData(),n.data=e,n.origFuncs.push=e.push,Object.defineProperty(n.data,"push",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments);return n.blocked||t!==n.currentVersion||r.forEach((function(e){n.table.rowManager.addRowActual(e,!1)})),n.origFuncs.push.apply(e,arguments)}}),n.origFuncs.unshift=e.unshift,Object.defineProperty(n.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var r=Array.from(arguments);return n.blocked||t!==n.currentVersion||r.forEach((function(e){n.table.rowManager.addRowActual(e,!0)})),n.origFuncs.unshift.apply(e,arguments)}}),n.origFuncs.shift=e.shift,Object.defineProperty(n.data,"shift",{enumerable:!1,configurable:!0,value:function(){var r;return n.blocked||t!==n.currentVersion||n.data.length&&(r=n.table.rowManager.getRowFromDataObject(n.data[0]))&&r.deleteActual(),n.origFuncs.shift.call(e)}}),n.origFuncs.pop=e.pop,Object.defineProperty(n.data,"pop",{enumerable:!1,configurable:!0,value:function(){var r;return n.blocked||t!==n.currentVersion||n.data.length&&(r=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]))&&r.deleteActual(),n.origFuncs.pop.call(e)}}),n.origFuncs.splice=e.splice,Object.defineProperty(n.data,"splice",{enumerable:!1,configurable:!0,value:function(){var r,i=Array.from(arguments),o=i[0]<0?e.length+i[0]:i[0],a=i[1],s=!!i[2]&&i.slice(2);if(!n.blocked&&t===n.currentVersion){if(s&&((r=!!e[o]&&n.table.rowManager.getRowFromDataObject(e[o]))?s.forEach((function(e){n.table.rowManager.addRowActual(e,!0,r,!0)})):(s=s.slice().reverse()).forEach((function(e){n.table.rowManager.addRowActual(e,!0,!1,!0)}))),0!==a){var l=e.slice(o,void 0===i[1]?i[1]:o+a);l.forEach((function(e,t){var r=n.table.rowManager.getRowFromDataObject(e);r&&r.deleteActual(t!==l.length-1)}))}(s||0!==a)&&n.table.rowManager.reRenderInPosition()}return n.origFuncs.splice.apply(e,arguments)}})},gw.prototype.unwatchData=function(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})},gw.prototype.watchRow=function(e){var t=e.getData();for(var n in this.blocked=!0,t)this.watchKey(e,t,n);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1},gw.prototype.watchTreeChildren=function(e){var t=this,n=e.getData()[this.table.options.dataTreeChildField],r={};function i(){t.table.modules.dataTree.initializeRow(e),t.table.modules.dataTree.layoutRow(e),t.table.rowManager.refreshActiveData("tree",!1,!0)}n&&(r.push=n.push,Object.defineProperty(n,"push",{enumerable:!1,configurable:!0,value:function(){var e=r.push.apply(n,arguments);return i(),e}}),r.unshift=n.unshift,Object.defineProperty(n,"unshift",{enumerable:!1,configurable:!0,value:function(){var e=r.unshift.apply(n,arguments);return i(),e}}),r.shift=n.shift,Object.defineProperty(n,"shift",{enumerable:!1,configurable:!0,value:function(){var e=r.shift.call(n);return i(),e}}),r.pop=n.pop,Object.defineProperty(n,"pop",{enumerable:!1,configurable:!0,value:function(){var e=r.pop.call(n);return i(),e}}),r.splice=n.splice,Object.defineProperty(n,"splice",{enumerable:!1,configurable:!0,value:function(){var e=r.splice.apply(n,arguments);return i(),e}}))},gw.prototype.watchKey=function(e,t,n){var r=this,i=Object.getOwnPropertyDescriptor(t,n),o=t[n],a=this.currentVersion;Object.defineProperty(t,n,{set:function(t){if(o=t,!r.blocked&&a===r.currentVersion){var s={};s[n]=t,e.updateData(s)}i.set&&i.set(t)},get:function(){return i.get&&i.get(),o}})},gw.prototype.unwatchRow=function(e){var t=e.getData();for(var n in t)Object.defineProperty(t,n,{value:t[n]})},gw.prototype.block=function(){this.blocked=!0},gw.prototype.unblock=function(){this.blocked=!1},YE.prototype.registerModule("reactiveData",gw);var bw=function(e){this.table=e,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};bw.prototype.initializeColumn=function(e,t,n){var r=this,i=!1,o=this.table.options.resizableColumns;if("header"===e&&(i="textarea"==t.definition.formatter||t.definition.variableHeight,t.modules.resize={variableHeight:i}),!0===o||o==e){var a=document.createElement("div");a.className="tabulator-col-resize-handle";var s=document.createElement("div");s.className="tabulator-col-resize-handle prev",a.addEventListener("click",(function(e){e.stopPropagation()}));var l=function(e){var n=t.getLastColumn();n&&r._checkResizability(n)&&(r.startColumn=t,r._mouseDown(e,n,a))};a.addEventListener("mousedown",l),a.addEventListener("touchstart",l,{passive:!0}),a.addEventListener("dblclick",(function(e){var n=t.getLastColumn();n&&r._checkResizability(n)&&(e.stopPropagation(),n.reinitializeWidth(!0))})),s.addEventListener("click",(function(e){e.stopPropagation()}));var c=function(e){var n,i,o;(n=t.getFirstColumn())&&(o=(i=r.table.columnManager.findColumnIndex(n))>0&&r.table.columnManager.getColumnByIndex(i-1))&&r._checkResizability(o)&&(r.startColumn=t,r._mouseDown(e,o,s))};s.addEventListener("mousedown",c),s.addEventListener("touchstart",c,{passive:!0}),s.addEventListener("dblclick",(function(e){var n,i,o;(n=t.getFirstColumn())&&(o=(i=r.table.columnManager.findColumnIndex(n))>0&&r.table.columnManager.getColumnByIndex(i-1))&&r._checkResizability(o)&&(e.stopPropagation(),o.reinitializeWidth(!0))})),n.appendChild(a),n.appendChild(s)}},bw.prototype._checkResizability=function(e){return void 0!==e.definition.resizable?e.definition.resizable:this.table.options.resizableColumns},bw.prototype._mouseDown=function(e,t,n){var r=this;function i(e){r.table.rtl?t.setWidth(r.startWidth-((void 0===e.screenX?e.touches[0].screenX:e.screenX)-r.startX)):t.setWidth(r.startWidth+((void 0===e.screenX?e.touches[0].screenX:e.screenX)-r.startX)),r.table.options.virtualDomHoz&&r.table.vdomHoz.reinitialize(!0),!r.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights()}function o(e){r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!1),r.table.browserSlow&&t.modules.resize&&t.modules.resize.variableHeight&&t.checkCellHeights(),document.body.removeEventListener("mouseup",o),document.body.removeEventListener("mousemove",i),n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.table.options.persistence&&r.table.modExists("persistence",!0)&&r.table.modules.persistence.config.columns&&r.table.modules.persistence.save("columns"),r.table.options.columnResized.call(r.table,t.getComponent())}r.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),r.startColumn.modules.edit&&(r.startColumn.modules.edit.blocked=!0),r.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,r.startWidth=t.getWidth(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",o),n.addEventListener("touchmove",i,{passive:!0}),n.addEventListener("touchend",o)},YE.prototype.registerModule("resizeColumns",bw);var vw=function(e){this.table=e,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null};vw.prototype.initializeRow=function(e){var t=this,n=e.getElement(),r=document.createElement("div");r.className="tabulator-row-resize-handle";var i=document.createElement("div");i.className="tabulator-row-resize-handle prev",r.addEventListener("click",(function(e){e.stopPropagation()}));var o=function(n){t.startRow=e,t._mouseDown(n,e,r)};r.addEventListener("mousedown",o),r.addEventListener("touchstart",o,{passive:!0}),i.addEventListener("click",(function(e){e.stopPropagation()}));var a=function(n){var r=t.table.rowManager.prevDisplayRow(e);r&&(t.startRow=r,t._mouseDown(n,r,i))};i.addEventListener("mousedown",a),i.addEventListener("touchstart",a,{passive:!0}),n.appendChild(r),n.appendChild(i)},vw.prototype._mouseDown=function(e,t,n){var r=this;function i(e){t.setHeight(r.startHeight+((void 0===e.screenY?e.touches[0].screenY:e.screenY)-r.startY))}function o(e){document.body.removeEventListener("mouseup",i),document.body.removeEventListener("mousemove",i),n.removeEventListener("touchmove",i),n.removeEventListener("touchend",o),r.table.element.classList.remove("tabulator-block-select"),r.table.options.rowResized.call(this.table,t.getComponent())}r.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),r.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,r.startHeight=t.getHeight(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",o),n.addEventListener("touchmove",i,{passive:!0}),n.addEventListener("touchend",o)},YE.prototype.registerModule("resizeRows",vw);var yw=function(e){this.table=e,this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1};yw.prototype.initialize=function(e){var t,n=this,r=this.table;this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===r.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver((function(e){if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var t=Math.floor(e[0].contentRect.height),i=Math.floor(e[0].contentRect.width);n.tableHeight==t&&n.tableWidth==i||(n.tableHeight=t,n.tableWidth=i,r.element.parentNode&&(n.containerHeight=r.element.parentNode.clientHeight,n.containerWidth=r.element.parentNode.clientWidth),r.options.virtualDomHoz&&r.vdomHoz.reinitialize(!0),r.redraw())}})),this.observer.observe(r.element),t=window.getComputedStyle(r.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(t.getPropertyValue("max-height")||t.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver((function(e){if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var t=Math.floor(e[0].contentRect.height),i=Math.floor(e[0].contentRect.width);n.containerHeight==t&&n.containerWidth==i||(n.containerHeight=t,n.containerWidth=i,n.tableHeight=r.element.clientHeight,n.tableWidth=r.element.clientWidth),r.options.virtualDomHoz&&r.vdomHoz.reinitialize(!0),r.redraw()}})),this.containerObserver.observe(this.table.element.parentNode))):(this.binding=function(){(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell)&&(r.options.virtualDomHoz&&r.vdomHoz.reinitialize(!0),r.redraw())},window.addEventListener("resize",this.binding))},yw.prototype.clearBindings=function(e){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)},YE.prototype.registerModule("resizeTable",yw);var Ew=function(e){this.table=e,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1};Ew.prototype.initialize=function(){var e=this,t=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach((function(n,r){n.modules.responsive&&n.modules.responsive.order&&n.modules.responsive.visible&&(n.modules.responsive.index=r,t.push(n),n.visible||"collapse"!==e.mode||e.hiddenColumns.push(n))})),t=(t=t.reverse()).sort((function(e,t){return t.modules.responsive.order-e.modules.responsive.order||t.modules.responsive.index-e.modules.responsive.index})),this.columns=t,"collapse"===this.mode&&this.generateCollapsedContent();var n=this.table.columnManager.columnsByIndex,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())},Ew.prototype.initializeColumn=function(e){var t=e.getDefinition();e.modules.responsive={order:void 0===t.responsive?1:t.responsive,visible:!1!==t.visible}},Ew.prototype.initializeRow=function(e){var t;"calc"!==e.type&&((t=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:t,open:this.collapseStartOpen},this.collapseStartOpen||(t.style.display="none"))},Ew.prototype.layoutRow=function(e){var t=e.getElement();e.modules.responsiveLayout&&(t.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))},Ew.prototype.updateColumnVisibility=function(e,t){e.modules.responsive&&(e.modules.responsive.visible=t,this.initialize())},Ew.prototype.hideColumn=function(e){var t=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!t&&this.collapseHandleColumn.show())},Ew.prototype.showColumn=function(e){var t;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((t=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(t,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())},Ew.prototype.update=function(){for(var e=this,t=!0;t;){var n="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),r=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-n;if(r<0){var i=e.columns[e.index];i?(e.hideColumn(i),e.index++):t=!1}else{var o=e.columns[e.index-1];o&&r>0&&r>=o.getWidth()?(e.showColumn(o),e.index--):t=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}},Ew.prototype.generateCollapsedContent=function(){var e=this;this.table.rowManager.getDisplayRows().forEach((function(t){e.generateCollapsedRowContent(t)}))},Ew.prototype.generateCollapsedRowContent=function(e){var t,n;if(e.modules.responsiveLayout){for(t=e.modules.responsiveLayout.element;t.firstChild;)t.removeChild(t.firstChild);(n=this.collapseFormatter(this.generateCollapsedRowData(e)))&&t.appendChild(n)}},Ew.prototype.generateCollapsedRowData=function(e){var t,n=this,r=e.getData(),i=[];return this.hiddenColumns.forEach((function(o){var a=o.getFieldValue(r);o.definition.title&&o.field&&(o.modules.format&&n.table.options.responsiveLayoutCollapseUseFormatters?(t={value:!1,data:{},getValue:function(){return a},getData:function(){return r},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return o.getComponent()}},i.push({field:o.field,title:o.definition.title,value:o.modules.format.formatter.call(n.table.modules.format,t,o.modules.format.params)})):i.push({field:o.field,title:o.definition.title,value:a}))})),i},Ew.prototype.formatCollapsedData=function(e){var t=document.createElement("table");return e.forEach((function(e){var n,r=document.createElement("tr"),i=document.createElement("td"),o=document.createElement("td"),a=document.createElement("strong");i.appendChild(a),this.table.modules.localize.bind("columns|"+e.field,(function(t){a.innerText=t||e.title})),e.value instanceof Node?((n=document.createElement("div")).appendChild(e.value),o.appendChild(n)):o.innerHTML=e.value,r.appendChild(i),r.appendChild(o),t.appendChild(r)}),this),Object.keys(e).length?t:""},YE.prototype.registerModule("responsiveLayout",Ew);var ww=function(e){this.table=e,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null};ww.prototype.clearSelectionData=function(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],e||this._rowSelectionChanged()},ww.prototype.initializeRow=function(e){var t=this,n=e.getElement(),r=function e(){setTimeout((function(){t.selecting=!1}),50),document.body.removeEventListener("mouseup",e)};e.modules.select={selected:!1},t.table.options.selectableCheck.call(this.table,e.getComponent())?(n.classList.add("tabulator-selectable"),n.classList.remove("tabulator-unselectable"),t.table.options.selectable&&"highlight"!=t.table.options.selectable&&("click"===t.table.options.selectableRangeMode?n.addEventListener("click",(function(n){if(n.shiftKey){t.table._clearSelection(),t.lastClickedRow=t.lastClickedRow||e;var r=t.table.rowManager.getDisplayRowIndex(t.lastClickedRow),i=t.table.rowManager.getDisplayRowIndex(e),o=r<=i?r:i,a=r>=i?r:i,s=t.table.rowManager.getDisplayRows().slice(0).splice(o,a-o+1);n.ctrlKey||n.metaKey?(s.forEach((function(n){n!==t.lastClickedRow&&(!0===t.table.options.selectable||t.isRowSelected(e)||t.selectedRows.length<t.table.options.selectable)&&t.toggleRow(n)})),t.lastClickedRow=e):(t.deselectRows(void 0,!0),!0!==t.table.options.selectable&&s.length>t.table.options.selectable&&(s=s.slice(0,t.table.options.selectable)),t.selectRows(s)),t.table._clearSelection()}else n.ctrlKey||n.metaKey?(t.toggleRow(e),t.lastClickedRow=e):(t.deselectRows(void 0,!0),t.selectRows(e),t.lastClickedRow=e)})):(n.addEventListener("click",(function(n){t.table.modExists("edit")&&t.table.modules.edit.getCurrentCell()||t.table._clearSelection(),t.selecting||t.toggleRow(e)})),n.addEventListener("mousedown",(function(n){if(n.shiftKey)return t.table._clearSelection(),t.selecting=!0,t.selectPrev=[],document.body.addEventListener("mouseup",r),document.body.addEventListener("keyup",r),t.toggleRow(e),!1})),n.addEventListener("mouseenter",(function(n){t.selecting&&(t.table._clearSelection(),t.toggleRow(e),t.selectPrev[1]==e&&t.toggleRow(t.selectPrev[0]))})),n.addEventListener("mouseout",(function(n){t.selecting&&(t.table._clearSelection(),t.selectPrev.unshift(e))}))))):(n.classList.add("tabulator-unselectable"),n.classList.remove("tabulator-selectable"))},ww.prototype.toggleRow=function(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))},ww.prototype.selectRows=function(e){var t,n=this;switch(void 0===e?"undefined":AE(e)){case"undefined":this.table.rowManager.rows.forEach((function(e){n._selectRow(e,!0,!0)})),this._rowSelectionChanged();break;case"string":(t=this.table.rowManager.findRow(e))?this._selectRow(t,!0,!0):this.table.rowManager.getRows(e).forEach((function(e){n._selectRow(e,!0,!0)})),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach((function(e){n._selectRow(e,!0,!0)})),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}},ww.prototype._selectRow=function(e,t,n){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!n&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var r=this.table.rowManager.findRow(e);r?-1==this.selectedRows.indexOf(r)&&(r.getElement().classList.add("tabulator-selected"),r.modules.select||(r.modules.select={}),r.modules.select.selected=!0,r.modules.select.checkboxEl&&(r.modules.select.checkboxEl.checked=!0),this.selectedRows.push(r),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(r,!0),t||this.table.options.rowSelected.call(this.table,r.getComponent()),this._rowSelectionChanged(t)):t||console.warn("Selection Error - No such row found, ignoring selection:"+e)},ww.prototype.isRowSelected=function(e){return-1!==this.selectedRows.indexOf(e)},ww.prototype.deselectRows=function(e,t){var n,r=this;if(void 0===e){n=r.selectedRows.length;for(var i=0;i<n;i++)r._deselectRow(r.selectedRows[0],!0);r._rowSelectionChanged(t)}else Array.isArray(e)?(e.forEach((function(e){r._deselectRow(e,!0)})),r._rowSelectionChanged(t)):r._deselectRow(e,t)},ww.prototype._deselectRow=function(e,t){var n,r=this,i=r.table.rowManager.findRow(e);i?(n=r.selectedRows.findIndex((function(e){return e==i})))>-1&&(i.getElement().classList.remove("tabulator-selected"),i.modules.select||(i.modules.select={}),i.modules.select.selected=!1,i.modules.select.checkboxEl&&(i.modules.select.checkboxEl.checked=!1),r.selectedRows.splice(n,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(i,!1),t||r.table.options.rowDeselected.call(this.table,i.getComponent()),r._rowSelectionChanged(t)):t||console.warn("Deselection Error - No such row found, ignoring selection:"+e)},ww.prototype.getSelectedData=function(){var e=[];return this.selectedRows.forEach((function(t){e.push(t.getData())})),e},ww.prototype.getSelectedRows=function(){var e=[];return this.selectedRows.forEach((function(t){e.push(t.getComponent())})),e},ww.prototype._rowSelectionChanged=function(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},ww.prototype.registerRowSelectCheckbox=function(e,t){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=t},ww.prototype.registerHeaderSelectCheckbox=function(e){this.headerCheckboxElement=e},ww.prototype.childRowSelection=function(e,t){var n=this.table.modules.dataTree.getChildren(e,!0);if(t){var r=n,i=Array.isArray(r),o=0;for(r=i?r:r[Symbol.iterator]();;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}var s=a;this._selectRow(s,!0)}}else{var l=n,c=Array.isArray(l),d=0;for(l=c?l:l[Symbol.iterator]();;){var u;if(c){if(d>=l.length)break;u=l[d++]}else{if((d=l.next()).done)break;u=d.value}var h=u;this._deselectRow(h,!0)}}},YE.prototype.registerModule("selectRow",ww);var Sw=function(e){this.table=e,this.sortList=[],this.changed=!1};Sw.prototype.initializeColumn=function(e,t){var n,r,i=this,o=!1;switch(AE(e.definition.sorter)){case"string":i.sorters[e.definition.sorter]?o=i.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":o=e.definition.sorter}e.modules.sort={sorter:o,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:void 0!==e.definition.headerSortTristate?e.definition.headerSortTristate:this.table.options.headerSortTristate},(void 0===e.definition.headerSort?!1!==this.table.options.headerSort:!1!==e.definition.headerSort)&&((n=e.getElement()).classList.add("tabulator-sortable"),(r=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==AE(this.table.options.headerSortElement)?r.appendChild(this.table.options.headerSortElement):r.innerHTML=this.table.options.headerSortElement,t.appendChild(r),e.modules.sort.element=r,n.addEventListener("click",(function(t){var n="",r=[],o=!1;if(e.modules.sort){if(e.modules.sort.tristate)n="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":n="desc";break;case"desc":n="asc";break;default:n=e.modules.sort.startingDir}i.table.options.columnHeaderSortMulti&&(t.shiftKey||t.ctrlKey)?((o=(r=i.getSort()).findIndex((function(t){return t.field===e.getField()})))>-1?(r[o].dir=n,o!=r.length-1&&(o=r.splice(o,1)[0],"none"!=n&&r.push(o))):"none"!=n&&r.push({column:e,dir:n}),i.setSort(r)):"none"==n?i.clear():i.setSort(e,n),i.table.rowManager.sorterRefresh(!i.sortList.length)}})))},Sw.prototype.hasChanged=function(){var e=this.changed;return this.changed=!1,e},Sw.prototype.getSort=function(){var e=[];return this.sortList.forEach((function(t){t.column&&e.push({column:t.column.getComponent(),field:t.column.getField(),dir:t.dir})})),e},Sw.prototype.setSort=function(e,t){var n=this,r=[];Array.isArray(e)||(e=[{column:e,dir:t}]),e.forEach((function(e){var t;(t=n.table.columnManager.findColumn(e.column))?(e.column=t,r.push(e),n.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",e.column)})),n.sortList=r,this.table.options.persistence&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.config.sort&&this.table.modules.persistence.save("sort")},Sw.prototype.clear=function(){this.setSort([])},Sw.prototype.findSorter=function(e){var t,n=this.table.rowManager.activeRows[0],r="string";if(n&&(n=n.getData(),e.getField()))switch(void 0===(t=e.getFieldValue(n))?"undefined":AE(t)){case"undefined":r="string";break;case"boolean":r="boolean";break;default:isNaN(t)||""===t?t.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(r="alphanum"):r="number"}return this.sorters[r]},Sw.prototype.sort=function(e){var t=this,n=this.table.options.sortOrderReverse?t.sortList.slice().reverse():t.sortList,r=[],i=[];t.table.options.dataSorting&&t.table.options.dataSorting.call(t.table,t.getSort()),t.clearColumnHeaders(),t.table.options.ajaxSorting?n.forEach((function(e,n){t.setColumnHeader(e.column,e.dir)})):(n.forEach((function(e,n){var i=e.column.modules.sort;e.column&&i&&(i.sorter||(i.sorter=t.findSorter(e.column)),e.params="function"==typeof i.params?i.params(e.column.getComponent(),e.dir):i.params,r.push(e)),t.setColumnHeader(e.column,e.dir)})),r.length&&t._sortItems(e,r)),t.table.options.dataSorted&&(e.forEach((function(e){i.push(e.getComponent())})),t.table.options.dataSorted.call(t.table,t.getSort(),i))},Sw.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach((function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))}))},Sw.prototype.setColumnHeader=function(e,t){e.modules.sort.dir=t,e.getElement().setAttribute("aria-sort",t)},Sw.prototype._sortItems=function(e,t){var n=this,r=t.length-1;e.sort((function(e,i){for(var o,a=r;a>=0;a--){var s=t[a];if(0!==(o=n._sortRow(e,i,s.column,s.dir,s.params)))break}return o}))},Sw.prototype._sortRow=function(e,t,n,r,i){var o,a,s="asc"==r?e:t,l="asc"==r?t:e;return e=void 0!==(e=n.getFieldValue(s.getData()))?e:"",t=void 0!==(t=n.getFieldValue(l.getData()))?t:"",o=s.getComponent(),a=l.getComponent(),n.modules.sort.sorter.call(this,e,t,o,a,n.getComponent(),r,i)},Sw.prototype.sorters={number:function(e,t,n,r,i,o,a){var s=a.alignEmptyValues,l=a.decimalSeparator,c=a.thousandSeparator,d=0;if(e=String(e),t=String(t),c&&(e=e.split(c).join(""),t=t.split(c).join("")),l&&(e=e.split(l).join("."),t=t.split(l).join(".")),e=parseFloat(e),t=parseFloat(t),isNaN(e))d=isNaN(t)?0:-1;else{if(!isNaN(t))return e-t;d=1}return("top"===s&&"desc"===o||"bottom"===s&&"asc"===o)&&(d*=-1),d},string:function(e,t,n,r,i,o,a){var s,l=a.alignEmptyValues,c=0;if(e){if(t){switch(AE(a.locale)){case"boolean":a.locale&&(s=this.table.modules.localize.getLocale());break;case"string":s=a.locale}return String(e).toLowerCase().localeCompare(String(t).toLowerCase(),s)}c=1}else c=t?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(c*=-1),c},date:function(e,t,n,r,i,o,a){return a.format||(a.format="DD/MM/YYYY"),this.sorters.datetime.call(this,e,t,n,r,i,o,a)},time:function(e,t,n,r,i,o,a){return a.format||(a.format="HH:mm"),this.sorters.datetime.call(this,e,t,n,r,i,o,a)},datetime:function(e,t,n,r,i,o,a){var s=a.format||"DD/MM/YYYY HH:mm:ss",l=a.alignEmptyValues,c=0;if("undefined"!=typeof moment){if(e=moment(e,s),t=moment(t,s),e.isValid()){if(t.isValid())return e-t;c=1}else c=t.isValid()?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(c*=-1),c}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(e,t,n,r,i,o,a){return(!0===e||"true"===e||"True"===e||1===e?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(e,t,n,r,i,o,a){var s=a.type||"length",l=a.alignEmptyValues,c=0;function d(e){switch(s){case"length":return e.length;case"sum":return e.reduce((function(e,t){return e+t}));case"max":return Math.max.apply(null,e);case"min":return Math.min.apply(null,e);case"avg":return e.reduce((function(e,t){return e+t}))/e.length}}if(Array.isArray(e)){if(Array.isArray(t))return(e?d(e):0)-(t?d(t):0);l=1}else l=Array.isArray(t)?-1:0;return("top"===l&&"desc"===o||"bottom"===l&&"asc"===o)&&(c*=-1),c},exists:function(e,t,n,r,i,o,a){return(void 0===e?0:1)-(void 0===t?0:1)},alphanum:function(e,t,n,r,i,o,a){var s,l,c,d,u,h=0,p=/(\d+)|(\D+)/g,f=/\d/,m=a.alignEmptyValues,_=0;if(e||0===e){if(t||0===t){if(isFinite(e)&&isFinite(t))return e-t;if((s=String(e).toLowerCase())===(l=String(t).toLowerCase()))return 0;if(!f.test(s)||!f.test(l))return s>l?1:-1;for(s=s.match(p),l=l.match(p),u=s.length>l.length?l.length:s.length;h<u;)if((c=s[h])!==(d=l[h++]))return isFinite(c)&&isFinite(d)?("0"===c.charAt(0)&&(c="."+c),"0"===d.charAt(0)&&(d="."+d),c-d):c>d?1:-1;return s.length>l.length}_=1}else _=t||0===t?-1:0;return("top"===m&&"desc"===o||"bottom"===m&&"asc"===o)&&(_*=-1),_}},YE.prototype.registerModule("sort",Sw);var Tw=function(e){this.table=e,this.invalidCells=[]};Tw.prototype.initializeColumn=function(e){var t,n=this,r=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach((function(e){(t=n._extractValidator(e))&&r.push(t)})):(t=this._extractValidator(e.definition.validator))&&r.push(t),e.modules.validate=!!r.length&&r)},Tw.prototype._extractValidator=function(e){var t,n,r;switch(void 0===e?"undefined":AE(e)){case"string":return(r=e.indexOf(":"))>-1?(t=e.substring(0,r),n=e.substring(r+1)):t=e,this._buildValidator(t,n);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}},Tw.prototype._buildValidator=function(e,t){var n="function"==typeof e?e:this.validators[e];return n?{type:"function"==typeof e?"function":e,func:n,params:t}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)},Tw.prototype.validate=function(e,t,n){var r=this,i=[],o=this.invalidCells.indexOf(t);return e&&e.forEach((function(e){e.func.call(r,t.getComponent(),n,e.params)||i.push({type:e.type,parameters:e.params})})),i=!i.length||i,t.modules.validate||(t.modules.validate={}),!0===i?(t.modules.validate.invalid=!1,t.getElement().classList.remove("tabulator-validation-fail"),o>-1&&this.invalidCells.splice(o,1)):(t.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&t.getElement().classList.add("tabulator-validation-fail"),-1==o&&this.invalidCells.push(t)),i},Tw.prototype.getInvalidCells=function(){var e=[];return this.invalidCells.forEach((function(t){e.push(t.getComponent())})),e},Tw.prototype.clearValidation=function(e){var t;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(t=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(t,1))},Tw.prototype.validators={integer:function(e,t,n){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(e,t,n){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(e,t,n){return""===t||null==t||!isNaN(t)},string:function(e,t,n){return""===t||null==t||isNaN(t)},max:function(e,t,n){return""===t||null==t||parseFloat(t)<=n},min:function(e,t,n){return""===t||null==t||parseFloat(t)>=n},starts:function(e,t,n){return""===t||null==t||String(t).toLowerCase().startsWith(String(n).toLowerCase())},ends:function(e,t,n){return""===t||null==t||String(t).toLowerCase().endsWith(String(n).toLowerCase())},minLength:function(e,t,n){return""===t||null==t||String(t).length>=n},maxLength:function(e,t,n){return""===t||null==t||String(t).length<=n},in:function(e,t,n){return""===t||null==t||("string"==typeof n&&(n=n.split("|")),""===t||n.indexOf(t)>-1)},regex:function(e,t,n){return""===t||null==t||new RegExp(n).test(t)},unique:function(e,t,n){if(""===t||null==t)return!0;var r=!0,i=e.getData(),o=e.getColumn()._getSelf();return this.table.rowManager.rows.forEach((function(e){var n=e.getData();n!==i&&t==o.getFieldValue(n)&&(r=!1)})),r},required:function(e,t,n){return""!==t&&null!=t}},YE.prototype.registerModule("validate",Tw);const kw=YE;!function(e){if(e("#tabulator").length){var t=function(){var t=e("#tabulator-html-filter-field").val(),r=e("#tabulator-html-filter-type").val(),i=e("#tabulator-html-filter-value").val();n.setFilter(t,r,i)},n=new kw("#tabulator",{ajaxURL:"https://dummy-data.left4code.com",ajaxFiltering:!0,ajaxSorting:!0,printAsHtml:!0,printStyled:!0,pagination:"remote",paginationSize:10,paginationSizeSelector:[10,20,30,40],layout:"fitColumns",responsiveLayout:"collapse",placeholder:"No matching records found",columns:[{formatter:"responsiveCollapse",width:40,minWidth:30,align:"center",resizable:!1,headerSort:!1},{title:"PRODUCT NAME",minWidth:200,responsive:0,field:"name",vertAlign:"middle",print:!1,download:!1,formatter:function(e,t){return'<div>\n                            <div class="font-medium whitespace-nowrap">'.concat(e.getData().name,'</div>\n                            <div class="text-gray-600 text-xs whitespace-nowrap">').concat(e.getData().category,"</div>\n                        </div>")}},{title:"IMAGES",minWidth:200,field:"images",hozAlign:"center",vertAlign:"middle",print:!1,download:!1,formatter:function(e,t){return'<div class="flex lg:justify-center">\n                            <div class="intro-x w-10 h-10 image-fit">\n                                <img alt="Icewall Tailwind HTML Admin Template" class="rounded-full" src="/dist/images/'.concat(e.getData().images[0],'">\n                            </div>\n                            <div class="intro-x w-10 h-10 image-fit -ml-5">\n                                <img alt="Icewall Tailwind HTML Admin Template" class="rounded-full" src="/dist/images/').concat(e.getData().images[1],'">\n                            </div>\n                            <div class="intro-x w-10 h-10 image-fit -ml-5">\n                                <img alt="Icewall Tailwind HTML Admin Template" class="rounded-full" src="/dist/images/').concat(e.getData().images[2],'">\n                            </div>\n                        </div>')}},{title:"REMAINING STOCK",minWidth:200,field:"remaining_stock",hozAlign:"center",vertAlign:"middle",print:!1,download:!1},{title:"STATUS",minWidth:200,field:"status",hozAlign:"center",vertAlign:"middle",print:!1,download:!1,formatter:function(e,t){return'<div class="flex items-center lg:justify-center '.concat(e.getData().status?"text-theme-10":"text-theme-24",'">\n                            <i data-feather="check-square" class="w-4 h-4 mr-2"></i> ').concat(e.getData().status?"Active":"Inactive","\n                        </div>")}},{title:"ACTIONS",minWidth:200,field:"actions",responsive:1,hozAlign:"center",vertAlign:"middle",print:!1,download:!1,formatter:function(t,n){var r=e('<div class="flex lg:justify-center items-center">\n                            <a class="edit flex items-center mr-3" href="javascript:;">\n                                <i data-feather="check-square" class="w-4 h-4 mr-1"></i> Edit\n                            </a>\n                            <a class="delete flex items-center text-theme-24" href="javascript:;">\n                                <i data-feather="trash-2" class="w-4 h-4 mr-1"></i> Delete\n                            </a>\n                        </div>');return e(r).find(".edit").on("click",(function(){alert("EDIT")})),e(r).find(".delete").on("click",(function(){alert("DELETE")})),r[0]}},{title:"PRODUCT NAME",field:"name",visible:!1,print:!0,download:!0},{title:"CATEGORY",field:"category",visible:!1,print:!0,download:!0},{title:"REMAINING STOCK",field:"remaining_stock",visible:!1,print:!0,download:!0},{title:"STATUS",field:"status",visible:!1,print:!0,download:!0,formatterPrint:function(e){return e.getValue()?"Active":"Inactive"}},{title:"IMAGE 1",field:"images",visible:!1,print:!0,download:!0,formatterPrint:function(e){return e.getValue()[0]}},{title:"IMAGE 2",field:"images",visible:!1,print:!0,download:!0,formatterPrint:function(e){return e.getValue()[1]}},{title:"IMAGE 3",field:"images",visible:!1,print:!0,download:!0,formatterPrint:function(e){return e.getValue()[2]}}],renderComplete:function(){Ze().replace({"stroke-width":1.5})}});window.addEventListener("resize",(function(){n.redraw(),Ze().replace({"stroke-width":1.5})})),e("#tabulator-html-filter-form")[0].addEventListener("keypress",(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(e.preventDefault(),t())})),e("#tabulator-html-filter-go").on("click",(function(e){t()})),e("#tabulator-html-filter-reset").on("click",(function(n){e("#tabulator-html-filter-field").val("name"),e("#tabulator-html-filter-type").val("like"),e("#tabulator-html-filter-value").val(""),t()})),e("#tabulator-export-csv").on("click",(function(e){n.download("csv","data.csv")})),e("#tabulator-export-json").on("click",(function(e){n.download("json","data.json")})),e("#tabulator-export-xlsx").on("click",(function(e){window.XLSX=xE(),n.download("xlsx","data.xlsx",{sheetName:"Products"})})),e("#tabulator-export-html").on("click",(function(e){n.download("html","data.html",{style:!0})})),e("#tabulator-print").on("click",(function(e){n.print()}))}}(r(5553));var Cw=function(e,t){return(Cw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function xw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Cw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Aw=function(){return(Aw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create;function Rw(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}Object.create;var Mw,Dw,Ow,Nw,Lw,Iw={},Pw=[],Fw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Bw(e,t){for(var n in t)e[n]=t[n];return e}function Yw(e){var t=e.parentNode;t&&t.removeChild(e)}function Hw(e,t,n){var r,i,o,a=arguments,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(a[o]);if(null!=n&&(s.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return Uw(e,s,r,i,null)}function Uw(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++Mw.__v:i};return null!=Mw.vnode&&Mw.vnode(o),o}function zw(){return{current:null}}function jw(e){return e.children}function Vw(e,t){this.props=e,this.context=t}function Gw(e,t){if(null==t)return e.__?Gw(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Gw(e):null}function Ww(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Ww(e)}}function qw(e){(!e.__d&&(e.__d=!0)&&Dw.push(e)&&!$w.__r++||Nw!==Mw.debounceRendering)&&((Nw=Mw.debounceRendering)||Ow)($w)}function $w(){for(var e;$w.__r=Dw.length;)e=Dw.sort((function(e,t){return e.__v.__b-t.__v.__b})),Dw=[],e.some((function(e){var t,n,r,i,o,a;e.__d&&(o=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=Bw({},i)).__v=i.__v+1,rS(a,i,r,t.__n,void 0!==a.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?Gw(i):o,i.__h),iS(n,i),i.__e!=o&&Ww(i)))}))}function Kw(e,t,n,r,i,o,a,s,l,c){var d,u,h,p,f,m,_,g=r&&r.__k||Pw,b=g.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(p=n.__k[d]=null==(p=t[d])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?Uw(null,p,null,null,p):Array.isArray(p)?Uw(jw,{children:p},null,null,null):p.__b>0?Uw(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(h=g[d])||h&&p.key==h.key&&p.type===h.type)g[d]=void 0;else for(u=0;u<b;u++){if((h=g[u])&&p.key==h.key&&p.type===h.type){g[u]=void 0;break}h=null}rS(e,p,h=h||Iw,i,o,a,s,l,c),f=p.__e,(u=p.ref)&&h.ref!=u&&(_||(_=[]),h.ref&&_.push(h.ref,null,p),_.push(u,p.__c||f,p)),null!=f?(null==m&&(m=f),"function"==typeof p.type&&null!=p.__k&&p.__k===h.__k?p.__d=l=Qw(p,l,e):l=Zw(e,p,h,g,f,l),c||"option"!==n.type?"function"==typeof n.type&&(n.__d=l):e.value=""):l&&h.__e==l&&l.parentNode!=e&&(l=Gw(h))}for(n.__e=m,d=b;d--;)null!=g[d]&&("function"==typeof n.type&&null!=g[d].__e&&g[d].__e==n.__d&&(n.__d=Gw(r,d+1)),sS(g[d],g[d]));if(_)for(d=0;d<_.length;d++)aS(_[d],_[++d],_[++d])}function Qw(e,t,n){var r,i;for(r=0;r<e.__k.length;r++)(i=e.__k[r])&&(i.__=e,t="function"==typeof i.type?Qw(i,t,n):Zw(n,i,i,e.__k,i.__e,t));return t}function Xw(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){Xw(e,t)})):t.push(e)),t}function Zw(e,t,n,r,i,o){var a,s,l;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),a=null;else{for(s=o,l=0;(s=s.nextSibling)&&l<r.length;l+=2)if(s==i)break e;e.insertBefore(i,o),a=o}return void 0!==a?a:i.nextSibling}function Jw(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||Fw.test(t)?n:n+"px"}function eS(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Jw(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Jw(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?nS:tS,o):e.removeEventListener(t,o?nS:tS,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function tS(e){this.l[e.type+!1](Mw.event?Mw.event(e):e)}function nS(e){this.l[e.type+!0](Mw.event?Mw.event(e):e)}function rS(e,t,n,r,i,o,a,s,l){var c,d,u,h,p,f,m,_,g,b,v,y=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,s=t.__e=n.__e,t.__h=null,o=[s]),(c=Mw.__b)&&c(t);try{e:if("function"==typeof y){if(_=t.props,g=(c=y.contextType)&&r[c.__c],b=c?g?g.props.value:c.__:r,n.__c?m=(d=t.__c=n.__c).__=d.__E:("prototype"in y&&y.prototype.render?t.__c=d=new y(_,b):(t.__c=d=new Vw(_,b),d.constructor=y,d.render=lS),g&&g.sub(d),d.props=_,d.state||(d.state={}),d.context=b,d.__n=r,u=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=y.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=Bw({},d.__s)),Bw(d.__s,y.getDerivedStateFromProps(_,d.__s))),h=d.props,p=d.state,u)null==y.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==y.getDerivedStateFromProps&&_!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,b),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,b)||t.__v===n.__v){d.props=_,d.state=d.__s,t.__v!==n.__v&&(d.__d=!1),d.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,b),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,p,f)}))}d.context=b,d.props=_,d.state=d.__s,(c=Mw.__r)&&c(t),d.__d=!1,d.__v=t,d.__P=e,c=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(r=Bw(Bw({},r),d.getChildContext())),u||null==d.getSnapshotBeforeUpdate||(f=d.getSnapshotBeforeUpdate(h,p)),v=null!=c&&c.type===jw&&null==c.key?c.props.children:c,Kw(e,Array.isArray(v)?v:[v],t,n,r,i,o,a,s,l),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),m&&(d.__E=d.__=null),d.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=oS(n.__e,t,n,r,i,o,a,l);(c=Mw.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=o)&&(t.__e=s,t.__h=!!l,o[o.indexOf(s)]=null),Mw.__e(e,t,n)}}function iS(e,t){Mw.__c&&Mw.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Mw.__e(e,t.__v)}}))}function oS(e,t,n,r,i,o,a,s){var l,c,d,u,h=n.props,p=t.props,f=t.type,m=0;if("svg"===f&&(i=!0),null!=o)for(;m<o.length;m++)if((l=o[m])&&(l===e||(f?l.localName==f:3==l.nodeType))){e=l,o[m]=null;break}if(null==e){if(null===f)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),o=null,s=!1}if(null===f)h===p||s&&e.data===p||(e.data=p);else{if(o=o&&Pw.slice.call(e.childNodes),c=(h=n.props||Iw).dangerouslySetInnerHTML,d=p.dangerouslySetInnerHTML,!s){if(null!=o)for(h={},u=0;u<e.attributes.length;u++)h[e.attributes[u].name]=e.attributes[u].value;(d||c)&&(d&&(c&&d.__html==c.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||eS(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||eS(e,o,t[o],n[o],r)}(e,p,h,i,s),d)t.__k=[];else if(m=t.props.children,Kw(e,Array.isArray(m)?m:[m],t,n,r,i&&"foreignObject"!==f,o,a,e.firstChild,s),null!=o)for(m=o.length;m--;)null!=o[m]&&Yw(o[m]);s||("value"in p&&void 0!==(m=p.value)&&(m!==e.value||"progress"===f&&!m)&&eS(e,"value",m,h.value,!1),"checked"in p&&void 0!==(m=p.checked)&&m!==e.checked&&eS(e,"checked",m,h.checked,!1))}return e}function aS(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Mw.__e(e,n)}}function sS(e,t,n){var r,i,o;if(Mw.unmount&&Mw.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||aS(r,null,t)),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Mw.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&sS(r[o],t,n);null!=i&&Yw(i)}function lS(e,t,n){return this.constructor(e,n)}function cS(e,t,n){var r,i,o;Mw.__&&Mw.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],rS(t,e=(!r&&n||t).__k=Hw(jw,null,[e]),i||Iw,Iw,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?Pw.slice.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),iS(o,e)}function dS(e,t){var n={__c:t="__cC"+Lw++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(qw)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}Mw={__e:function(e,t){for(var n,r,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e},__v:0},Vw.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Bw({},this.state),"function"==typeof e&&(e=e(Bw({},n),this.props)),e&&Bw(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),qw(this))},Vw.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),qw(this))},Vw.prototype.render=jw,Dw=[],Ow="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$w.__r=0,Lw=0;var uS,hS,pS=[],fS=Mw.__b,mS=Mw.__r,_S=Mw.diffed,gS=Mw.__c,bS=Mw.unmount;function vS(){pS.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(ES),e.__H.__h.forEach(wS),e.__H.__h=[]}catch(t){e.__H.__h=[],Mw.__e(t,e.__v)}})),pS=[]}Mw.__b=function(e){uS=null,fS&&fS(e)},Mw.__r=function(e){mS&&mS(e),0;var t=(uS=e.__c).__H;t&&(t.__h.forEach(ES),t.__h.forEach(wS),t.__h=[])},Mw.diffed=function(e){_S&&_S(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==pS.push(t)&&hS===Mw.requestAnimationFrame||((hS=Mw.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),yS&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);yS&&(t=requestAnimationFrame(n))})(vS)),uS=void 0},Mw.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ES),e.__h=e.__h.filter((function(e){return!e.__||wS(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Mw.__e(n,e.__v)}})),gS&&gS(e,t)},Mw.unmount=function(e){bS&&bS(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(ES)}catch(e){Mw.__e(e,t.__v)}};var yS="function"==typeof requestAnimationFrame;function ES(e){var t=uS;"function"==typeof e.__c&&e.__c(),uS=t}function wS(e){var t=uS;e.__c=e.__(),uS=t}function SS(e,t){for(var n in t)e[n]=t[n];return e}function TS(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function kS(e){this.props=e}(kS.prototype=new Vw).isPureReactComponent=!0,kS.prototype.shouldComponentUpdate=function(e,t){return TS(this.props,e)||TS(this.state,t)};var CS=Mw.__b;Mw.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),CS&&CS(e)};"undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref");var xS=Mw.__e;Mw.__e=function(e,t,n){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);xS(e,t,n)};var AS=Mw.unmount;function RS(){this.__u=0,this.t=null,this.__b=null}function MS(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function DS(){this.u=null,this.o=null}Mw.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),AS&&AS(e)},(RS.prototype=new Vw).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=MS(r.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(a,a)},RS.prototype.componentWillUnmount=function(){this.t=[]},RS.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=SS({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__e&&Hw(jw,null,e.fallback);return i&&(i.__h=null),[Hw(jw,null,t.__e?null:e.children),i]};var OS=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function NS(e){return this.getChildContext=function(){return e.context},e.children}function LS(e){var t=this,n=e.i;t.componentWillUnmount=function(){cS(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),cS(Hw(NS,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function IS(e,t){return Hw(LS,{__v:e,i:t})}(DS.prototype=new Vw).__e=function(e){var t=this,n=MS(t.__v),r=t.o.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),OS(t,e,r)):i()};n?n(o):o()}},DS.prototype.render=function(e){this.u=null,this.o=new Map;var t=Xw(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},DS.prototype.componentDidUpdate=DS.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){OS(e,n,t)}))};var PS="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,FS=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,BS=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};Vw.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(Vw.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var YS=Mw.event;function HS(){}function US(){return this.cancelBubble}function zS(){return this.defaultPrevented}Mw.event=function(e){return YS&&(e=YS(e)),e.persist=HS,e.isPropagationStopped=US,e.isDefaultPrevented=zS,e.nativeEvent=e};var jS={configurable:!0,get:function(){return this.class}},VS=Mw.vnode;Mw.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){for(var i in r={},n){var o=n[i];"value"===i&&"defaultValue"in n&&null==o||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===o?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!BS(n.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():FS.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===o&&(o=void 0),r[i]=o)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=Xw(n.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=Xw(n.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r}t&&n.class!=n.className&&(jS.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",jS)),e.$$typeof=PS,VS&&VS(e)};var GS=Mw.__r;Mw.__r=function(e){GS&&GS(e),e.__c};"object"==typeof performance&&"function"==typeof performance.now&&performance.now.bind(performance);var WS="undefined"!=typeof globalThis?globalThis:window;WS.FullCalendarVDom?console.warn("FullCalendar VDOM already loaded"):WS.FullCalendarVDom={Component:Vw,createElement:Hw,render:cS,createRef:zw,Fragment:jw,createContext:function(e){var t=dS(e),n=t.Provider;return t.Provider=function(){var e=this,t=!this.getChildContext,r=n.apply(this,arguments);if(t){var i=[];this.shouldComponentUpdate=function(t){e.props.value!==t.value&&i.forEach((function(e){e.context=t.value,e.forceUpdate()}))},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}}return r},t},createPortal:IS,flushToDom:function(){var e=Mw.debounceRendering,t=[];function n(e){t.push(e)}Mw.debounceRendering=n,cS(Hw(qS,{}),document.createElement("div"));for(;t.length;)t.shift()();Mw.debounceRendering=e},unmountComponentAtNode:function(e){cS(null,e)}};var qS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){return Hw("div",{})},t.prototype.componentDidMount=function(){this.setState({})},t}(Vw);r(7158);if("undefined"==typeof FullCalendarVDom)throw new Error("Please import the top-level fullcalendar lib before attempting to import a plugin.");var $S=FullCalendarVDom.Component,KS=FullCalendarVDom.createElement,QS=FullCalendarVDom.render,XS=FullCalendarVDom.createRef,ZS=FullCalendarVDom.Fragment,JS=FullCalendarVDom.createContext,eT=FullCalendarVDom.createPortal,tT=FullCalendarVDom.flushToDom,nT=FullCalendarVDom.unmountComponentAtNode,rT=function(){function e(e,t){this.context=e,this.internalEventSource=t}return e.prototype.remove=function(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},e.prototype.refetch=function(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})},Object.defineProperty(e.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.internalEventSource.meta.format},enumerable:!1,configurable:!0}),e}();function iT(e){e.parentNode&&e.parentNode.removeChild(e)}function oT(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(aT(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}function aT(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector).call(e,t)}var sT=/(top|left|right|bottom|width|height)$/i;function lT(e,t){for(var n in t)cT(e,n,t[n])}function cT(e,t,n){null==n?e.style[t]="":"number"==typeof n&&sT.test(t)?e.style[t]=n+"px":e.style[t]=n}function dT(e){var t,n;return null!==(n=null===(t=e.composedPath)||void 0===t?void 0:t.call(e)[0])&&void 0!==n?n:e.target}function uT(e){e.preventDefault()}function hT(e,t){return function(n){var r=oT(n.target,e);r&&t.call(r,n,r)}}function pT(e,t,n,r){var i=hT(n,r);return e.addEventListener(t,i),function(){e.removeEventListener(t,i)}}var fT=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];var mT=0;function _T(){return String(mT+=1)}function gT(){document.body.classList.add("fc-not-allowed")}function bT(){document.body.classList.remove("fc-not-allowed")}function vT(e,t,n){return n.func?n.func(e,t):function(e,t){if(!e&&!t)return 0;if(null==t)return-1;if(null==e)return 1;if("string"==typeof e||"string"==typeof t)return String(e).localeCompare(String(t));return e-t}(e[n.field],t[n.field])*(n.order||1)}function yT(e,t){var n=String(e);return"000".substr(0,t-n.length)+n}function ET(e,t){return e-t}function wT(e){return e%1==0}function ST(e){var t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}var TT=["sun","mon","tue","wed","thu","fri","sat"];function kT(e,t){var n=IT(e);return n[2]+=7*t,PT(n)}function CT(e,t){var n=IT(e);return n[2]+=t,PT(n)}function xT(e,t){var n=IT(e);return n[6]+=t,PT(n)}function AT(e,t){return(t.valueOf()-e.valueOf())/864e5}function RT(e,t){return BT(e)===BT(t)?Math.round(AT(e,t)):null}function MT(e){return PT([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function DT(e,t,n,r){var i=PT([t,0,1+OT(t,n,r)]),o=MT(e),a=Math.round(AT(i,o));return Math.floor(a/7)+1}function OT(e,t,n){var r=7+t-n;return-((7+PT([e,0,r]).getUTCDay()-t)%7)+r-1}function NT(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function LT(e){return new Date(e[0],e[1]||0,null==e[2]?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function IT(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function PT(e){return 1===e.length&&(e=e.concat([0])),new Date(Date.UTC.apply(Date,e))}function FT(e){return!isNaN(e.valueOf())}function BT(e){return 1e3*e.getUTCHours()*60*60+1e3*e.getUTCMinutes()*60+1e3*e.getUTCSeconds()+e.getUTCMilliseconds()}function YT(e,t,n,r){return{instanceId:_T(),defId:e,range:t,forcedStartTzo:null==n?null:n,forcedEndTzo:null==r?null:r}}var HT=Object.prototype.hasOwnProperty;function UT(e,t){var n={};if(t)for(var r in t){for(var i=[],o=e.length-1;o>=0;o-=1){var a=e[o][r];if("object"==typeof a&&a)i.unshift(a);else if(void 0!==a){n[r]=a;break}}i.length&&(n[r]=UT(i))}for(o=e.length-1;o>=0;o-=1){var s=e[o];for(var l in s)l in n||(n[l]=s[l])}return n}function zT(e,t){var n={};for(var r in e)t(e[r],r)&&(n[r]=e[r]);return n}function jT(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function VT(e){for(var t={},n=0,r=e;n<r.length;n++){t[r[n]]=!0}return t}function GT(e){var t=[];for(var n in e)t.push(e[n]);return t}function WT(e,t){if(e===t)return!0;for(var n in e)if(HT.call(e,n)&&!(n in t))return!1;for(var n in t)if(HT.call(t,n)&&e[n]!==t[n])return!1;return!0}function qT(e,t){var n=[];for(var r in e)HT.call(e,r)&&(r in t||n.push(r));for(var r in t)HT.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function $T(e,t,n){if(void 0===n&&(n={}),e===t)return!0;for(var r in t)if(!(r in e)||!KT(e[r],t[r],n[r]))return!1;for(var r in e)if(!(r in t))return!1;return!0}function KT(e,t,n){return e===t||!0===n||!!n&&n(e,t)}function QT(e,t,n){var r=n.dateEnv,i=n.pluginHooks,o=n.options,a=e.defs,s=e.instances;for(var l in s=zT(s,(function(e){return!a[e.defId].recurringDef})),a){var c=a[l];if(c.recurringDef){var d=c.recurringDef.duration;d||(d=c.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);for(var u=0,h=XT(c,d,t,r,i.recurringTypes);u<h.length;u++){var p=h[u],f=YT(l,{start:p,end:r.add(p,d)});s[f.instanceId]=f}}}return{defs:a,instances:s}}function XT(e,t,n,r,i){var o=i[e.recurringDef.typeId].expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(o=o.map(MT)),o}var ZT=["years","months","days","milliseconds"],JT=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function ek(e,t){var n;return"string"==typeof e?function(e){var t=JT.exec(e);if(t){var n=t[1]?-1:1;return{years:0,months:0,days:n*(t[2]?parseInt(t[2],10):0),milliseconds:n*(60*(t[3]?parseInt(t[3],10):0)*60*1e3+60*(t[4]?parseInt(t[4],10):0)*1e3+1e3*(t[5]?parseInt(t[5],10):0)+(t[6]?parseInt(t[6],10):0))}}return null}(e):"object"==typeof e&&e?tk(e):"number"==typeof e?tk(((n={})[t||"milliseconds"]=e,n)):null}function tk(e){var t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:60*(e.hours||e.hour||0)*60*1e3+60*(e.minutes||e.minute||0)*1e3+1e3*(e.seconds||e.second||0)+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=7*n,t.specifiedWeeks=!0),t}function nk(e,t){return{years:e.years+t.years,months:e.months+t.months,days:e.days+t.days,milliseconds:e.milliseconds+t.milliseconds}}function rk(e){return ik(e)/864e5}function ik(e){return 31536e6*e.years+2592e6*e.months+864e5*e.days+e.milliseconds}function ok(e,t){for(var n=null,r=0;r<ZT.length;r+=1){var i=ZT[r];if(t[i]){var o=e[i]/t[i];if(!wT(o)||null!==n&&n!==o)return null;n=o}else if(e[i])return null}return n}function ak(e){var t=e.milliseconds;if(t){if(t%1e3!=0)return{unit:"millisecond",value:t};if(t%6e4!=0)return{unit:"second",value:t/1e3};if(t%36e5!=0)return{unit:"minute",value:t/6e4};if(t)return{unit:"hour",value:t/36e5}}return e.days?e.specifiedWeeks&&e.days%7==0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function sk(e,t,n){void 0===n&&(n=!1);var r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(null==t?r=r.replace("Z",""):0!==t&&(r=r.replace("Z",dk(t,!0)))),r}function lk(e){return e.toISOString().replace(/T.*$/,"")}function ck(e){return yT(e.getUTCHours(),2)+":"+yT(e.getUTCMinutes(),2)+":"+yT(e.getUTCSeconds(),2)}function dk(e,t){void 0===t&&(t=!1);var n=e<0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=Math.round(r%60);return t?n+yT(i,2)+":"+yT(o,2):"GMT"+n+i+(o?":"+yT(o,2):"")}function uk(e,t,n){if(e===t)return!0;var r,i=e.length;if(i!==t.length)return!1;for(r=0;r<i;r+=1)if(!(n?n(e[r],t[r]):e[r]===t[r]))return!1;return!0}function hk(e,t,n){var r,i;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(r){if(!uk(r,o)){n&&n(i);var s=e.apply(this,o);t&&t(s,i)||(i=s)}}else i=e.apply(this,o);return r=o,i}}function pk(e,t,n){var r,i,o=this;return function(a){if(r){if(!WT(r,a)){n&&n(i);var s=e.call(o,a);t&&t(s,i)||(i=s)}}else i=e.call(o,a);return r=a,i}}var fk={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},mk={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},_k=/\s*([ap])\.?m\.?/i,gk=/,/g,bk=/\s+/g,vk=/\u200e/g,yk=/UTC|GMT/,Ek=function(){function e(e){var t={},n={},r=0;for(var i in e)i in fk?(n[i]=e[i],r=Math.max(fk[i],r)):(t[i]=e[i],i in mk&&(r=Math.max(mk[i],r)));this.standardDateProps=t,this.extendedSettings=n,this.severity=r,this.buildFormattingFunc=hk(wk)}return e.prototype.format=function(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)},e.prototype.formatRange=function(e,t,n,r){var i=this.standardDateProps,o=this.extendedSettings,a=function(e,t,n){if(n.getMarkerYear(e)!==n.getMarkerYear(t))return 5;if(n.getMarkerMonth(e)!==n.getMarkerMonth(t))return 4;if(n.getMarkerDay(e)!==n.getMarkerDay(t))return 2;if(BT(e)!==BT(t))return 1;return 0}(e.marker,t.marker,n.calendarSystem);if(!a)return this.format(e,n);var s=a;!(s>1)||"numeric"!==i.year&&"2-digit"!==i.year||"numeric"!==i.month&&"2-digit"!==i.month||"numeric"!==i.day&&"2-digit"!==i.day||(s=1);var l=this.format(e,n),c=this.format(t,n);if(l===c)return l;var d=wk(function(e,t){var n={};for(var r in e)(!(r in mk)||mk[r]<=t)&&(n[r]=e[r]);return n}(i,s),o,n),u=d(e),h=d(t),p=function(e,t,n,r){var i=0;for(;i<e.length;){var o=e.indexOf(t,i);if(-1===o)break;var a=e.substr(0,o);i=o+t.length;for(var s=e.substr(i),l=0;l<n.length;){var c=n.indexOf(r,l);if(-1===c)break;var d=n.substr(0,c);l=c+r.length;var u=n.substr(l);if(a===d&&s===u)return{before:a,after:s}}}return null}(l,u,c,h),f=o.separator||r||n.defaultSeparator||"";return p?p.before+u+f+h+p.after:l+f+c},e.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}},e}();function wk(e,t,n){var r=Object.keys(e).length;return 1===r&&"short"===e.timeZoneName?function(e){return dk(e.timeZoneOffset)}:0===r&&t.week?function(e){return function(e,t,n,r){var i=[];"narrow"===r?i.push(t):"short"===r&&i.push(t," ");i.push(n.simpleNumberFormat.format(e)),"rtl"===n.options.direction&&i.reverse();return i.join("")}(n.computeWeekNumber(e.marker),n.weekText,n.locale,t.week)}:function(e,t,n){e=Aw({},e),t=Aw({},t),function(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit"));"long"===e.timeZoneName&&(e.timeZoneName="short");t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}(e,t),e.timeZone="UTC";var r,i=new Intl.DateTimeFormat(n.locale.codes,e);if(t.omitZeroMinute){var o=Aw({},e);delete o.minute,r=new Intl.DateTimeFormat(n.locale.codes,o)}return function(o){var a=o.marker;return function(e,t,n,r,i){e=e.replace(vk,""),"short"===n.timeZoneName&&(e=function(e,t){var n=!1;e=e.replace(yk,(function(){return n=!0,t})),n||(e+=" "+t);return e}(e,"UTC"===i.timeZone||null==t.timeZoneOffset?"UTC":dk(t.timeZoneOffset)));r.omitCommas&&(e=e.replace(gk,"").trim());r.omitZeroMinute&&(e=e.replace(":00",""));!1===r.meridiem?e=e.replace(_k,"").trim():"narrow"===r.meridiem?e=e.replace(_k,(function(e,t){return t.toLocaleLowerCase()})):"short"===r.meridiem?e=e.replace(_k,(function(e,t){return t.toLocaleLowerCase()+"m"})):"lowercase"===r.meridiem&&(e=e.replace(_k,(function(e){return e.toLocaleLowerCase()})));return e=(e=e.replace(bk," ")).trim()}((r&&!a.getUTCMinutes()?r:i).format(a),o,e,t,n)}}(e,t,n)}function Sk(e,t){var n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Tk(e,t,n,r){var i=Sk(e,n.calendarSystem);return{date:i,start:i,end:t?Sk(t,n.calendarSystem):null,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}var kk=function(){function e(e){this.cmdStr=e}return e.prototype.format=function(e,t,n){return t.cmdFormatter(this.cmdStr,Tk(e,null,t,n))},e.prototype.formatRange=function(e,t,n,r){return n.cmdFormatter(this.cmdStr,Tk(e,t,n,r))},e}(),Ck=function(){function e(e){this.func=e}return e.prototype.format=function(e,t,n){return this.func(Tk(e,null,t,n))},e.prototype.formatRange=function(e,t,n,r){return this.func(Tk(e,t,n,r))},e}();function xk(e){return"object"==typeof e&&e?new Ek(e):"string"==typeof e?new kk(e):"function"==typeof e?new Ck(e):null}var Ak={navLinkDayClick:Fk,navLinkWeekClick:Fk,duration:ek,bootstrapFontAwesome:Fk,buttonIcons:Fk,customButtons:Fk,defaultAllDayEventDuration:ek,defaultTimedEventDuration:ek,nextDayThreshold:ek,scrollTime:ek,scrollTimeReset:Boolean,slotMinTime:ek,slotMaxTime:ek,dayPopoverFormat:xk,slotDuration:ek,snapDuration:ek,headerToolbar:Fk,footerToolbar:Fk,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:xk,dayHeaderClassNames:Fk,dayHeaderContent:Fk,dayHeaderDidMount:Fk,dayHeaderWillUnmount:Fk,dayCellClassNames:Fk,dayCellContent:Fk,dayCellDidMount:Fk,dayCellWillUnmount:Fk,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Fk,weekNumbers:Boolean,weekNumberClassNames:Fk,weekNumberContent:Fk,weekNumberDidMount:Fk,weekNumberWillUnmount:Fk,editable:Boolean,viewClassNames:Fk,viewDidMount:Fk,viewWillUnmount:Fk,nowIndicator:Boolean,nowIndicatorClassNames:Fk,nowIndicatorContent:Fk,nowIndicatorDidMount:Fk,nowIndicatorWillUnmount:Fk,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Fk,locale:Fk,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Fk,eventOrder:function(e){var t,n,r=[],i=[];for("string"==typeof e?i=e.split(/\s*,\s*/):"function"==typeof e?i=[e]:Array.isArray(e)&&(i=e),t=0;t<i.length;t+=1)"string"==typeof(n=i[t])?r.push("-"===n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"==typeof n&&r.push({func:n});return r},eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Fk,contentHeight:Fk,direction:String,weekNumberFormat:xk,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,progressiveEventRendering:Boolean,businessHours:Fk,initialDate:Fk,now:Fk,eventDataTransform:Fk,stickyHeaderDates:Fk,stickyFooterScrollbar:Fk,viewHeight:Fk,defaultAllDay:Boolean,eventSourceFailure:Fk,eventSourceSuccess:Fk,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Fk,eventConstraint:Fk,eventAllow:Fk,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Fk,eventContent:Fk,eventDidMount:Fk,eventWillUnmount:Fk,selectConstraint:Fk,selectOverlap:Fk,selectAllow:Fk,droppable:Boolean,unselectCancel:String,slotLabelFormat:Fk,slotLaneClassNames:Fk,slotLaneContent:Fk,slotLaneDidMount:Fk,slotLaneWillUnmount:Fk,slotLabelClassNames:Fk,slotLabelContent:Fk,slotLabelDidMount:Fk,slotLabelWillUnmount:Fk,dayMaxEvents:Fk,dayMaxEventRows:Fk,dayMinWidth:Number,slotLabelInterval:ek,allDayText:String,allDayClassNames:Fk,allDayContent:Fk,allDayDidMount:Fk,allDayWillUnmount:Fk,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:xk,rerenderDelay:Number,moreLinkText:Fk,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Fk,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:ek,hiddenDays:Fk,monthMode:Boolean,fixedWeekCount:Boolean,validRange:Fk,visibleRange:Fk,titleFormat:Fk,noEventsText:String,moreLinkClick:Fk,moreLinkClassNames:Fk,moreLinkContent:Fk,moreLinkDidMount:Fk,moreLinkWillUnmount:Fk},Rk={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30},Mk={datesSet:Fk,eventsSet:Fk,eventAdd:Fk,eventChange:Fk,eventRemove:Fk,windowResize:Fk,eventClick:Fk,eventMouseEnter:Fk,eventMouseLeave:Fk,select:Fk,unselect:Fk,loading:Fk,_unmount:Fk,_beforeprint:Fk,_afterprint:Fk,_noEventDrop:Fk,_noEventResize:Fk,_resize:Fk,_scrollRequest:Fk},Dk={buttonText:Fk,views:Fk,plugins:Fk,initialEvents:Fk,events:Fk,eventSources:Fk},Ok={headerToolbar:Nk,footerToolbar:Nk,buttonText:Nk,buttonIcons:Nk};function Nk(e,t){return"object"==typeof e&&"object"==typeof t&&e&&t?WT(e,t):e===t}var Lk={type:String,component:Fk,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Fk,usesMinMaxTime:Boolean,classNames:Fk,content:Fk,didMount:Fk,willUnmount:Fk};function Ik(e){return UT(e,Ok)}function Pk(e,t){var n={},r={};for(var i in t)i in e&&(n[i]=t[i](e[i]));for(var i in e)i in t||(r[i]=e[i]);return{refined:n,extra:r}}function Fk(e){return e}function Bk(e,t,n,r){for(var i={defs:{},instances:{}},o=eC(n),a=0,s=e;a<s.length;a++){var l=Zk(s[a],t,n,r,o);l&&Yk(l,i)}return i}function Yk(e,t){return void 0===t&&(t={defs:{},instances:{}}),t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function Hk(e,t){var n=e.instances[t];if(n){var r=e.defs[n.defId],i=zk(e,(function(e){return t=r,n=e,Boolean(t.groupId&&t.groupId===n.groupId);var t,n}));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return{defs:{},instances:{}}}function Uk(e,t){return{defs:Aw(Aw({},e.defs),t.defs),instances:Aw(Aw({},e.instances),t.instances)}}function zk(e,t){var n=zT(e.defs,t),r=zT(e.instances,(function(e){return n[e.defId]}));return{defs:n,instances:r}}function jk(e){return Array.isArray(e)?e:"string"==typeof e?e.split(/\s+/):[]}var Vk={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Fk,overlap:Fk,allow:Fk,className:jk,classNames:jk,color:String,backgroundColor:String,borderColor:String,textColor:String},Gk={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Wk(e,t){var n=function(e,t){return Array.isArray(e)?Bk(e,null,t,!0):"object"==typeof e&&e?Bk([e],null,t,!0):null!=e?String(e):null}(e.constraint,t);return{display:e.display||null,startEditable:null!=e.startEditable?e.startEditable:e.editable,durationEditable:null!=e.durationEditable?e.durationEditable:e.editable,constraints:null!=n?[n]:[],overlap:null!=e.overlap?e.overlap:null,allows:null!=e.allow?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function qk(e){return e.reduce($k,Gk)}function $k(e,t){return{display:null!=t.display?t.display:e.display,startEditable:null!=t.startEditable?t.startEditable:e.startEditable,durationEditable:null!=t.durationEditable?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:"boolean"==typeof t.overlap?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}var Kk={id:String,groupId:String,title:String,url:String},Qk={start:Fk,end:Fk,date:Fk,allDay:Boolean},Xk=Aw(Aw(Aw({},Kk),Qk),{extendedProps:Fk});function Zk(e,t,n,r,i){void 0===i&&(i=eC(n));var o=Jk(e,n,i),a=o.refined,s=o.extra,l=function(e,t){var n=null;e&&(n=e.defaultAllDay);null==n&&(n=t.options.defaultAllDay);return n}(t,n),c=function(e,t,n,r){for(var i=0;i<r.length;i+=1){var o=r[i].parse(e,n);if(o){var a=e.allDay;return null==a&&null==(a=t)&&null==(a=o.allDayGuess)&&(a=!1),{allDay:a,duration:o.duration,typeData:o.typeData,typeId:i}}}return null}(a,l,n.dateEnv,n.pluginHooks.recurringTypes);if(c)return(d=tC(a,s,t?t.sourceId:"",c.allDay,Boolean(c.duration),n)).recurringDef={typeId:c.typeId,typeData:c.typeData,duration:c.duration},{def:d,instance:null};var d,u=function(e,t,n,r){var i,o,a=e.allDay,s=null,l=!1,c=null,d=null!=e.start?e.start:e.date;if(i=n.dateEnv.createMarkerMeta(d))s=i.marker;else if(!r)return null;null!=e.end&&(o=n.dateEnv.createMarkerMeta(e.end));null==a&&(a=null!=t?t:(!i||i.isTimeUnspecified)&&(!o||o.isTimeUnspecified));a&&s&&(s=MT(s));o&&(c=o.marker,a&&(c=MT(c)),s&&c<=s&&(c=null));c?l=!0:r||(l=n.options.forceEventDuration||!1,c=n.dateEnv.add(s,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration));return{allDay:a,hasEnd:l,range:{start:s,end:c},forcedStartTzo:i?i.forcedTzo:null,forcedEndTzo:o?o.forcedTzo:null}}(a,l,n,r);return u?{def:d=tC(a,s,t?t.sourceId:"",u.allDay,u.hasEnd,n),instance:YT(d.defId,u.range,u.forcedStartTzo,u.forcedEndTzo)}:null}function Jk(e,t,n){return void 0===n&&(n=eC(t)),Pk(e,n)}function eC(e){return Aw(Aw(Aw({},Vk),Xk),e.pluginHooks.eventRefiners)}function tC(e,t,n,r,i,o){for(var a={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:_T(),sourceId:n,allDay:r,hasEnd:i,ui:Wk(e,o),extendedProps:Aw(Aw({},e.extendedProps||{}),t)},s=0,l=o.pluginHooks.eventDefMemberAdders;s<l.length;s++){var c=l[s];Aw(a,c(e))}return Object.freeze(a.ui.classNames),Object.freeze(a.extendedProps),a}function nC(e){var t=Math.floor(AT(e.start,e.end))||1,n=MT(e.start);return{start:n,end:CT(n,t)}}function rC(e,t){void 0===t&&(t=ek(0));var n=null,r=null;if(e.end){r=MT(e.end);var i=e.end.valueOf()-r.valueOf();i&&i>=ik(t)&&(r=CT(r,1))}return e.start&&(n=MT(e.start),r&&r<=n&&(r=CT(n,1))),{start:n,end:r}}function iC(e,t,n,r){return"year"===r?ek(n.diffWholeYears(e,t),"year"):"month"===r?ek(n.diffWholeMonths(e,t),"month"):(o=t,a=MT(i=e),s=MT(o),{years:0,months:0,days:Math.round(AT(a,s)),milliseconds:o.valueOf()-s.valueOf()-(i.valueOf()-a.valueOf())});var i,o,a,s}function oC(e,t){var n,r,i=[],o=t.start;for(e.sort(aC),n=0;n<e.length;n+=1)(r=e[n]).start>o&&i.push({start:o,end:r.start}),r.end>o&&(o=r.end);return o<t.end&&i.push({start:o,end:t.end}),i}function aC(e,t){return e.start.valueOf()-t.start.valueOf()}function sC(e,t){var n=e.start,r=e.end,i=null;return null!==t.start&&(n=null===n?t.start:new Date(Math.max(n.valueOf(),t.start.valueOf()))),null!=t.end&&(r=null===r?t.end:new Date(Math.min(r.valueOf(),t.end.valueOf()))),(null===n||null===r||n<r)&&(i={start:n,end:r}),i}function lC(e,t){return(null===e.end||null===t.start||e.end>t.start)&&(null===e.start||null===t.end||e.start<t.end)}function cC(e,t){return(null===e.start||null!==t.start&&t.start>=e.start)&&(null===e.end||null!==t.end&&t.end<=e.end)}function dC(e,t){return(null===e.start||t>=e.start)&&(null===e.end||t<e.end)}function uC(e,t,n,r){var i={},o={},a={},s=[],l=[],c=fC(e.defs,t);for(var d in e.defs){"inverse-background"===(p=c[(y=e.defs[d]).defId]).display&&(y.groupId?(i[y.groupId]=[],a[y.groupId]||(a[y.groupId]=y)):o[d]=[])}for(var u in e.instances){var h=e.instances[u],p=c[(y=e.defs[h.defId]).defId],f=h.range,m=!y.allDay&&r?rC(f,r):f,_=sC(m,n);_&&("inverse-background"===p.display?y.groupId?i[y.groupId].push(_):o[h.defId].push(_):"none"!==p.display&&("background"===p.display?s:l).push({def:y,ui:p,instance:h,range:_,isStart:m.start&&m.start.valueOf()===_.start.valueOf(),isEnd:m.end&&m.end.valueOf()===_.end.valueOf()}))}for(var g in i)for(var b=0,v=oC(i[g],n);b<v.length;b++){var y,E=v[b];p=c[(y=a[g]).defId];s.push({def:y,ui:p,instance:null,range:E,isStart:!1,isEnd:!1})}for(var d in o)for(var w=0,S=oC(o[d],n);w<S.length;w++){E=S[w];s.push({def:e.defs[d],ui:c[d],instance:null,range:E,isStart:!1,isEnd:!1})}return{bg:s,fg:l}}function hC(e,t){e.fcSeg=t}function pC(e){return e.fcSeg||e.parentNode.fcSeg||null}function fC(e,t){return jT(e,(function(e){return mC(e,t)}))}function mC(e,t){var n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),qk(n)}function _C(e,t){var n=e.map(gC);return n.sort((function(e,n){return function(e,t,n){var r,i;for(r=0;r<n.length;r+=1)if(i=vT(e,t,n[r]))return i;return 0}(e,n,t)})),n.map((function(e){return e._seg}))}function gC(e){var t=e.eventRange,n=t.def,r=t.instance?t.instance.range:t.range,i=r.start?r.start.valueOf():0,o=r.end?r.end.valueOf():0;return Aw(Aw(Aw({},n.extendedProps),n),{id:n.publicId,start:i,end:o,duration:o-i,allDay:Number(n.allDay),_seg:e})}function bC(e,t){for(var n=t.pluginHooks.isDraggableTransformers,r=e.eventRange,i=r.def,o=r.ui,a=o.startEditable,s=0,l=n;s<l.length;s++){a=(0,l[s])(a,i,o,t)}return a}function vC(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function yC(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function EC(e,t,n,r,i,o,a){var s=n.dateEnv,l=n.options,c=l.displayEventTime,d=l.displayEventEnd,u=e.eventRange.def,h=e.eventRange.instance;null==c&&(c=!1!==r),null==d&&(d=!1!==i);var p=h.range.start,f=h.range.end,m=o||e.start||e.eventRange.range.start,_=a||e.end||e.eventRange.range.end,g=MT(p).valueOf()===MT(m).valueOf(),b=MT(xT(f,-1)).valueOf()===MT(xT(_,-1)).valueOf();return c&&!u.allDay&&(g||b)?(m=g?p:m,_=b?f:_,d&&u.hasEnd?s.formatRange(m,_,t,{forcedStartTzo:o?null:h.forcedStartTzo,forcedEndTzo:a?null:h.forcedEndTzo}):s.format(m,t,{forcedTzo:o?null:h.forcedStartTzo})):""}function wC(e,t,n){var r=e.eventRange.range;return{isPast:r.end<(n||t.start),isFuture:r.start>=(n||t.end),isToday:t&&dC(t,r.start)}}function SC(e){return e.instance?e.instance.instanceId:e.def.defId+":"+e.range.start.toISOString()}var TC={start:Fk,end:Fk,allDay:Boolean};function kC(e,t,n){var r=function(e,t){var n=Pk(e,TC),r=n.refined,i=n.extra,o=r.start?t.createMarkerMeta(r.start):null,a=r.end?t.createMarkerMeta(r.end):null,s=r.allDay;null==s&&(s=o&&o.isTimeUnspecified&&(!a||a.isTimeUnspecified));return Aw({range:{start:o?o.marker:null,end:a?a.marker:null},allDay:s},i)}(e,t),i=r.range;if(!i.start)return null;if(!i.end){if(null==n)return null;i.end=t.add(i.start,n)}return r}function CC(e,t,n){return Aw(Aw({},xC(e,t,n)),{timeZone:t.timeZone})}function xC(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}function AC(e,t,n){var r=Jk({editable:!1},n),i=tC(r.refined,r.extra,"",e.allDay,!0,n);return{def:i,ui:mC(i,t),instance:YT(i.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function RC(e,t,n){n.emitter.trigger("select",Aw(Aw({},MC(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function MC(e,t){for(var n,r,i={},o=0,a=t.pluginHooks.dateSpanTransforms;o<a.length;o++){var s=a[o];Aw(i,s(e,t))}return Aw(i,(n=e,r=t.dateEnv,Aw(Aw({},xC(n.range,r,n.allDay)),{allDay:n.allDay}))),i}function DC(e,t,n){var r=n.dateEnv,i=n.options,o=t;return e?(o=MT(o),o=r.add(o,i.defaultAllDayEventDuration)):o=r.add(o,i.defaultTimedEventDuration),o}function OC(e,t,n,r){var i=fC(e.defs,t),o={defs:{},instances:{}};for(var a in e.defs){var s=e.defs[a];o.defs[a]=NC(s,i[a],n,r)}for(var l in e.instances){var c=e.instances[l];s=o.defs[c.defId];o.instances[l]=LC(c,s,i[c.defId],n,r)}return o}function NC(e,t,n,r){var i=n.standardProps||{};null==i.hasEnd&&t.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);var o=Aw(Aw(Aw({},e),i),{ui:Aw(Aw({},e.ui),i.ui)});n.extendedProps&&(o.extendedProps=Aw(Aw({},o.extendedProps),n.extendedProps));for(var a=0,s=r.pluginHooks.eventDefMutationAppliers;a<s.length;a++){(0,s[a])(o,n,r)}return!o.hasEnd&&r.options.forceEventDuration&&(o.hasEnd=!0),o}function LC(e,t,n,r,i){var o=i.dateEnv,a=r.standardProps&&!0===r.standardProps.allDay,s=r.standardProps&&!1===r.standardProps.hasEnd,l=Aw({},e);return a&&(l.range=nC(l.range)),r.datesDelta&&n.startEditable&&(l.range={start:o.add(l.range.start,r.datesDelta),end:o.add(l.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(l.range={start:o.add(l.range.start,r.startDelta),end:l.range.end}),r.endDelta&&n.durationEditable&&(l.range={start:l.range.start,end:o.add(l.range.end,r.endDelta)}),s&&(l.range={start:l.range.start,end:DC(t.allDay,l.range.start,i)}),t.allDay&&(l.range={start:MT(l.range.start),end:MT(l.range.end)}),l.range.end<l.range.start&&(l.range.end=DC(t.allDay,l.range.start,i)),l}var IC=function(){function e(e,t,n){this.type=e,this.getCurrentData=t,this.dateEnv=n}return Object.defineProperty(e.prototype,"calendar",{get:function(){return this.getCurrentData().calendarApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.getCurrentData().viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)},enumerable:!1,configurable:!0}),e.prototype.getOption=function(e){return this.getCurrentData().options[e]},e}(),PC={id:String,defaultAllDay:Boolean,url:String,format:String,events:Fk,eventDataTransform:Fk,success:Fk,failure:Fk};function FC(e,t,n){var r;if(void 0===n&&(n=BC(t)),"string"==typeof e?r={url:e}:"function"==typeof e||Array.isArray(e)?r={events:e}:"object"==typeof e&&e&&(r=e),r){var i=Pk(r,n),o=i.refined,a=i.extra,s=function(e,t){for(var n=t.pluginHooks.eventSourceDefs,r=n.length-1;r>=0;r-=1){var i=n[r].parseMeta(e);if(i)return{sourceDefId:r,meta:i}}return null}(o,t);if(s)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:o.defaultAllDay,eventDataTransform:o.eventDataTransform,success:o.success,failure:o.failure,publicId:o.id||"",sourceId:_T(),sourceDefId:s.sourceDefId,meta:s.meta,ui:Wk(o,t),extendedProps:a}}return null}function BC(e){return Aw(Aw(Aw({},Vk),PC),e.pluginHooks.eventSourceRefiners)}function YC(e,t){return"function"==typeof e&&(e=e()),null==e?t.createNowMarker():t.createMarker(e)}var HC=function(){function e(){}return e.prototype.getCurrentData=function(){return this.currentDataManager.getCurrentData()},e.prototype.dispatch=function(e){return this.currentDataManager.dispatch(e)},Object.defineProperty(e.prototype,"view",{get:function(){return this.getCurrentData().viewApi},enumerable:!1,configurable:!0}),e.prototype.batchRendering=function(e){e()},e.prototype.updateSize=function(){this.trigger("_resize",!0)},e.prototype.setOption=function(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})},e.prototype.getOption=function(e){return this.currentDataManager.currentCalendarOptionsInput[e]},e.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.getCurrentData().availableRawLocales)},e.prototype.on=function(e,t){var n=this.currentDataManager;n.currentCalendarOptionsRefiners[e]?n.emitter.on(e,t):console.warn("Unknown listener name '"+e+"'")},e.prototype.off=function(e,t){this.currentDataManager.emitter.off(e,t)},e.prototype.trigger=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this.currentDataManager.emitter).trigger.apply(t,Rw([e],n))},e.prototype.changeView=function(e,t){var n=this;this.batchRendering((function(){if(n.unselect(),t)if(t.start&&t.end)n.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),n.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{var r=n.getCurrentData().dateEnv;n.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(t)})}else n.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})}))},e.prototype.zoomTo=function(e,t){var n;t=t||"day",n=this.getCurrentData().viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),n?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:n.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})},e.prototype.getUnitViewSpec=function(e){var t,n,r=this.getCurrentData(),i=r.viewSpecs,o=r.toolbarConfig,a=[].concat(o.viewsWithButtons);for(var s in i)a.push(s);for(t=0;t<a.length;t+=1)if((n=i[a[t]])&&n.singleUnit===e)return n;return null},e.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},e.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},e.prototype.prevYear=function(){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})},e.prototype.nextYear=function(){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})},e.prototype.today=function(){var e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:YC(e.calendarOptions.now,e.dateEnv)})},e.prototype.gotoDate=function(e){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})},e.prototype.incrementDate=function(e){var t=this.getCurrentData(),n=ek(e);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,n)}))},e.prototype.getDate=function(){var e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)},e.prototype.formatDate=function(e,t){var n=this.getCurrentData().dateEnv;return n.format(n.createMarker(e),xk(t))},e.prototype.formatRange=function(e,t,n){var r=this.getCurrentData().dateEnv;return r.formatRange(r.createMarker(e),r.createMarker(t),xk(n),n)},e.prototype.formatIso=function(e,t){var n=this.getCurrentData().dateEnv;return n.formatIso(n.createMarker(e),{omitTime:t})},e.prototype.select=function(e,t){var n;n=null==t?null!=e.start?e:{start:e,end:null}:{start:e,end:t};var r=this.getCurrentData(),i=kC(n,r.dateEnv,ek({days:1}));i&&(this.dispatch({type:"SELECT_DATES",selection:i}),RC(i,null,r))},e.prototype.unselect=function(e){var t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),function(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}(e,t))},e.prototype.addEvent=function(e,t){if(e instanceof UC){var n=e._def,r=e._instance;return this.getCurrentData().eventStore.defs[n.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Yk({def:n,instance:r})}),this.triggerEventAdd(e)),e}var i,o=this.getCurrentData();if(t instanceof rT)i=t.internalEventSource;else if("boolean"==typeof t)t&&(i=GT(o.eventSources)[0]);else if(null!=t){var a=this.getEventSourceById(t);if(!a)return console.warn('Could not find an event source with ID "'+t+'"'),null;i=a.internalEventSource}var s=Zk(e,i,o,!1);if(s){var l=new UC(o,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Yk(s)}),this.triggerEventAdd(l),l}return null},e.prototype.triggerEventAdd=function(e){var t=this;this.getCurrentData().emitter.trigger("eventAdd",{event:e,relatedEvents:[],revert:function(){t.dispatch({type:"REMOVE_EVENTS",eventStore:zC(e)})}})},e.prototype.getEventById=function(e){var t=this.getCurrentData(),n=t.eventStore,r=n.defs,i=n.instances;for(var o in e=String(e),r){var a=r[o];if(a.publicId===e){if(a.recurringDef)return new UC(t,a,null);for(var s in i){var l=i[s];if(l.defId===a.defId)return new UC(t,a,l)}}}return null},e.prototype.getEvents=function(){var e=this.getCurrentData();return jC(e.eventStore,e)},e.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},e.prototype.getEventSources=function(){var e=this.getCurrentData(),t=e.eventSources,n=[];for(var r in t)n.push(new rT(e,t[r]));return n},e.prototype.getEventSourceById=function(e){var t=this.getCurrentData(),n=t.eventSources;for(var r in e=String(e),n)if(n[r].publicId===e)return new rT(t,n[r]);return null},e.prototype.addEventSource=function(e){var t=this.getCurrentData();if(e instanceof rT)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;var n=FC(e,t);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new rT(t,n)):null},e.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},e.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})},e.prototype.scrollToTime=function(e){var t=ek(e);t&&this.trigger("_scrollRequest",{time:t})},e}(),UC=function(){function e(e,t,n){this._context=e,this._def=t,this._instance=n||null}return e.prototype.setProp=function(e,t){var n,r;if(e in Qk)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if("id"===e)t=Kk[e](t),this.mutate({standardProps:{publicId:t}});else if(e in Kk)t=Kk[e](t),this.mutate({standardProps:(n={},n[e]=t,n)});else if(e in Vk){var i=Vk[e](t);"color"===e?i={backgroundColor:t,borderColor:t}:"editable"===e?i={startEditable:t,durationEditable:t}:((r={})[e]=t,i=r),this.mutate({standardProps:{ui:i}})}else console.warn("Could not set prop '"+e+"'. Use setExtendedProp instead.")},e.prototype.setExtendedProp=function(e,t){var n;this.mutate({extendedProps:(n={},n[e]=t,n)})},e.prototype.setStart=function(e,t){void 0===t&&(t={});var n=this._context.dateEnv,r=n.createMarker(e);if(r&&this._instance){var i=iC(this._instance.range.start,r,n,t.granularity);t.maintainDuration?this.mutate({datesDelta:i}):this.mutate({startDelta:i})}},e.prototype.setEnd=function(e,t){void 0===t&&(t={});var n,r=this._context.dateEnv;if((null==e||(n=r.createMarker(e)))&&this._instance)if(n){var i=iC(this._instance.range.end,n,r,t.granularity);this.mutate({endDelta:i})}else this.mutate({standardProps:{hasEnd:!1}})},e.prototype.setDates=function(e,t,n){void 0===n&&(n={});var r,i,o,a=this._context.dateEnv,s={allDay:n.allDay},l=a.createMarker(e);if(l&&((null==t||(r=a.createMarker(t)))&&this._instance)){var c=this._instance.range;!0===n.allDay&&(c=nC(c));var d=iC(c.start,l,a,n.granularity);if(r){var u=iC(c.end,r,a,n.granularity);o=u,(i=d).years===o.years&&i.months===o.months&&i.days===o.days&&i.milliseconds===o.milliseconds?this.mutate({datesDelta:d,standardProps:s}):this.mutate({startDelta:d,endDelta:u,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:d,standardProps:s})}},e.prototype.moveStart=function(e){var t=ek(e);t&&this.mutate({startDelta:t})},e.prototype.moveEnd=function(e){var t=ek(e);t&&this.mutate({endDelta:t})},e.prototype.moveDates=function(e){var t=ek(e);t&&this.mutate({datesDelta:t})},e.prototype.setAllDay=function(e,t){void 0===t&&(t={});var n={allDay:e},r=t.maintainDuration;null==r&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(n.hasEnd=r),this.mutate({standardProps:n})},e.prototype.formatRange=function(e){var t=this._context.dateEnv,n=this._instance,r=xk(e);return this._def.hasEnd?t.formatRange(n.range.start,n.range.end,r,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):t.format(n.range.start,r,{forcedTzo:n.forcedStartTzo})},e.prototype.mutate=function(t){var n=this._instance;if(n){var r=this._def,i=this._context,o=i.getCurrentData().eventStore,a=Hk(o,n.instanceId);a=OC(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},t,i);var s=new e(i,r,n);this._def=a.defs[r.defId],this._instance=a.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:a}),i.emitter.trigger("eventChange",{oldEvent:s,event:this,relatedEvents:jC(a,i,n),revert:function(){i.dispatch({type:"RESET_EVENTS",eventStore:o})}})}},e.prototype.remove=function(){var e=this._context,t=zC(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert:function(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})},Object.defineProperty(e.prototype,"source",{get:function(){var e=this._def.sourceId;return e?new rT(this._context,this._context.getCurrentData().eventSources[e]):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startStr",{get:function(){var e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endStr",{get:function(){var e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._def.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._def.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._def.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this._def.ui.display||"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!1,configurable:!0}),e.prototype.toPlainObject=function(e){void 0===e&&(e={});var t=this._def,n=t.ui,r=this.startStr,i=this.endStr,o={};return t.title&&(o.title=t.title),r&&(o.start=r),i&&(o.end=i),t.publicId&&(o.id=t.publicId),t.groupId&&(o.groupId=t.groupId),t.url&&(o.url=t.url),n.display&&"auto"!==n.display&&(o.display=n.display),e.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?o.color=n.backgroundColor:(n.backgroundColor&&(o.backgroundColor=n.backgroundColor),n.borderColor&&(o.borderColor=n.borderColor)),n.textColor&&(o.textColor=n.textColor),n.classNames.length&&(o.classNames=n.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Aw(o,t.extendedProps):o.extendedProps=t.extendedProps),o},e.prototype.toJSON=function(){return this.toPlainObject()},e}();function zC(e){var t,n,r=e._def,i=e._instance;return{defs:(t={},t[r.defId]=r,t),instances:i?(n={},n[i.instanceId]=i,n):{}}}function jC(e,t,n){var r=e.defs,i=e.instances,o=[],a=n?n.instanceId:"";for(var s in i){var l=i[s],c=r[l.defId];l.instanceId!==a&&o.push(new UC(t,c,l))}return o}var VC={};var GC,WC=function(){function e(){}return e.prototype.getMarkerYear=function(e){return e.getUTCFullYear()},e.prototype.getMarkerMonth=function(e){return e.getUTCMonth()},e.prototype.getMarkerDay=function(e){return e.getUTCDate()},e.prototype.arrayToMarker=function(e){return PT(e)},e.prototype.markerToArray=function(e){return IT(e)},e}();GC=WC,VC["gregory"]=GC;var qC=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;var $C=function(){function e(e){var t=this.timeZone=e.timeZone,n="local"!==t&&"UTC"!==t;e.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=Boolean(!n||this.namedTimeZoneImpl),this.calendarSystem=function(e){return new VC[e]}(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,"ISO"===e.weekNumberCalculation&&(this.weekDow=1,this.weekDoy=4),"number"==typeof e.firstDay&&(this.weekDow=e.firstDay),"function"==typeof e.weekNumberCalculation&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=null!=e.weekText?e.weekText:e.locale.options.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}return e.prototype.createMarker=function(e){var t=this.createMarkerMeta(e);return null===t?null:t.marker},e.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker((new Date).valueOf()):PT(NT(new Date))},e.prototype.createMarkerMeta=function(e){if("string"==typeof e)return this.parse(e);var t=null;return"number"==typeof e?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=PT(e)),null!==t&&FT(t)?{marker:t,isTimeUnspecified:!1,forcedTzo:null}:null},e.prototype.parse=function(e){var t=function(e){var t=qC.exec(e);if(t){var n=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?1e3*Number("0."+t[12]):0));if(FT(n)){var r=null;return t[13]&&(r=("-"===t[15]?-1:1)*(60*Number(t[16]||0)+Number(t[18]||0))),{marker:n,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}(e);if(null===t)return null;var n=t.marker,r=null;return null!==t.timeZoneOffset&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-60*t.timeZoneOffset*1e3):r=t.timeZoneOffset),{marker:n,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:r}},e.prototype.getYear=function(e){return this.calendarSystem.getMarkerYear(e)},e.prototype.getMonth=function(e){return this.calendarSystem.getMarkerMonth(e)},e.prototype.add=function(e,t){var n=this.calendarSystem.markerToArray(e);return n[0]+=t.years,n[1]+=t.months,n[2]+=t.days,n[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(n)},e.prototype.subtract=function(e,t){var n=this.calendarSystem.markerToArray(e);return n[0]-=t.years,n[1]-=t.months,n[2]-=t.days,n[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(n)},e.prototype.addYears=function(e,t){var n=this.calendarSystem.markerToArray(e);return n[0]+=t,this.calendarSystem.arrayToMarker(n)},e.prototype.addMonths=function(e,t){var n=this.calendarSystem.markerToArray(e);return n[1]+=t,this.calendarSystem.arrayToMarker(n)},e.prototype.diffWholeYears=function(e,t){var n=this.calendarSystem;return BT(e)===BT(t)&&n.getMarkerDay(e)===n.getMarkerDay(t)&&n.getMarkerMonth(e)===n.getMarkerMonth(t)?n.getMarkerYear(t)-n.getMarkerYear(e):null},e.prototype.diffWholeMonths=function(e,t){var n=this.calendarSystem;return BT(e)===BT(t)&&n.getMarkerDay(e)===n.getMarkerDay(t)?n.getMarkerMonth(t)-n.getMarkerMonth(e)+12*(n.getMarkerYear(t)-n.getMarkerYear(e)):null},e.prototype.greatestWholeUnit=function(e,t){var n=this.diffWholeYears(e,t);return null!==n?{unit:"year",value:n}:null!==(n=this.diffWholeMonths(e,t))?{unit:"month",value:n}:null!==(n=function(e,t){var n=RT(e,t);return null!==n&&n%7==0?n/7:null}(e,t))?{unit:"week",value:n}:null!==(n=RT(e,t))?{unit:"day",value:n}:wT(n=function(e,t){return(t.valueOf()-e.valueOf())/36e5}(e,t))?{unit:"hour",value:n}:wT(n=function(e,t){return(t.valueOf()-e.valueOf())/6e4}(e,t))?{unit:"minute",value:n}:wT(n=function(e,t){return(t.valueOf()-e.valueOf())/1e3}(e,t))?{unit:"second",value:n}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}},e.prototype.countDurationsBetween=function(e,t,n){var r;return n.years&&null!==(r=this.diffWholeYears(e,t))?r/(rk(n)/365):n.months&&null!==(r=this.diffWholeMonths(e,t))?r/function(e){return rk(e)/30}(n):n.days&&null!==(r=RT(e,t))?r/rk(n):(t.valueOf()-e.valueOf())/ik(n)},e.prototype.startOf=function(e,t){return"year"===t?this.startOfYear(e):"month"===t?this.startOfMonth(e):"week"===t?this.startOfWeek(e):"day"===t?MT(e):"hour"===t?function(e){return PT([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}(e):"minute"===t?function(e){return PT([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}(e):"second"===t?function(e){return PT([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}(e):null},e.prototype.startOfYear=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])},e.prototype.startOfMonth=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])},e.prototype.startOfWeek=function(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])},e.prototype.computeWeekNumber=function(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):function(e,t,n){var r=e.getUTCFullYear(),i=DT(e,r,t,n);if(i<1)return DT(e,r-1,t,n);var o=DT(e,r+1,t,n);return o>=1?Math.min(i,o):i}(e,this.weekDow,this.weekDoy)},e.prototype.format=function(e,t,n){return void 0===n&&(n={}),t.format({marker:e,timeZoneOffset:null!=n.forcedTzo?n.forcedTzo:this.offsetForMarker(e)},this)},e.prototype.formatRange=function(e,t,n,r){return void 0===r&&(r={}),r.isEndExclusive&&(t=xT(t,-1)),n.formatRange({marker:e,timeZoneOffset:null!=r.forcedStartTzo?r.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:null!=r.forcedEndTzo?r.forcedEndTzo:this.offsetForMarker(t)},this,r.defaultSeparator)},e.prototype.formatIso=function(e,t){void 0===t&&(t={});var n=null;return t.omitTimeZoneOffset||(n=null!=t.forcedTzo?t.forcedTzo:this.offsetForMarker(e)),sk(e,n,t.omitTime)},e.prototype.timestampToMarker=function(e){return"local"===this.timeZone?PT(NT(new Date(e))):"UTC"!==this.timeZone&&this.namedTimeZoneImpl?PT(this.namedTimeZoneImpl.timestampToArray(e)):new Date(e)},e.prototype.offsetForMarker=function(e){return"local"===this.timeZone?-LT(IT(e)).getTimezoneOffset():"UTC"===this.timeZone?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(IT(e)):null},e.prototype.toDate=function(e,t){return"local"===this.timeZone?LT(IT(e)):"UTC"===this.timeZone?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-1e3*this.namedTimeZoneImpl.offsetForArray(IT(e))*60):new Date(e.valueOf()-(t||0))},e}(),KC=[],QC={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"};function XC(e){for(var t=e.length>0?e[0].code:"en",n=KC.concat(e),r={en:QC},i=0,o=n;i<o.length;i++){var a=o[i];r[a.code]=a}return{map:r,defaultCode:t}}function ZC(e,t){return"object"!=typeof e||Array.isArray(e)?function(e,t){var n=[].concat(e||[]),r=function(e,t){for(var n=0;n<e.length;n+=1)for(var r=e[n].toLocaleLowerCase().split("-"),i=r.length;i>0;i-=1){var o=r.slice(0,i).join("-");if(t[o])return t[o]}return null}(n,t)||QC;return JC(e,n,r)}(e,t):JC(e.code,[e.code],e)}function JC(e,t,n){var r=UT([QC,n],["buttonText"]);delete r.code;var i=r.week;return delete r.week,{codeArg:e,codes:t,week:i,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}var ex,tx={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function nx(e,t){return Bk(function(e){var t;t=!0===e?[{}]:Array.isArray(e)?e.filter((function(e){return e.daysOfWeek})):"object"==typeof e&&e?[e]:[];return t=t.map((function(e){return Aw(Aw({},tx),e)}))}(e),null,t)}function rx(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function ix(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom&&n}function ox(){return null==ex&&(ex=function(){if("undefined"==typeof document)return!0;var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);var t=e.querySelector("div").offsetHeight>0;return document.body.removeChild(e),t}()),ex}var ax={defs:{},instances:{}},sx=function(){function e(){this.getKeysForEventDefs=hk(this._getKeysForEventDefs),this.splitDateSelection=hk(this._splitDateSpan),this.splitEventStore=hk(this._splitEventStore),this.splitIndividualUi=hk(this._splitIndividualUi),this.splitEventDrag=hk(this._splitInteraction),this.splitEventResize=hk(this._splitInteraction),this.eventUiBuilders={}}return e.prototype.splitProps=function(e){var t=this,n=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),i=this.splitDateSelection(e.dateSelection),o=this.splitIndividualUi(e.eventUiBases,r),a=this.splitEventStore(e.eventStore,r),s=this.splitEventDrag(e.eventDrag),l=this.splitEventResize(e.eventResize),c={};for(var d in this.eventUiBuilders=jT(n,(function(e,n){return t.eventUiBuilders[n]||hk(lx)})),n){var u=n[d],h=a[d]||ax,p=this.eventUiBuilders[d];c[d]={businessHours:u.businessHours||e.businessHours,dateSelection:i[d]||null,eventStore:h,eventUiBases:p(e.eventUiBases[""],u.ui,o[d]),eventSelection:h.instances[e.eventSelection]?e.eventSelection:"",eventDrag:s[d]||null,eventResize:l[d]||null}}return c},e.prototype._splitDateSpan=function(e){var t={};if(e)for(var n=0,r=this.getKeysForDateSpan(e);n<r.length;n++){t[r[n]]=e}return t},e.prototype._getKeysForEventDefs=function(e){var t=this;return jT(e.defs,(function(e){return t.getKeysForEventDef(e)}))},e.prototype._splitEventStore=function(e,t){var n=e.defs,r=e.instances,i={};for(var o in n)for(var a=0,s=t[o];a<s.length;a++){i[h=s[a]]||(i[h]={defs:{},instances:{}}),i[h].defs[o]=n[o]}for(var l in r)for(var c=r[l],d=0,u=t[c.defId];d<u.length;d++){var h;i[h=u[d]]&&(i[h].instances[l]=c)}return i},e.prototype._splitIndividualUi=function(e,t){var n={};for(var r in e)if(r)for(var i=0,o=t[r];i<o.length;i++){var a=o[i];n[a]||(n[a]={}),n[a][r]=e[r]}return n},e.prototype._splitInteraction=function(e){var t={};if(e){var n=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),r=this._getKeysForEventDefs(e.mutatedEvents),i=this._splitEventStore(e.mutatedEvents,r),o=function(r){t[r]||(t[r]={affectedEvents:n[r]||ax,mutatedEvents:i[r]||ax,isEvent:e.isEvent})};for(var a in n)o(a);for(var a in i)o(a)}return t},e}();function lx(e,t,n){var r=[];e&&r.push(e),t&&r.push(t);var i={"":qk(r)};return n&&Aw(i,n),i}function cx(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:Boolean(r&&!dC(r.activeRange,e)),isOther:Boolean(r&&!dC(r.currentRange,e)),isToday:Boolean(t&&dC(t,e)),isPast:Boolean(n?e<n:!!t&&e<t.start),isFuture:Boolean(n?e>n:!!t&&e>=t.end)}}function dx(e,t){var n=["fc-day","fc-day-"+TT[e.dow]];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}function ux(e,t){return void 0===t&&(t="day"),JSON.stringify({date:lk(e),type:t})}var hx,px=null;function fx(){return null===px&&(px=function(){var e=document.createElement("div");lT(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);var t=e.firstChild.getBoundingClientRect().left>e.getBoundingClientRect().left;return iT(e),t}()),px}function mx(){return hx||(hx=function(){var e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);var t=_x(e);return document.body.removeChild(e),t}()),hx}function _x(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function gx(e,t,n){void 0===t&&(t=!1);var r=n?e.getBoundingClientRect():bx(e),i=function(e,t){void 0===t&&(t=!1);var n=window.getComputedStyle(e),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,o=parseInt(n.borderTopWidth,10)||0,a=parseInt(n.borderBottomWidth,10)||0,s=_x(e),l=s.y-r-i,c={borderLeft:r,borderRight:i,borderTop:o,borderBottom:a,scrollbarBottom:s.x-o-a,scrollbarLeft:0,scrollbarRight:0};return fx()&&"rtl"===n.direction?c.scrollbarLeft=l:c.scrollbarRight=l,t&&(c.paddingLeft=parseInt(n.paddingLeft,10)||0,c.paddingRight=parseInt(n.paddingRight,10)||0,c.paddingTop=parseInt(n.paddingTop,10)||0,c.paddingBottom=parseInt(n.paddingBottom,10)||0),c}(e,t),o={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return t&&(o.left+=i.paddingLeft,o.right-=i.paddingRight,o.top+=i.paddingTop,o.bottom-=i.paddingBottom),o}function bx(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset}}function vx(e){for(var t=[];e instanceof HTMLElement;){var n=window.getComputedStyle(e);if("fixed"===n.position)break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}var yx=function(){function e(){this.handlers={},this.thisContext=null}return e.prototype.setThisContext=function(e){this.thisContext=e},e.prototype.setOptions=function(e){this.options=e},e.prototype.on=function(e,t){!function(e,t,n){(e[t]||(e[t]=[])).push(n)}(this.handlers,e,t)},e.prototype.off=function(e,t){!function(e,t,n){n?e[t]&&(e[t]=e[t].filter((function(e){return e!==n}))):delete e[t]}(this.handlers,e,t)},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=this.handlers[e]||[],i=this.options&&this.options[e],o=[].concat(i||[],r),a=0,s=o;a<s.length;a++){var l=s[a];l.apply(this.thisContext,t)}},e.prototype.hasHandlers=function(e){return this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e]},e}();var Ex=function(){function e(e,t,n,r){this.els=t;var i=this.originClientRect=e.getBoundingClientRect();n&&this.buildElHorizontals(i.left),r&&this.buildElVerticals(i.top)}return e.prototype.buildElHorizontals=function(e){for(var t=[],n=[],r=0,i=this.els;r<i.length;r++){var o=i[r].getBoundingClientRect();t.push(o.left-e),n.push(o.right-e)}this.lefts=t,this.rights=n},e.prototype.buildElVerticals=function(e){for(var t=[],n=[],r=0,i=this.els;r<i.length;r++){var o=i[r].getBoundingClientRect();t.push(o.top-e),n.push(o.bottom-e)}this.tops=t,this.bottoms=n},e.prototype.leftToIndex=function(e){var t,n=this.lefts,r=this.rights,i=n.length;for(t=0;t<i;t+=1)if(e>=n[t]&&e<r[t])return t},e.prototype.topToIndex=function(e){var t,n=this.tops,r=this.bottoms,i=n.length;for(t=0;t<i;t+=1)if(e>=n[t]&&e<r[t])return t},e.prototype.getWidth=function(e){return this.rights[e]-this.lefts[e]},e.prototype.getHeight=function(e){return this.bottoms[e]-this.tops[e]},e}(),wx=function(){function e(){}return e.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},e.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},e.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},e.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},e.prototype.canScrollUp=function(){return this.getScrollTop()>0},e.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},e.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},e.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},e}(),Sx=function(e){function t(t){var n=e.call(this)||this;return n.el=t,n}return xw(t,e),t.prototype.getScrollTop=function(){return this.el.scrollTop},t.prototype.getScrollLeft=function(){return this.el.scrollLeft},t.prototype.setScrollTop=function(e){this.el.scrollTop=e},t.prototype.setScrollLeft=function(e){this.el.scrollLeft=e},t.prototype.getScrollWidth=function(){return this.el.scrollWidth},t.prototype.getScrollHeight=function(){return this.el.scrollHeight},t.prototype.getClientHeight=function(){return this.el.clientHeight},t.prototype.getClientWidth=function(){return this.el.clientWidth},t}(wx),Tx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.getScrollTop=function(){return window.pageYOffset},t.prototype.getScrollLeft=function(){return window.pageXOffset},t.prototype.setScrollTop=function(e){window.scroll(window.pageXOffset,e)},t.prototype.setScrollLeft=function(e){window.scroll(e,window.pageYOffset)},t.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},t.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},t.prototype.getClientHeight=function(){return document.documentElement.clientHeight},t.prototype.getClientWidth=function(){return document.documentElement.clientWidth},t}(wx),kx=function(){function e(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}return e.prototype.setIconOverride=function(e){var t,n;if("object"==typeof e&&e){for(n in t=Aw({},this.iconClasses),e)t[n]=this.applyIconOverridePrefix(e[n]);this.iconClasses=t}else!1===e&&(this.iconClasses={})},e.prototype.applyIconOverridePrefix=function(e){var t=this.iconOverridePrefix;return t&&0!==e.indexOf(t)&&(e=t+e),e},e.prototype.getClass=function(e){return this.classes[e]||""},e.prototype.getIconClass=function(e,t){var n;return(n=t&&this.rtlIconClasses&&this.rtlIconClasses[e]||this.iconClasses[e])?this.baseIconClass+" "+n:""},e.prototype.getCustomButtonIconClass=function(e){var t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption])?this.baseIconClass+" "+this.applyIconOverridePrefix(t):""},e}();kx.prototype.classes={},kx.prototype.iconClasses={},kx.prototype.baseIconClass="",kx.prototype.iconOverridePrefix="";var Cx=function(){function e(e,t,n,r){var i=this;this.execFunc=e,this.emitter=t,this.scrollTime=n,this.scrollTimeReset=r,this.handleScrollRequest=function(e){i.queuedRequest=Aw({},i.queuedRequest||{},e),i.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}return e.prototype.detach=function(){this.emitter.off("_scrollRequest",this.handleScrollRequest)},e.prototype.update=function(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()},e.prototype.fireInitialScroll=function(){this.handleScrollRequest({time:this.scrollTime})},e.prototype.drain=function(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)},e}(),xx=JS({});function Ax(e,t,n,r,i,o,a,s,l,c,d,u,h){return{dateEnv:i,options:n,pluginHooks:a,emitter:c,dispatch:s,getCurrentData:l,calendarApi:d,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:o,isRtl:"rtl"===n.direction,addResizeHandler:function(e){c.on("_resize",e)},removeResizeHandler:function(e){c.off("_resize",e)},createScrollResponder:function(e){return new Cx(e,c,ek(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:u,unregisterInteractiveComponent:h}}var Rx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.shouldComponentUpdate=function(e,t){return this.debug&&console.log(qT(e,this.props),qT(t,this.state)),!$T(this.props,e,this.propEquality)||!$T(this.state,t,this.stateEquality)},t.addPropsEquality=Dx,t.addStateEquality=Ox,t.contextType=xx,t}($S);Rx.prototype.propEquality={},Rx.prototype.stateEquality={};var Mx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.contextType=xx,t}(Rx);function Dx(e){var t=Object.create(this.prototype.propEquality);Aw(t,e),this.prototype.propEquality=t}function Ox(e){var t=Object.create(this.prototype.stateEquality);Aw(t,e),this.prototype.stateEquality=t}function Nx(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var Lx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uid=_T(),t}return xw(t,e),t.prototype.prepareHits=function(){},t.prototype.queryHit=function(e,t,n,r){return null},t.prototype.isValidSegDownEl=function(e){return!this.props.eventDrag&&!this.props.eventResize&&!oT(e,".fc-event-mirror")},t.prototype.isValidDateDownEl=function(e){return!(oT(e,".fc-event:not(.fc-bg-event)")||oT(e,".fc-more-link")||oT(e,"a[data-navlink]")||oT(e,".fc-popover"))},t}(Mx);function Ix(e){return{id:_T(),deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,contentTypeHandlers:e.contentTypeHandlers||{},listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function Px(){var e,t=[],n=[];return function(r,i){return e&&uk(r,t)&&uk(i,n)||(e=function(e,t){var n={},r={reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,contentTypeHandlers:{},listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(e){for(var t=0,o=e;t<o.length;t++){var a=o[t];n[a.id]||(n[a.id]=!0,i(a.deps),l=a,r={reducers:(s=r).reducers.concat(l.reducers),isLoadingFuncs:s.isLoadingFuncs.concat(l.isLoadingFuncs),contextInit:s.contextInit.concat(l.contextInit),eventRefiners:Aw(Aw({},s.eventRefiners),l.eventRefiners),eventDefMemberAdders:s.eventDefMemberAdders.concat(l.eventDefMemberAdders),eventSourceRefiners:Aw(Aw({},s.eventSourceRefiners),l.eventSourceRefiners),isDraggableTransformers:s.isDraggableTransformers.concat(l.isDraggableTransformers),eventDragMutationMassagers:s.eventDragMutationMassagers.concat(l.eventDragMutationMassagers),eventDefMutationAppliers:s.eventDefMutationAppliers.concat(l.eventDefMutationAppliers),dateSelectionTransformers:s.dateSelectionTransformers.concat(l.dateSelectionTransformers),datePointTransforms:s.datePointTransforms.concat(l.datePointTransforms),dateSpanTransforms:s.dateSpanTransforms.concat(l.dateSpanTransforms),views:Aw(Aw({},s.views),l.views),viewPropsTransformers:s.viewPropsTransformers.concat(l.viewPropsTransformers),isPropsValid:l.isPropsValid||s.isPropsValid,externalDefTransforms:s.externalDefTransforms.concat(l.externalDefTransforms),viewContainerAppends:s.viewContainerAppends.concat(l.viewContainerAppends),eventDropTransformers:s.eventDropTransformers.concat(l.eventDropTransformers),calendarInteractions:s.calendarInteractions.concat(l.calendarInteractions),componentInteractions:s.componentInteractions.concat(l.componentInteractions),themeClasses:Aw(Aw({},s.themeClasses),l.themeClasses),eventSourceDefs:s.eventSourceDefs.concat(l.eventSourceDefs),cmdFormatter:l.cmdFormatter||s.cmdFormatter,recurringTypes:s.recurringTypes.concat(l.recurringTypes),namedTimeZonedImpl:l.namedTimeZonedImpl||s.namedTimeZonedImpl,initialView:s.initialView||l.initialView,elementDraggingImpl:s.elementDraggingImpl||l.elementDraggingImpl,optionChangeHandlers:Aw(Aw({},s.optionChangeHandlers),l.optionChangeHandlers),scrollGridImpl:l.scrollGridImpl||s.scrollGridImpl,contentTypeHandlers:Aw(Aw({},s.contentTypeHandlers),l.contentTypeHandlers),listenerRefiners:Aw(Aw({},s.listenerRefiners),l.listenerRefiners),optionRefiners:Aw(Aw({},s.optionRefiners),l.optionRefiners),propSetHandlers:Aw(Aw({},s.propSetHandlers),l.propSetHandlers)})}var s,l}return e&&i(e),i(t),r}(r,i)),t=r,n=i,e}}var Fx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t}(kx);function Bx(e,t,n,r){if(t[e])return t[e];var i=function(e,t,n,r){var i=n[e],o=r[e],a=function(e){return i&&null!==i[e]?i[e]:o&&null!==o[e]?o[e]:null},s=a("component"),l=a("superType"),c=null;if(l){if(l===e)throw new Error("Can't have a custom view type that references itself");c=Bx(l,t,n,r)}!s&&c&&(s=c.component);if(!s)return null;return{type:e,component:s,defaults:Aw(Aw({},c?c.defaults:{}),i?i.rawOptions:{}),overrides:Aw(Aw({},c?c.overrides:{}),o?o.rawOptions:{})}}(e,t,n,r);return i&&(t[e]=i),i}Fx.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"},Fx.prototype.baseIconClass="fc-icon",Fx.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"},Fx.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"},Fx.prototype.iconOverrideOption="buttonIcons",Fx.prototype.iconOverrideCustomButtonOption="icon",Fx.prototype.iconOverridePrefix="fc-icon-";var Yx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootElRef=XS(),t.handleRootEl=function(e){Nx(t.rootElRef,e),t.props.elRef&&Nx(t.props.elRef,e)},t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.hookProps;return KS(jx,{hookProps:n,didMount:t.didMount,willUnmount:t.willUnmount,elRef:this.handleRootEl},(function(r){return KS(Ux,{hookProps:n,content:t.content,defaultContent:t.defaultContent,backupElRef:e.rootElRef},(function(e,i){return t.children(r,Gx(t.classNames,n),e,i)}))}))},t}(Mx),Hx=JS(0);function Ux(e){return KS(Hx.Consumer,null,(function(t){return KS(zx,Aw({renderId:t},e))}))}var zx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.innerElRef=XS(),t}return xw(t,e),t.prototype.render=function(){return this.props.children(this.innerElRef,this.renderInnerContent())},t.prototype.componentDidMount=function(){this.updateCustomContent()},t.prototype.componentDidUpdate=function(){this.updateCustomContent()},t.prototype.componentWillUnmount=function(){this.customContentInfo&&this.customContentInfo.destroy&&this.customContentInfo.destroy()},t.prototype.renderInnerContent=function(){var e=this.context.pluginHooks.contentTypeHandlers,t=this.props,n=this.customContentInfo,r=Wx(t.content,t.hookProps),i=null;if(void 0===r&&(r=Wx(t.defaultContent,t.hookProps)),void 0!==r){if(n)n.contentVal=r[n.contentKey];else if("object"==typeof r)for(var o in e)if(void 0!==r[o]){var a=e[o]();n=this.customContentInfo=Aw({contentKey:o,contentVal:r[o]},a);break}i=n?[]:r}return i},t.prototype.updateCustomContent=function(){this.customContentInfo&&this.customContentInfo.render(this.innerElRef.current||this.props.backupElRef.current,this.customContentInfo.contentVal)},t}(Mx),jx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRootEl=function(e){t.rootEl=e,t.props.elRef&&Nx(t.props.elRef,e)},t}return xw(t,e),t.prototype.render=function(){return this.props.children(this.handleRootEl)},t.prototype.componentDidMount=function(){var e=this.props.didMount;e&&e(Aw(Aw({},this.props.hookProps),{el:this.rootEl}))},t.prototype.componentWillUnmount=function(){var e=this.props.willUnmount;e&&e(Aw(Aw({},this.props.hookProps),{el:this.rootEl}))},t}(Mx);function Vx(){var e,t,n=[];return function(r,i){return t&&WT(t,i)&&r===e||(e=r,t=i,n=Gx(r,i)),n}}function Gx(e,t){return"function"==typeof e&&(e=e(t)),jk(e)}function Wx(e,t){return"function"==typeof e?e(t,KS):e}var qx=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.normalizeClassNames=Vx(),t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.options,r={view:t.viewApi},i=this.normalizeClassNames(n.viewClassNames,r);return KS(jx,{hookProps:r,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount,elRef:e.elRef},(function(t){return e.children(t,["fc-"+e.viewSpec.type+"-view","fc-view"].concat(i))}))},t}(Mx);function $x(e){return jT(e,Kx)}function Kx(e){var t,n="function"==typeof e?{component:e}:e,r=n.component;return n.content&&(t=n,r=function(e){return KS(xx.Consumer,null,(function(n){return KS(qx,{viewSpec:n.viewSpec},(function(r,i){var o=Aw(Aw({},e),{nextDayThreshold:n.options.nextDayThreshold});return KS(Yx,{hookProps:o,classNames:t.classNames,content:t.content,didMount:t.didMount,willUnmount:t.willUnmount,elRef:r},(function(e,t,n,r){return KS("div",{className:i.concat(t).join(" "),ref:e},r)}))}))}))}),{superType:n.type,component:r,rawOptions:n}}function Qx(e,t,n,r){var i=$x(e),o=$x(t.views);return jT(function(e,t){var n,r={};for(n in e)Bx(n,r,e,t);for(n in t)Bx(n,r,e,t);return r}(i,o),(function(e){return function(e,t,n,r,i){var o=e.overrides.duration||e.defaults.duration||r.duration||n.duration,a=null,s="",l="",c={};if(o&&(a=function(e){var t=JSON.stringify(e),n=Xx[t];void 0===n&&(n=ek(e),Xx[t]=n);return n}(o))){var d=ak(a);s=d.unit,1===d.value&&(l=s,c=t[s]?t[s].rawOptions:{})}var u=function(t){var n=t.buttonText||{},r=e.defaults.buttonTextKey;return null!=r&&null!=n[r]?n[r]:null!=n[e.type]?n[e.type]:null!=n[l]?n[l]:null};return{type:e.type,component:e.component,duration:a,durationUnit:s,singleUnit:l,optionDefaults:e.defaults,optionOverrides:Aw(Aw({},c),e.overrides),buttonTextOverride:u(r)||u(n)||e.overrides.buttonText,buttonTextDefault:u(i)||e.defaults.buttonText||u(Rk)||e.type}}(e,o,t,n,r)}))}var Xx={};var Zx=function(){function e(e){this.props=e,this.nowDate=YC(e.nowInput,e.dateEnv),this.initHiddenDays()}return e.prototype.buildPrev=function(e,t,n){var r=this.props.dateEnv,i=r.subtract(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(i,-1,n)},e.prototype.buildNext=function(e,t,n){var r=this.props.dateEnv,i=r.add(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(i,1,n)},e.prototype.build=function(e,t,n){void 0===n&&(n=!0);var r,i,o,a,s,l,c,d,u=this.props;return r=this.buildValidRange(),r=this.trimHiddenDays(r),n&&(c=e,e=null!=(d=r).start&&c<d.start?d.start:null!=d.end&&c>=d.end?new Date(d.end.valueOf()-1):c),i=this.buildCurrentRangeInfo(e,t),o=/^(year|month|week|day)$/.test(i.unit),a=this.buildRenderRange(this.trimHiddenDays(i.range),i.unit,o),s=a=this.trimHiddenDays(a),u.showNonCurrentDates||(s=sC(s,i.range)),s=sC(s=this.adjustActiveRange(s),r),l=lC(i.range,r),{validRange:r,currentRange:i.range,currentRangeUnit:i.unit,isRangeAllDay:o,activeRange:s,renderRange:a,slotMinTime:u.slotMinTime,slotMaxTime:u.slotMaxTime,isValid:l,dateIncrement:this.buildDateIncrement(i.duration)}},e.prototype.buildValidRange=function(){var e=this.props.validRangeInput,t="function"==typeof e?e.call(this.props.calendarApi,this.nowDate):e;return this.refineRange(t)||{start:null,end:null}},e.prototype.buildCurrentRangeInfo=function(e,t){var n,r=this.props,i=null,o=null,a=null;return r.duration?(i=r.duration,o=r.durationUnit,a=this.buildRangeFromDuration(e,t,i,o)):(n=this.props.dayCount)?(o="day",a=this.buildRangeFromDayCount(e,t,n)):(a=this.buildCustomVisibleRange(e))?o=r.dateEnv.greatestWholeUnit(a.start,a.end).unit:(o=ak(i=this.getFallbackDuration()).unit,a=this.buildRangeFromDuration(e,t,i,o)),{duration:i,unit:o,range:a}},e.prototype.getFallbackDuration=function(){return ek({day:1})},e.prototype.adjustActiveRange=function(e){var t=this.props,n=t.dateEnv,r=t.usesMinMaxTime,i=t.slotMinTime,o=t.slotMaxTime,a=e.start,s=e.end;return r&&(rk(i)<0&&(a=MT(a),a=n.add(a,i)),rk(o)>1&&(s=CT(s=MT(s),-1),s=n.add(s,o))),{start:a,end:s}},e.prototype.buildRangeFromDuration=function(e,t,n,r){var i,o,a,s=this.props,l=s.dateEnv,c=s.dateAlignment;if(!c){var d=this.props.dateIncrement;c=d&&ik(d)<ik(n)?ak(d).unit:r}function u(){i=l.startOf(e,c),o=l.add(i,n),a={start:i,end:o}}return rk(n)<=1&&this.isHiddenDay(i)&&(i=MT(i=this.skipHiddenDays(i,t))),u(),this.trimHiddenDays(a)||(e=this.skipHiddenDays(e,t),u()),a},e.prototype.buildRangeFromDayCount=function(e,t,n){var r,i=this.props,o=i.dateEnv,a=i.dateAlignment,s=0,l=e;a&&(l=o.startOf(l,a)),l=MT(l),r=l=this.skipHiddenDays(l,t);do{r=CT(r,1),this.isHiddenDay(r)||(s+=1)}while(s<n);return{start:l,end:r}},e.prototype.buildCustomVisibleRange=function(e){var t=this.props,n=t.visibleRangeInput,r="function"==typeof n?n.call(t.calendarApi,t.dateEnv.toDate(e)):n,i=this.refineRange(r);return!i||null!=i.start&&null!=i.end?i:null},e.prototype.buildRenderRange=function(e,t,n){return e},e.prototype.buildDateIncrement=function(e){var t,n=this.props.dateIncrement;return n||((t=this.props.dateAlignment)?ek(1,t):e||ek({days:1}))},e.prototype.refineRange=function(e){if(e){var t=function(e,t){var n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),n||r?n&&r&&r<n?null:{start:n,end:r}:null}(e,this.props.dateEnv);return t&&(t=rC(t)),t}return null},e.prototype.initHiddenDays=function(){var e,t=this.props.hiddenDays||[],n=[],r=0;for(!1===this.props.weekends&&t.push(0,6),e=0;e<7;e+=1)(n[e]=-1!==t.indexOf(e))||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n},e.prototype.trimHiddenDays=function(e){var t=e.start,n=e.end;return t&&(t=this.skipHiddenDays(t)),n&&(n=this.skipHiddenDays(n,-1,!0)),null==t||null==n||t<n?{start:t,end:n}:null},e.prototype.isHiddenDay=function(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]},e.prototype.skipHiddenDays=function(e,t,n){for(void 0===t&&(t=1),void 0===n&&(n=!1);this.isHiddenDayHash[(e.getUTCDay()+(n?t:0)+7)%7];)e=CT(e,t);return e},e}();function Jx(e,t,n){var r=t?t.activeRange:null;return nA({},function(e,t){var n=BC(t),r=[].concat(e.eventSources||[]),i=[];e.initialEvents&&r.unshift(e.initialEvents);e.events&&r.unshift(e.events);for(var o=0,a=r;o<a.length;o++){var s=FC(a[o],t,n);s&&i.push(s)}return i}(e,n),r,n)}function eA(e,t,n,r){var i,o,a=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return nA(e,t.sources,a,r);case"REMOVE_EVENT_SOURCE":return i=e,o=t.sourceId,zT(i,(function(e){return e.sourceId!==o}));case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?rA(e,a,r):e;case"FETCH_EVENT_SOURCES":return iA(e,t.sourceIds?VT(t.sourceIds):aA(e,r),a,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return function(e,t,n,r){var i,o=e[t];if(o&&n===o.latestFetchId)return Aw(Aw({},e),((i={})[t]=Aw(Aw({},o),{isFetching:!1,fetchRange:r}),i));return e}(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function tA(e){for(var t in e)if(e[t].isFetching)return!0;return!1}function nA(e,t,n,r){for(var i={},o=0,a=t;o<a.length;o++){var s=a[o];i[s.sourceId]=s}return n&&(i=rA(i,n,r)),Aw(Aw({},e),i)}function rA(e,t,n){return iA(e,zT(e,(function(e){return function(e,t,n){if(!sA(e,n))return!e.latestFetchId;return!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end}(e,t,n)})),t,!1,n)}function iA(e,t,n,r,i){var o={};for(var a in e){var s=e[a];t[a]?o[a]=oA(s,n,r,i):o[a]=s}return o}function oA(e,t,n,r){var i=r.options,o=r.calendarApi,a=r.pluginHooks.eventSourceDefs[e.sourceDefId],s=_T();return a.fetch({eventSource:e,range:t,isRefetch:n,context:r},(function(n){var a=n.rawEvents;i.eventSourceSuccess&&(a=i.eventSourceSuccess.call(o,a,n.xhr)||a),e.success&&(a=e.success.call(o,a,n.xhr)||a),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:s,fetchRange:t,rawEvents:a})}),(function(n){console.warn(n.message,n),i.eventSourceFailure&&i.eventSourceFailure.call(o,n),e.failure&&e.failure(n),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:s,fetchRange:t,error:n})})),Aw(Aw({},e),{isFetching:!0,latestFetchId:s})}function aA(e,t){return zT(e,(function(e){return sA(e,t)}))}function sA(e,t){return!t.pluginHooks.eventSourceDefs[e.sourceDefId].ignoreRange}function lA(e,t,n,r,i){switch(t.type){case"RECEIVE_EVENTS":return function(e,t,n,r,i,o){if(t&&n===t.latestFetchId){var a=Bk(function(e,t,n){var r=n.options.eventDataTransform,i=t?t.eventDataTransform:null;i&&(e=cA(e,i));r&&(e=cA(e,r));return e}(i,t,o),t,o);return r&&(a=QT(a,r,o)),Uk(dA(e,t.sourceId),a)}return e}(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,i);case"ADD_EVENTS":return function(e,t,n,r){n&&(t=QT(t,n,r));return Uk(e,t)}(e,t.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Uk(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?QT(e,r.activeRange,i):e;case"REMOVE_EVENTS":return function(e,t){var n=e.defs,r=e.instances,i={},o={};for(var a in n)t.defs[a]||(i[a]=n[a]);for(var s in r)!t.instances[s]&&i[r[s].defId]&&(o[s]=r[s]);return{defs:i,instances:o}}(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return dA(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return zk(e,(function(e){return!e.sourceId}));case"REMOVE_ALL_EVENTS":return{defs:{},instances:{}};default:return e}}function cA(e,t){var n;if(t){n=[];for(var r=0,i=e;r<i.length;r++){var o=i[r],a=t(o);a?n.push(a):null==a&&n.push(o)}}else n=e;return n}function dA(e,t){return zk(e,(function(e){return e.sourceId!==t}))}function uA(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function hA(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function pA(e,t){var n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return{affectedEvents:(n=t.state).affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function fA(e,t){var n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return{affectedEvents:(n=t.state).affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function mA(e,t,n,r,i){var o=[];return{headerToolbar:e.headerToolbar?_A(e.headerToolbar,e,t,n,r,i,o):null,footerToolbar:e.footerToolbar?_A(e.footerToolbar,e,t,n,r,i,o):null,viewsWithButtons:o}}function _A(e,t,n,r,i,o,a){return jT(e,(function(e){return function(e,t,n,r,i,o,a){var s="rtl"===t.direction,l=t.customButtons||{},c=n.buttonText||{},d=t.buttonText||{};return(e?e.split(" "):[]).map((function(e){return e.split(",").map((function(e){return"title"===e?{buttonName:e}:((t=l[e])?(u=function(e){t.click&&t.click.call(e.target,e,e.target)},(h=r.getCustomButtonIconClass(t))||(h=r.getIconClass(e,s))||(p=t.text)):(n=i[e])?(a.push(e),u=function(){o.changeView(e)},(p=n.buttonTextOverride)||(h=r.getIconClass(e,s))||(p=n.buttonTextDefault)):o[e]&&(u=function(){o[e]()},(p=c[e])||(h=r.getIconClass(e,s))||(p=d[e])),{buttonName:e,buttonClick:u,buttonIcon:h,buttonText:p});var t,n,u,h,p}))}))}(e,t,n,r,i,o,a)}))}function gA(e,t,n,r,i){var o=null;"GET"===(e=e.toUpperCase())?t=function(e,t){return e+(-1===e.indexOf("?")?"?":"&")+bA(t)}(t,n):o=bA(n);var a=new XMLHttpRequest;a.open(e,t,!0),"GET"!==e&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onload=function(){if(a.status>=200&&a.status<400){var e=!1,t=void 0;try{t=JSON.parse(a.responseText),e=!0}catch(e){}e?r(t,a):i("Failure parsing JSON",a)}else i("Request failed",a)},a.onerror=function(){i("Request failed",a)},a.send(o)}function bA(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function vA(e,t){for(var n=GT(t.getCurrentData().eventSources),r=[],i=0,o=e;i<o.length;i++){for(var a=o[i],s=!1,l=0;l<n.length;l+=1)if(n[l]._raw===a){n.splice(l,1),s=!0;break}s||r.push(a)}for(var c=0,d=n;c<d.length;c++){var u=d[c];t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:u.sourceId})}for(var h=0,p=r;h<p.length;h++){var f=p[h];t.calendarApi.addEventSource(f)}}var yA=[Ix({eventSourceDefs:[{ignoreRange:!0,parseMeta:function(e){return Array.isArray(e.events)?e.events:null},fetch:function(e,t){t({rawEvents:e.eventSource.meta})}}]}),Ix({eventSourceDefs:[{parseMeta:function(e){return"function"==typeof e.events?e.events:null},fetch:function(e,t,n){var r=e.context.dateEnv;!function(e,t,n){var r=!1,i=function(){r||(r=!0,t.apply(this,arguments))},o=function(){r||(r=!0,n&&n.apply(this,arguments))},a=e(i,o);a&&"function"==typeof a.then&&a.then(i,o)}(e.eventSource.meta.bind(null,CC(e.range,r)),(function(e){t({rawEvents:e})}),n)}}]}),Ix({eventSourceRefiners:{method:String,extraParams:Fk,startParam:String,endParam:String,timeZoneParam:String},eventSourceDefs:[{parseMeta:function(e){return!e.url||"json"!==e.format&&e.format?null:{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}},fetch:function(e,t,n){var r=e.eventSource.meta,i=function(e,t,n){var r,i,o,a,s=n.dateEnv,l=n.options,c={};null==(r=e.startParam)&&(r=l.startParam);null==(i=e.endParam)&&(i=l.endParam);null==(o=e.timeZoneParam)&&(o=l.timeZoneParam);a="function"==typeof e.extraParams?e.extraParams():e.extraParams||{};Aw(c,a),c[r]=s.formatIso(t.start),c[i]=s.formatIso(t.end),"local"!==s.timeZone&&(c[o]=s.timeZone);return c}(r,e.range,e.context);gA(r.method,r.url,i,(function(e,n){t({rawEvents:e,xhr:n})}),(function(e,t){n({message:e,xhr:t})}))}}]}),Ix({recurringTypes:[{parse:function(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){var n={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null},r=void 0;return e.duration&&(r=e.duration),!r&&e.startTime&&e.endTime&&(i=e.endTime,o=e.startTime,r={years:i.years-o.years,months:i.months-o.months,days:i.days-o.days,milliseconds:i.milliseconds-o.milliseconds}),{allDayGuess:Boolean(!e.startTime&&!e.endTime),duration:r,typeData:n}}var i,o;return null},expand:function(e,t,n){var r=sC(t,{start:e.startRecur,end:e.endRecur});return r?function(e,t,n,r){var i=e?VT(e):null,o=MT(n.start),a=n.end,s=[];for(;o<a;){var l=void 0;i&&!i[o.getUTCDay()]||(l=t?r.add(o,t):o,s.push(l)),o=CT(o,1)}return s}(e.daysOfWeek,e.startTime,r,n):[]}}],eventRefiners:{daysOfWeek:Fk,startTime:ek,endTime:ek,duration:ek,startRecur:Fk,endRecur:Fk}}),Ix({optionChangeHandlers:{events:function(e,t){vA([e],t)},eventSources:vA}}),Ix({isLoadingFuncs:[function(e){return tA(e.eventSources)}],contentTypeHandlers:{html:function(){return{render:EA}},domNodes:function(){return{render:wA}}},propSetHandlers:{dateProfile:function(e,t){t.emitter.trigger("datesSet",Aw(Aw({},CC(e.activeRange,t.dateEnv)),{view:t.viewApi}))},eventStore:function(e,t){var n=t.emitter;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",jC(e,t))}}})];function EA(e,t){e.innerHTML=t}function wA(e,t){var n=Array.prototype.slice.call(e.childNodes),r=Array.prototype.slice.call(t);if(!uk(n,r)){for(var i=0,o=r;i<o.length;i++){var a=o[i];e.appendChild(a)}n.forEach(iT)}}var SA=function(){function e(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}return e.prototype.request=function(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),null==e?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))},e.prototype.pause=function(e){void 0===e&&(e="");var t=this.pauseDepths;t[e]=(t[e]||0)+1,this.clearTimeout()},e.prototype.resume=function(e,t){void 0===e&&(e="");var n=this.pauseDepths;if(e in n){if(t)delete n[e];else n[e]-=1,n[e]<=0&&delete n[e];this.tryDrain()}},e.prototype.isPaused=function(){return Object.keys(this.pauseDepths).length},e.prototype.tryDrain=function(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}},e.prototype.clear=function(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}},e.prototype.clearTimeout=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},e.prototype.drained=function(){this.drainedOption&&this.drainedOption()},e}(),TA=function(){function e(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new SA(this.drain.bind(this))}return e.prototype.request=function(e,t){this.queue.push(e),this.delayedRunner.request(t)},e.prototype.pause=function(e){this.delayedRunner.pause(e)},e.prototype.resume=function(e,t){this.delayedRunner.resume(e,t)},e.prototype.drain=function(){for(var e=this.queue;e.length;){for(var t=[],n=void 0;n=e.shift();)this.runTask(n),t.push(n);this.drained(t)}},e.prototype.runTask=function(e){this.runTaskOption&&this.runTaskOption(e)},e.prototype.drained=function(e){this.drainedOption&&this.drainedOption(e)},e}();function kA(e,t,n){var r;return r=/^(year|month)$/.test(e.currentRangeUnit)?e.currentRange:e.activeRange,n.formatRange(r.start,r.end,xk(t.titleFormat||function(e){var t=e.currentRangeUnit;if("year"===t)return{year:"numeric"};if("month"===t)return{year:"numeric",month:"long"};var n=RT(e.currentRange.start,e.currentRange.end);if(null!==n&&n>1)return{year:"numeric",month:"short",day:"numeric"};return{year:"numeric",month:"long",day:"numeric"}}(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}var CA=function(){function e(e){var t=this;this.computeOptionsData=hk(this._computeOptionsData),this.computeCurrentViewData=hk(this._computeCurrentViewData),this.organizeRawLocales=hk(XC),this.buildLocale=hk(ZC),this.buildPluginHooks=Px(),this.buildDateEnv=hk(xA),this.buildTheme=hk(AA),this.parseToolbars=hk(mA),this.buildViewSpecs=hk(Qx),this.buildDateProfileGenerator=pk(RA),this.buildViewApi=hk(MA),this.buildViewUiProps=pk(NA),this.buildEventUiBySource=hk(DA,WT),this.buildEventUiBases=hk(OA),this.parseContextBusinessHours=pk(IA),this.buildTitle=hk(kA),this.emitter=new yx,this.actionRunner=new TA(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.getCurrentData=function(){return t.data},this.dispatch=function(e){t.actionRunner.request(e)},this.props=e,this.actionRunner.pause();var n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,o=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(o.options);var a,s,l,c=(a=r.calendarOptions,s=r.dateEnv,null!=(l=a.initialDate)?s.createMarker(l):YC(a.now,s)),d=o.dateProfileGenerator.build(c);dC(d.activeRange,c)||(c=d.currentRange.start);for(var u={dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},h=0,p=r.pluginHooks.contextInit;h<p.length;h++){(0,p[h])(u)}for(var f=Jx(r.calendarOptions,d,u),m={dynamicOptionOverrides:n,currentViewType:i,currentDate:c,dateProfile:d,businessHours:this.parseContextBusinessHours(u),eventSources:f,eventUiBases:{},eventStore:{defs:{},instances:{}},renderableEventStore:{defs:{},instances:{}},dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(u).selectionConfig},_=Aw(Aw({},u),m),g=0,b=r.pluginHooks.reducers;g<b.length;g++){var v=b[g];Aw(m,v(null,null,_))}LA(m,u)&&this.emitter.trigger("loading",!0),this.state=m,this.updateData(),this.actionRunner.resume()}return e.prototype.resetOptions=function(e,t){var n=this.props;n.optionOverrides=t?Aw(Aw({},n.optionOverrides),e):e,this.actionRunner.request({type:"NOTHING"})},e.prototype._handleAction=function(e){var t=this,n=t.props,r=t.state,i=t.emitter,o=function(e,t){var n;switch(t.type){case"SET_OPTION":return Aw(Aw({},e),((n={})[t.optionName]=t.rawOptionValue,n));default:return e}}(r.dynamicOptionOverrides,e),a=this.computeOptionsData(n.optionOverrides,o,n.calendarApi),s=function(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}(r.currentViewType,e),l=this.computeCurrentViewData(s,a,n.optionOverrides,o);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(l.options);var c={dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},d=r.currentDate,u=r.dateProfile;this.data&&this.data.dateProfileGenerator!==l.dateProfileGenerator&&(u=l.dateProfileGenerator.build(d)),u=function(e,t,n,r){var i;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":if(!e.activeRange||!dC(e.currentRange,t.dateMarker))return r.build(t.dateMarker);break;case"PREV":if((i=r.buildPrev(e,n)).isValid)return i;break;case"NEXT":if((i=r.buildNext(e,n)).isValid)return i}return e}(u,e,d=function(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}(d,e),l.dateProfileGenerator),dC(u.currentRange,d)||(d=u.currentRange.start);for(var h=eA(r.eventSources,e,u,c),p=lA(r.eventStore,e,h,u,c),f=tA(h)&&!l.options.progressiveEventRendering&&r.renderableEventStore||p,m=this.buildViewUiProps(c),_=m.eventUiSingleBase,g=m.selectionConfig,b=this.buildEventUiBySource(h),v={dynamicOptionOverrides:o,currentViewType:s,currentDate:d,dateProfile:u,eventSources:h,eventStore:p,renderableEventStore:f,selectionConfig:g,eventUiBases:this.buildEventUiBases(f.defs,_,b),businessHours:this.parseContextBusinessHours(c),dateSelection:uA(r.dateSelection,e),eventSelection:hA(r.eventSelection,e),eventDrag:pA(r.eventDrag,e),eventResize:fA(r.eventResize,e)},y=Aw(Aw({},c),v),E=0,w=a.pluginHooks.reducers;E<w.length;E++){var S=w[E];Aw(v,S(r,e,y))}var T=LA(r,c),k=LA(v,c);!T&&k?i.trigger("loading",!0):T&&!k&&i.trigger("loading",!1),this.state=v,n.onAction&&n.onAction(e)},e.prototype.updateData=function(){var e,t,n,r,i,o,a,s,l,c=this.props,d=this.state,u=this.data,h=this.computeOptionsData(c.optionOverrides,d.dynamicOptionOverrides,c.calendarApi),p=this.computeCurrentViewData(d.currentViewType,h,c.optionOverrides,d.dynamicOptionOverrides),f=this.data=Aw(Aw(Aw({viewTitle:this.buildTitle(d.dateProfile,p.options,h.dateEnv),calendarApi:c.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},h),p),d),m=h.pluginHooks.optionChangeHandlers,_=u&&u.calendarOptions,g=h.calendarOptions;if(_&&_!==g)for(var b in _.timeZone!==g.timeZone&&(d.eventSources=f.eventSources=(o=f.eventSources,a=d.dateProfile,s=f,l=a?a.activeRange:null,iA(o,aA(o,s),l,!0,s)),d.eventStore=f.eventStore=(e=f.eventStore,t=u.dateEnv,n=f.dateEnv,r=e.defs,i=jT(e.instances,(function(e){var i=r[e.defId];return i.allDay||i.recurringDef?e:Aw(Aw({},e),{range:{start:n.createMarker(t.toDate(e.range.start,e.forcedStartTzo)),end:n.createMarker(t.toDate(e.range.end,e.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:e.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:e.forcedEndTzo})})),{defs:r,instances:i})),m)_[b]!==g[b]&&m[b](g[b],f);c.onData&&c.onData(f)},e.prototype._computeOptionsData=function(e,t,n){var r=this.processRawCalendarOptions(e,t),i=r.refinedOptions,o=r.pluginHooks,a=r.localeDefaults,s=r.availableLocaleData;PA(r.extra);var l=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,o,s,i.defaultRangeSeparator),c=this.buildViewSpecs(o.views,e,t,a),d=this.buildTheme(i,o);return{calendarOptions:i,pluginHooks:o,dateEnv:l,viewSpecs:c,theme:d,toolbarConfig:this.parseToolbars(i,e,d,c,n),localeDefaults:a,availableRawLocales:s.map}},e.prototype.processRawCalendarOptions=function(e,t){var n=Ik([Rk,e,t]),r=n.locales,i=n.locale,o=this.organizeRawLocales(r),a=o.map,s=this.buildLocale(i||o.defaultCode,a).options,l=this.buildPluginHooks(e.plugins||[],yA),c=this.currentCalendarOptionsRefiners=Aw(Aw(Aw(Aw(Aw({},Ak),Mk),Dk),l.listenerRefiners),l.optionRefiners),d={},u=Ik([Rk,s,e,t]),h={},p=this.currentCalendarOptionsInput,f=this.currentCalendarOptionsRefined,m=!1;for(var _ in u)"plugins"!==_&&(u[_]===p[_]||Ok[_]&&_ in p&&Ok[_](p[_],u[_])?h[_]=f[_]:c[_]?(h[_]=c[_](u[_]),m=!0):d[_]=p[_]);return m&&(this.currentCalendarOptionsInput=u,this.currentCalendarOptionsRefined=h),{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:l,availableLocaleData:o,localeDefaults:s,extra:d}},e.prototype._computeCurrentViewData=function(e,t,n,r){var i=t.viewSpecs[e];if(!i)throw new Error('viewType "'+e+"\" is not available. Please make sure you've loaded all neccessary plugins");var o=this.processRawViewOptions(i,t.pluginHooks,t.localeDefaults,n,r),a=o.refinedOptions;return PA(o.extra),{viewSpec:i,options:a,dateProfileGenerator:this.buildDateProfileGenerator({dateProfileGeneratorClass:i.optionDefaults.dateProfileGeneratorClass,duration:i.duration,durationUnit:i.durationUnit,usesMinMaxTime:i.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,nowInput:a.now,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,monthMode:a.monthMode,fixedWeekCount:a.fixedWeekCount}),viewApi:this.buildViewApi(e,this.getCurrentData,t.dateEnv)}},e.prototype.processRawViewOptions=function(e,t,n,r,i){var o=Ik([Rk,e.optionDefaults,n,r,e.optionOverrides,i]),a=Aw(Aw(Aw(Aw(Aw(Aw({},Ak),Mk),Dk),Lk),t.listenerRefiners),t.optionRefiners),s={},l=this.currentViewOptionsInput,c=this.currentViewOptionsRefined,d=!1,u={};for(var h in o)o[h]===l[h]?s[h]=c[h]:(o[h]===this.currentCalendarOptionsInput[h]?h in this.currentCalendarOptionsRefined&&(s[h]=this.currentCalendarOptionsRefined[h]):a[h]?s[h]=a[h](o[h]):u[h]=o[h],d=!0);return d&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=s),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:u}},e}();function xA(e,t,n,r,i,o,a,s){var l=ZC(t||a.defaultCode,a.map);return new $C({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:l,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:o.cmdFormatter,defaultSeparator:s})}function AA(e,t){return new(t.themeClasses[e.themeSystem]||Fx)(e)}function RA(e){return new(e.dateProfileGeneratorClass||Zx)(e)}function MA(e,t,n){return new IC(e,t,n)}function DA(e){return jT(e,(function(e){return e.ui}))}function OA(e,t,n){var r={"":t};for(var i in e){var o=e[i];o.sourceId&&n[o.sourceId]&&(r[i]=n[o.sourceId])}return r}function NA(e){var t=e.options;return{eventUiSingleBase:Wk({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:"boolean"==typeof t.eventOverlap?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:Wk({constraint:t.selectConstraint,overlap:"boolean"==typeof t.selectOverlap?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function LA(e,t){for(var n=0,r=t.pluginHooks.isLoadingFuncs;n<r.length;n++){if((0,r[n])(e))return!0}return!1}function IA(e){return nx(e.options.businessHours,e)}function PA(e,t){for(var n in e)console.warn("Unknown option '"+n+"'"+(t?" for view '"+t+"'":""))}!function(e){function t(t){var n=e.call(this,t)||this;return n.handleData=function(e){n.dataManager?n.setState(e):n.state=e},n.dataManager=new CA({optionOverrides:t.optionOverrides,calendarApi:t.calendarApi,onData:n.handleData}),n}xw(t,e),t.prototype.render=function(){return this.props.children(this.state)},t.prototype.componentDidUpdate=function(e){var t=this.props.optionOverrides;t!==e.optionOverrides&&this.dataManager.resetOptions(t)}}($S);var FA=function(){function e(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}return e.prototype.addSegs=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];this.insertEntry({segInput:i,spanStart:i.spanStart,spanEnd:i.spanEnd,thickness:i.thickness},t)}return t},e.prototype.insertEntry=function(e,t){var n=this.findInsertion(e);return this.isInsertionValid(n,e)?(this.insertEntryAt(e,n),1):this.handleInvalidInsertion(n,e,t)},e.prototype.isInsertionValid=function(e,t){return(-1===this.maxCoord||e.levelCoord+t.thickness<=this.maxCoord)&&(-1===this.maxStackCnt||e.stackCnt<this.maxStackCnt)},e.prototype.handleInvalidInsertion=function(e,t,n){return this.allowReslicing&&e.touchingEntry?this.splitEntry(t,e.touchingEntry,n):(n.push(t),0)},e.prototype.splitEntry=function(e,t,n){var r=0,i=[];return e.spanStart<t.spanStart&&(r+=this.insertEntry(Aw(Aw({},e),{spanStart:e.spanStart,spanEnd:t.spanStart}),i)),t.spanEnd<e.spanEnd&&(r+=this.insertEntry(Aw(Aw({},e),{spanStart:t.spanEnd,spanEnd:e.spanEnd}),i)),r?(n.push.apply(n,Rw([Aw(Aw({},e),{spanStart:Math.max(t.spanStart,e.spanStart),spanEnd:Math.min(t.spanEnd,e.spanEnd)})],i)),r):(n.push(e),0)},e.prototype.insertEntryAt=function(e,t){var n=t.nextLevel;!n||this.levelCoords[n-1]<t.levelCoord?(HA(this.levelCoords,n,t.levelCoord),HA(this.entriesByLevel,n,[e])):HA(this.entriesByLevel[n-1],t.lateralEnd,e),this.stackCnts[YA(e)]=t.stackCnt},e.prototype.findInsertion=function(e){var t,n,r=this,i=r.levelCoords,o=r.entriesByLevel,a=r.stackCnts,s=r.strictOrder,l=i.length,c=0,d=0,u=0,h=null;for(t=0;t<l&&(n=i[t],s||!(n>=u+e.thickness));t+=1){var p=o[t],f=void 0,m=UA(p,e.spanStart,BA);for(d=c=m[0]+m[1];(f=p[d])&&f.spanStart<e.spanEnd;)(s||u<n+f.thickness&&u+e.thickness>n)&&(h=f,u=n+f.thickness),d+=1}return{levelCoord:u,nextLevel:t,lateralStart:c,lateralEnd:d,touchingEntry:h,stackCnt:h?a[YA(h)]+1:0}},e.prototype.toRects=function(){for(var e=this.entriesByLevel,t=this.levelCoords,n=e.length,r=[],i=0;i<n;i+=1)for(var o=e[i],a=t[i],s=0,l=o;s<l.length;s++){var c=l[s];r.push(Aw(Aw({},c),{levelCoord:a}))}return r},e}();function BA(e){return e.spanEnd}function YA(e){return e.segInput.index+":"+e.spanStart}function HA(e,t,n){e.splice(t,0,n)}function UA(e,t,n){var r=0,i=e.length;if(!i||t<n(e[r]))return[0,0];if(t>n(e[i-1]))return[i,0];for(;r<i;){var o=Math.floor(r+(i-r)/2),a=n(e[o]);if(t<a)i=o;else{if(!(t>a))return[o,1];r=o+1}}return[r,0]}var zA=function(){function e(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}return e.prototype.destroy=function(){},e}();function jA(e,t){return{component:e,el:t.el,useEventCenter:null==t.useEventCenter||t.useEventCenter,isHitComboAllowed:t.isHitComboAllowed||null}}function VA(e){var t;return(t={})[e.component.uid]=e,t}var GA={},WA=function(){function e(e,t){this.emitter=new yx}return e.prototype.destroy=function(){},e.prototype.setMirrorIsVisible=function(e){},e.prototype.setMirrorNeedsRevert=function(e){},e.prototype.setAutoScrollEnabled=function(e){},e}(),qA={},$A={startTime:ek,duration:ek,create:Boolean,sourceId:String};function KA(e){var t=Pk(e,$A),n=t.refined,r=t.extra;return{startTime:n.startTime||null,duration:n.duration||null,create:null==n.create||n.create,sourceId:n.sourceId,leftoverProps:r}}var QA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props.widgetGroups.map((function(t){return e.renderWidgetGroup(t)}));return KS.apply(void 0,Rw(["div",{className:"fc-toolbar-chunk"}],t))},t.prototype.renderWidgetGroup=function(e){for(var t=this.props,n=this.context.theme,r=[],i=!0,o=0,a=e;o<a.length;o++){var s=a[o],l=s.buttonName,c=s.buttonClick,d=s.buttonText,u=s.buttonIcon;if("title"===l)i=!1,r.push(KS("h2",{className:"fc-toolbar-title"},t.title));else{var h=u?{"aria-label":l}:{},p=["fc-"+l+"-button",n.getClass("button")];l===t.activeButton&&p.push(n.getClass("buttonActive"));var f=!t.isTodayEnabled&&"today"===l||!t.isPrevEnabled&&"prev"===l||!t.isNextEnabled&&"next"===l;r.push(KS("button",Aw({disabled:f,className:p.join(" "),onClick:c,type:"button"},h),d||(u?KS("span",{className:u}):"")))}}if(r.length>1){var m=i&&n.getClass("buttonGroup")||"";return KS.apply(void 0,Rw(["div",{className:m}],r))}return r[0]},t}(Mx),XA=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.model,i=n.extraClassName,o=!1,a=r.center;return r.left?(o=!0,e=r.left):e=r.start,r.right?(o=!0,t=r.right):t=r.end,KS("div",{className:[i||"","fc-toolbar",o?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",e||[]),this.renderSection("center",a||[]),this.renderSection("end",t||[]))},t.prototype.renderSection=function(e,t){var n=this.props;return KS(QA,{key:e,widgetGroups:t,title:n.title,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled})},t}(Mx),ZA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={availableWidth:null},t.handleEl=function(e){t.el=e,Nx(t.props.elRef,e),t.updateAvailableWidth()},t.handleResize=function(){t.updateAvailableWidth()},t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.state,n=e.aspectRatio,r=["fc-view-harness",n||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],i="",o="";return n?null!==t.availableWidth?i=t.availableWidth/n:o=1/n*100+"%":i=e.height||"",KS("div",{ref:this.handleEl,onClick:e.onClick,className:r.join(" "),style:{height:i,paddingBottom:o}},e.children)},t.prototype.componentDidMount=function(){this.context.addResizeHandler(this.handleResize)},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleResize)},t.prototype.updateAvailableWidth=function(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})},t}(Mx),JA=function(e){function t(t){var n=e.call(this,t)||this;return n.handleSegClick=function(e,t){var r=n.component,i=r.context,o=pC(t);if(o&&r.isValidSegDownEl(e.target)){var a=oT(e.target,".fc-event-forced-url"),s=a?a.querySelector("a[href]").href:"";i.emitter.trigger("eventClick",{el:t,event:new UC(r.context,o.eventRange.def,o.eventRange.instance),jsEvent:e,view:i.viewApi}),s&&!e.defaultPrevented&&(window.location.href=s)}},n.destroy=pT(t.el,"click",".fc-event",n.handleSegClick),n}return xw(t,e),t}(zA),eR=function(e){function t(t){var n,r,i,o,a,s=e.call(this,t)||this;return s.handleEventElRemove=function(e){e===s.currentSegEl&&s.handleSegLeave(null,s.currentSegEl)},s.handleSegEnter=function(e,t){pC(t)&&(s.currentSegEl=t,s.triggerEvent("eventMouseEnter",e,t))},s.handleSegLeave=function(e,t){s.currentSegEl&&(s.currentSegEl=null,s.triggerEvent("eventMouseLeave",e,t))},s.removeHoverListeners=(n=t.el,r=".fc-event",i=s.handleSegEnter,o=s.handleSegLeave,pT(n,"mouseover",r,(function(e,t){if(t!==a){a=t,i(e,t);var n=function(e){a=null,o(e,t),t.removeEventListener("mouseleave",n)};t.addEventListener("mouseleave",n)}}))),s}return xw(t,e),t.prototype.destroy=function(){this.removeHoverListeners()},t.prototype.triggerEvent=function(e,t,n){var r=this.component,i=r.context,o=pC(n);t&&!r.isValidSegDownEl(t.target)||i.emitter.trigger(e,{el:n,event:new UC(i,o.eventRange.def,o.eventRange.instance),jsEvent:t,view:i.viewApi})},t}(zA),tR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildViewContext=hk(Ax),t.buildViewPropTransformers=hk(rR),t.buildToolbarProps=hk(nR),t.handleNavLinkClick=hT("a[data-navlink]",t._handleNavLinkClick.bind(t)),t.headerRef=XS(),t.footerRef=XS(),t.interactionsStore={},t.registerInteractiveComponent=function(e,n){var r=jA(e,n),i=[JA,eR].concat(t.props.pluginHooks.componentInteractions).map((function(e){return new e(r)}));t.interactionsStore[e.uid]=i,GA[e.uid]=r},t.unregisterInteractiveComponent=function(e){for(var n=0,r=t.interactionsStore[e.uid];n<r.length;n++){r[n].destroy()}delete t.interactionsStore[e.uid],delete GA[e.uid]},t.resizeRunner=new SA((function(){t.props.emitter.trigger("_resize",!0),t.props.emitter.trigger("windowResize",{view:t.props.viewApi})})),t.handleWindowResize=function(e){var n=t.props.options;n.handleWindowResize&&e.target===window&&t.resizeRunner.request(n.windowResizeDelay)},t}return xw(t,e),t.prototype.render=function(){var e,t=this.props,n=t.toolbarConfig,r=t.options,i=this.buildToolbarProps(t.viewSpec,t.dateProfile,t.dateProfileGenerator,t.currentDate,YC(t.options.now,t.dateEnv),t.viewTitle),o=!1,a="";t.isHeightAuto||t.forPrint?a="":null!=r.height?o=!0:null!=r.contentHeight?a=r.contentHeight:e=Math.max(r.aspectRatio,.5);var s=this.buildViewContext(t.viewSpec,t.viewApi,t.options,t.dateProfileGenerator,t.dateEnv,t.theme,t.pluginHooks,t.dispatch,t.getCurrentData,t.emitter,t.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent);return KS(xx.Provider,{value:s},n.headerToolbar&&KS(XA,Aw({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.headerToolbar},i)),KS(ZA,{liquid:o,height:a,aspectRatio:e,onClick:this.handleNavLinkClick},this.renderView(t),this.buildAppendContent()),n.footerToolbar&&KS(XA,Aw({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footerToolbar},i)))},t.prototype.componentDidMount=function(){var e=this.props;this.calendarInteractions=e.pluginHooks.calendarInteractions.map((function(t){return new t(e)})),window.addEventListener("resize",this.handleWindowResize);var t=e.pluginHooks.propSetHandlers;for(var n in t)t[n](e[n],e)},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.pluginHooks.propSetHandlers;for(var r in n)t[r]!==e[r]&&n[r](t[r],t)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(var e=0,t=this.calendarInteractions;e<t.length;e++){t[e].destroy()}this.props.emitter.trigger("_unmount")},t.prototype._handleNavLinkClick=function(e,t){var n=this.props,r=n.dateEnv,i=n.options,o=n.calendarApi,a=t.getAttribute("data-navlink");a=a?JSON.parse(a):{};var s=r.createMarker(a.date),l=a.type,c="day"===l?i.navLinkDayClick:"week"===l?i.navLinkWeekClick:null;"function"==typeof c?c.call(o,r.toDate(s),e):("string"==typeof c&&(l=c),o.zoomTo(s,l))},t.prototype.buildAppendContent=function(){var e=this.props,t=e.pluginHooks.viewContainerAppends.map((function(t){return t(e)}));return KS.apply(void 0,Rw([ZS,{}],t))},t.prototype.renderView=function(e){for(var t=e.pluginHooks,n=e.viewSpec,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},i=0,o=this.buildViewPropTransformers(t.viewPropsTransformers);i<o.length;i++){var a=o[i];Aw(r,a.transform(r,e))}var s=n.component;return KS(s,Aw({},r))},t}(Rx);function nR(e,t,n,r,i,o){var a=n.build(i,void 0,!1),s=n.buildPrev(t,r,!1),l=n.buildNext(t,r,!1);return{title:o,activeButton:e.type,isTodayEnabled:a.isValid&&!dC(t.currentRange,i),isPrevEnabled:s.isValid,isNextEnabled:l.isValid}}function rR(e){return e.map((function(e){return new e}))}var iR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={forPrint:!1},t.handleBeforePrint=function(){t.setState({forPrint:!0})},t.handleAfterPrint=function(){t.setState({forPrint:!1})},t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=e.options,n=this.state.forPrint,r=n||"auto"===t.height||"auto"===t.contentHeight,i=r||null==t.height?"":t.height,o=["fc",n?"fc-media-print":"fc-media-screen","fc-direction-"+t.direction,e.theme.getClass("root")];return ox()||o.push("fc-liquid-hack"),e.children(o,i,r,n)},t.prototype.componentDidMount=function(){var e=this.props.emitter;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)},t.prototype.componentWillUnmount=function(){var e=this.props.emitter;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)},t}(Mx);var oR="fc-col-header-cell";function aR(e){return e.text}var sR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.context,t=e.dateEnv,n=e.options,r=e.theme,i=e.viewApi,o=this.props,a=o.date,s=o.dateProfile,l=cx(a,o.todayRange,null,s),c=[oR].concat(dx(l,r)),d=t.format(a,o.dayHeaderFormat),u=n.navLinks&&!l.isDisabled&&o.colCnt>1?{"data-navlink":ux(a),tabIndex:0}:{},h=Aw(Aw(Aw({date:t.toDate(a),view:i},o.extraHookProps),{text:d}),l);return KS(Yx,{hookProps:h,classNames:n.dayHeaderClassNames,content:n.dayHeaderContent,defaultContent:aR,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},(function(e,t,n,r){return KS("th",Aw({ref:e,className:c.concat(t).join(" "),"data-date":l.isDisabled?void 0:lk(a),colSpan:o.colSpan},o.extraDataAttrs),KS("div",{className:"fc-scrollgrid-sync-inner"},!l.isDisabled&&KS("a",Aw({ref:n,className:["fc-col-header-cell-cushion",o.isSticky?"fc-sticky":""].join(" ")},u),r)))}))},t}(Mx),lR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.dateEnv,r=t.theme,i=t.viewApi,o=t.options,a=CT(new Date(2592e5),e.dow),s={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},l=[oR].concat(dx(s,r),e.extraClassNames||[]),c=n.format(a,e.dayHeaderFormat),d=Aw(Aw(Aw(Aw({date:a},s),{view:i}),e.extraHookProps),{text:c});return KS(Yx,{hookProps:d,classNames:o.dayHeaderClassNames,content:o.dayHeaderContent,defaultContent:aR,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},(function(t,n,r,i){return KS("th",Aw({ref:t,className:l.concat(n).join(" "),colSpan:e.colSpan},e.extraDataAttrs),KS("div",{className:"fc-scrollgrid-sync-inner"},KS("a",{className:["fc-col-header-cell-cushion",e.isSticky?"fc-sticky":""].join(" "),ref:r},i)))}))},t}(Mx),cR=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.initialNowDate=YC(n.options.now,n.dateEnv),r.initialNowQueriedMs=(new Date).valueOf(),r.state=r.computeTiming().currentState,r}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.state;return e.children(t.nowDate,t.todayRange)},t.prototype.componentDidMount=function(){this.setTimeout()},t.prototype.componentDidUpdate=function(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())},t.prototype.componentWillUnmount=function(){this.clearTimeout()},t.prototype.computeTiming=function(){var e=this.props,t=this.context,n=xT(this.initialNowDate,(new Date).valueOf()-this.initialNowQueriedMs),r=t.dateEnv.startOf(n,e.unit),i=t.dateEnv.add(r,ek(1,e.unit)),o=i.valueOf()-n.valueOf();return o=Math.min(864e5,o),{currentState:{nowDate:r,todayRange:dR(r)},nextState:{nowDate:i,todayRange:dR(i)},waitMs:o}},t.prototype.setTimeout=function(){var e=this,t=this.computeTiming(),n=t.nextState,r=t.waitMs;this.timeoutId=setTimeout((function(){e.setState(n,(function(){e.setTimeout()}))}),r)},t.prototype.clearTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId)},t.contextType=xx,t}($S);function dR(e){var t=MT(e);return{start:t,end:CT(t,1)}}var uR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.createDayHeaderFormatter=hk(hR),t}return xw(t,e),t.prototype.render=function(){var e=this.context,t=this.props,n=t.dates,r=t.dateProfile,i=t.datesRepDistinctDays,o=t.renderIntro,a=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return KS(cR,{unit:"day"},(function(e,t){return KS("tr",null,o&&o("day"),n.map((function(e){return i?KS(sR,{key:e.toISOString(),date:e,dateProfile:r,todayRange:t,colCnt:n.length,dayHeaderFormat:a}):KS(lR,{key:e.getUTCDay(),dow:e.getUTCDay(),dayHeaderFormat:a})})))}))},t}(Mx);function hR(e,t,n){return e||function(e,t){return xk(!e||t>10?{weekday:"short"}:t>1?{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}:{weekday:"long"})}(t,n)}var pR=function(){function e(e,t){for(var n=e.start,r=e.end,i=[],o=[],a=-1;n<r;)t.isHiddenDay(n)?i.push(a+.5):(a+=1,i.push(a),o.push(n)),n=CT(n,1);this.dates=o,this.indices=i,this.cnt=o.length}return e.prototype.sliceRange=function(e){var t=this.getDateDayIndex(e.start),n=this.getDateDayIndex(CT(e.end,-1)),r=Math.max(0,t),i=Math.min(this.cnt-1,n);return(r=Math.ceil(r))<=(i=Math.floor(i))?{firstIndex:r,lastIndex:i,isStart:t===r,isEnd:n===i}:null},e.prototype.getDateDayIndex=function(e){var t=this.indices,n=Math.floor(AT(this.dates[0],e));return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},e}(),fR=function(){function e(e,t){var n,r,i,o=e.dates;if(t){for(r=o[0].getUTCDay(),n=1;n<o.length&&o[n].getUTCDay()!==r;n+=1);i=Math.ceil(o.length/n)}else i=1,n=o.length;this.rowCnt=i,this.colCnt=n,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return e.prototype.buildCells=function(){for(var e=[],t=0;t<this.rowCnt;t+=1){for(var n=[],r=0;r<this.colCnt;r+=1)n.push(this.buildCell(t,r));e.push(n)}return e},e.prototype.buildCell=function(e,t){var n=this.daySeries.dates[e*this.colCnt+t];return{key:n.toISOString(),date:n}},e.prototype.buildHeaderDates=function(){for(var e=[],t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e},e.prototype.sliceRange=function(e){var t=this.colCnt,n=this.daySeries.sliceRange(e),r=[];if(n)for(var i=n.firstIndex,o=n.lastIndex,a=i;a<=o;){var s=Math.floor(a/t),l=Math.min((s+1)*t,o+1);r.push({row:s,firstCol:a%t,lastCol:(l-1)%t,isStart:n.isStart&&a===i,isEnd:n.isEnd&&l-1===o}),a=l}return r},e}(),mR=function(){function e(){this.sliceBusinessHours=hk(this._sliceBusinessHours),this.sliceDateSelection=hk(this._sliceDateSpan),this.sliceEventStore=hk(this._sliceEventStore),this.sliceEventDrag=hk(this._sliceInteraction),this.sliceEventResize=hk(this._sliceInteraction),this.forceDayIfListItem=!1}return e.prototype.sliceProps=function(e,t,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];var a=e.eventUiBases,s=this.sliceEventStore.apply(this,Rw([e.eventStore,a,t,n],i));return{dateSelectionSegs:this.sliceDateSelection.apply(this,Rw([e.dateSelection,a,r],i)),businessHourSegs:this.sliceBusinessHours.apply(this,Rw([e.businessHours,t,n,r],i)),fgEventSegs:s.fg,bgEventSegs:s.bg,eventDrag:this.sliceEventDrag.apply(this,Rw([e.eventDrag,a,t,n],i)),eventResize:this.sliceEventResize.apply(this,Rw([e.eventResize,a,t,n],i)),eventSelection:e.eventSelection}},e.prototype.sliceNowDate=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this._sliceDateSpan.apply(this,Rw([{range:{start:e,end:xT(e,1)},allDay:!1},{},t],n))},e.prototype._sliceBusinessHours=function(e,t,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];return e?this._sliceEventStore.apply(this,Rw([QT(e,_R(t,Boolean(n)),r),{},t,n],i)).bg:[]},e.prototype._sliceEventStore=function(e,t,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];if(e){var a=uC(e,t,_R(n,Boolean(r)),r);return{bg:this.sliceEventRanges(a.bg,i),fg:this.sliceEventRanges(a.fg,i)}}return{bg:[],fg:[]}},e.prototype._sliceInteraction=function(e,t,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];if(!e)return null;var a=uC(e.mutatedEvents,t,_R(n,Boolean(r)),r);return{segs:this.sliceEventRanges(a.fg,i),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}},e.prototype._sliceDateSpan=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];if(!e)return[];for(var o=AC(e,t,n),a=this.sliceRange.apply(this,Rw([e.range],r)),s=0,l=a;s<l.length;s++){var c=l[s];c.eventRange=o}return a},e.prototype.sliceEventRanges=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];n.push.apply(n,this.sliceEventRange(o,t))}return n},e.prototype.sliceEventRange=function(e,t){var n=e.range;this.forceDayIfListItem&&"list-item"===e.ui.display&&(n={start:n.start,end:CT(n.start,1)});for(var r=this.sliceRange.apply(this,Rw([n],t)),i=0,o=r;i<o.length;i++){var a=o[i];a.eventRange=e,a.isStart=e.isStart&&a.isStart,a.isEnd=e.isEnd&&a.isEnd}return r},e}();function _R(e,t){var n=e.activeRange;return t?n:{start:xT(n.start,e.slotMinTime.milliseconds),end:xT(n.end,e.slotMaxTime.milliseconds-864e5)}}function gR(e,t,n){var r=e.mutatedEvents.instances;for(var i in r)if(!cC(t.validRange,r[i].range))return!1;return bR({eventDrag:e},n)}function bR(e,t){var n=t.getCurrentData(),r=Aw({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||vR)(r,t)}function vR(e,t,n,r){return void 0===n&&(n={}),!(e.eventDrag&&!function(e,t,n,r){var i=t.getCurrentData(),o=e.eventDrag,a=o.mutatedEvents,s=a.defs,l=a.instances,c=fC(s,o.isEvent?e.eventUiBases:{"":i.selectionConfig});r&&(c=jT(c,r));var d=(f=e.eventStore,m=o.affectedEvents.instances,{defs:f.defs,instances:zT(f.instances,(function(e){return!m[e.instanceId]}))}),u=d.defs,h=d.instances,p=fC(u,e.eventUiBases);var f,m;for(var _ in l){var g=l[_],b=g.range,v=c[g.defId],y=s[g.defId];if(!yR(v.constraints,b,d,e.businessHours,t))return!1;var E=t.options.eventOverlap,w="function"==typeof E?E:null;for(var S in h){var T=h[S];if(lC(b,T.range)){if(!1===p[T.defId].overlap&&o.isEvent)return!1;if(!1===v.overlap)return!1;if(w&&!w(new UC(t,u[T.defId],T),new UC(t,y,g)))return!1}}for(var k=i.eventStore,C=0,x=v.allows;C<x.length;C++){var A=x[C],R=Aw(Aw({},n),{range:g.range,allDay:y.allDay}),M=k.defs[y.defId],D=k.instances[_],O=void 0;if(O=M?new UC(t,M,D):new UC(t,y),!A(MC(R,t),O))return!1}}return!0}(e,t,n,r))&&!(e.dateSelection&&!function(e,t,n,r){var i=e.eventStore,o=i.defs,a=i.instances,s=e.dateSelection,l=s.range,c=t.getCurrentData().selectionConfig;r&&(c=r(c));if(!yR(c.constraints,l,i,e.businessHours,t))return!1;var d=t.options.selectOverlap,u="function"==typeof d?d:null;for(var h in a){var p=a[h];if(lC(l,p.range)){if(!1===c.overlap)return!1;if(u&&!u(new UC(t,o[p.defId],p),null))return!1}}for(var f=0,m=c.allows;f<m.length;f++){if(!(0,m[f])(MC(Aw(Aw({},n),s),t),null))return!1}return!0}(e,t,n,r))}function yR(e,t,n,r,i){for(var o=0,a=e;o<a.length;o++){if(!SR(ER(a[o],t,n,r,i),t))return!1}return!0}function ER(e,t,n,r,i){return"businessHours"===e?wR(QT(r,t,i)):"string"==typeof e?wR(zk(n,(function(t){return t.groupId===e}))):"object"==typeof e&&e?wR(QT(e,t,i)):[]}function wR(e){var t=e.instances,n=[];for(var r in t)n.push(t[r].range);return n}function SR(e,t){for(var n=0,r=e;n<r.length;n++){if(cC(r[n],t))return!0}return!1}var TR=/^(visible|hidden)$/,kR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleEl=function(e){t.el=e,Nx(t.props.elRef,e)},t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=e.liquid,n=e.liquidIsAbsolute,r=t&&n,i=["fc-scroller"];return t&&(n?i.push("fc-scroller-liquid-absolute"):i.push("fc-scroller-liquid")),KS("div",{ref:this.handleEl,className:i.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)},t.prototype.needsXScrolling=function(){if(TR.test(this.props.overflowX))return!1;for(var e=this.el,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),n=e.children,r=0;r<n.length;r+=1){if(n[r].getBoundingClientRect().width>t)return!0}return!1},t.prototype.needsYScrolling=function(){if(TR.test(this.props.overflowY))return!1;for(var e=this.el,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),n=e.children,r=0;r<n.length;r+=1){if(n[r].getBoundingClientRect().height>t)return!0}return!1},t.prototype.getXScrollbarWidth=function(){return TR.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight},t.prototype.getYScrollbarWidth=function(){return TR.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth},t}(Mx),CR=function(){function e(e){var t=this;this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=function(e,n){var r=t,i=r.depths,o=r.currentMap,a=!1,s=!1;null!==e?(a=n in o,o[n]=e,i[n]=(i[n]||0)+1,s=!0):(i[n]-=1,i[n]||(delete o[n],delete t.callbackMap[n],a=!0)),t.masterCallback&&(a&&t.masterCallback(null,String(n)),s&&t.masterCallback(e,String(n)))}}return e.prototype.createRef=function(e){var t=this,n=this.callbackMap[e];return n||(n=this.callbackMap[e]=function(n){t.handleValue(n,String(e))}),n},e.prototype.collect=function(e,t,n){return function(e,t,n,r){void 0===t&&(t=0),void 0===r&&(r=1);var i=[];null==n&&(n=Object.keys(e).length);for(var o=t;o<n;o+=r){var a=e[o];void 0!==a&&i.push(a)}return i}(this.currentMap,e,t,n)},e.prototype.getAll=function(){return GT(this.currentMap)},e}();function xR(e){for(var t=0,n=0,r=function(e,t){for(var n=e instanceof HTMLElement?[e]:e,r=[],i=0;i<n.length;i+=1)for(var o=n[i].querySelectorAll(t),a=0;a<o.length;a+=1)r.push(o[a]);return r}(e,".fc-scrollgrid-shrink");n<r.length;n++){var i=r[n];t=Math.max(t,ST(i))}return Math.ceil(t)}function AR(e,t){return e.liquid&&t.liquid}function RR(e,t){return uk(e,t,WT)}function MR(e,t){for(var n=[],r=0,i=e;r<i.length;r++)for(var o=i[r],a=o.span||1,s=0;s<a;s+=1)n.push(KS("col",{style:{width:"shrink"===o.width?DR(t):o.width||"",minWidth:o.minWidth||""}}));return KS.apply(void 0,Rw(["colgroup",{}],n))}function DR(e){return null==e?4:e}function OR(e,t){var n=["fc-scrollgrid-section","fc-scrollgrid-section-"+e.type,e.className];return t&&e.liquid&&null==e.maxHeight&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function NR(e){return KS("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function LR(e){var t=e.stickyHeaderDates;return null!=t&&"auto"!==t||(t="auto"===e.height||"auto"===e.viewHeight),t}function IR(e){var t=e.stickyFooterScrollbar;return null!=t&&"auto"!==t||(t="auto"===e.height||"auto"===e.viewHeight),t}var PR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.processCols=hk((function(e){return e}),RR),t.renderMicroColGroup=hk(MR),t.scrollerRefs=new CR,t.scrollerElRefs=new CR(t._handleScrollerEl.bind(t)),t.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},t.handleSizing=function(){t.setState(Aw({shrinkWidth:t.computeShrinkWidth()},t.computeScrollerDims()))},t}return xw(t,e),t.prototype.render=function(){var e=this,t=e.props,n=e.state,r=e.context,i=t.sections||[],o=this.processCols(t.cols),a=this.renderMicroColGroup(o,n.shrinkWidth),s=function(e,t){var n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}(t.liquid,r);t.collapsibleWidth&&s.push("fc-scrollgrid-collapsible");for(var l,c=i.length,d=0,u=[],h=[],p=[];d<c&&"header"===(l=i[d]).type;)u.push(this.renderSection(l,a)),d+=1;for(;d<c&&"body"===(l=i[d]).type;)h.push(this.renderSection(l,a)),d+=1;for(;d<c&&"footer"===(l=i[d]).type;)p.push(this.renderSection(l,a)),d+=1;var f=!ox();return KS("table",{className:s.join(" "),style:{height:t.height}},Boolean(!f&&u.length)&&KS.apply(void 0,Rw(["thead",{}],u)),Boolean(!f&&h.length)&&KS.apply(void 0,Rw(["tbody",{}],h)),Boolean(!f&&p.length)&&KS.apply(void 0,Rw(["tfoot",{}],p)),f&&KS.apply(void 0,Rw(["tbody",{}],u,h,p)))},t.prototype.renderSection=function(e,t){return"outerContent"in e?KS(ZS,{key:e.key},e.outerContent):KS("tr",{key:e.key,className:OR(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk))},t.prototype.renderChunkTd=function(e,t,n){if("outerContent"in n)return n.outerContent;var r=this.props,i=this.state,o=i.forceYScrollbars,a=i.scrollerClientWidths,s=i.scrollerClientHeights,l=function(e,t){return null!=t.maxHeight||AR(e,t)}(r,e),c=AR(r,e),d=r.liquid?o?"scroll":l?"auto":"hidden":"visible",u=e.key,h=function(e,t,n){var r=n.expandRows;return"function"==typeof t.content?t.content(n):KS("table",{className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:r?n.clientHeight:""}},n.tableColGroupNode,KS("tbody",{},"function"==typeof t.rowContent?t.rowContent(n):t.rowContent))}(e,n,{tableColGroupNode:t,tableMinWidth:"",clientWidth:r.collapsibleWidth||void 0===a[u]?null:a[u],clientHeight:void 0!==s[u]?s[u]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:function(){}});return KS("td",{ref:n.elRef},KS("div",{className:"fc-scroller-harness"+(c?" fc-scroller-harness-liquid":"")},KS(kR,{ref:this.scrollerRefs.createRef(u),elRef:this.scrollerElRefs.createRef(u),overflowY:d,overflowX:r.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:c,liquidIsAbsolute:!0},h)))},t.prototype._handleScrollerEl=function(e,t){var n=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.key===t)return i}return null}(this.props.sections,t);n&&Nx(n.chunk.scrollerElRef,e)},t.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},t.prototype.componentDidUpdate=function(){this.handleSizing()},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},t.prototype.computeShrinkWidth=function(){return function(e){for(var t=0,n=e;t<n.length;t++)if("shrink"===n[t].width)return!0;return!1}(this.props.cols)?xR(this.scrollerElRefs.getAll()):0},t.prototype.computeScrollerDims=function(){var e=mx(),t=this.scrollerRefs,n=this.scrollerElRefs,r=!1,i={},o={};for(var a in t.currentMap){var s=t.currentMap[a];if(s&&s.needsYScrolling()){r=!0;break}}for(var l=0,c=this.props.sections;l<c.length;l++){a=c[l].key;var d=n.currentMap[a];if(d){var u=d.parentNode;i[a]=Math.floor(u.getBoundingClientRect().width-(r?e.y:0)),o[a]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:i,scrollerClientHeights:o}},t}(Mx);PR.addStateEquality({scrollerClientWidths:WT,scrollerClientHeights:WT});var FR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elRef=XS(),t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.options,r=e.seg,i=r.eventRange,o=i.ui,a={event:new UC(t,i.def,i.instance),view:t.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&bC(r,t),isStartResizable:!e.disableResizing&&vC(r,t),isEndResizable:!e.disableResizing&&yC(r),isMirror:Boolean(e.isDragging||e.isResizing||e.isDateSelecting),isStart:Boolean(r.isStart),isEnd:Boolean(r.isEnd),isPast:Boolean(e.isPast),isFuture:Boolean(e.isFuture),isToday:Boolean(e.isToday),isSelected:Boolean(e.isSelected),isDragging:Boolean(e.isDragging),isResizing:Boolean(e.isResizing)},s=function(e){var t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}(a).concat(o.classNames);return KS(Yx,{hookProps:a,classNames:n.eventClassNames,content:n.eventContent,defaultContent:e.defaultContent,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount,elRef:this.elRef},(function(t,n,r,i){return e.children(t,s.concat(n),r,i,a)}))},t.prototype.componentDidMount=function(){hC(this.elRef.current,this.props.seg)},t.prototype.componentDidUpdate=function(e){var t=this.props.seg;t!==e.seg&&hC(this.elRef.current,t)},t}(Mx),BR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=e.seg,r=t.options.eventTimeFormat||e.defaultTimeFormat,i=EC(n,r,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return KS(FR,{seg:n,timeText:i,disableDragging:e.disableDragging,disableResizing:e.disableResizing,defaultContent:e.defaultContent||YR,isDragging:e.isDragging,isResizing:e.isResizing,isDateSelecting:e.isDateSelecting,isSelected:e.isSelected,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},(function(t,r,i,o,a){return KS("a",Aw({className:e.extraClassNames.concat(r).join(" "),style:{borderColor:a.borderColor,backgroundColor:a.backgroundColor},ref:t},function(e){var t=e.eventRange.def.url;return t?{href:t}:{}}(n)),KS("div",{className:"fc-event-main",ref:i,style:{color:a.textColor}},o),a.isStartResizable&&KS("div",{className:"fc-event-resizer fc-event-resizer-start"}),a.isEndResizable&&KS("div",{className:"fc-event-resizer fc-event-resizer-end"}))}))},t}(Mx);function YR(e){return KS("div",{className:"fc-event-main-frame"},e.timeText&&KS("div",{className:"fc-event-time"},e.timeText),KS("div",{className:"fc-event-title-container"},KS("div",{className:"fc-event-title fc-sticky"},e.event.title||KS(ZS,null," "))))}var HR=function(e){return KS(xx.Consumer,null,(function(t){var n=t.options,r={isAxis:e.isAxis,date:t.dateEnv.toDate(e.date),view:t.viewApi};return KS(Yx,{hookProps:r,classNames:n.nowIndicatorClassNames,content:n.nowIndicatorContent,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},e.children)}))},UR=xk({day:"numeric"}),zR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.options,r=jR({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,showDayNumber:e.showDayNumber,extraProps:e.extraHookProps,viewApi:t.viewApi,dateEnv:t.dateEnv});return KS(Ux,{hookProps:r,content:n.dayCellContent,defaultContent:e.defaultContent},e.children)},t}(Mx);function jR(e){var t=e.date,n=e.dateEnv,r=cx(t,e.todayRange,null,e.dateProfile);return Aw(Aw(Aw({date:n.toDate(t),view:e.viewApi},r),{dayNumberText:e.showDayNumber?n.format(t,UR):""}),e.extraProps)}var VR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refineHookProps=pk(jR),t.normalizeClassNames=Vx(),t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.options,r=this.refineHookProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,showDayNumber:e.showDayNumber,extraProps:e.extraHookProps,viewApi:t.viewApi,dateEnv:t.dateEnv}),i=dx(r,t.theme).concat(r.isDisabled?[]:this.normalizeClassNames(n.dayCellClassNames,r)),o=r.isDisabled?{}:{"data-date":lk(e.date)};return KS(jx,{hookProps:r,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount,elRef:e.elRef},(function(t){return e.children(t,i,o,r.isDisabled)}))},t}(Mx);function GR(e){return KS("div",{className:"fc-"+e})}var WR=function(e){return KS(FR,{defaultContent:qR,seg:e.seg,timeText:"",disableDragging:!0,disableResizing:!0,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},(function(e,t,n,r,i){return KS("div",{ref:e,className:["fc-bg-event"].concat(t).join(" "),style:{backgroundColor:i.backgroundColor}},r)}))};function qR(e){return e.event.title&&KS("div",{className:"fc-event-title"},e.event.title)}var $R=function(e){return KS(xx.Consumer,null,(function(t){var n=t.dateEnv,r=t.options,i=e.date,o=r.weekNumberFormat||e.defaultFormat,a=n.computeWeekNumber(i),s=n.format(i,o);return KS(Yx,{hookProps:{num:a,text:s,date:i},classNames:r.weekNumberClassNames,content:r.weekNumberContent,defaultContent:KR,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},e.children)}))};function KR(e){return e.text}var QR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRootEl=function(e){t.rootEl=e,t.props.elRef&&Nx(t.props.elRef,e)},t.handleDocumentMousedown=function(e){var n=dT(e);t.rootEl.contains(n)||t.handleCloseClick()},t.handleCloseClick=function(){var e=t.props.onClose;e&&e()},t}return xw(t,e),t.prototype.render=function(){var e=this.context.theme,t=this.props,n=["fc-popover",e.getClass("popover")].concat(t.extraClassNames||[]);return eT(KS("div",Aw({className:n.join(" ")},t.extraAttrs,{ref:this.handleRootEl}),KS("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},KS("span",{className:"fc-popover-title"},t.title),KS("span",{className:"fc-popover-close "+e.getIconClass("close"),onClick:this.handleCloseClick})),KS("div",{className:"fc-popover-body "+e.getClass("popoverContent")},t.children)),t.parentEl)},t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentMousedown),this.updateSize()},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMousedown)},t.prototype.updateSize=function(){var e=this.context.isRtl,t=this.props,n=t.alignmentEl,r=t.alignGridTop,i=this.rootEl,o=function(e){for(var t=vx(e),n=e.getBoundingClientRect(),r=0,i=t;r<i.length;r++){var o=ix(n,i[r].getBoundingClientRect());if(!o)return null;n=o}return n}(n);if(o){var a=i.getBoundingClientRect(),s=r?oT(n,".fc-scrollgrid").getBoundingClientRect().top:o.top,l=e?o.right-a.width:o.left;s=Math.max(s,10),l=Math.min(l,document.documentElement.clientWidth-10-a.width),l=Math.max(l,10);var c=i.offsetParent.getBoundingClientRect();lT(i,{top:s-c.top,left:l-c.left})}},t}(Mx),XR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRootEl=function(e){t.rootEl=e,e?t.context.registerInteractiveComponent(t,{el:e,useEventCenter:!1}):t.context.unregisterInteractiveComponent(t)},t}return xw(t,e),t.prototype.render=function(){var e=this.context,t=e.options,n=e.dateEnv,r=this.props,i=r.startDate,o=r.todayRange,a=r.dateProfile,s=n.format(i,t.dayPopoverFormat);return KS(VR,{date:i,dateProfile:a,todayRange:o,elRef:this.handleRootEl},(function(e,t,n){return KS(QR,{elRef:e,title:s,extraClassNames:["fc-more-popover"].concat(t),extraAttrs:n,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},KS(zR,{date:i,dateProfile:a,todayRange:o},(function(e,t){return t&&KS("div",{className:"fc-more-popover-misc",ref:e},t)})),r.children)}))},t.prototype.queryHit=function(e,t,n,r){var i=this.rootEl,o=this.props;return e>=0&&e<n&&t>=0&&t<r?{dateProfile:o.dateProfile,dateSpan:Aw({allDay:!0,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:i,rect:{left:0,top:0,right:n,bottom:r},layer:1}:null},t}(Lx),ZR=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linkElRef=XS(),t.state={isPopoverOpen:!1},t.handleClick=function(e){var n=t,r=n.props,i=n.context,o=i.options.moreLinkClick,a=eM(r).start;function s(e){var t=e.eventRange,n=t.def,r=t.instance,o=t.range;return{event:new UC(i,n,r),start:i.dateEnv.toDate(o.start),end:i.dateEnv.toDate(o.end),isStart:e.isStart,isEnd:e.isEnd}}"function"==typeof o&&(o=o({date:a,allDay:Boolean(r.allDayDate),allSegs:r.allSegs.map(s),hiddenSegs:r.hiddenSegs.map(s),jsEvent:e,view:i.viewApi})),o&&"popover"!==o?"string"==typeof o&&i.calendarApi.zoomTo(a,o):t.setState({isPopoverOpen:!0})},t.handlePopoverClose=function(){t.setState({isPopoverOpen:!1})},t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props;return KS(xx.Consumer,null,(function(n){var r=n.viewApi,i=n.options,o=n.calendarApi,a=i.moreLinkText,s=t.moreCnt,l=eM(t),c={num:s,shortText:"+"+s,text:"function"==typeof a?a.call(o,s):"+"+s+" "+a,view:r};return KS(ZS,null,Boolean(t.moreCnt)&&KS(Yx,{elRef:e.linkElRef,hookProps:c,classNames:i.moreLinkClassNames,content:i.moreLinkContent,defaultContent:t.defaultContent||JR,didMount:i.moreLinkDidMount,willUnmount:i.moreLinkWillUnmount},(function(n,r,i,o){return t.children(n,["fc-more-link"].concat(r),i,o,e.handleClick)})),e.state.isPopoverOpen&&KS(XR,{startDate:l.start,endDate:l.end,dateProfile:t.dateProfile,todayRange:t.todayRange,extraDateSpan:t.extraDateSpan,parentEl:e.parentEl,alignmentEl:t.alignmentElRef.current,alignGridTop:t.alignGridTop,onClose:e.handlePopoverClose},t.popoverContent()))}))},t.prototype.componentDidMount=function(){this.updateParentEl()},t.prototype.componentDidUpdate=function(){this.updateParentEl()},t.prototype.updateParentEl=function(){this.linkElRef.current&&(this.parentEl=oT(this.linkElRef.current,".fc-view-harness"))},t}(Mx);function JR(e){return e.text}function eM(e){if(e.allDayDate)return{start:e.allDayDate,end:CT(e.allDayDate,1)};var t,n=e.hiddenSegs;return{start:tM(n),end:(t=n,t.reduce(rM).eventRange.range.end)}}function tM(e){return e.reduce(nM).eventRange.range.start}function nM(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function rM(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}var iM=function(e){function t(t,n){void 0===n&&(n={});var r=e.call(this)||this;return r.isRendering=!1,r.isRendered=!1,r.currentClassNames=[],r.customContentRenderId=0,r.handleAction=function(e){switch(e.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":r.renderRunner.tryDrain()}},r.handleData=function(e){r.currentData=e,r.renderRunner.request(e.calendarOptions.rerenderDelay)},r.handleRenderRequest=function(){if(r.isRendering){r.isRendered=!0;var e=r.currentData;QS(KS(iR,{options:e.calendarOptions,theme:e.theme,emitter:e.emitter},(function(t,n,i,o){return r.setClassNames(t),r.setHeight(n),KS(Hx.Provider,{value:r.customContentRenderId},KS(tR,Aw({isHeightAuto:i,forPrint:o},e)))})),r.el)}else r.isRendered&&(r.isRendered=!1,nT(r.el),r.setClassNames([]),r.setHeight(""));tT()},r.el=t,r.renderRunner=new SA(r.handleRenderRequest),new CA({optionOverrides:n,calendarApi:r,onAction:r.handleAction,onData:r.handleData}),r}return xw(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this.currentData.viewApi},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()},t.prototype.destroy=function(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())},t.prototype.updateSize=function(){e.prototype.updateSize.call(this),tT()},t.prototype.batchRendering=function(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")},t.prototype.pauseRendering=function(){this.renderRunner.pause("pauseRendering")},t.prototype.resumeRendering=function(){this.renderRunner.resume("pauseRendering",!0)},t.prototype.resetOptions=function(e,t){this.currentDataManager.resetOptions(e,t)},t.prototype.setClassNames=function(e){if(!uk(e,this.currentClassNames)){for(var t=this.el.classList,n=0,r=this.currentClassNames;n<r.length;n++){var i=r[n];t.remove(i)}for(var o=0,a=e;o<a.length;o++){i=a[o];t.add(i)}this.currentClassNames=e}},t.prototype.setHeight=function(e){cT(this.el,"height",e)},t}(HC);qA.touchMouseIgnoreWait=500;var oM=0,aM=0,sM=!1,lM=function(){function e(e){var t=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(e){if(!t.shouldIgnoreMouse()&&function(e){return 0===e.button&&!e.ctrlKey}(e)&&t.tryStart(e)){var n=t.createEventFromMouse(e,!0);t.emitter.trigger("pointerdown",n),t.initScrollWatch(n),t.shouldIgnoreMove||document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseup",t.handleMouseUp)}},this.handleMouseMove=function(e){var n=t.createEventFromMouse(e);t.recordCoords(n),t.emitter.trigger("pointermove",n)},this.handleMouseUp=function(e){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseup",t.handleMouseUp),t.emitter.trigger("pointerup",t.createEventFromMouse(e)),t.cleanup()},this.handleTouchStart=function(e){if(t.tryStart(e)){t.isTouchDragging=!0;var n=t.createEventFromTouch(e,!0);t.emitter.trigger("pointerdown",n),t.initScrollWatch(n);var r=e.target;t.shouldIgnoreMove||r.addEventListener("touchmove",t.handleTouchMove),r.addEventListener("touchend",t.handleTouchEnd),r.addEventListener("touchcancel",t.handleTouchEnd),window.addEventListener("scroll",t.handleTouchScroll,!0)}},this.handleTouchMove=function(e){var n=t.createEventFromTouch(e);t.recordCoords(n),t.emitter.trigger("pointermove",n)},this.handleTouchEnd=function(e){if(t.isDragging){var n=e.target;n.removeEventListener("touchmove",t.handleTouchMove),n.removeEventListener("touchend",t.handleTouchEnd),n.removeEventListener("touchcancel",t.handleTouchEnd),window.removeEventListener("scroll",t.handleTouchScroll,!0),t.emitter.trigger("pointerup",t.createEventFromTouch(e)),t.cleanup(),t.isTouchDragging=!1,oM+=1,setTimeout((function(){oM-=1}),qA.touchMouseIgnoreWait)}},this.handleTouchScroll=function(){t.wasTouchScroll=!0},this.handleScroll=function(e){if(!t.shouldIgnoreMove){var n=window.pageXOffset-t.prevScrollX+t.prevPageX,r=window.pageYOffset-t.prevScrollY+t.prevPageY;t.emitter.trigger("pointermove",{origEvent:e,isTouch:t.isTouchDragging,subjectEl:t.subjectEl,pageX:n,pageY:r,deltaX:n-t.origPageX,deltaY:r-t.origPageY})}},this.containerEl=e,this.emitter=new yx,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),1===(aM+=1)&&window.addEventListener("touchmove",cM,{passive:!1})}return e.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),(aM-=1)||window.removeEventListener("touchmove",cM,{passive:!1})},e.prototype.tryStart=function(e){var t=this.querySubjectEl(e),n=e.target;return!(!t||this.handleSelector&&!oT(n,this.handleSelector))&&(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0)},e.prototype.cleanup=function(){sM=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},e.prototype.querySubjectEl=function(e){return this.selector?oT(e.target,this.selector):this.containerEl},e.prototype.shouldIgnoreMouse=function(){return oM||this.isTouchDragging},e.prototype.cancelTouchScroll=function(){this.isDragging&&(sM=!0)},e.prototype.initScrollWatch=function(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))},e.prototype.recordCoords=function(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},e.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},e.prototype.createEventFromMouse=function(e,t){var n=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:r}},e.prototype.createEventFromTouch=function(e,t){var n,r,i=e.touches,o=0,a=0;return i&&i.length?(n=i[0].pageX,r=i[0].pageY):(n=e.pageX,r=e.pageY),t?(this.origPageX=n,this.origPageY=r):(o=n-this.origPageX,a=r-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:n,pageY:r,deltaX:o,deltaY:a}},e}();function cM(e){sM&&e.preventDefault()}var dM=function(){function e(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return e.prototype.start=function(e,t,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.pageXOffset,this.origScreenY=n-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},e.prototype.handleMove=function(e,t){this.deltaX=e-window.pageXOffset-this.origScreenX,this.deltaY=t-window.pageYOffset-this.origScreenY,this.updateElPosition()},e.prototype.setIsVisible=function(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)},e.prototype.stop=function(e,t){var n=this,r=function(){n.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)},e.prototype.doRevertAnimation=function(e,t){var n=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();n.style.transition="top "+t+"ms,left "+t+"ms",lT(n,{left:r.left,top:r.top}),function(e,t){var n=function(r){t(r),fT.forEach((function(t){e.removeEventListener(t,n)}))};fT.forEach((function(t){e.addEventListener(t,n)}))}(n,(function(){n.style.transition="",e()}))},e.prototype.cleanup=function(){this.mirrorEl&&(iT(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},e.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&lT(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},e.prototype.getMirrorEl=function(){var e=this.sourceElRect,t=this.mirrorEl;return t||((t=this.mirrorEl=this.sourceEl.cloneNode(!0)).classList.add("fc-unselectable"),t.classList.add("fc-event-dragging"),lT(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t},e}(),uM=function(e){function t(t,n){var r=e.call(this)||this;return r.handleScroll=function(){r.scrollTop=r.scrollController.getScrollTop(),r.scrollLeft=r.scrollController.getScrollLeft(),r.handleScrollChange()},r.scrollController=t,r.doesListening=n,r.scrollTop=r.origScrollTop=t.getScrollTop(),r.scrollLeft=r.origScrollLeft=t.getScrollLeft(),r.scrollWidth=t.getScrollWidth(),r.scrollHeight=t.getScrollHeight(),r.clientWidth=t.getClientWidth(),r.clientHeight=t.getClientHeight(),r.clientRect=r.computeClientRect(),r.doesListening&&r.getEventTarget().addEventListener("scroll",r.handleScroll),r}return xw(t,e),t.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},t.prototype.getScrollTop=function(){return this.scrollTop},t.prototype.getScrollLeft=function(){return this.scrollLeft},t.prototype.setScrollTop=function(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())},t.prototype.setScrollLeft=function(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())},t.prototype.getClientWidth=function(){return this.clientWidth},t.prototype.getClientHeight=function(){return this.clientHeight},t.prototype.getScrollWidth=function(){return this.scrollWidth},t.prototype.getScrollHeight=function(){return this.scrollHeight},t.prototype.handleScrollChange=function(){},t}(wx),hM=function(e){function t(t,n){return e.call(this,new Sx(t),n)||this}return xw(t,e),t.prototype.getEventTarget=function(){return this.scrollController.el},t.prototype.computeClientRect=function(){return gx(this.scrollController.el)},t}(uM),pM=function(e){function t(t){return e.call(this,new Tx,t)||this}return xw(t,e),t.prototype.getEventTarget=function(){return window},t.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},t.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},t}(uM),fM="function"==typeof performance?performance.now:Date.now,mM=function(){function e(){var e=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(e.isAnimating){var t=e.computeBestEdge(e.pointerScreenX+window.pageXOffset,e.pointerScreenY+window.pageYOffset);if(t){var n=fM();e.handleSide(t,(n-e.msSinceRequest)/1e3),e.requestAnimation(n)}else e.isAnimating=!1}}}return e.prototype.start=function(e,t){this.isEnabled&&(this.scrollCaches=this.buildCaches(),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))},e.prototype.handleMove=function(e,t){if(this.isEnabled){var n=e-window.pageXOffset,r=t-window.pageYOffset,i=null===this.pointerScreenY?0:r-this.pointerScreenY,o=null===this.pointerScreenX?0:n-this.pointerScreenX;i<0?this.everMovedUp=!0:i>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(fM()))}},e.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var e=0,t=this.scrollCaches;e<t.length;e++){t[e].destroy()}this.scrollCaches=null}},e.prototype.requestAnimation=function(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)},e.prototype.handleSide=function(e,t){var n=e.scrollCache,r=this.edgeThreshold,i=r-e.distance,o=i*i/(r*r)*this.maxVelocity*t,a=1;switch(e.name){case"left":a=-1;case"right":n.setScrollLeft(n.getScrollLeft()+o*a);break;case"top":a=-1;case"bottom":n.setScrollTop(n.getScrollTop()+o*a)}},e.prototype.computeBestEdge=function(e,t){for(var n=this.edgeThreshold,r=null,i=0,o=this.scrollCaches;i<o.length;i++){var a=o[i],s=a.clientRect,l=e-s.left,c=s.right-e,d=t-s.top,u=s.bottom-t;l>=0&&c>=0&&d>=0&&u>=0&&(d<=n&&this.everMovedUp&&a.canScrollUp()&&(!r||r.distance>d)&&(r={scrollCache:a,name:"top",distance:d}),u<=n&&this.everMovedDown&&a.canScrollDown()&&(!r||r.distance>u)&&(r={scrollCache:a,name:"bottom",distance:u}),l<=n&&this.everMovedLeft&&a.canScrollLeft()&&(!r||r.distance>l)&&(r={scrollCache:a,name:"left",distance:l}),c<=n&&this.everMovedRight&&a.canScrollRight()&&(!r||r.distance>c)&&(r={scrollCache:a,name:"right",distance:c}))}return r},e.prototype.buildCaches=function(){return this.queryScrollEls().map((function(e){return e===window?new pM(!1):new hM(e,!1)}))},e.prototype.queryScrollEls=function(){for(var e=[],t=0,n=this.scrollQuery;t<n.length;t++){var r=n[t];"object"==typeof r?e.push(r):e.push.apply(e,Array.prototype.slice.call(document.querySelectorAll(r)))}return e},e}(),_M=function(e){function t(t,n){var r=e.call(this,t)||this;r.delay=null,r.minDistance=0,r.touchScrollAllowed=!0,r.mirrorNeedsRevert=!1,r.isInteracting=!1,r.isDragging=!1,r.isDelayEnded=!1,r.isDistanceSurpassed=!1,r.delayTimeoutId=null,r.onPointerDown=function(e){var t;r.isDragging||(r.isInteracting=!0,r.isDelayEnded=!1,r.isDistanceSurpassed=!1,(t=document.body).classList.add("fc-unselectable"),t.addEventListener("selectstart",uT),function(e){e.addEventListener("contextmenu",uT)}(document.body),e.isTouch||e.origEvent.preventDefault(),r.emitter.trigger("pointerdown",e),r.isInteracting&&!r.pointer.shouldIgnoreMove&&(r.mirror.setIsVisible(!1),r.mirror.start(e.subjectEl,e.pageX,e.pageY),r.startDelay(e),r.minDistance||r.handleDistanceSurpassed(e)))},r.onPointerMove=function(e){if(r.isInteracting){if(r.emitter.trigger("pointermove",e),!r.isDistanceSurpassed){var t=r.minDistance,n=e.deltaX,i=e.deltaY;n*n+i*i>=t*t&&r.handleDistanceSurpassed(e)}r.isDragging&&("scroll"!==e.origEvent.type&&(r.mirror.handleMove(e.pageX,e.pageY),r.autoScroller.handleMove(e.pageX,e.pageY)),r.emitter.trigger("dragmove",e))}},r.onPointerUp=function(e){var t;r.isInteracting&&(r.isInteracting=!1,(t=document.body).classList.remove("fc-unselectable"),t.removeEventListener("selectstart",uT),function(e){e.removeEventListener("contextmenu",uT)}(document.body),r.emitter.trigger("pointerup",e),r.isDragging&&(r.autoScroller.stop(),r.tryStopDrag(e)),r.delayTimeoutId&&(clearTimeout(r.delayTimeoutId),r.delayTimeoutId=null))};var i=r.pointer=new lM(t);return i.emitter.on("pointerdown",r.onPointerDown),i.emitter.on("pointermove",r.onPointerMove),i.emitter.on("pointerup",r.onPointerUp),n&&(i.selector=n),r.mirror=new dM,r.autoScroller=new mM,r}return xw(t,e),t.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},t.prototype.startDelay=function(e){var t=this;"number"==typeof this.delay?this.delayTimeoutId=setTimeout((function(){t.delayTimeoutId=null,t.handleDelayEnd(e)}),this.delay):this.handleDelayEnd(e)},t.prototype.handleDelayEnd=function(e){this.isDelayEnded=!0,this.tryStartDrag(e)},t.prototype.handleDistanceSurpassed=function(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)},t.prototype.tryStartDrag=function(e){this.isDelayEnded&&this.isDistanceSurpassed&&(this.pointer.wasTouchScroll&&!this.touchScrollAllowed||(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY),this.emitter.trigger("dragstart",e),!1===this.touchScrollAllowed&&this.pointer.cancelTouchScroll()))},t.prototype.tryStopDrag=function(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))},t.prototype.stopDrag=function(e){this.isDragging=!1,this.emitter.trigger("dragend",e)},t.prototype.setIgnoreMove=function(e){this.pointer.shouldIgnoreMove=e},t.prototype.setMirrorIsVisible=function(e){this.mirror.setIsVisible(e)},t.prototype.setMirrorNeedsRevert=function(e){this.mirrorNeedsRevert=e},t.prototype.setAutoScrollEnabled=function(e){this.autoScroller.isEnabled=e},t}(WA),gM=function(){function e(e){this.origRect=bx(e),this.scrollCaches=vx(e).map((function(e){return new hM(e,!0)}))}return e.prototype.destroy=function(){for(var e=0,t=this.scrollCaches;e<t.length;e++){t[e].destroy()}},e.prototype.computeLeft=function(){for(var e=this.origRect.left,t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];e+=r.origScrollLeft-r.getScrollLeft()}return e},e.prototype.computeTop=function(){for(var e=this.origRect.top,t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];e+=r.origScrollTop-r.getScrollTop()}return e},e.prototype.isWithinClipping=function(e,t){for(var n,r,i={left:e,top:t},o=0,a=this.scrollCaches;o<a.length;o++){var s=a[o];if(n=s.getEventTarget(),r=void 0,"HTML"!==(r=n.tagName)&&"BODY"!==r&&!rx(i,s.clientRect))return!1}return!0},e}();var bM=function(){function e(e,t){var n=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(e){var t=n.dragging;n.initialHit=null,n.movingHit=null,n.finalHit=null,n.prepareHits(),n.processFirstCoord(e),n.initialHit||!n.requireInitial?(t.setIgnoreMove(!1),n.emitter.trigger("pointerdown",e)):t.setIgnoreMove(!0)},this.handleDragStart=function(e){n.emitter.trigger("dragstart",e),n.handleMove(e,!0)},this.handleDragMove=function(e){n.emitter.trigger("dragmove",e),n.handleMove(e)},this.handlePointerUp=function(e){n.releaseHits(),n.emitter.trigger("pointerup",e)},this.handleDragEnd=function(e){n.movingHit&&n.emitter.trigger("hitupdate",null,!0,e),n.finalHit=n.movingHit,n.movingHit=null,n.emitter.trigger("dragend",e)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new yx}return e.prototype.processFirstCoord=function(e){var t,n,r,i={left:e.pageX,top:e.pageY},o=i,a=e.subjectEl;a!==document&&(t=bx(a),n=o,r=t,o={left:Math.min(Math.max(n.left,r.left),r.right),top:Math.min(Math.max(n.top,r.top),r.bottom)});var s,l,c=this.initialHit=this.queryHitForOffset(o.left,o.top);if(c){if(this.useSubjectCenter&&t){var d=ix(t,c.rect);d&&(o=function(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}(d))}this.coordAdjust=(l=i,{left:(s=o).left-l.left,top:s.top-l.top})}else this.coordAdjust={left:0,top:0}},e.prototype.handleMove=function(e,t){var n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);!t&&vM(this.movingHit,n)||(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e))},e.prototype.prepareHits=function(){this.offsetTrackers=jT(this.droppableStore,(function(e){return e.component.prepareHits(),new gM(e.el)}))},e.prototype.releaseHits=function(){var e=this.offsetTrackers;for(var t in e)e[t].destroy();this.offsetTrackers={}},e.prototype.queryHitForOffset=function(e,t){var n=this.droppableStore,r=this.offsetTrackers,i=null;for(var o in n){var a=n[o].component,s=r[o];if(s&&s.isWithinClipping(e,t)){var l=s.computeLeft(),c=s.computeTop(),d=e-l,u=t-c,h=s.origRect,p=h.right-h.left,f=h.bottom-h.top;if(d>=0&&d<p&&u>=0&&u<f){var m=a.queryHit(d,u,p,f);m&&cC(m.dateProfile.activeRange,m.dateSpan.range)&&(!i||m.layer>i.layer)&&(m.componentId=o,m.context=a.context,m.rect.left+=l,m.rect.right+=l,m.rect.top+=c,m.rect.bottom+=c,i=m)}}}return i},e}();function vM(e,t){return!e&&!t||Boolean(e)===Boolean(t)&&(n=e.dateSpan,r=t.dateSpan,i=n.range,o=r.range,(null===i.start?null:i.start.valueOf())===(null===o.start?null:o.start.valueOf())&&(null===i.end?null:i.end.valueOf())===(null===o.end?null:o.end.valueOf())&&n.allDay===r.allDay&&function(e,t){for(var n in t)if("range"!==n&&"allDay"!==n&&e[n]!==t[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}(n,r));var n,r,i,o}function yM(e,t){for(var n,r,i={},o=0,a=t.pluginHooks.datePointTransforms;o<a.length;o++){var s=a[o];Aw(i,s(e,t))}return Aw(i,(n=e,{date:(r=t.dateEnv).toDate(n.range.start),dateStr:r.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay})),i}var EM=function(e){function t(t){var n=e.call(this,t)||this;n.handlePointerDown=function(e){var t=n.dragging,r=e.origEvent.target;t.setIgnoreMove(!n.component.isValidDateDownEl(r))},n.handleDragEnd=function(e){var t=n.component;if(!n.dragging.pointer.wasTouchScroll){var r=n.hitDragging,i=r.initialHit,o=r.finalHit;if(i&&o&&vM(i,o)){var a=t.context,s=Aw(Aw({},yM(i.dateSpan,a)),{dayEl:i.dayEl,jsEvent:e.origEvent,view:a.viewApi||a.calendarApi.view});a.emitter.trigger("dateClick",s)}}},n.dragging=new _M(t.el),n.dragging.autoScroller.isEnabled=!1;var r=n.hitDragging=new bM(n.dragging,VA(t));return r.emitter.on("pointerdown",n.handlePointerDown),r.emitter.on("dragend",n.handleDragEnd),n}return xw(t,e),t.prototype.destroy=function(){this.dragging.destroy()},t}(zA),wM=function(e){function t(t){var n=e.call(this,t)||this;n.dragSelection=null,n.handlePointerDown=function(e){var t=n,r=t.component,i=t.dragging,o=r.context.options.selectable&&r.isValidDateDownEl(e.origEvent.target);i.setIgnoreMove(!o),i.delay=e.isTouch?function(e){var t=e.context.options,n=t.selectLongPressDelay;null==n&&(n=t.longPressDelay);return n}(r):null},n.handleDragStart=function(e){n.component.context.calendarApi.unselect(e)},n.handleHitUpdate=function(e,t){var r=n.component.context,i=null,o=!1;if(e){var a=n.hitDragging.initialHit;e.componentId===a.componentId&&n.isHitComboAllowed&&!n.isHitComboAllowed(a,e)||(i=function(e,t,n){var r=e.dateSpan,i=t.dateSpan,o=[r.range.start,r.range.end,i.range.start,i.range.end];o.sort(ET);for(var a={},s=0,l=n;s<l.length;s++){var c=(0,l[s])(e,t);if(!1===c)return null;c&&Aw(a,c)}return a.range={start:o[0],end:o[3]},a.allDay=r.allDay,a}(a,e,r.pluginHooks.dateSelectionTransformers)),i&&function(e,t,n){return!!cC(t.validRange,e.range)&&bR({dateSelection:e},n)}(i,e.dateProfile,r)||(o=!0,i=null)}i?r.dispatch({type:"SELECT_DATES",selection:i}):t||r.dispatch({type:"UNSELECT_DATES"}),o?gT():bT(),t||(n.dragSelection=i)},n.handlePointerUp=function(e){n.dragSelection&&(RC(n.dragSelection,e,n.component.context),n.dragSelection=null)};var r=t.component.context.options,i=n.dragging=new _M(t.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;var o=n.hitDragging=new bM(n.dragging,VA(t));return o.emitter.on("pointerdown",n.handlePointerDown),o.emitter.on("dragstart",n.handleDragStart),o.emitter.on("hitupdate",n.handleHitUpdate),o.emitter.on("pointerup",n.handlePointerUp),n}return xw(t,e),t.prototype.destroy=function(){this.dragging.destroy()},t}(zA);var SM=function(e){function t(n){var r=e.call(this,n)||this;r.subjectEl=null,r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingContext=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(e){var t=e.origEvent.target,n=r,i=n.component,o=n.dragging,a=o.mirror,s=i.context.options,l=i.context;r.subjectEl=e.subjectEl;var c=r.subjectSeg=pC(e.subjectEl),d=(r.eventRange=c.eventRange).instance.instanceId;r.relevantEvents=Hk(l.getCurrentData().eventStore,d),o.minDistance=e.isTouch?0:s.eventDragMinDistance,o.delay=e.isTouch&&d!==i.props.eventSelection?function(e){var t=e.context.options,n=t.eventLongPressDelay;null==n&&(n=t.longPressDelay);return n}(i):null,s.fixedMirrorParent?a.parentNode=s.fixedMirrorParent:a.parentNode=oT(t,".fc"),a.revertDuration=s.dragRevertDuration;var u=i.isValidSegDownEl(t)&&!oT(t,".fc-event-resizer");o.setIgnoreMove(!u),r.isDragging=u&&e.subjectEl.classList.contains("fc-event-draggable")},r.handleDragStart=function(e){var t=r.component.context,n=r.eventRange,i=n.instance.instanceId;e.isTouch?i!==r.component.props.eventSelection&&t.dispatch({type:"SELECT_EVENT",eventInstanceId:i}):t.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(t.calendarApi.unselect(e),t.emitter.trigger("eventDragStart",{el:r.subjectEl,event:new UC(t,n.def,n.instance),jsEvent:e.origEvent,view:t.viewApi}))},r.handleHitUpdate=function(e,t){if(r.isDragging){var n=r.relevantEvents,i=r.hitDragging.initialHit,o=r.component.context,a=null,s=null,l=null,c=!1,d={affectedEvents:n,mutatedEvents:{defs:{},instances:{}},isEvent:!0};if(e){var u=(a=e.context).options;o===a||u.editable&&u.droppable?(s=function(e,t,n){var r=e.dateSpan,i=t.dateSpan,o=r.range.start,a=i.range.start,s={};r.allDay!==i.allDay&&(s.allDay=i.allDay,s.hasEnd=t.context.options.allDayMaintainDuration,i.allDay&&(o=MT(o)));var l=iC(o,a,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);l.milliseconds&&(s.allDay=!1);for(var c={datesDelta:l,standardProps:s},d=0,u=n;d<u.length;d++){(0,u[d])(c,e,t)}return c}(i,e,a.getCurrentData().pluginHooks.eventDragMutationMassagers))&&(l=OC(n,a.getCurrentData().eventUiBases,s,a),d.mutatedEvents=l,gR(d,e.dateProfile,a)||(c=!0,s=null,l=null,d.mutatedEvents={defs:{},instances:{}})):a=null}r.displayDrag(a,d),c?gT():bT(),t||(o===a&&vM(i,e)&&(s=null),r.dragging.setMirrorNeedsRevert(!s),r.dragging.setMirrorIsVisible(!e||!document.querySelector(".fc-event-mirror")),r.receivingContext=a,r.validMutation=s,r.mutatedRelevantEvents=l)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(e){if(r.isDragging){var t=r.component.context,n=t.viewApi,i=r,o=i.receivingContext,a=i.validMutation,s=r.eventRange.def,l=r.eventRange.instance,c=new UC(t,s,l),d=r.relevantEvents,u=r.mutatedRelevantEvents,h=r.hitDragging.finalHit;if(r.clearDrag(),t.emitter.trigger("eventDragStop",{el:r.subjectEl,event:c,jsEvent:e.origEvent,view:n}),a){if(o===t){var p=new UC(t,u.defs[s.defId],l?u.instances[l.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:u});for(var f={oldEvent:c,event:p,relatedEvents:jC(u,t,l),revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:d})}},m={},_=0,g=t.getCurrentData().pluginHooks.eventDropTransformers;_<g.length;_++){var b=g[_];Aw(m,b(a,t))}t.emitter.trigger("eventDrop",Aw(Aw(Aw({},f),m),{el:e.subjectEl,delta:a.datesDelta,jsEvent:e.origEvent,view:n})),t.emitter.trigger("eventChange",f)}else if(o){var v={event:c,relatedEvents:jC(d,t,l),revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:d})}};t.emitter.trigger("eventLeave",Aw(Aw({},v),{draggedEl:e.subjectEl,view:n})),t.dispatch({type:"REMOVE_EVENTS",eventStore:d}),t.emitter.trigger("eventRemove",v);var y=u.defs[s.defId],E=u.instances[l.instanceId],w=new UC(o,y,E);o.dispatch({type:"MERGE_EVENTS",eventStore:u});var S={event:w,relatedEvents:jC(u,o,E),revert:function(){o.dispatch({type:"REMOVE_EVENTS",eventStore:u})}};o.emitter.trigger("eventAdd",S),e.isTouch&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:l.instanceId}),o.emitter.trigger("drop",Aw(Aw({},yM(h.dateSpan,o)),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:h.context.viewApi})),o.emitter.trigger("eventReceive",Aw(Aw({},S),{draggedEl:e.subjectEl,view:h.context.viewApi}))}}else t.emitter.trigger("_noEventDrop")}r.cleanup()};var i=r.component.context.options,o=r.dragging=new _M(n.el);o.pointer.selector=t.SELECTOR,o.touchScrollAllowed=!1,o.autoScroller.isEnabled=i.dragScroll;var a=r.hitDragging=new bM(r.dragging,GA);return a.useSubjectCenter=n.useEventCenter,a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("dragstart",r.handleDragStart),a.emitter.on("hitupdate",r.handleHitUpdate),a.emitter.on("pointerup",r.handlePointerUp),a.emitter.on("dragend",r.handleDragEnd),r}return xw(t,e),t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.displayDrag=function(e,t){var n=this.component.context,r=this.receivingContext;r&&r!==e&&(r===n?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:{defs:{},instances:{}},isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})},t.prototype.clearDrag=function(){var e=this.component.context,t=this.receivingContext;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})},t.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},t.SELECTOR=".fc-event-draggable, .fc-event-resizable",t}(zA);var TM=function(e){function t(t){var n=e.call(this,t)||this;n.draggingSegEl=null,n.draggingSeg=null,n.eventRange=null,n.relevantEvents=null,n.validMutation=null,n.mutatedRelevantEvents=null,n.handlePointerDown=function(e){var t=n.component,r=pC(n.querySegEl(e)),i=n.eventRange=r.eventRange;n.dragging.minDistance=t.context.options.eventDragMinDistance,n.dragging.setIgnoreMove(!n.component.isValidSegDownEl(e.origEvent.target)||e.isTouch&&n.component.props.eventSelection!==i.instance.instanceId)},n.handleDragStart=function(e){var t=n.component.context,r=n.eventRange;n.relevantEvents=Hk(t.getCurrentData().eventStore,n.eventRange.instance.instanceId);var i=n.querySegEl(e);n.draggingSegEl=i,n.draggingSeg=pC(i),t.calendarApi.unselect(),t.emitter.trigger("eventResizeStart",{el:i,event:new UC(t,r.def,r.instance),jsEvent:e.origEvent,view:t.viewApi})},n.handleHitUpdate=function(e,t,r){var i=n.component.context,o=n.relevantEvents,a=n.hitDragging.initialHit,s=n.eventRange.instance,l=null,c=null,d=!1,u={affectedEvents:o,mutatedEvents:{defs:{},instances:{}},isEvent:!0};e&&(e.componentId===a.componentId&&n.isHitComboAllowed&&!n.isHitComboAllowed(a,e)||(l=function(e,t,n,r){var i=e.context.dateEnv,o=e.dateSpan.range.start,a=t.dateSpan.range.start,s=iC(o,a,i,e.largeUnit);if(n){if(i.add(r.start,s)<r.end)return{startDelta:s}}else if(i.add(r.end,s)>r.start)return{endDelta:s};return null}(a,e,r.subjectEl.classList.contains("fc-event-resizer-start"),s.range)));l&&(c=OC(o,i.getCurrentData().eventUiBases,l,i),u.mutatedEvents=c,gR(u,e.dateProfile,i)||(d=!0,l=null,c=null,u.mutatedEvents=null)),c?i.dispatch({type:"SET_EVENT_RESIZE",state:u}):i.dispatch({type:"UNSET_EVENT_RESIZE"}),d?gT():bT(),t||(l&&vM(a,e)&&(l=null),n.validMutation=l,n.mutatedRelevantEvents=c)},n.handleDragEnd=function(e){var t=n.component.context,r=n.eventRange.def,i=n.eventRange.instance,o=new UC(t,r,i),a=n.relevantEvents,s=n.mutatedRelevantEvents;if(t.emitter.trigger("eventResizeStop",{el:n.draggingSegEl,event:o,jsEvent:e.origEvent,view:t.viewApi}),n.validMutation){var l=new UC(t,s.defs[r.defId],i?s.instances[i.instanceId]:null);t.dispatch({type:"MERGE_EVENTS",eventStore:s});var c={oldEvent:o,event:l,relatedEvents:jC(s,t,i),revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:a})}};t.emitter.trigger("eventResize",Aw(Aw({},c),{el:n.draggingSegEl,startDelta:n.validMutation.startDelta||ek(0),endDelta:n.validMutation.endDelta||ek(0),jsEvent:e.origEvent,view:t.viewApi})),t.emitter.trigger("eventChange",c)}else t.emitter.trigger("_noEventResize");n.draggingSeg=null,n.relevantEvents=null,n.validMutation=null};var r=t.component,i=n.dragging=new _M(t.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.context.options.dragScroll;var o=n.hitDragging=new bM(n.dragging,VA(t));return o.emitter.on("pointerdown",n.handlePointerDown),o.emitter.on("dragstart",n.handleDragStart),o.emitter.on("hitupdate",n.handleHitUpdate),o.emitter.on("dragend",n.handleDragEnd),n}return xw(t,e),t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.querySegEl=function(e){return oT(e.subjectEl,".fc-event")},t}(zA);var kM=function(){function e(e){var t=this;this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(e){e.jsEvent&&(t.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(e){var n=t.context.options.unselectCancel,r=e.origEvent.target;t.matchesCancel=!!oT(r,n),t.matchesEvent=!!oT(r,SM.SELECTOR)},this.onDocumentPointerUp=function(e){var n=t.context,r=t.documentPointer,i=n.getCurrentData();if(!r.wasTouchScroll){if(i.dateSelection&&!t.isRecentPointerDateSelect){var o=n.options.unselectAuto;!o||o&&t.matchesCancel||n.calendarApi.unselect(e)}i.eventSelection&&!t.matchesEvent&&n.dispatch({type:"UNSELECT_EVENT"})}t.isRecentPointerDateSelect=!1};var n=this.documentPointer=new lM(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}return e.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},e}(),CM={fixedMirrorParent:Fk},xM={dateClick:Fk,eventDragStart:Fk,eventDragStop:Fk,eventDrop:Fk,eventResizeStart:Fk,eventResizeStop:Fk,eventResize:Fk,drop:Fk,eventReceive:Fk,eventLeave:Fk},AM=function(){function e(e,t){var n=this;this.receivingContext=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=function(e){n.dragMeta=n.buildDragMeta(e.subjectEl)},this.handleHitUpdate=function(e,t,r){var i=n.hitDragging.dragging,o=null,a=null,s=!1,l={affectedEvents:{defs:{},instances:{}},mutatedEvents:{defs:{},instances:{}},isEvent:n.dragMeta.create};e&&(o=e.context,n.canDropElOnCalendar(r.subjectEl,o)&&(a=function(e,t,n){for(var r=Aw({},t.leftoverProps),i=0,o=n.pluginHooks.externalDefTransforms;i<o.length;i++){var a=o[i];Aw(r,a(e,t))}var s=Jk(r,n),l=s.refined,c=s.extra,d=tC(l,c,t.sourceId,e.allDay,n.options.forceEventDuration||Boolean(t.duration),n),u=e.range.start;e.allDay&&t.startTime&&(u=n.dateEnv.add(u,t.startTime));var h=t.duration?n.dateEnv.add(u,t.duration):DC(e.allDay,u,n),p=YT(d.defId,{start:u,end:h});return{def:d,instance:p}}(e.dateSpan,n.dragMeta,o),l.mutatedEvents=Yk(a),(s=!gR(l,e.dateProfile,o))&&(l.mutatedEvents={defs:{},instances:{}},a=null))),n.displayDrag(o,l),i.setMirrorIsVisible(t||!a||!document.querySelector(".fc-event-mirror")),s?gT():bT(),t||(i.setMirrorNeedsRevert(!a),n.receivingContext=o,n.droppableEvent=a)},this.handleDragEnd=function(e){var t=n,r=t.receivingContext,i=t.droppableEvent;if(n.clearDrag(),r&&i){var o=n.hitDragging.finalHit,a=o.context.viewApi,s=n.dragMeta;if(r.emitter.trigger("drop",Aw(Aw({},yM(o.dateSpan,r)),{draggedEl:e.subjectEl,jsEvent:e.origEvent,view:a})),s.create){var l=Yk(i);r.dispatch({type:"MERGE_EVENTS",eventStore:l}),e.isTouch&&r.dispatch({type:"SELECT_EVENT",eventInstanceId:i.instance.instanceId}),r.emitter.trigger("eventReceive",{event:new UC(r,i.def,i.instance),relatedEvents:[],revert:function(){r.dispatch({type:"REMOVE_EVENTS",eventStore:l})},draggedEl:e.subjectEl,view:a})}}n.receivingContext=null,n.droppableEvent=null};var r=this.hitDragging=new bM(e,GA);r.requireInitial=!1,r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=t}return e.prototype.buildDragMeta=function(e){return"object"==typeof this.suppliedDragMeta?KA(this.suppliedDragMeta):"function"==typeof this.suppliedDragMeta?KA(this.suppliedDragMeta(e)):KA((t=function(e,t){var n=qA.dataAttrPrefix,r=(n?n+"-":"")+t;return e.getAttribute("data-"+r)||""}(e,"event"))?JSON.parse(t):{create:!1});var t},e.prototype.displayDrag=function(e,t){var n=this.receivingContext;n&&n!==e&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})},e.prototype.clearDrag=function(){this.receivingContext&&this.receivingContext.dispatch({type:"UNSET_EVENT_DRAG"})},e.prototype.canDropElOnCalendar=function(e,t){var n=t.options.dropAccept;return"function"==typeof n?n.call(t.calendarApi,e):"string"!=typeof n||!n||Boolean(aT(e,n))},e}();qA.dataAttrPrefix="";var RM=function(){function e(e,t){var n=this;void 0===t&&(t={}),this.handlePointerDown=function(e){var t=n.dragging,r=n.settings,i=r.minDistance,o=r.longPressDelay;t.minDistance=null!=i?i:e.isTouch?0:Rk.eventDragMinDistance,t.delay=e.isTouch?null!=o?o:Rk.longPressDelay:0},this.handleDragStart=function(e){e.isTouch&&n.dragging.delay&&e.subjectEl.classList.contains("fc-event")&&n.dragging.mirror.getMirrorEl().classList.add("fc-event-selected")},this.settings=t;var r=this.dragging=new _M(e);r.touchScrollAllowed=!1,null!=t.itemSelector&&(r.pointer.selector=t.itemSelector),null!=t.appendTo&&(r.mirror.parentNode=t.appendTo),r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),new AM(r,t.eventData)}return e.prototype.destroy=function(){this.dragging.destroy()},e}(),MM=function(e){function t(t){var n=e.call(this,t)||this;n.shouldIgnoreMove=!1,n.mirrorSelector="",n.currentMirrorEl=null,n.handlePointerDown=function(e){n.emitter.trigger("pointerdown",e),n.shouldIgnoreMove||n.emitter.trigger("dragstart",e)},n.handlePointerMove=function(e){n.shouldIgnoreMove||n.emitter.trigger("dragmove",e)},n.handlePointerUp=function(e){n.emitter.trigger("pointerup",e),n.shouldIgnoreMove||n.emitter.trigger("dragend",e)};var r=n.pointer=new lM(t);return r.emitter.on("pointerdown",n.handlePointerDown),r.emitter.on("pointermove",n.handlePointerMove),r.emitter.on("pointerup",n.handlePointerUp),n}return xw(t,e),t.prototype.destroy=function(){this.pointer.destroy()},t.prototype.setIgnoreMove=function(e){this.shouldIgnoreMove=e},t.prototype.setMirrorIsVisible=function(e){if(e)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var t=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;t&&(this.currentMirrorEl=t,t.style.visibility="hidden")}},t}(WA);!function(){function e(e,t){var n=document;e===document||e instanceof Element?(n=e,t=t||{}):t=e||{};var r=this.dragging=new MM(n);"string"==typeof t.itemSelector?r.pointer.selector=t.itemSelector:n===document&&(r.pointer.selector="[data-event]"),"string"==typeof t.mirrorSelector&&(r.mirrorSelector=t.mirrorSelector),new AM(r,t.eventData)}e.prototype.destroy=function(){this.dragging.destroy()}}();const DM=Ix({componentInteractions:[EM,wM,SM,TM],calendarInteractions:[kM],elementDraggingImpl:_M,optionRefiners:CM,listenerRefiners:xM});r(5803);var OM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.headerElRef=XS(),t}return xw(t,e),t.prototype.renderSimpleLayout=function(e,t){var n=this.props,r=this.context,i=[],o=LR(r.options);return e&&i.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),i.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),KS(qx,{viewSpec:r.viewSpec},(function(e,t){return KS("div",{ref:e,className:["fc-daygrid"].concat(t).join(" ")},KS(PR,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:i}))}))},t.prototype.renderHScrollLayout=function(e,t,n,r){var i=this.context.pluginHooks.scrollGridImpl;if(!i)throw new Error("No ScrollGrid implementation");var o=this.props,a=this.context,s=!o.forPrint&&LR(a.options),l=!o.forPrint&&IR(a.options),c=[];return e&&c.push({type:"header",key:"header",isSticky:s,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),c.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),l&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:NR}]}),KS(qx,{viewSpec:a.viewSpec},(function(e,t){return KS("div",{ref:e,className:["fc-daygrid"].concat(t).join(" ")},KS(i,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:n,minWidth:r}]}],sections:c}))}))},t}(Lx);function NM(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var i=0,o=e;i<o.length;i++){var a=o[i];n[a.row].push(a)}return n}function LM(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var i=0,o=e;i<o.length;i++){var a=o[i];n[a.firstCol].push(a)}return n}function IM(e,t){var n=[];if(e){for(a=0;a<t;a+=1)n[a]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(var r=0,i=e.segs;r<i.length;r++){var o=i[r];n[o.row].segs.push(o)}}else for(var a=0;a<t;a+=1)n[a]=null;return n}var PM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context.options.navLinks?{"data-navlink":ux(e.date),tabIndex:0}:{};return KS(zR,{date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,showDayNumber:e.showDayNumber,extraHookProps:e.extraHookProps,defaultContent:FM},(function(n,r){return(r||e.forceDayTop)&&KS("div",{className:"fc-daygrid-day-top",ref:n},KS("a",Aw({className:"fc-daygrid-day-number"},t),r||KS(ZS,null," ")))}))},t}(Mx);function FM(e){return e.dayNumberText}var BM=xk({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function YM(e){var t=e.eventRange.ui.display;return"list-item"===t||"auto"===t&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}var HM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props;return KS(BR,Aw({},e,{extraClassNames:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:BM,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))},t}(Mx),UM=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.options.eventTimeFormat||BM,r=EC(e.seg,n,t,!0,e.defaultDisplayEventEnd);return KS(FR,{seg:e.seg,timeText:r,defaultContent:zM,isDragging:e.isDragging,isResizing:!1,isDateSelecting:!1,isSelected:e.isSelected,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},(function(t,n,r,i){return KS("a",Aw({className:["fc-daygrid-event","fc-daygrid-dot-event"].concat(n).join(" "),ref:t},(o=e.seg,(a=o.eventRange.def.url)?{href:a}:{})),i);var o,a}))},t}(Mx);function zM(e){return KS(ZS,null,KS("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&KS("div",{className:"fc-event-time"},e.timeText),KS("div",{className:"fc-event-title"},e.event.title||KS(ZS,null," ")))}var jM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.compileSegs=hk(VM),t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.compileSegs(e.singlePlacements),n=t.allSegs,r=t.invisibleSegs;return KS(ZR,{dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:function(){var t=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return KS(ZS,null,n.map((function(n){var r=n.eventRange.instance.instanceId;return KS("div",{className:"fc-daygrid-event-harness",key:r,style:{visibility:t[r]?"hidden":""}},YM(n)?KS(UM,Aw({seg:n,isDragging:!1,isSelected:r===e.eventSelection,defaultDisplayEventEnd:!1},wC(n,e.todayRange))):KS(HM,Aw({seg:n,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:r===e.eventSelection,defaultDisplayEventEnd:!1},wC(n,e.todayRange))))})))}},(function(e,t,n,r,i){return KS("a",{ref:e,className:["fc-daygrid-more-link"].concat(t).join(" "),onClick:i},r)}))},t}(Mx);function VM(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var o=i[r];t.push(o.seg),o.isVisible||n.push(o.seg)}return{allSegs:t,invisibleSegs:n}}var GM=xk({week:"narrow"}),WM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootElRef=XS(),t.handleRootEl=function(e){Nx(t.rootElRef,e),Nx(t.props.elRef,e)},t}return xw(t,e),t.prototype.render=function(){var e=this,t=e.props,n=e.context,r=e.rootElRef,i=n.options,o=t.date,a=t.dateProfile,s=i.navLinks?{"data-navlink":ux(o,"week"),tabIndex:0}:{};return KS(VR,{date:o,dateProfile:a,todayRange:t.todayRange,showDayNumber:t.showDayNumber,extraHookProps:t.extraHookProps,elRef:this.handleRootEl},(function(e,n,i,l){return KS("td",Aw({ref:e,className:["fc-daygrid-day"].concat(n,t.extraClassNames||[]).join(" ")},i,t.extraDataAttrs),KS("div",{className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",ref:t.innerElRef},t.showWeekNumber&&KS($R,{date:o,defaultFormat:GM},(function(e,t,n,r){return KS("a",Aw({ref:e,className:["fc-daygrid-week-number"].concat(t).join(" ")},s),r)})),!l&&KS(PM,{date:o,dateProfile:a,showDayNumber:t.showDayNumber,forceDayTop:t.forceDayTop,todayRange:t.todayRange,extraHookProps:t.extraHookProps}),KS("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,KS("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},KS(jM,{allDayDate:o,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),KS("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}))},t}(Lx);function qM(e,t,n,r,i,o,a){var s=new KM;s.allowReslicing=!0,s.strictOrder=r,!0===t||!0===n?(s.maxCoord=o,s.hiddenConsumes=!0):"number"==typeof t?s.maxStackCnt=t:"number"==typeof n&&(s.maxStackCnt=n,s.hiddenConsumes=!0);for(var l=[],c=[],d=0;d<e.length;d+=1){var u=i[(k=e[d]).eventRange.instance.instanceId];null!=u?l.push({index:d,spanStart:k.firstCol,spanEnd:k.lastCol+1,thickness:u}):c.push(k)}for(var h=s.addSegs(l),p=function(e,t,n){for(var r=function(e,t){for(var n=[],r=0;r<t;r+=1)n.push([]);for(var i=0,o=e;i<o.length;i++){var a=o[i];for(r=a.spanStart;r<a.spanEnd;r+=1)n[r].push(a)}return n}(e,n.length),i=[],o=[],a=[],s=0;s<n.length;s+=1){for(var l=r[s],c=[],d=0,u=0,h=0,p=l;h<p.length;h++){var f=t[(b=p[h]).segInput.index];c.push({seg:$M(f,s,s+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:0,marginTop:b.levelCoord-d}),d=b.levelCoord+b.thickness}var m=[];d=0,u=0;for(var _=0,g=l;_<g.length;_++){f=t[(b=g[_]).segInput.index];var b,v=b.spanEnd-b.spanStart>1,y=b.spanStart===s;u+=b.levelCoord-d,d=b.levelCoord+b.thickness,v?(u+=b.thickness,y&&m.push({seg:$M(f,b.spanStart,b.spanEnd,n),isVisible:!0,isAbsolute:!0,absoluteTop:b.levelCoord,marginTop:0})):y&&(m.push({seg:$M(f,b.spanStart,b.spanEnd,n),isVisible:!0,isAbsolute:!1,absoluteTop:0,marginTop:u}),u=0)}i.push(c),o.push(m),a.push(u)}return{singleColPlacements:i,multiColPlacements:o,leftoverMargins:a}}(s.toRects(),e,a),f=p.singleColPlacements,m=p.multiColPlacements,_=p.leftoverMargins,g=[],b=[],v=0,y=c;v<y.length;v++){m[(k=y[v]).firstCol].push({seg:k,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var E=k.firstCol;E<=k.lastCol;E+=1)f[E].push({seg:$M(k,E,E+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(E=0;E<a.length;E+=1)g.push(0);for(var w=0,S=h;w<S.length;w++){var T=S[w],k=e[T.segInput.index];m[T.spanStart].push({seg:k,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(E=T.spanStart;E<T.spanEnd;E+=1)g[E]+=1,f[E].push({seg:$M(k,E,E+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(E=0;E<a.length;E+=1)b.push(_[E]);return{singleColPlacements:f,multiColPlacements:m,moreCnts:g,moreMarginTops:b}}function $M(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;var i=e.eventRange,o=i.range,a=sC(o,{start:r[t].date,end:CT(r[n-1].date,1)});return Aw(Aw({},e),{firstCol:t,lastCol:n-1,eventRange:{def:i.def,ui:Aw(Aw({},i.ui),{durationEditable:!1}),instance:i.instance,range:a},isStart:e.isStart&&a.start.valueOf()===o.start.valueOf(),isEnd:e.isEnd&&a.end.valueOf()===o.end.valueOf()})}var KM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hiddenConsumes=!1,t.forceHidden={},t}return xw(t,e),t.prototype.addSegs=function(t){for(var n=this,r=e.prototype.addSegs.call(this,t),i=this.entriesByLevel,o=function(e){return!n.forceHidden[YA(e)]},a=0;a<i.length;a+=1)i[a]=i[a].filter(o);return r},t.prototype.handleInvalidInsertion=function(t,n,r){var i=this.entriesByLevel,o=this.forceHidden,a=t.nextLevel-1;if(this.hiddenConsumes&&a>=0)for(var s=t.lateralStart;s<t.lateralEnd;s+=1){var l=i[a][s];if(this.allowReslicing){var c=Aw(Aw({},l),{spanStart:Math.max(l.spanStart,n.spanStart),spanEnd:Math.min(l.spanEnd,n.spanEnd)});o[d=YA(c)]||(o[d]=!0,i[a][s]=c,this.splitEntry(l,n,r))}else{var d;o[d=YA(l)]||(o[d]=!0,r.push(l))}}return e.prototype.handleInvalidInsertion.call(this,t,n,r)},t}(FA),QM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cellElRefs=new CR,t.frameElRefs=new CR,t.fgElRefs=new CR,t.segHarnessRefs=new CR,t.rootElRef=XS(),t.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},t}return xw(t,e),t.prototype.render=function(){var e=this,t=this,n=t.props,r=t.state,i=t.context.options,o=n.cells.length,a=LM(n.businessHourSegs,o),s=LM(n.bgEventSegs,o),l=LM(this.getHighlightSegs(),o),c=LM(this.getMirrorSegs(),o),d=qM(_C(n.fgEventSegs,i.eventOrder),n.dayMaxEvents,n.dayMaxEventRows,i.eventOrderStrict,r.eventInstanceHeights,r.maxContentHeight,n.cells),u=d.singleColPlacements,h=d.multiColPlacements,p=d.moreCnts,f=d.moreMarginTops,m=n.eventDrag&&n.eventDrag.affectedInstances||n.eventResize&&n.eventResize.affectedInstances||{};return KS("tr",{ref:this.rootElRef},n.renderIntro&&n.renderIntro(),n.cells.map((function(t,r){var i=e.renderFgSegs(r,n.forPrint?u[r]:h[r],n.todayRange,m),o=e.renderFgSegs(r,function(e,t){if(!e.length)return[];var n=function(e){for(var t={},n=0,r=e;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++){var a=o[i];t[a.seg.eventRange.instance.instanceId]=a.absoluteTop}return e}(t);return e.map((function(e){return{seg:e,isVisible:!0,isAbsolute:!0,absoluteTop:n[e.eventRange.instance.instanceId],marginTop:0}}))}(c[r],h),n.todayRange,{},Boolean(n.eventDrag),Boolean(n.eventResize),!1);return KS(WM,{key:t.key,elRef:e.cellElRefs.createRef(t.key),innerElRef:e.frameElRefs.createRef(t.key),dateProfile:n.dateProfile,date:t.date,showDayNumber:n.showDayNumbers,showWeekNumber:n.showWeekNumbers&&0===r,forceDayTop:n.showWeekNumbers,todayRange:n.todayRange,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,extraHookProps:t.extraHookProps,extraDataAttrs:t.extraDataAttrs,extraClassNames:t.extraClassNames,extraDateSpan:t.extraDateSpan,moreCnt:p[r],moreMarginTop:f[r],singlePlacements:u[r],fgContentElRef:e.fgElRefs.createRef(t.key),fgContent:KS(ZS,null,KS(ZS,null,i),KS(ZS,null,o)),bgContent:KS(ZS,null,e.renderFillSegs(l[r],"highlight"),e.renderFillSegs(a[r],"non-business"),e.renderFillSegs(s[r],"bg-event"))})})))},t.prototype.componentDidMount=function(){this.updateSizing(!0)},t.prototype.componentDidUpdate=function(e,t){var n=this.props;this.updateSizing(!WT(e,n))},t.prototype.getHighlightSegs=function(){var e=this.props;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs},t.prototype.getMirrorSegs=function(){var e=this.props;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]},t.prototype.renderFgSegs=function(e,t,n,r,i,o,a){var s=this.context,l=this.props.eventSelection,c=this.state.framePositions,d=1===this.props.cells.length,u=i||o||a,h=[];if(c)for(var p=0,f=t;p<f.length;p++){var m=f[p],_=m.seg,g=_.eventRange.instance.instanceId,b=g+":"+e,v=m.isVisible&&!r[g],y=m.isAbsolute,E="",w="";y&&(s.isRtl?(w=0,E=c.lefts[_.lastCol]-c.lefts[_.firstCol]):(E=0,w=c.rights[_.firstCol]-c.rights[_.lastCol])),h.push(KS("div",{className:"fc-daygrid-event-harness"+(y?" fc-daygrid-event-harness-abs":""),key:b,ref:u?null:this.segHarnessRefs.createRef(b),style:{visibility:v?"":"hidden",marginTop:y?"":m.marginTop,top:y?m.absoluteTop:"",left:E,right:w}},YM(_)?KS(UM,Aw({seg:_,isDragging:i,isSelected:g===l,defaultDisplayEventEnd:d},wC(_,n))):KS(HM,Aw({seg:_,isDragging:i,isResizing:o,isDateSelecting:a,isSelected:g===l,defaultDisplayEventEnd:d},wC(_,n)))))}return h},t.prototype.renderFillSegs=function(e,t){var n=this.context.isRtl,r=this.props.todayRange,i=this.state.framePositions,o=[];if(i)for(var a=0,s=e;a<s.length;a++){var l=s[a],c=n?{right:0,left:i.lefts[l.lastCol]-i.lefts[l.firstCol]}:{left:0,right:i.rights[l.firstCol]-i.rights[l.lastCol]};o.push(KS("div",{key:SC(l.eventRange),className:"fc-daygrid-bg-harness",style:c},"bg-event"===t?KS(WR,Aw({seg:l},wC(l,r))):GR(t)))}return KS.apply(void 0,Rw([ZS,{}],o))},t.prototype.updateSizing=function(e){var t=this.props,n=this.frameElRefs;if(!t.forPrint&&null!==t.clientWidth){if(e){var r=t.cells.map((function(e){return n.currentMap[e.key]}));if(r.length){var i=this.rootElRef.current;this.setState({framePositions:new Ex(i,r,!0,!1)})}}var o=!0===t.dayMaxEvents||!0===t.dayMaxEventRows;this.setState({eventInstanceHeights:this.queryEventInstanceHeights(),maxContentHeight:o?this.computeMaxContentHeight():null})}},t.prototype.queryEventInstanceHeights=function(){var e=this.segHarnessRefs.currentMap,t={};for(var n in e){var r=Math.round(e[n].getBoundingClientRect().height),i=n.split(":")[0];t[i]=Math.max(t[i]||0,r)}return t},t.prototype.computeMaxContentHeight=function(){var e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],n=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-n.getBoundingClientRect().top},t.prototype.getCellEls=function(){var e=this.cellElRefs.currentMap;return this.props.cells.map((function(t){return e[t.key]}))},t}(Lx);QM.addStateEquality({eventInstanceHeights:WT});var XM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.splitBusinessHourSegs=hk(NM),t.splitBgEventSegs=hk(NM),t.splitFgEventSegs=hk(NM),t.splitDateSelectionSegs=hk(NM),t.splitEventDrag=hk(IM),t.splitEventResize=hk(IM),t.rowRefs=new CR,t.handleRootEl=function(e){t.rootEl=e,e?t.context.registerInteractiveComponent(t,{el:e,isHitComboAllowed:t.props.isHitComboAllowed}):t.context.unregisterInteractiveComponent(t)},t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.dateProfile,r=t.dayMaxEventRows,i=t.dayMaxEvents,o=t.expandRows,a=t.cells.length,s=this.splitBusinessHourSegs(t.businessHourSegs,a),l=this.splitBgEventSegs(t.bgEventSegs,a),c=this.splitFgEventSegs(t.fgEventSegs,a),d=this.splitDateSelectionSegs(t.dateSelectionSegs,a),u=this.splitEventDrag(t.eventDrag,a),h=this.splitEventResize(t.eventResize,a),p=!0===i||!0===r;return p&&!o&&(p=!1,r=null,i=null),KS("div",{className:["fc-daygrid-body",p?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",o?"":"fc-daygrid-body-natural"].join(" "),ref:this.handleRootEl,style:{width:t.clientWidth,minWidth:t.tableMinWidth}},KS(cR,{unit:"day"},(function(p,f){return KS(ZS,null,KS("table",{className:"fc-scrollgrid-sync-table",style:{width:t.clientWidth,minWidth:t.tableMinWidth,height:o?t.clientHeight:""}},t.colGroupNode,KS("tbody",null,t.cells.map((function(o,p){return KS(QM,{ref:e.rowRefs.createRef(p),key:o.length?o[0].date.toISOString():p,showDayNumbers:a>1,showWeekNumbers:t.showWeekNumbers,todayRange:f,dateProfile:n,cells:o,renderIntro:t.renderRowIntro,businessHourSegs:s[p],eventSelection:t.eventSelection,bgEventSegs:l[p].filter(ZM),fgEventSegs:c[p],dateSelectionSegs:d[p],eventDrag:u[p],eventResize:h[p],dayMaxEvents:i,dayMaxEventRows:r,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:t.forPrint})})))))})))},t.prototype.prepareHits=function(){this.rowPositions=new Ex(this.rootEl,this.rowRefs.collect().map((function(e){return e.getCellEls()[0]})),!1,!0),this.colPositions=new Ex(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)},t.prototype.queryHit=function(e,t){var n=this.colPositions,r=this.rowPositions,i=n.leftToIndex(e),o=r.topToIndex(t);if(null!=o&&null!=i){var a=this.props.cells[o][i];return{dateProfile:this.props.dateProfile,dateSpan:Aw({range:this.getCellRange(o,i),allDay:!0},a.extraDateSpan),dayEl:this.getCellEl(o,i),rect:{left:n.lefts[i],right:n.rights[i],top:r.tops[o],bottom:r.bottoms[o]},layer:0}}return null},t.prototype.getCellEl=function(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]},t.prototype.getCellRange=function(e,t){var n=this.props.cells[e][t].date;return{start:n,end:CT(n,1)}},t}(Lx);function ZM(e){return e.eventRange.def.allDay}var JM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.forceDayIfListItem=!0,t}return xw(t,e),t.prototype.sliceRange=function(e,t){return t.sliceRange(e)},t}(mR),eD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicer=new JM,t.tableRef=XS(),t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context;return KS(XM,Aw({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))},t}(Lx);function tD(e,t){var n=new pR(e.renderRange,t);return new fR(n,/year|month|week/.test(e.currentRangeUnit))}const nD=Ix({initialView:"dayGridMonth",views:{dayGrid:{component:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildDayTableModel=hk(tD),t.headerRef=XS(),t.tableRef=XS(),t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.context,n=t.options,r=t.dateProfileGenerator,i=this.props,o=this.buildDayTableModel(i.dateProfile,r),a=n.dayHeaders&&KS(uR,{ref:this.headerRef,dateProfile:i.dateProfile,dates:o.headerDates,datesRepDistinctDays:1===o.rowCnt}),s=function(t){return KS(eD,{ref:e.tableRef,dateProfile:i.dateProfile,dayTableModel:o,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:n.nextDayThreshold,colGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,dayMaxEvents:n.dayMaxEvents,dayMaxEventRows:n.dayMaxEventRows,showWeekNumbers:n.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:e.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:i.forPrint})};return n.dayMinWidth?this.renderHScrollLayout(a,s,o.colCnt,n.dayMinWidth):this.renderSimpleLayout(a,s)},t}(OM),dateProfileGeneratorClass:function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.buildRenderRange=function(t,n,r){var i,o=this.props.dateEnv,a=e.prototype.buildRenderRange.call(this,t,n,r),s=a.start,l=a.end;(/^(year|month)$/.test(n)&&(s=o.startOfWeek(s),(i=o.startOfWeek(l)).valueOf()!==l.valueOf()&&(l=kT(i,1))),this.props.monthMode&&this.props.fixedWeekCount)&&(l=kT(l,6-Math.ceil(AT(s,l)/7)));return{start:s,end:l}},t}(Zx)},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}});r(8121);var rD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.getKeyInfo=function(){return{allDay:{},timed:{}}},t.prototype.getKeysForDateSpan=function(e){return e.allDay?["allDay"]:["timed"]},t.prototype.getKeysForEventDef=function(e){return e.allDay?"background"===(t=e).ui.display||"inverse-background"===t.ui.display?["timed","allDay"]:["allDay"]:["timed"];var t},t}(sx),iD=xk({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function oD(e){var t=["fc-timegrid-slot","fc-timegrid-slot-label",e.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return KS(xx.Consumer,null,(function(n){if(!e.isLabeled)return KS("td",{className:t.join(" "),"data-time":e.isoTimeStr});var r=n.dateEnv,i=n.options,o=n.viewApi,a=null==i.slotLabelFormat?iD:Array.isArray(i.slotLabelFormat)?xk(i.slotLabelFormat[0]):xk(i.slotLabelFormat),s={level:0,time:e.time,date:r.toDate(e.date),view:o,text:r.format(e.date,a)};return KS(Yx,{hookProps:s,classNames:i.slotLabelClassNames,content:i.slotLabelContent,defaultContent:aD,didMount:i.slotLabelDidMount,willUnmount:i.slotLabelWillUnmount},(function(n,r,i,o){return KS("td",{ref:n,className:t.concat(r).join(" "),"data-time":e.isoTimeStr},KS("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},KS("div",{className:"fc-timegrid-slot-label-cushion fc-scrollgrid-shrink-cushion",ref:i},o)))}))}))}function aD(e){return e.text}var sD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){return this.props.slatMetas.map((function(e){return KS("tr",{key:e.key},KS(oD,Aw({},e)))}))},t}(Mx),lD=xk({week:"short"}),cD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allDaySplitter=new rD,t.headerElRef=XS(),t.rootElRef=XS(),t.scrollerElRef=XS(),t.state={slatCoords:null},t.handleScrollTopRequest=function(e){var n=t.scrollerElRef.current;n&&(n.scrollTop=e)},t.renderHeadAxis=function(e,n){void 0===n&&(n="");var r=t.context.options,i=t.props.dateProfile.renderRange,o=AT(i.start,i.end),a=r.navLinks&&1===o?{"data-navlink":ux(i.start,"week"),tabIndex:0}:{};return r.weekNumbers&&"day"===e?KS($R,{date:i.start,defaultFormat:lD},(function(e,t,r,i){return KS("th",{ref:e,className:["fc-timegrid-axis","fc-scrollgrid-shrink"].concat(t).join(" ")},KS("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame fc-timegrid-axis-frame-liquid",style:{height:n}},KS("a",Aw({ref:r,className:"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner"},a),i)))})):KS("th",{className:"fc-timegrid-axis"},KS("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},t.renderTableRowAxis=function(e){var n=t.context,r=n.options,i=n.viewApi,o={text:r.allDayText,view:i};return KS(Yx,{hookProps:o,classNames:r.allDayClassNames,content:r.allDayContent,defaultContent:dD,didMount:r.allDayDidMount,willUnmount:r.allDayWillUnmount},(function(t,n,r,i){return KS("td",{ref:t,className:["fc-timegrid-axis","fc-scrollgrid-shrink"].concat(n).join(" ")},KS("div",{className:"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame"+(null==e?" fc-timegrid-axis-frame-liquid":""),style:{height:e}},KS("span",{className:"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner",ref:r},i)))}))},t.handleSlatCoords=function(e){t.setState({slatCoords:e})},t}return xw(t,e),t.prototype.renderSimpleLayout=function(e,t,n){var r=this.context,i=this.props,o=[],a=LR(r.options);return e&&o.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(o.push({type:"body",key:"all-day",chunk:{content:t}}),o.push({type:"body",key:"all-day-divider",outerContent:KS("tr",{className:"fc-scrollgrid-section"},KS("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(r.options.expandRows),chunk:{scrollerElRef:this.scrollerElRef,content:n}}),KS(qx,{viewSpec:r.viewSpec,elRef:this.rootElRef},(function(e,t){return KS("div",{className:["fc-timegrid"].concat(t).join(" "),ref:e},KS(PR,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[{width:"shrink"}],sections:o}))}))},t.prototype.renderHScrollLayout=function(e,t,n,r,i,o,a){var s=this,l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");var c=this.context,d=this.props,u=!d.forPrint&&LR(c.options),h=!d.forPrint&&IR(c.options),p=[];e&&p.push({type:"header",key:"header",isSticky:u,syncRowHeights:!0,chunks:[{key:"axis",rowContent:function(e){return KS("tr",null,s.renderHeadAxis("day",e.rowSyncHeights[0]))}},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(p.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:function(e){return KS("tr",null,s.renderTableRowAxis(e.rowSyncHeights[0]))}},{key:"cols",content:t}]}),p.push({key:"all-day-divider",type:"body",outerContent:KS("tr",{className:"fc-scrollgrid-section"},KS("td",{colSpan:2,className:"fc-timegrid-divider "+c.theme.getClass("tableCellShaded")}))}));var f=c.options.nowIndicator;return p.push({type:"body",key:"body",liquid:!0,expandRows:Boolean(c.options.expandRows),chunks:[{key:"axis",content:function(e){return KS("div",{className:"fc-timegrid-axis-chunk"},KS("table",{style:{height:e.expandRows?e.clientHeight:""}},e.tableColGroupNode,KS("tbody",null,KS(sD,{slatMetas:o}))),KS("div",{className:"fc-timegrid-now-indicator-container"},KS(cR,{unit:f?"minute":"day"},(function(e){var t=f&&a&&a.safeComputeTop(e);return"number"==typeof t?KS(HR,{isAxis:!0,date:e},(function(e,n,r,i){return KS("div",{ref:e,className:["fc-timegrid-now-indicator-arrow"].concat(n).join(" "),style:{top:t}},i)})):null}))))}},{key:"cols",scrollerElRef:this.scrollerElRef,content:n}]}),h&&p.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:NR},{key:"cols",content:NR}]}),KS(qx,{viewSpec:c.viewSpec,elRef:this.rootElRef},(function(e,t){return KS("div",{className:["fc-timegrid"].concat(t).join(" "),ref:e},KS(l,{liquid:!d.isHeightAuto&&!d.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:i}]}],sections:p}))}))},t.prototype.getAllDayMaxEventProps=function(){var e=this.context.options,t=e.dayMaxEvents,n=e.dayMaxEventRows;return!0!==t&&!0!==n||(t=void 0,n=5),{dayMaxEvents:t,dayMaxEventRows:n}},t}(Lx);function dD(e){return e.text}var uD=function(){function e(e,t,n){this.positions=e,this.dateProfile=t,this.slotDuration=n}return e.prototype.safeComputeTop=function(e){var t=this.dateProfile;if(dC(t.currentRange,e)){var n=MT(e),r=e.valueOf()-n.valueOf();if(r>=ik(t.slotMinTime)&&r<ik(t.slotMaxTime))return this.computeTimeTop(ek(r))}return null},e.prototype.computeDateTop=function(e,t){return t||(t=MT(e)),this.computeTimeTop(ek(e.valueOf()-t.valueOf()))},e.prototype.computeTimeTop=function(e){var t,n,r=this.positions,i=this.dateProfile,o=r.els.length,a=(e.milliseconds-ik(i.slotMinTime))/ik(this.slotDuration);return a=Math.max(0,a),a=Math.min(o,a),t=Math.floor(a),n=a-(t=Math.min(t,o-1)),r.tops[t]+r.getHeight(t)*n},e}(),hD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=t.options,r=e.slatElRefs;return KS("tbody",null,e.slatMetas.map((function(i,o){var a={time:i.time,date:t.dateEnv.toDate(i.date),view:t.viewApi},s=["fc-timegrid-slot","fc-timegrid-slot-lane",i.isLabeled?"":"fc-timegrid-slot-minor"];return KS("tr",{key:i.key,ref:r.createRef(i.key)},e.axis&&KS(oD,Aw({},i)),KS(Yx,{hookProps:a,classNames:n.slotLaneClassNames,content:n.slotLaneContent,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount},(function(e,t,n,r){return KS("td",{ref:e,className:s.concat(t).join(" "),"data-time":i.isoTimeStr},r)})))})))},t}(Mx),pD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootElRef=XS(),t.slatElRefs=new CR,t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context;return KS("div",{className:"fc-timegrid-slots",ref:this.rootElRef},KS("table",{className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,KS(hD,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))},t.prototype.componentDidMount=function(){this.updateSizing()},t.prototype.componentDidUpdate=function(){this.updateSizing()},t.prototype.componentWillUnmount=function(){this.props.onCoords&&this.props.onCoords(null)},t.prototype.updateSizing=function(){var e,t=this.context,n=this.props;n.onCoords&&null!==n.clientWidth&&(this.rootElRef.current.offsetHeight&&n.onCoords(new uD(new Ex(this.rootElRef.current,(e=this.slatElRefs.currentMap,n.slatMetas.map((function(t){return e[t.key]}))),!1,!0),this.props.dateProfile,t.options.slotDuration)))},t}(Mx);function fD(e,t){var n,r=[];for(n=0;n<t;n+=1)r.push([]);if(e)for(n=0;n<e.length;n+=1)r[e[n].col].push(e[n]);return r}function mD(e,t){var n=[];if(e){for(a=0;a<t;a+=1)n[a]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(var r=0,i=e.segs;r<i.length;r++){var o=i[r];n[o.col].segs.push(o)}}else for(var a=0;a<t;a+=1)n[a]=null;return n}var _D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootElRef=XS(),t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props;return KS(ZR,{allDayDate:null,moreCnt:t.hiddenSegs.length,allSegs:t.hiddenSegs,hiddenSegs:t.hiddenSegs,alignmentElRef:this.rootElRef,defaultContent:gD,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,todayRange:t.todayRange,popoverContent:function(){return xD(t.hiddenSegs,t)}},(function(n,r,i,o,a){return KS("a",{ref:function(t){Nx(n,t),Nx(e.rootElRef,t)},className:["fc-timegrid-more-link"].concat(r).join(" "),style:{top:t.top,bottom:t.bottom},onClick:a},KS("div",{ref:i,className:"fc-timegrid-more-link-inner fc-sticky"},o))}))},t}(Mx);function gD(e){return e.shortText}function bD(e,t,n){var r=new FA;null!=t&&(r.strictOrder=t),null!=n&&(r.maxStackCnt=n);var i,o,a,s=function(e){for(var t=[],n=0,r=e;n<r.length;n++){for(var i=r[n],o=[],a={spanStart:i.spanStart,spanEnd:i.spanEnd,entries:[i]},s=0,l=t;s<l.length;s++){var c=l[s];c.spanStart<a.spanEnd&&c.spanEnd>a.spanStart?a={spanStart:Math.min(c.spanStart,a.spanStart),spanEnd:Math.max(c.spanEnd,a.spanEnd),entries:c.entries.concat(a.entries)}:o.push(c)}o.push(a),t=o}return t}(r.addSegs(e)),l=function(e){var t=e.entriesByLevel,n=wD((function(e,t){return e+":"+t}),(function(r,i){var o=vD(function(e,t,n){for(var r=e.levelCoords,i=e.entriesByLevel,o=i[t][n],a=r[t]+o.thickness,s=r.length,l=t;l<s&&r[l]<a;l+=1);for(;l<s;l+=1){for(var c=i[l],d=void 0,u=UA(c,o.spanStart,BA),h=u[0]+u[1],p=h;(d=c[p])&&d.spanStart<o.spanEnd;)p+=1;if(h<p)return{level:l,lateralStart:h,lateralEnd:p}}return null}(e,r,i),n),a=t[r][i];return[Aw(Aw({},a),{nextLevelNodes:o[0]}),a.thickness+o[1]]}));return vD(t.length?{level:0,lateralStart:0,lateralEnd:t[0].length}:null,n)[0]}(r);return i=l,o=1,a=wD((function(e,t,n){return YA(e)}),(function(e,t,n){var r,i=e.nextLevelNodes,s=e.thickness,l=s+n,c=s/l,d=[];if(i.length)for(var u=0,h=i;u<h.length;u++){var p=h[u];if(void 0===r)r=(f=a(p,t,l))[0],d.push(f[1]);else{var f=a(p,r,0);d.push(f[1])}}else r=o;var m=(r-t)*c;return[r-m,Aw(Aw({},e),{thickness:m,nextLevelNodes:d})]})),{segRects:function(e){var t=[],n=wD((function(e,t,n){return YA(e)}),(function(e,n,i){var o=Aw(Aw({},e),{levelCoord:n,stackDepth:i,stackForward:0});return t.push(o),o.stackForward=r(e.nextLevelNodes,n+e.thickness,i+1)+1}));function r(e,t,r){for(var i=0,o=0,a=e;o<a.length;o++){var s=a[o];i=Math.max(n(s,t,r),i)}return i}return r(e,0,0),t}(l=i.map((function(e){return a(e,0,0)[1]}))),hiddenGroups:s}}function vD(e,t){if(!e)return[[],0];for(var n=e.level,r=e.lateralStart,i=e.lateralEnd,o=r,a=[];o<i;)a.push(t(n,o)),o+=1;return a.sort(yD),[a.map(ED),a[0][1]]}function yD(e,t){return t[1]-e[1]}function ED(e){return e[0]}function wD(e,t){var n={};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e.apply(void 0,r);return o in n?n[o]:n[o]=t.apply(void 0,r)}}var SD=xk({hour:"numeric",minute:"2-digit",meridiem:!1}),TD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=["fc-timegrid-event","fc-v-event"];return this.props.isShort&&e.push("fc-timegrid-event-short"),KS(BR,Aw({},this.props,{defaultTimeFormat:SD,extraClassNames:e}))},t}(Mx),kD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props;return KS(zR,{date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraHookProps:e.extraHookProps},(function(e,t){return t&&KS("div",{className:"fc-timegrid-col-misc",ref:e},t)}))},t}(Mx),CD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sortEventSegs=hk(_C),t.computeFgSegPlacements=hk(bD),t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props,n=this.context,r=n.options.selectMirror,i=t.eventDrag&&t.eventDrag.segs||t.eventResize&&t.eventResize.segs||r&&t.dateSelectionSegs||[],o=t.eventDrag&&t.eventDrag.affectedInstances||t.eventResize&&t.eventResize.affectedInstances||{},a=this.sortEventSegs(t.fgEventSegs,n.options.eventOrder);return KS(VR,{elRef:t.elRef,date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,extraHookProps:t.extraHookProps},(function(n,s,l){return KS("td",Aw({ref:n,className:["fc-timegrid-col"].concat(s,t.extraClassNames||[]).join(" ")},l,t.extraDataAttrs),KS("div",{className:"fc-timegrid-col-frame"},KS("div",{className:"fc-timegrid-col-bg"},e.renderFillSegs(t.businessHourSegs,"non-business"),e.renderFillSegs(t.bgEventSegs,"bg-event"),e.renderFillSegs(t.dateSelectionSegs,"highlight")),KS("div",{className:"fc-timegrid-col-events"},e.renderFgSegs(a,o)),KS("div",{className:"fc-timegrid-col-events"},e.renderFgSegs(i,{},Boolean(t.eventDrag),Boolean(t.eventResize),Boolean(r))),KS("div",{className:"fc-timegrid-now-indicator-container"},e.renderNowIndicator(t.nowIndicatorSegs)),KS(kD,{date:t.date,dateProfile:t.dateProfile,todayRange:t.todayRange,extraHookProps:t.extraHookProps})))}))},t.prototype.renderFgSegs=function(e,t,n,r,i){var o=this.props;return o.forPrint?xD(e,o):o.slatCoords?this.renderPositionedFgSegs(e,t,n,r,i):null},t.prototype.renderPositionedFgSegs=function(e,t,n,r,i){var o=this,a=this.context.options,s=a.eventMaxStack,l=a.eventShortHeight,c=a.eventOrderStrict,d=this.props,u=d.eventSelection,h=d.todayRange,p=d.nowDate,f=n||r||i,m=this.buildSegInputs(e),_=f?bD(m):this.computeFgSegPlacements(m,c,s),g=_.segRects,b=_.hiddenGroups;return KS(ZS,null,this.renderHiddenGroups(b,e),g.map((function(a){var s=e[a.segInput.index],c=s.eventRange.instance.instanceId,d=Aw(Aw({},o.computeSegTopBottomCss(a.segInput)),f?{left:0,right:0}:o.computeSegLeftRightCss(a));return KS("div",{className:"fc-timegrid-event-harness"+(a.stackForward>0?" fc-timegrid-event-harness-inset":""),key:c,style:Aw({visibility:t[c]?"hidden":""},d)},KS(TD,Aw({seg:s,isDragging:n,isResizing:r,isDateSelecting:i,isSelected:c===u,isShort:a.spanEnd-a.spanStart<l},wC(s,h,p))))})))},t.prototype.renderHiddenGroups=function(e,t){var n=this,r=this.props,i=r.extraDateSpan,o=r.dateProfile,a=r.todayRange,s=r.nowDate,l=r.eventSelection,c=r.eventDrag,d=r.eventResize;return KS(ZS,null,e.map((function(e){var r,u,h=n.computeSegTopBottomCss(e),p=(r=e.entries,u=t,r.map((function(e){return u[e.segInput.index]})));return KS(_D,{key:sk(tM(p)),hiddenSegs:p,top:h.top,bottom:h.bottom,extraDateSpan:i,dateProfile:o,todayRange:a,nowDate:s,eventSelection:l,eventDrag:c,eventResize:d})})))},t.prototype.buildSegInputs=function(e){for(var t=this.props,n=t.date,r=t.slatCoords,i=this.context.options.eventMinHeight,o=[],a=0;a<e.length;a+=1){var s=e[a],l=r.computeDateTop(s.start,n),c=Math.max(l+(i||0),r.computeDateTop(s.end,n));o.push({index:a,spanStart:Math.round(l),spanEnd:Math.round(c),thickness:1})}return o},t.prototype.renderFillSegs=function(e,t){var n=this,r=this.props;if(!r.slatCoords)return null;var i=this.buildSegInputs(e).map((function(i){var o=e[i.index];return KS("div",{key:SC(o.eventRange),className:"fc-timegrid-bg-harness",style:n.computeSegTopBottomCss(i)},"bg-event"===t?KS(WR,Aw({seg:o},wC(o,r.todayRange,r.nowDate))):GR(t))}));return KS(ZS,null,i)},t.prototype.renderNowIndicator=function(e){var t=this.props,n=t.slatCoords,r=t.date;return n?e.map((function(e,t){return KS(HR,{isAxis:!1,date:r,key:t},(function(t,i,o,a){return KS("div",{ref:t,className:["fc-timegrid-now-indicator-line"].concat(i).join(" "),style:{top:n.computeDateTop(e.start,r)}},a)}))})):null},t.prototype.computeSegTopBottomCss=function(e){return{top:e.spanStart,bottom:-e.spanEnd}},t.prototype.computeSegLeftRightCss=function(e){var t,n,r=this.context,i=r.isRtl,o=r.options.slotEventOverlap,a=e.levelCoord,s=e.levelCoord+e.thickness;o&&(s=Math.min(1,a+2*(s-a))),i?(t=1-s,n=a):(t=a,n=1-s);var l={zIndex:e.stackDepth+1,left:100*t+"%",right:100*n+"%"};return o&&!e.stackForward&&(l[i?"marginLeft":"marginRight"]=20),l},t}(Mx);function xD(e,t){var n=t.todayRange,r=t.nowDate,i=t.eventSelection,o=t.eventDrag,a=t.eventResize,s=(o?o.affectedInstances:null)||(a?a.affectedInstances:null)||{};return KS(ZS,null,e.map((function(e){var t=e.eventRange.instance.instanceId;return KS("div",{key:t,style:{visibility:s[t]?"hidden":""}},KS(TD,Aw({seg:e,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:t===i,isShort:!1},wC(e,n,r))))})))}var AD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.splitFgEventSegs=hk(fD),t.splitBgEventSegs=hk(fD),t.splitBusinessHourSegs=hk(fD),t.splitNowIndicatorSegs=hk(fD),t.splitDateSelectionSegs=hk(fD),t.splitEventDrag=hk(mD),t.splitEventResize=hk(mD),t.rootElRef=XS(),t.cellElRefs=new CR,t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props,n=this.context.options.nowIndicator&&t.slatCoords&&t.slatCoords.safeComputeTop(t.nowDate),r=t.cells.length,i=this.splitFgEventSegs(t.fgEventSegs,r),o=this.splitBgEventSegs(t.bgEventSegs,r),a=this.splitBusinessHourSegs(t.businessHourSegs,r),s=this.splitNowIndicatorSegs(t.nowIndicatorSegs,r),l=this.splitDateSelectionSegs(t.dateSelectionSegs,r),c=this.splitEventDrag(t.eventDrag,r),d=this.splitEventResize(t.eventResize,r);return KS("div",{className:"fc-timegrid-cols",ref:this.rootElRef},KS("table",{style:{minWidth:t.tableMinWidth,width:t.clientWidth}},t.tableColGroupNode,KS("tbody",null,KS("tr",null,t.axis&&KS("td",{className:"fc-timegrid-col fc-timegrid-axis"},KS("div",{className:"fc-timegrid-col-frame"},KS("div",{className:"fc-timegrid-now-indicator-container"},"number"==typeof n&&KS(HR,{isAxis:!0,date:t.nowDate},(function(e,t,r,i){return KS("div",{ref:e,className:["fc-timegrid-now-indicator-arrow"].concat(t).join(" "),style:{top:n}},i)}))))),t.cells.map((function(n,r){return KS(CD,{key:n.key,elRef:e.cellElRefs.createRef(n.key),dateProfile:t.dateProfile,date:n.date,nowDate:t.nowDate,todayRange:t.todayRange,extraHookProps:n.extraHookProps,extraDataAttrs:n.extraDataAttrs,extraClassNames:n.extraClassNames,extraDateSpan:n.extraDateSpan,fgEventSegs:i[r],bgEventSegs:o[r],businessHourSegs:a[r],nowIndicatorSegs:s[r],dateSelectionSegs:l[r],eventDrag:c[r],eventResize:d[r],slatCoords:t.slatCoords,eventSelection:t.eventSelection,forPrint:t.forPrint})}))))))},t.prototype.componentDidMount=function(){this.updateCoords()},t.prototype.componentDidUpdate=function(){this.updateCoords()},t.prototype.updateCoords=function(){var e,t=this.props;t.onColCoords&&null!==t.clientWidth&&t.onColCoords(new Ex(this.rootElRef.current,(e=this.cellElRefs.currentMap,t.cells.map((function(t){return e[t.key]}))),!0,!1))},t}(Mx);var RD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.processSlotOptions=hk(MD),t.state={slatCoords:null},t.handleRootEl=function(e){e?t.context.registerInteractiveComponent(t,{el:e,isHitComboAllowed:t.props.isHitComboAllowed}):t.context.unregisterInteractiveComponent(t)},t.handleScrollRequest=function(e){var n=t.props.onScrollTopRequest,r=t.state.slatCoords;if(n&&r){if(e.time){var i=r.computeTimeTop(e.time);(i=Math.ceil(i))&&(i+=1),n(i)}return!0}return!1},t.handleColCoords=function(e){t.colCoords=e},t.handleSlatCoords=function(e){t.setState({slatCoords:e}),t.props.onSlatCoords&&t.props.onSlatCoords(e)},t}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.state;return KS("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},KS(pD,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),KS(AD,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))},t.prototype.componentDidMount=function(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)},t.prototype.componentDidUpdate=function(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)},t.prototype.componentWillUnmount=function(){this.scrollResponder.detach()},t.prototype.queryHit=function(e,t){var n=this.context,r=n.dateEnv,i=n.options,o=this.colCoords,a=this.props.dateProfile,s=this.state.slatCoords,l=this.processSlotOptions(this.props.slotDuration,i.snapDuration),c=l.snapDuration,d=l.snapsPerSlot,u=o.leftToIndex(e),h=s.positions.topToIndex(t);if(null!=u&&null!=h){var p=this.props.cells[u],f=s.positions.tops[h],m=s.positions.getHeight(h),_=(t-f)/m,g=h*d+Math.floor(_*d),b=this.props.cells[u].date,v=nk(a.slotMinTime,function(e,t){return{years:e.years*t,months:e.months*t,days:e.days*t,milliseconds:e.milliseconds*t}}(c,g)),y=r.add(b,v),E=r.add(y,c);return{dateProfile:a,dateSpan:Aw({range:{start:y,end:E},allDay:!1},p.extraDateSpan),dayEl:o.els[u],rect:{left:o.lefts[u],right:o.rights[u],top:f,bottom:f+m},layer:0}}return null},t}(Lx);function MD(e,t){var n=t||e,r=ok(e,n);return null===r&&(n=e,r=1),{snapDuration:n,snapsPerSlot:r}}var DD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.sliceRange=function(e,t){for(var n=[],r=0;r<t.length;r+=1){var i=sC(e,t[r]);i&&n.push({start:i.start,end:i.end,isStart:i.start.valueOf()===e.start.valueOf(),isEnd:i.end.valueOf()===e.end.valueOf(),col:r})}return n},t}(mR),OD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildDayRanges=hk(ND),t.slicer=new DD,t.timeColsRef=XS(),t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props,n=this.context,r=t.dateProfile,i=t.dayTableModel,o=n.options.nowIndicator,a=this.buildDayRanges(i,r,n.dateEnv);return KS(cR,{unit:o?"minute":"day"},(function(s,l){return KS(RD,Aw({ref:e.timeColsRef},e.slicer.sliceProps(t,r,null,n,a),{forPrint:t.forPrint,axis:t.axis,dateProfile:r,slatMetas:t.slatMetas,slotDuration:t.slotDuration,cells:i.cells[0],tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,expandRows:t.expandRows,nowDate:s,nowIndicatorSegs:o&&e.slicer.sliceNowDate(s,n,a),todayRange:l,onScrollTopRequest:t.onScrollTopRequest,onSlatCoords:t.onSlatCoords}))}))},t}(Lx);function ND(e,t,n){for(var r=[],i=0,o=e.headerDates;i<o.length;i++){var a=o[i];r.push({start:n.add(a,t.slotMinTime),end:n.add(a,t.slotMaxTime)})}return r}var LD=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function ID(e,t,n,r,i){for(var o=new Date(0),a=e,s=ek(0),l=n||function(e){var t,n,r;for(t=LD.length-1;t>=0;t-=1)if(null!==(r=ok(n=ek(LD[t]),e))&&r>1)return n;return e}(r),c=[];ik(a)<ik(t);){var d=i.add(o,a),u=null!==ok(s,l);c.push({date:d,time:a,key:d.toISOString(),isoTimeStr:ck(d),isLabeled:u}),a=nk(a,r),s=nk(s,r)}return c}var PD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildTimeColsModel=hk(FD),t.buildSlatMetas=hk(ID),t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.context,n=t.options,r=t.dateEnv,i=t.dateProfileGenerator,o=this.props,a=o.dateProfile,s=this.buildTimeColsModel(a,i),l=this.allDaySplitter.splitProps(o),c=this.buildSlatMetas(a.slotMinTime,a.slotMaxTime,n.slotLabelInterval,n.slotDuration,r),d=n.dayMinWidth,u=!d,h=d,p=n.dayHeaders&&KS(uR,{dates:s.headerDates,dateProfile:a,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),f=!1!==n.allDaySlot&&function(t){return KS(eD,Aw({},l.allDay,{dateProfile:a,dayTableModel:s,nextDayThreshold:n.nextDayThreshold,tableMinWidth:t.tableMinWidth,colGroupNode:t.tableColGroupNode,renderRowIntro:u?e.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:e.headerElRef,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:o.forPrint},e.getAllDayMaxEventProps()))},m=function(t){return KS(OD,Aw({},l.timed,{dayTableModel:s,dateProfile:a,axis:u,slotDuration:n.slotDuration,slatMetas:c,forPrint:o.forPrint,tableColGroupNode:t.tableColGroupNode,tableMinWidth:t.tableMinWidth,clientWidth:t.clientWidth,clientHeight:t.clientHeight,onSlatCoords:e.handleSlatCoords,expandRows:t.expandRows,onScrollTopRequest:e.handleScrollTopRequest}))};return h?this.renderHScrollLayout(p,f,m,s.colCnt,d,c,this.state.slatCoords):this.renderSimpleLayout(p,f,m)},t}(cD);function FD(e,t){var n=new pR(e.renderRange,t);return new fR(n,!1)}const BD=Ix({initialView:"timeGridWeek",optionRefiners:{allDaySlot:Boolean},views:{timeGrid:{component:PD,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});r(7486);var YD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=e.dayDate,n=e.todayRange,r=this.context,i=r.theme,o=r.dateEnv,a=r.options,s=r.viewApi,l=cx(t,n),c=a.listDayFormat?o.format(t,a.listDayFormat):"",d=a.listDaySideFormat?o.format(t,a.listDaySideFormat):"",u=a.navLinks?ux(t):null,h=Aw({date:o.toDate(t),view:s,text:c,sideText:d,navLinkData:u},l),p=["fc-list-day"].concat(dx(l,i));return KS(Yx,{hookProps:h,classNames:a.dayHeaderClassNames,content:a.dayHeaderContent,defaultContent:HD,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},(function(e,n,r,o){return KS("tr",{ref:e,className:p.concat(n).join(" "),"data-date":lk(t)},KS("th",{colSpan:3},KS("div",{className:"fc-list-day-cushion "+i.getClass("tableCellShaded"),ref:r},o)))}))},t}(Mx);function HD(e){var t=e.navLinkData?{"data-navlink":e.navLinkData,tabIndex:0}:{};return KS(ZS,null,e.text&&KS("a",Aw({className:"fc-list-day-text"},t),e.text),e.sideText&&KS("a",Aw({className:"fc-list-day-side-text"},t),e.sideText))}var UD=xk({hour:"numeric",minute:"2-digit",meridiem:"short"}),zD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.render=function(){var e=this.props,t=this.context,n=e.seg,r=t.options.eventTimeFormat||UD;return KS(FR,{seg:n,timeText:"",disableDragging:!0,disableResizing:!0,defaultContent:jD,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,isSelected:e.isSelected,isDragging:e.isDragging,isResizing:e.isResizing,isDateSelecting:e.isDateSelecting},(function(e,i,o,a,s){return KS("tr",{className:["fc-list-event",s.event.url?"fc-event-forced-url":""].concat(i).join(" "),ref:e},function(e,t,n){var r=n.options;if(!1!==r.displayEventTime){var i=e.eventRange.def,o=e.eventRange.instance,a=!1,s=void 0;if(i.allDay?a=!0:(c=e.eventRange.range,AT((d=rC(c)).start,d.end)>1?e.isStart?s=EC(e,t,n,null,null,o.range.start,e.end):e.isEnd?s=EC(e,t,n,null,null,e.start,o.range.end):a=!0:s=EC(e,t,n)),a){var l={text:n.options.allDayText,view:n.viewApi};return KS(Yx,{hookProps:l,classNames:r.allDayClassNames,content:r.allDayContent,defaultContent:VD,didMount:r.allDayDidMount,willUnmount:r.allDayWillUnmount},(function(e,t,n,r){return KS("td",{className:["fc-list-event-time"].concat(t).join(" "),ref:e},r)}))}return KS("td",{className:"fc-list-event-time"},s)}var c,d;return null}(n,r,t),KS("td",{className:"fc-list-event-graphic"},KS("span",{className:"fc-list-event-dot",style:{borderColor:s.borderColor||s.backgroundColor}})),KS("td",{className:"fc-list-event-title",ref:o},a))}))},t}(Mx);function jD(e){var t=e.event,n=t.url;return KS("a",Aw({},n?{href:n}:{}),t.title)}function VD(e){return e.text}function GD(e){return e.text}function WD(e){for(var t=MT(e.renderRange.start),n=e.renderRange.end,r=[],i=[];t<n;)r.push(t),i.push({start:t,end:CT(t,1)}),t=CT(t,1);return{dayDates:r,dayRanges:i}}function qD(e){return!1===e?null:xk(e)}const $D=Ix({optionRefiners:{listDayFormat:qD,listDaySideFormat:qD,noEventsClassNames:Fk,noEventsContent:Fk,noEventsDidMount:Fk,noEventsWillUnmount:Fk},views:{list:{component:function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.computeDateVars=hk(WD),t.eventStoreToSegs=hk(t._eventStoreToSegs),t.setRootEl=function(e){e?t.context.registerInteractiveComponent(t,{el:e}):t.context.unregisterInteractiveComponent(t)},t}return xw(t,e),t.prototype.render=function(){var e=this,t=this.props,n=this.context,r=["fc-list",n.theme.getClass("table"),!1!==n.options.stickyHeaderDates?"fc-list-sticky":""],i=this.computeDateVars(t.dateProfile),o=i.dayDates,a=i.dayRanges,s=this.eventStoreToSegs(t.eventStore,t.eventUiBases,a);return KS(qx,{viewSpec:n.viewSpec,elRef:this.setRootEl},(function(n,i){return KS("div",{ref:n,className:r.concat(i).join(" ")},KS(kR,{liquid:!t.isHeightAuto,overflowX:t.isHeightAuto?"visible":"hidden",overflowY:t.isHeightAuto?"visible":"auto"},s.length>0?e.renderSegList(s,o):e.renderEmptyMessage()))}))},t.prototype.renderEmptyMessage=function(){var e=this.context,t=e.options,n=e.viewApi,r={text:t.noEventsText,view:n};return KS(Yx,{hookProps:r,classNames:t.noEventsClassNames,content:t.noEventsContent,defaultContent:GD,didMount:t.noEventsDidMount,willUnmount:t.noEventsWillUnmount},(function(e,t,n,r){return KS("div",{className:["fc-list-empty"].concat(t).join(" "),ref:e},KS("div",{className:"fc-list-empty-cushion",ref:n},r))}))},t.prototype.renderSegList=function(e,t){var n=this.context,r=n.theme,i=n.options,o=function(e){var t,n,r=[];for(t=0;t<e.length;t+=1)(r[(n=e[t]).dayIndex]||(r[n.dayIndex]=[])).push(n);return r}(e);return KS(cR,{unit:"day"},(function(e,n){for(var a=[],s=0;s<o.length;s+=1){var l=o[s];if(l){var c=t[s].toISOString();a.push(KS(YD,{key:c,dayDate:t[s],todayRange:n}));for(var d=0,u=l=_C(l,i.eventOrder);d<u.length;d++){var h=u[d];a.push(KS(zD,Aw({key:c+":"+h.eventRange.instance.instanceId,seg:h,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1},wC(h,n,e))))}}}return KS("table",{className:"fc-list-table "+r.getClass("table")},KS("tbody",null,a))}))},t.prototype._eventStoreToSegs=function(e,t,n){return this.eventRangesToSegs(uC(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,n)},t.prototype.eventRangesToSegs=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];n.push.apply(n,this.eventRangeToSegs(o,t))}return n},t.prototype.eventRangeToSegs=function(e,t){var n,r,i,o=this.context.dateEnv,a=this.context.options.nextDayThreshold,s=e.range,l=e.def.allDay,c=[];for(n=0;n<t.length;n+=1)if((r=sC(s,t[n]))&&(i={component:this,eventRange:e,start:r.start,end:r.end,isStart:e.isStart&&r.start.valueOf()===s.start.valueOf(),isEnd:e.isEnd&&r.end.valueOf()===s.end.valueOf(),dayIndex:n},c.push(i),!i.isEnd&&!l&&n+1<t.length&&s.end<o.add(t[n+1].start,a))){i.end=s.end,i.isEnd=!0;break}return c},t}(Lx),buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});!function(e){e("#calendar").length&&(e("#calendar-events").length&&new RM(e("#calendar-events")[0],{itemSelector:".event",eventData:function(t){return{title:e(t).find(".event__title").html(),duration:{days:parseInt(e(t).find(".event__days").text())}}}}),new iM(e("#calendar")[0],{plugins:[DM,nD,BD,$D],droppable:!0,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialDate:"2021-01-12",navLinks:!0,editable:!0,dayMaxEvents:!0,events:[{title:"Vue Vixens Day",start:"2021-01-05",end:"2021-01-08"},{title:"VueConfUS",start:"2021-01-11",end:"2021-01-15"},{title:"VueJS Amsterdam",start:"2021-01-17",end:"2021-01-21"},{title:"Vue Fes Japan 2019",start:"2021-01-21",end:"2021-01-24"},{title:"Laracon 2021",start:"2021-01-24",end:"2021-01-27"}],drop:function(t){e("#checkbox-events").length&&e("#checkbox-events")[0].checked&&(e(t.draggedEl).parent().remove(),1==e("#calendar-events").children().length&&e("#calendar-no-events").removeClass("hidden"))}}).render())}(r(5553));var KD=r(9669),QD=r.n(KD);!function(e){if(e(".report-maps").length){e(".report-maps").each((function(t,n){google.maps.event.addDomListener(window,"load",function(t){var n={url:"/dist/images/map-marker.png"},r=e(t).data("center").split(",")[0],i=e(t).data("center").split(",")[1],o=new google.maps.Map(t,{center:new google.maps.LatLng(r,i),zoom:10,styles:e("html").hasClass("dark")?[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#171f29"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"transit.station",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#e0e3e8"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},streetViewControl:!1}),a=new google.maps.InfoWindow({minWidth:400,maxWidth:400});QD().get(e(t).data("sources")).then((function(t){var r=t.data.map((function(t,r){var i=new google.maps.LatLng(parseFloat(t.latitude),parseFloat(t.longitude)),s='<div class="font-medium">'+t.name+'</div><div class="mt-1 text-gray-600">Latitude: '+t.latitude+", Longitude: "+t.longitude+"</div>",l=new google.maps.Marker({map:o,position:i,icon:n});return google.maps.event.addListener(l,"click",(function(t){a.setContent(s),google.maps.event.addListener(a,"domready",(function(){e(".arrow_box").closest(".gm-style-iw-d").removeAttr("style"),e(".arrow_box").closest(".gm-style-iw-d").attr("style","overflow:visible"),e(".arrow_box").closest(".gm-style-iw-d").parent().removeAttr("style")})),a.open(o,l)})),l}));new MarkerClusterer(o,r,{styles:[{width:51,height:50,textColor:"white",url:"/dist/images/map-marker-region.png",anchor:[0,0]}]})})).catch((function(e){console.log(e)}))}(n))}))}}(r(5553)),function(e){e(".chat__chat-list").children().each((function(){e(this).on("click",(function(){h()(e(".chat__box").children("div:nth-child(2)"),"fadeOut",{duration:300,complete:function(t){h()(e(".chat__box").children("div:nth-child(1)"),"fadeIn",{duration:300,complete:function(t){e(t).removeClass("hidden").removeAttr("style")}})}})}))}))}(r(5553));r(4783),r(1057),r(4246),r(2875);!function(e){e("body").on("click",".copy-code",(function(){var t=e(this).data("target");e(t).find("textarea")[0].select(),e(t).find("textarea")[0].setSelectionRange(0,99999),document.execCommand("copy"),kE()({text:"Copied!",duration:3e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,className:"toastify-content"}).showToast()}))}(r(5553)),function(e){e("body").on("change",".show-code",(function(){var t=e(this).data("target");e(this).is(":checked")?(e(t).find(".preview").hide(),h()(e(t).find(".source-code"),"fadeIn")):(h()(e(t).find(".preview"),"fadeIn"),e(t).find(".source-code").hide())}))}(r(5553)),function(e){e(".side-menu").on("click",(function(){e(this).parent().find("ul").length&&(null!==e(this).parent().find("ul").first()[0].offsetParent?(e(this).find(".side-menu__sub-icon").removeClass("transform rotate-180"),e(this).removeClass("side-menu--open"),h()(e(this).parent().find("ul").first(),"slideUp",{duration:300,complete:function(t){e(t).removeClass("side-menu__sub-open")}})):(e(this).find(".side-menu__sub-icon").addClass("transform rotate-180"),e(this).addClass("side-menu--open"),h()(e(this).parent().find("ul").first(),"slideDown",{duration:300,complete:function(t){e(t).addClass("side-menu__sub-open")}})))}))}(r(5553)),function(e){e("#mobile-menu-toggler").on("click",(function(){null!==e(".mobile-menu").find("ul").first()[0].offsetParent?h()(e(".mobile-menu").find("ul").first(),"slideUp"):h()(e(".mobile-menu").find("ul").first(),"slideDown")})),e(".mobile-menu").find(".menu").on("click",(function(){e(this).parent().find("ul").length&&(null!==e(this).parent().find("ul").first()[0].offsetParent?(e(this).find(".menu__sub-icon").removeClass("transform rotate-180"),h()(e(this).parent().find("ul").first(),"slideUp",{duration:300,complete:function(t){e(this).removeClass("menu__sub-open")}})):(e(this).find(".menu__sub-icon").addClass("transform rotate-180"),h()(e(this).parent().find("ul").first(),"slideDown",{duration:300,complete:function(t){e(this).addClass("menu__sub-open")}})))}))}(r(5553)),function(e){var t=function t(){return e(".side-menu").each((function(){if(null==this._tippy){var t=e(this).find(".side-menu__title").html().replace(/<[^>]*>?/gm,"").trim();xn(this,{content:t,arrow:It,animation:"shift-away",placement:"right"})}e(window).width()<=1260||e(this).closest(".side-nav").hasClass("side-nav--simple")?this._tippy.enable():this._tippy.disable()})),t}();window.addEventListener("resize",(function(){t()}))}(r(5553));r(5294)},5294:(e,t,n)=>{!function(e){"use strict";e(".dark-mode-switcher").on("click",(function(){var t=e(this).find(".dark-mode-switcher__toggle");e(t).hasClass("dark-mode-switcher__toggle--active")?e(t).removeClass("dark-mode-switcher__toggle--active"):e(t).addClass("dark-mode-switcher__toggle--active"),setTimeout((function(){var t=e(".dark-mode-switcher").data("url");window.location.href=t}),500)}))}(n(5553))},2875:(e,t,n)=>{!function(e){"use strict";e(".top-bar, .top-bar-boxed").find(".search").find("input").each((function(){e(this).on("focus",(function(){e(".top-bar, .top-bar-boxed").find(".search-result").addClass("show")})),e(this).on("focusout",(function(){e(".top-bar, .top-bar-boxed").find(".search-result").removeClass("show")}))}))}(n(5553))},4246:(e,t,n)=>{!function(e){"use strict";e("#programmatically-show-dropdown").on("click",(function(){e("#programmatically-dropdown").dropdown("show")})),e("#programmatically-hide-dropdown").on("click",(function(){e("#programmatically-dropdown").dropdown("hide")})),e("#programmatically-toggle-dropdown").on("click",(function(){e("#programmatically-dropdown").dropdown("toggle")}))}(n(5553))},4783:(e,t,n)=>{!function(e){"use strict";e("#programmatically-show-modal").on("click",(function(){e("#programmatically-modal").modal("show")})),e("#programmatically-hide-modal").on("click",(function(){e("#programmatically-modal").modal("hide")})),e("#programmatically-toggle-modal").on("click",(function(){e("#programmatically-modal").modal("toggle")}))}(n(5553))},1057:(e,t,n)=>{!function(e){"use strict";e("#programmatically-show-slide-over").on("click",(function(){e("#programmatically-slide-over").modal("show")})),e("#programmatically-hide-slide-over").on("click",(function(){e("#programmatically-slide-over").modal("hide")})),e("#programmatically-toggle-slide-over").on("click",(function(){e("#programmatically-slide-over").modal("toggle")}))}(n(5553))},5553:e=>{!function(){"use strict";var t={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function n(e,t){try{return e(t)}catch(e){return t}}var r=document,i=window,o=r.documentElement,a=r.createElement.bind(r),s=a("div"),l=a("table"),c=a("tbody"),d=a("tr"),u=Array.isArray,h=Array.prototype,p=h.concat,f=h.filter,m=h.indexOf,_=h.map,g=h.push,b=h.slice,v=h.some,y=h.splice,E=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,w=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,S=/<.+>/,T=/^\w+$/;function k(e,t){return e&&(L(t)||I(t))?w.test(e)?t.getElementsByClassName(e.slice(1)):T.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e):[]}var C=function(){function e(e,t){if(e){if(O(e))return e;var n=e;if(B(e)){var o=(O(t)?t[0]:t)||r;if(!(n=E.test(e)?o.getElementById(e.slice(1)):S.test(e)?Me(e):k(e,o)))return}else if(F(e))return this.ready(e);(n.nodeType||n===i)&&(n=[n]),this.length=n.length;for(var a=0,s=this.length;a<s;a++)this[a]=n[a]}}return e.prototype.init=function(t,n){return new e(t,n)},e}(),x=C.prototype,A=x.init;A.fn=A.prototype=x,x.length=0,x.splice=y,"function"==typeof Symbol&&(x[Symbol.iterator]=h[Symbol.iterator]),x.map=function(e){return A(p.apply([],_.call(this,(function(t,n){return e.call(t,n,t)}))))},x.slice=function(e,t){return A(b.call(this,e,t))};var R=/-([a-z])/g;function M(e){return e.replace(R,(function(e,t){return t.toUpperCase()}))}function D(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.msMatchesSelector);return!!n&&!!t&&n.call(e,t)}function O(e){return e instanceof C}function N(e){return!!e&&e===e.window}function L(e){return!!e&&9===e.nodeType}function I(e){return!!e&&1===e.nodeType}function P(e){return"boolean"==typeof e}function F(e){return"function"==typeof e}function B(e){return"string"==typeof e}function Y(e){return void 0===e}function H(e){return null===e}function U(e){return!isNaN(parseFloat(e))&&isFinite(e)}function z(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function j(e,t,n){if(n){for(var r=e.length;r--;)if(!1===t.call(e[r],r,e[r]))return e}else if(z(e))for(var i=Object.keys(e),o=(r=0,i.length);r<o;r++){var a=i[r];if(!1===t.call(e[a],a,e[a]))return e}else for(r=0,o=e.length;r<o;r++)if(!1===t.call(e[r],r,e[r]))return e;return e}function V(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=!!P(e[0])&&e.shift(),r=e.shift(),i=e.length;if(!r)return{};if(!i)return V(n,A,r);for(var o=0;o<i;o++){var a=e[o];for(var s in a)n&&(u(a[s])||z(a[s]))?(r[s]&&r[s].constructor===a[s].constructor||(r[s]=new a[s].constructor),V(n,r[s],a[s])):r[s]=a[s]}return r}function G(e){return B(e)?function(t,n){return D(n,e)}:F(e)?e:O(e)?function(t,n){return e.is(n)}:e?function(t,n){return n===e}:function(){return!1}}function W(e,t){return t?e.filter(t):e}A.guid=1,A.isWindow=N,A.isFunction=F,A.isArray=u,A.isNumeric=U,A.isPlainObject=z,x.get=function(e){return Y(e)?b.call(this):this[(e=Number(e))<0?e+this.length:e]},x.eq=function(e){return A(this.get(e))},x.first=function(){return this.eq(0)},x.last=function(){return this.eq(-1)},A.each=j,x.each=function(e){return j(this,e)},x.prop=function(e,n){if(e){if(B(e))return e=t[e]||e,arguments.length<2?this[0]&&this[0][e]:this.each((function(t,r){r[e]=n}));for(var r in e)this.prop(r,e[r]);return this}},x.removeProp=function(e){return this.each((function(n,r){delete r[t[e]||e]}))},A.extend=V,x.extend=function(e){return V(x,e)},x.filter=function(e){var t=G(e);return A(f.call(this,(function(e,n){return t.call(e,n,e)})))};var q=/\S+/g;function $(e){return B(e)&&e.match(q)||[]}function K(e,t,n,r){for(var i=[],o=F(t),a=r&&G(r),s=0,l=e.length;s<l;s++)if(o){var c=t(e[s]);c.length&&g.apply(i,c)}else for(var d=e[s][t];!(null==d||r&&a(-1,d));)i.push(d),d=n?d[t]:null;return i}function Q(e){return e.length>1?f.call(e,(function(e,t,n){return m.call(n,e)===t})):e}function X(e,t,n){if(I(e)){var r=i.getComputedStyle(e,null);return n?r.getPropertyValue(t)||void 0:r[t]||e.style[t]}}function Z(e,t){return parseInt(X(e,t),10)||0}x.hasClass=function(e){return!!e&&v.call(this,(function(t){return I(t)&&t.classList.contains(e)}))},x.removeAttr=function(e){var t=$(e);return this.each((function(e,n){I(n)&&j(t,(function(e,t){n.removeAttribute(t)}))}))},x.attr=function(e,t){if(e){if(B(e)){if(arguments.length<2){if(!this[0]||!I(this[0]))return;var n=this[0].getAttribute(e);return H(n)?void 0:n}return Y(t)?this:H(t)?this.removeAttr(e):this.each((function(n,r){I(r)&&r.setAttribute(e,t)}))}for(var r in e)this.attr(r,e[r]);return this}},x.toggleClass=function(e,t){var n=$(e),r=!Y(t);return this.each((function(e,i){I(i)&&j(n,(function(e,n){r?t?i.classList.add(n):i.classList.remove(n):i.classList.toggle(n)}))}))},x.addClass=function(e){return this.toggleClass(e,!0)},x.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},A.unique=Q,x.add=function(e,t){return A(Q(this.get().concat(A(e,t).get())))};var J=/^--/;function ee(e){return J.test(e)}var te={},ne=s.style,re=["webkit","moz","ms"];function ie(e,t){if(void 0===t&&(t=ee(e)),t)return e;if(!te[e]){var n=M(e),r=""+n[0].toUpperCase()+n.slice(1);j((n+" "+re.join(r+" ")+r).split(" "),(function(t,n){if(n in ne)return te[e]=n,!1}))}return te[e]}var oe={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ae(e,t,n){return void 0===n&&(n=ee(e)),n||oe[e]||!U(t)?t:t+"px"}x.css=function(e,t){if(B(e)){var n=ee(e);return e=ie(e,n),arguments.length<2?this[0]&&X(this[0],e,n):e?(t=ae(e,t,n),this.each((function(r,i){I(i)&&(n?i.style.setProperty(e,t):i.style[e]=t)}))):this}for(var r in e)this.css(r,e[r]);return this};var se=/^\s+|\s+$/;function le(e,t){var r=e.dataset[t]||e.dataset[M(t)];return se.test(r)?r:n(JSON.parse,r)}function ce(e,t,r){r=n(JSON.stringify,r),e.dataset[M(t)]=r}function de(e,t){var n=e.documentElement;return Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])}function ue(e,t){return Z(e,"border"+(t?"Left":"Top")+"Width")+Z(e,"padding"+(t?"Left":"Top"))+Z(e,"padding"+(t?"Right":"Bottom"))+Z(e,"border"+(t?"Right":"Bottom")+"Width")}x.data=function(e,t){if(!e){if(!this[0])return;var n={};for(var r in this[0].dataset)n[r]=le(this[0],r);return n}if(B(e))return arguments.length<2?this[0]&&le(this[0],e):Y(t)?this:this.each((function(n,r){ce(r,e,t)}));for(var r in e)this.data(r,e[r]);return this},j([!0,!1],(function(e,t){j(["Width","Height"],(function(e,n){x[(t?"outer":"inner")+n]=function(r){if(this[0])return N(this[0])?t?this[0]["inner"+n]:this[0].document.documentElement["client"+n]:L(this[0])?de(this[0],n):this[0][(t?"offset":"client")+n]+(r&&t?Z(this[0],"margin"+(e?"Top":"Left"))+Z(this[0],"margin"+(e?"Bottom":"Right")):0)}}))})),j(["Width","Height"],(function(e,t){var n=t.toLowerCase();x[n]=function(r){if(!this[0])return Y(r)?void 0:this;if(!arguments.length)return N(this[0])?this[0].document.documentElement["client"+t]:L(this[0])?de(this[0],t):this[0].getBoundingClientRect()[n]-ue(this[0],!e);var i=parseInt(r,10);return this.each((function(t,r){if(I(r)){var o=X(r,"boxSizing");r.style[n]=ae(n,i+("border-box"===o?ue(r,!e):0))}}))}}));var he={};function pe(e){return"none"===X(e,"display")}function fe(e,t){return!t||!v.call(t,(function(t){return e.indexOf(t)<0}))}x.toggle=function(e){return this.each((function(t,n){I(n)&&((Y(e)?pe(n):e)?(n.style.display=n.___cd||"",pe(n)&&(n.style.display=function(e){if(he[e])return he[e];var t=a(e);r.body.insertBefore(t,null);var n=X(t,"display");return r.body.removeChild(t),he[e]="none"!==n?n:"block"}(n.tagName))):(n.___cd=X(n,"display"),n.style.display="none"))}))},x.hide=function(){return this.toggle(!1)},x.show=function(){return this.toggle(!0)};var me={focus:"focusin",blur:"focusout"},_e={mouseenter:"mouseover",mouseleave:"mouseout"},ge=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function be(e){return _e[e]||me[e]||e}function ve(e){return e.___ce=e.___ce||{}}function ye(e){var t=e.split(".");return[t[0],t.slice(1).sort()]}function Ee(e,t,n,r,i){var o=ve(e);if(t)o[t]&&(o[t]=o[t].filter((function(o){var a=o[0],s=o[1],l=o[2];if(i&&l.guid!==i.guid||!fe(a,n)||r&&r!==s)return!0;e.removeEventListener(t,l)})));else for(t in o)Ee(e,t,n,r,i)}function we(e){return e.multiple&&e.options?K(f.call(e.options,(function(e){return e.selected&&!e.disabled&&!e.parentNode.disabled})),"value"):e.value||""}x.off=function(e,t,n){var r=this;if(Y(e))this.each((function(e,t){(I(t)||L(t)||N(t))&&Ee(t)}));else if(B(e))F(t)&&(n=t,t=""),j($(e),(function(e,i){var o=ye(i),a=o[0],s=o[1],l=be(a);r.each((function(e,r){(I(r)||L(r)||N(r))&&Ee(r,l,s,t,n)}))}));else for(var i in e)this.off(i,e[i]);return this},x.on=function(e,t,n,r,i){var o=this;if(!B(e)){for(var a in e)this.on(a,t,n,e[a],i);return this}return B(t)||(Y(t)||H(t)?t="":Y(n)?(n=t,t=""):(r=n,n=t,t="")),F(r)||(r=n,n=void 0),r?(j($(e),(function(e,a){var s=ye(a),l=s[0],c=s[1],d=be(l),u=l in _e,h=l in me;d&&o.each((function(e,o){if(I(o)||L(o)||N(o)){var a=function e(a){if(a.target["___i"+a.type])return a.stopImmediatePropagation();if((!a.namespace||fe(c,a.namespace.split(".")))&&(t||!(h&&(a.target!==o||a.___ot===d)||u&&a.relatedTarget&&o.contains(a.relatedTarget)))){var s=o;if(t){for(var l=a.target;!D(l,t);){if(l===o)return;if(!(l=l.parentNode))return}s=l,a.___cd=!0}a.___cd&&Object.defineProperty(a,"currentTarget",{configurable:!0,get:function(){return s}}),Object.defineProperty(a,"data",{configurable:!0,get:function(){return n}});var p=r.call(s,a,a.___td);i&&Ee(o,d,c,t,e),!1===p&&(a.preventDefault(),a.stopPropagation())}};a.guid=r.guid=r.guid||A.guid++,function(e,t,n,r,i){var o=ve(e);o[t]=o[t]||[],o[t].push([n,r,i]),e.addEventListener(t,i)}(o,d,c,t,a)}}))})),this):this},x.one=function(e,t,n,r){return this.on(e,t,n,r,!0)},x.ready=function(e){var t=function(){return setTimeout(e,0,A)};return"loading"!==r.readyState?t():r.addEventListener("DOMContentLoaded",t),this},x.trigger=function(e,t){if(B(e)){var n=ye(e),i=n[0],o=n[1],a=be(i);if(!a)return this;var s=ge.test(a)?"MouseEvents":"HTMLEvents";(e=r.createEvent(s)).initEvent(a,!0,!0),e.namespace=o.join("."),e.___ot=i}e.___td=t;var l=e.___ot in me;return this.each((function(t,n){l&&F(n[e.___ot])&&(n["___i"+e.type]=!0,n[e.___ot](),n["___i"+e.type]=!1),n.dispatchEvent(e)}))};var Se=/%20/g,Te=/\r?\n/g;var ke=/file|reset|submit|button|image/i,Ce=/radio|checkbox/i;x.serialize=function(){var e="";return this.each((function(t,n){j(n.elements||[n],(function(t,n){if(!(n.disabled||!n.name||"FIELDSET"===n.tagName||ke.test(n.type)||Ce.test(n.type)&&!n.checked)){var r=we(n);if(!Y(r))j(u(r)?r:[r],(function(t,r){e+=function(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t.replace(Te,"\r\n")).replace(Se,"+")}(n.name,r)}))}}))})),e.slice(1)},x.val=function(e){return arguments.length?this.each((function(t,n){var r=n.multiple&&n.options;if(r||Ce.test(n.type)){var i=u(e)?_.call(e,String):H(e)?[]:[String(e)];r?j(n.options,(function(e,t){t.selected=i.indexOf(t.value)>=0}),!0):n.checked=i.indexOf(n.value)>=0}else n.value=Y(e)||H(e)?"":e})):this[0]&&we(this[0])},x.clone=function(){return this.map((function(e,t){return t.cloneNode(!0)}))},x.detach=function(e){return W(this,e).each((function(e,t){t.parentNode&&t.parentNode.removeChild(t)})),this};var xe=/^\s*<(\w+)[^>]*>/,Ae=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Re={"*":s,tr:c,td:d,th:d,thead:l,tbody:l,tfoot:l};function Me(e){if(!B(e))return[];if(Ae.test(e))return[a(RegExp.$1)];var t=xe.test(e)&&RegExp.$1,n=Re[t]||Re["*"];return n.innerHTML=e,A(n.childNodes).detach().get()}A.parseHTML=Me,x.empty=function(){return this.each((function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild)}))},x.html=function(e){return arguments.length?Y(e)?this:this.each((function(t,n){I(n)&&(n.innerHTML=e)})):this[0]&&this[0].innerHTML},x.remove=function(e){return W(this,e).detach().off(),this},x.text=function(e){return Y(e)?this[0]?this[0].textContent:"":this.each((function(t,n){I(n)&&(n.textContent=e)}))},x.unwrap=function(){return this.parent().each((function(e,t){if("BODY"!==t.tagName){var n=A(t);n.replaceWith(n.children())}})),this},x.offset=function(){var e=this[0];if(e){var t=e.getBoundingClientRect();return{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}}},x.offsetParent=function(){return this.map((function(e,t){for(var n=t.offsetParent;n&&"static"===X(n,"position");)n=n.offsetParent;return n||o}))},x.position=function(){var e=this[0];if(e){var t="fixed"===X(e,"position"),n=t?e.getBoundingClientRect():this.offset();if(!t){for(var r=e.ownerDocument,i=e.offsetParent||r.documentElement;(i===r.body||i===r.documentElement)&&"static"===X(i,"position");)i=i.parentNode;if(i!==e&&I(i)){var o=A(i).offset();n.top-=o.top+Z(i,"borderTopWidth"),n.left-=o.left+Z(i,"borderLeftWidth")}}return{top:n.top-Z(e,"marginTop"),left:n.left-Z(e,"marginLeft")}}},x.children=function(e){return W(A(Q(K(this,(function(e){return e.children})))),e)},x.contents=function(){return A(Q(K(this,(function(e){return"IFRAME"===e.tagName?[e.contentDocument]:"TEMPLATE"===e.tagName?e.content.childNodes:e.childNodes}))))},x.find=function(e){return A(Q(K(this,(function(t){return k(e,t)}))))};var De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Oe=/^$|^module$|\/(java|ecma)script/i,Ne=["type","src","nonce","noModule"];function Le(e,t,n,r,i){r?e.insertBefore(t,n?e.firstChild:null):e.parentNode.insertBefore(t,n?e:e.nextSibling),i&&function(e,t){var n=A(e);n.filter("script").add(n.find("script")).each((function(e,n){if(Oe.test(n.type)&&o.contains(n)){var r=a("script");r.text=n.textContent.replace(De,""),j(Ne,(function(e,t){n[t]&&(r[t]=n[t])})),t.head.insertBefore(r,null),t.head.removeChild(r)}}))}(t,e.ownerDocument)}function Ie(e,t,n,r,i,o,a,s){return j(e,(function(e,o){j(A(o),(function(e,o){j(A(t),(function(t,a){var s=n?a:o,l=n?e:t;Le(n?o:a,l?s.cloneNode(!0):s,r,i,!l)}),s)}),a)}),o),t}x.after=function(){return Ie(arguments,this,!1,!1,!1,!0,!0)},x.append=function(){return Ie(arguments,this,!1,!1,!0)},x.appendTo=function(e){return Ie(arguments,this,!0,!1,!0)},x.before=function(){return Ie(arguments,this,!1,!0)},x.insertAfter=function(e){return Ie(arguments,this,!0,!1,!1,!1,!1,!0)},x.insertBefore=function(e){return Ie(arguments,this,!0,!0)},x.prepend=function(){return Ie(arguments,this,!1,!0,!0,!0,!0)},x.prependTo=function(e){return Ie(arguments,this,!0,!0,!0,!1,!1,!0)},x.replaceWith=function(e){return this.before(e).remove()},x.replaceAll=function(e){return A(e).replaceWith(this),this},x.wrapAll=function(e){for(var t=A(e),n=t[0];n.children.length;)n=n.firstElementChild;return this.first().before(t),this.appendTo(n)},x.wrap=function(e){return this.each((function(t,n){var r=A(e)[0];A(n).wrapAll(t?r.cloneNode(!0):r)}))},x.wrapInner=function(e){return this.each((function(t,n){var r=A(n),i=r.contents();i.length?i.wrapAll(e):r.append(e)}))},x.has=function(e){var t=B(e)?function(t,n){return k(e,n).length}:function(t,n){return n.contains(e)};return this.filter(t)},x.is=function(e){var t=G(e);return v.call(this,(function(e,n){return t.call(e,n,e)}))},x.next=function(e,t,n){return W(A(Q(K(this,"nextElementSibling",t,n))),e)},x.nextAll=function(e){return this.next(e,!0)},x.nextUntil=function(e,t){return this.next(t,!0,e)},x.not=function(e){var t=G(e);return this.filter((function(n,r){return(!B(e)||I(r))&&!t.call(r,n,r)}))},x.parent=function(e){return W(A(Q(K(this,"parentNode"))),e)},x.index=function(e){var t=e?A(e)[0]:this[0],n=e?this:A(t).parent().children();return m.call(n,t)},x.closest=function(e){var t=this.filter(e);if(t.length)return t;var n=this.parent();return n.length?n.closest(e):t},x.parents=function(e,t){return W(A(Q(K(this,"parentElement",!0,t))),e)},x.parentsUntil=function(e,t){return this.parents(t,e)},x.prev=function(e,t,n){return W(A(Q(K(this,"previousElementSibling",t,n))),e)},x.prevAll=function(e){return this.prev(e,!0)},x.prevUntil=function(e,t){return this.prev(t,!0,e)},x.siblings=function(e){return W(A(Q(K(this,(function(e){return A(e).parent().children().not(e)})))),e)},e.exports=A}()},7757:function(e,t,n){e.exports=function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e){return e&&e.default||e}e=e&&e.hasOwnProperty("default")?e.default:e;var r={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},i=t((function(e){var t={};for(var n in r)r.hasOwnProperty(n)&&(t[r[n]]=n);var i=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var o in i)if(i.hasOwnProperty(o)){if(!("channels"in i[o]))throw new Error("missing channels property: "+o);if(!("labels"in i[o]))throw new Error("missing channel labels property: "+o);if(i[o].labels.length!==i[o].channels)throw new Error("channel and label counts mismatch: "+o);var a=i[o].channels,s=i[o].labels;delete i[o].channels,delete i[o].labels,Object.defineProperty(i[o],"channels",{value:a}),Object.defineProperty(i[o],"labels",{value:s})}function l(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}i.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s===a?t=0:r===s?t=(i-o)/l:i===s?t=2+(o-r)/l:o===s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},i.rgb.hsv=function(e){var t,n,r,i,o,a=e[0]/255,s=e[1]/255,l=e[2]/255,c=Math.max(a,s,l),d=c-Math.min(a,s,l),u=function(e){return(c-e)/6/d+.5};return 0===d?i=o=0:(o=d/c,t=u(a),n=u(s),r=u(l),a===c?i=r-n:s===c?i=1/3+t-r:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},i.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[i.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,r))*100,100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},i.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},i.rgb.keyword=function(e){var n=t[e];if(n)return n;var i,o=1/0;for(var a in r)if(r.hasOwnProperty(a)){var s=l(e,r[a]);s<o&&(o=s,i=a)}return i},i.keyword.rgb=function(e){return r[e]},i.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},i.rgb.lab=function(e){var t=i.rgb.xyz(e),n=t[0],r=t[1],o=t[2];return r/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},i.hsl.rgb=function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[o=255*l,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[c]=255*o;return i},i.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[t,100*(0===r?2*i/(o+i):2*n/(r+n)),(r+n)/2*100]},i.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},i.hsv.hsl=function(e){var t,n,r,i=e[0],o=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(t=(2-o)*s)<=1?t:2-t)||0),100*(r/=2)]},i.hwb.rgb=function(e){var t,n,r,i,o,a,s,l=e[0]/360,c=e[1]/100,d=e[2]/100,u=c+d;switch(u>1&&(c/=u,d/=u),r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),i=c+r*((n=1-d)-c),t){default:case 6:case 0:o=n,a=i,s=c;break;case 1:o=i,a=n,s=c;break;case 2:o=c,a=n,s=i;break;case 3:o=c,a=i,s=n;break;case 4:o=i,a=c,s=n;break;case 5:o=n,a=c,s=i}return[255*o,255*a,255*s]},i.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},i.xyz.rgb=function(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},i.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},i.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var o=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},i.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},i.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},i.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],o=1 in arguments?arguments[1]:i.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var a=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===o&&(a+=60),a},i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])},i.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},i.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},i.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},i.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},i.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return t=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},i.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},i.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},i.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i=[0,0,0],o=t%1*6,a=o%1,s=1-a,l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-n)*r,[255*(n*i[0]+l),255*(n*i[1]+l),255*(n*i[2]+l)]},i.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},i.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},i.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},i.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},i.gray.hsl=i.gray.hsv=function(e){return[0,0,e[0]]},i.gray.hwb=function(e){return[0,100,e[0]]},i.gray.cmyk=function(e){return[0,0,0,e[0]]},i.gray.lab=function(e){return[e[0],0,0]},i.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},i.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}));function o(){for(var e={},t=Object.keys(i),n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function a(e){var t=o(),n=[e];for(t[e].distance=0;n.length;)for(var r=n.pop(),a=Object.keys(i[r]),s=a.length,l=0;l<s;l++){var c=a[l],d=t[c];-1===d.distance&&(d.distance=t[r].distance+1,d.parent=r,n.unshift(c))}return t}function s(e,t){return function(n){return t(e(n))}}function l(e,t){for(var n=[t[e].parent,e],r=i[t[e].parent][e],o=t[e].parent;t[o].parent;)n.unshift(t[o].parent),r=s(i[t[o].parent][o],r),o=t[o].parent;return r.conversion=n,r}i.rgb,i.hsl,i.hsv,i.hwb,i.cmyk,i.xyz,i.lab,i.lch,i.hex,i.keyword,i.ansi16,i.ansi256,i.hcg,i.apple,i.gray;var c=function(e){for(var t=a(e),n={},r=Object.keys(t),i=r.length,o=0;o<i;o++){var s=r[o];null!==t[s].parent&&(n[s]=l(s,t))}return n},d={};function u(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function h(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}Object.keys(i).forEach((function(e){d[e]={},Object.defineProperty(d[e],"channels",{value:i[e].channels}),Object.defineProperty(d[e],"labels",{value:i[e].labels});var t=c(e);Object.keys(t).forEach((function(n){var r=t[n];d[e][n]=h(r),d[e][n].raw=u(r)}))}));var p=d,f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},m={getRgba:_,getHsla:g,getRgb:v,getHsl:y,getHwb:b,getAlpha:E,hexString:w,rgbString:S,rgbaString:T,percentString:k,percentaString:C,hslString:x,hslaString:A,hwbString:R,keyword:M};function _(e){if(e){var t=/^#([a-fA-F0-9]{3,4})$/i,n=/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i,r=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/(\w+)/,a=[0,0,0],s=1,l=e.match(t),c="";if(l){c=(l=l[1])[3];for(var d=0;d<a.length;d++)a[d]=parseInt(l[d]+l[d],16);c&&(s=Math.round(parseInt(c+c,16)/255*100)/100)}else if(l=e.match(n)){for(c=l[2],l=l[1],d=0;d<a.length;d++)a[d]=parseInt(l.slice(2*d,2*d+2),16);c&&(s=Math.round(parseInt(c,16)/255*100)/100)}else if(l=e.match(r)){for(d=0;d<a.length;d++)a[d]=parseInt(l[d+1]);s=parseFloat(l[4])}else if(l=e.match(i)){for(d=0;d<a.length;d++)a[d]=Math.round(2.55*parseFloat(l[d+1]));s=parseFloat(l[4])}else if(l=e.match(o)){if("transparent"==l[1])return[0,0,0,0];if(!(a=f[l[1]]))return}for(d=0;d<a.length;d++)a[d]=D(a[d],0,255);return s=s||0==s?D(s,0,1):1,a[3]=s,a}}function g(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var r=parseFloat(n[4]);return[D(parseInt(n[1]),0,360),D(parseFloat(n[2]),0,100),D(parseFloat(n[3]),0,100),D(isNaN(r)?1:r,0,1)]}}}function b(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var r=parseFloat(n[4]);return[D(parseInt(n[1]),0,360),D(parseFloat(n[2]),0,100),D(parseFloat(n[3]),0,100),D(isNaN(r)?1:r,0,1)]}}}function v(e){var t=_(e);return t&&t.slice(0,3)}function y(e){var t=g(e);return t&&t.slice(0,3)}function E(e){var t=_(e);return t||(t=g(e))||(t=b(e))?t[3]:void 0}function w(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+O(e[0])+O(e[1])+O(e[2])+(t>=0&&t<1?O(Math.round(255*t)):"")}function S(e,t){return t<1||e[3]&&e[3]<1?T(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function T(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function k(e,t){return t<1||e[3]&&e[3]<1?C(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"}function C(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function x(e,t){return t<1||e[3]&&e[3]<1?A(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function A(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function R(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function M(e){return N[e.slice(0,3)]}function D(e,t,n){return Math.min(Math.max(t,e),n)}function O(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var N={};for(var L in f)N[f[L]]=L;var I=function(e){return e instanceof I?e:this instanceof I?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=m.getRgba(e))?this.setValues("rgb",t):(t=m.getHsla(e))?this.setValues("hsl",t):(t=m.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new I(e);var t};I.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return m.hexString(this.values.rgb)},rgbString:function(){return m.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return m.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return m.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return m.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return m.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return m.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return m.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=this,r=e,i=void 0===t?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return this.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue()).alpha(n.alpha()*i+r.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new I,r=this.values,i=n.values;for(var o in r)r.hasOwnProperty(o)&&(e=r[o],"[object Array]"===(t={}.toString.call(e))?i[o]=e.slice(0):"[object Number]"===t?i[o]=e:console.error("unexpected color value:",e));return n}},I.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},I.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},I.prototype.getValues=function(e){for(var t=this.values,n={},r=0;r<e.length;r++)n[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(n.a=t.alpha),n},I.prototype.setValues=function(e,t){var n,r,i=this.values,o=this.spaces,a=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)i[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)i[e][n]=t[e.charAt(n)];s=t.a}else if(void 0!==t[o[e][0]]){var l=o[e];for(n=0;n<e.length;n++)i[e][n]=t[l[n]];s=t.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===s?i.alpha:s)),"alpha"===e)return!1;for(n=0;n<e.length;n++)r=Math.max(0,Math.min(a[e][n],i[e][n])),i[e][n]=Math.round(r);for(var c in o)c!==e&&(i[c]=p[e][c](i[e]));return!0},I.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},I.prototype.setChannel=function(e,t,n){var r=this.values[e];return void 0===n?r[t]:(n===r[t]||(r[t]=n,this.setValues(e,r)),this)},"undefined"!=typeof window&&(window.Color=I);var P=I;function F(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}var B,Y={noop:function(){},uid:(B=0,function(){return B++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return Y.valueOrDefault(Y.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,r){var i,o,a;if(Y.isArray(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(Y.isObject(e))for(o=(a=Object.keys(e)).length,i=0;i<o;i++)t.call(n,e[a[i]],a[i])},arrayEquals:function(e,t){var n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],o=t[n],i instanceof Array&&o instanceof Array){if(!Y.arrayEquals(i,o))return!1}else if(i!==o)return!1;return!0},clone:function(e){if(Y.isArray(e))return e.map(Y.clone);if(Y.isObject(e)){for(var t=Object.create(e),n=Object.keys(e),r=n.length,i=0;i<r;++i)t[n[i]]=Y.clone(e[n[i]]);return t}return e},_merger:function(e,t,n,r){if(F(e)){var i=t[e],o=n[e];Y.isObject(i)&&Y.isObject(o)?Y.merge(i,o,r):t[e]=Y.clone(o)}},_mergerIf:function(e,t,n){if(F(e)){var r=t[e],i=n[e];Y.isObject(r)&&Y.isObject(i)?Y.mergeIf(r,i):t.hasOwnProperty(e)||(t[e]=Y.clone(i))}},merge:function(e,t,n){var r,i,o,a,s,l=Y.isArray(t)?t:[t],c=l.length;if(!Y.isObject(e))return e;for(r=(n=n||{}).merger||Y._merger,i=0;i<c;++i)if(t=l[i],Y.isObject(t))for(s=0,a=(o=Object.keys(t)).length;s<a;++s)r(o[s],e,t,n);return e},mergeIf:function(e,t){return Y.merge(e,t,{merger:Y._mergerIf})},extend:Object.assign||function(e){return Y.merge(e,[].slice.call(arguments,1),{merger:function(e,t,n){t[e]=n[e]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=t.prototype,n.prototype=new r,n.extend=Y.inherits,e&&Y.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,r){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+r+'" instead')}},H=Y;Y.callCallback=Y.callback,Y.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},Y.getValueOrDefault=Y.valueOrDefault,Y.getValueAtIndexOrDefault=Y.valueAtIndexOrDefault;var U={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-U.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*U.easeInBounce(2*e):.5*U.easeOutBounce(2*e-1)+.5}},z={effects:U};H.easingEffects=U;var j=Math.PI,V=j/180,G=2*j,W=j/2,q=j/4,$=2*j/3,K={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,r,i,o){if(o){var a=Math.min(o,i/2,r/2),s=t+a,l=n+a,c=t+r-a,d=n+i-a;e.moveTo(t,l),s<c&&l<d?(e.arc(s,l,a,-j,-W),e.arc(c,l,a,-W,0),e.arc(c,d,a,0,W),e.arc(s,d,a,W,j)):s<c?(e.moveTo(s,n),e.arc(c,l,a,-W,W),e.arc(s,l,a,W,j+W)):l<d?(e.arc(s,l,a,-j,0),e.arc(s,d,a,0,j)):e.arc(s,l,a,-j,j),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,i)},drawPoint:function(e,t,n,r,i,o){var a,s,l,c,d,u=(o||0)*V;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(a=t.toString())||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(r,i),e.rotate(u),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(r,i,n,0,G),e.closePath();break;case"triangle":e.moveTo(r+Math.sin(u)*n,i-Math.cos(u)*n),u+=$,e.lineTo(r+Math.sin(u)*n,i-Math.cos(u)*n),u+=$,e.lineTo(r+Math.sin(u)*n,i-Math.cos(u)*n),e.closePath();break;case"rectRounded":c=n-(d=.516*n),s=Math.cos(u+q)*c,l=Math.sin(u+q)*c,e.arc(r-s,i-l,d,u-j,u-W),e.arc(r+l,i-s,d,u-W,u),e.arc(r+s,i+l,d,u,u+W),e.arc(r-l,i+s,d,u+W,u+j),e.closePath();break;case"rect":if(!o){c=Math.SQRT1_2*n,e.rect(r-c,i-c,2*c,2*c);break}u+=q;case"rectRot":s=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(r-s,i-l),e.lineTo(r+l,i-s),e.lineTo(r+s,i+l),e.lineTo(r-l,i+s),e.closePath();break;case"crossRot":u+=q;case"cross":s=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(r-s,i-l),e.lineTo(r+s,i+l),e.moveTo(r+l,i-s),e.lineTo(r-l,i+s);break;case"star":s=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(r-s,i-l),e.lineTo(r+s,i+l),e.moveTo(r+l,i-s),e.lineTo(r-l,i+s),u+=q,s=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(r-s,i-l),e.lineTo(r+s,i+l),e.moveTo(r+l,i-s),e.lineTo(r-l,i+s);break;case"line":s=Math.cos(u)*n,l=Math.sin(u)*n,e.moveTo(r-s,i-l),e.lineTo(r+s,i+l);break;case"dash":e.moveTo(r,i),e.lineTo(r+Math.cos(u)*n,i+Math.sin(u)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){var n=1e-6;return e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,r){var i=n.steppedLine;if(i){if("middle"===i){var o=(t.x+n.x)/2;e.lineTo(o,r?n.y:t.y),e.lineTo(o,r?t.y:n.y)}else"after"===i&&!r||"after"!==i&&r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}else n.tension?e.bezierCurveTo(r?t.controlPointPreviousX:t.controlPointNextX,r?t.controlPointPreviousY:t.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},Q=K;H.clear=K.clear,H.drawRoundedRectangle=function(e){e.beginPath(),K.roundedRect.apply(K,arguments)};var X={_set:function(e,t){return H.merge(this[e]||(this[e]={}),t)}};X._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var Z=X,J=H.valueOrDefault;function ee(e){return!e||H.isNullOrUndef(e.size)||H.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}var te={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,r,i;return H.isObject(e)?(t=+e.top||0,n=+e.right||0,r=+e.bottom||0,i=+e.left||0):t=n=r=i=+e||0,{top:t,right:n,bottom:r,left:i,height:t+r,width:i+n}},_parseFont:function(e){var t=Z.global,n=J(e.fontSize,t.defaultFontSize),r={family:J(e.fontFamily,t.defaultFontFamily),lineHeight:H.options.toLineHeight(J(e.lineHeight,t.defaultLineHeight),n),size:n,style:J(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return r.string=ee(r),r},resolve:function(e,t,n,r){var i,o,a,s=!0;for(i=0,o=e.length;i<o;++i)if(void 0!==(a=e[i])&&(void 0!==t&&"function"==typeof a&&(a=a(t),s=!1),void 0!==n&&H.isArray(a)&&(a=a[n],s=!1),void 0!==a))return r&&!s&&(r.cacheable=!1),a}},ne={_factorize:function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t==0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort((function(e,t){return e-t})).pop(),n},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},re=ne;H.log10=ne.log10;var ie=function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}},oe=function(){return{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},ae=H,se=z,le=Q,ce=te,de=re,ue={getRtlAdapter:function(e,t,n){return e?ie(t,n):oe()},overrideTextDirection:function(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};function he(e,t,n,r){var i,o,a,s,l,c,d,u,h,p=Object.keys(n);for(i=0,o=p.length;i<o;++i)if(c=n[a=p[i]],t.hasOwnProperty(a)||(t[a]=c),(s=t[a])!==c&&"_"!==a[0]){if(e.hasOwnProperty(a)||(e[a]=s),(d=typeof c)==typeof(l=e[a]))if("string"===d){if((u=P(l)).valid&&(h=P(c)).valid){t[a]=h.mix(u,r).rgbString();continue}}else if(ae.isFinite(l)&&ae.isFinite(c)){t[a]=l+(c-l)*r;continue}t[a]=c}}ae.easing=se,ae.canvas=le,ae.options=ce,ae.math=de,ae.rtl=ue;var pe=function(e){ae.extend(this,e),this.initialize.apply(this,arguments)};ae.extend(pe.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ae.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,r=t._start,i=t._view;return n&&1!==e?(i||(i=t._view={}),r||(r=t._start={}),he(r,i,n,e),t):(t._view=ae.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ae.isNumber(this._model.x)&&ae.isNumber(this._model.y)}}),pe.extend=ae.inherits;var fe=pe,me=fe.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),_e=me;Object.defineProperty(me.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(me.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),Z._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ae.noop,onComplete:ae.noop}});var ge={animations:[],request:null,addAnimation:function(e,t,n,r){var i,o,a=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,r||(e.animating=!0),i=0,o=a.length;i<o;++i)if(a[i].chart===e)return void(a[i]=t);a.push(t),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ae.findIndex(this.animations,(function(t){return t.chart===e}));-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ae.requestAnimFrame.call(window,(function(){e.request=null,e.startDigest()})))},startDigest:function(){var e=this;e.advance(),e.animations.length>0&&e.requestAnimationFrame()},advance:function(){for(var e,t,n,r,i=this.animations,o=0;o<i.length;)t=(e=i[o]).chart,n=e.numSteps,r=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(r,n),ae.callback(e.render,[t,e],t),ae.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(ae.callback(e.onAnimationComplete,[e],t),t.animating=!1,i.splice(o,1)):++o}},be=ae.options.resolve,ve=["push","pop","shift","splice","unshift"];function ye(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ve.forEach((function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),i=r.apply(this,t);return ae.each(e._chartjs.listeners,(function(e){"function"==typeof e[n]&&e[n].apply(e,t)})),i}})})))}function Ee(e,t){var n=e._chartjs;if(n){var r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(ve.forEach((function(t){delete e[t]})),delete e._chartjs)}}var we=function(e,t){this.initialize(e,t)};ae.extend(we.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.chart,r=n.scales,i=e.getDataset(),o=n.options.scales;null!==t.xAxisID&&t.xAxisID in r&&!i.xAxisID||(t.xAxisID=i.xAxisID||o.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in r&&!i.yAxisID||(t.yAxisID=i.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&Ee(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,n=t.dataElementType;return n&&new n({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,n=this,r=n.getMeta(),i=n.getDataset().data||[],o=r.data;for(e=0,t=i.length;e<t;++e)o[e]=o[e]||n.createMetaData(e);r.dataset=r.dataset||n.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,t=e.getDataset(),n=t.data||(t.data=[]);e._data!==n&&(e._data&&Ee(e._data,e),n&&Object.isExtensible(n)&&ye(n,e),e._data=n),e.resyncElements()},_configure:function(){var e=this;e._config=ae.merge(Object.create(null),[e.chart.options.datasets[e._type],e.getDataset()],{merger:function(e,t,n){"_meta"!==e&&"data"!==e&&ae._merger(e,t,n)}})},_update:function(e){var t=this;t._configure(),t._cachedDataOpts=null,t.update(e)},update:ae.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],r=n.length,i=0;i<r;++i)n[i].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,r=0;for(e.dataset&&e.dataset.draw();r<n;++r)t[r].draw()},getStyle:function(e){var t,n=this,r=n.getMeta(),i=r.dataset;return n._configure(),i&&void 0===e?t=n._resolveDatasetElementOptions(i||{}):(e=e||0,t=n._resolveDataElementOptions(r.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var n,r,i,o,a=this,s=a.chart,l=a._config,c=e.custom||{},d=s.options.elements[a.datasetElementType.prototype._type]||{},u=a._datasetElementOptions,h={},p={chart:s,dataset:a.getDataset(),datasetIndex:a.index,hover:t};for(n=0,r=u.length;n<r;++n)i=u[n],o=t?"hover"+i.charAt(0).toUpperCase()+i.slice(1):i,h[i]=be([c[o],l[o],d[o]],p);return h},_resolveDataElementOptions:function(e,t){var n=this,r=e&&e.custom,i=n._cachedDataOpts;if(i&&!r)return i;var o,a,s,l,c=n.chart,d=n._config,u=c.options.elements[n.dataElementType.prototype._type]||{},h=n._dataElementOptions,p={},f={chart:c,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},m={cacheable:!r};if(r=r||{},ae.isArray(h))for(a=0,s=h.length;a<s;++a)p[l=h[a]]=be([r[l],d[l],u[l]],f,t,m);else for(a=0,s=(o=Object.keys(h)).length;a<s;++a)p[l=o[a]]=be([r[l],d[h[l]],d[l],u[l]],f,t,m);return m.cacheable&&(n._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(e){ae.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model,o=ae.getHoverColor;e.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=be([r.hoverBackgroundColor,t.hoverBackgroundColor,o(i.backgroundColor)],void 0,n),i.borderColor=be([r.hoverBorderColor,t.hoverBorderColor,o(i.borderColor)],void 0,n),i.borderWidth=be([r.hoverBorderWidth,t.hoverBorderWidth,i.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,n,r,i,o,a=this.getMeta().dataset,s={};if(a){for(o=a._model,i=this._resolveDatasetElementOptions(a,!0),e=0,t=(r=Object.keys(i)).length;e<t;++e)s[n=r[e]]=o[n],o[n]=i[n];a.$previousStyle=s}},resyncElements:function(){var e=this,t=e.getMeta(),n=e.getDataset().data,r=t.data.length,i=n.length;i<r?t.data.splice(i,r-i):i>r&&e.insertElements(r,i-r)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),we.extend=ae.inherits;var Se=we,Te=2*Math.PI;function ke(e,t){var n=t.startAngle,r=t.endAngle,i=t.pixelMargin,o=i/t.outerRadius,a=t.x,s=t.y;e.beginPath(),e.arc(a,s,t.outerRadius,n-o,r+o),t.innerRadius>i?(o=i/t.innerRadius,e.arc(a,s,t.innerRadius-i,r+o,n-o,!0)):e.arc(a,s,i,r+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}function Ce(e,t,n,r){var i,o=n.endAngle;for(r&&(n.endAngle=n.startAngle+Te,ke(e,n),n.endAngle=o,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=Te,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+Te,n.startAngle,!0),i=0;i<n.fullCircles;++i)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+Te),i=0;i<n.fullCircles;++i)e.stroke()}function xe(e,t,n){var r="inner"===t.borderAlign;r?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&Ce(e,t,n,r),r&&ke(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}Z._set("global",{elements:{arc:{backgroundColor:Z.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Ae=fe.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var r=ae.getAngleFromPoint(n,{x:e,y:t}),i=r.angle,o=r.distance,a=n.startAngle,s=n.endAngle;s<a;)s+=Te;for(;i>s;)i-=Te;for(;i<a;)i+=Te;var l=i>=a&&i<=s,c=o>=n.innerRadius&&o<=n.outerRadius;return l&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,r="inner"===n.borderAlign?.33:0,i={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-r,0),pixelMargin:r,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/Te)};if(t.save(),t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,i.fullCircles){for(i.endAngle=i.startAngle+Te,t.beginPath(),t.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),t.closePath(),e=0;e<i.fullCircles;++e)t.fill();i.endAngle=i.startAngle+n.circumference%Te}t.beginPath(),t.arc(i.x,i.y,i.outerRadius,i.startAngle,i.endAngle),t.arc(i.x,i.y,i.innerRadius,i.endAngle,i.startAngle,!0),t.closePath(),t.fill(),n.borderWidth&&xe(t,n,i),t.restore()}}),Re=ae.valueOrDefault,Me=Z.global.defaultColor;Z._set("global",{elements:{line:{tension:.4,backgroundColor:Me,borderWidth:3,borderColor:Me,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var De=fe.extend({_type:"line",draw:function(){var e,t,n,r=this,i=r._view,o=r._chart.ctx,a=i.spanGaps,s=r._children.slice(),l=Z.global,c=l.elements.line,d=-1,u=r._loop;if(s.length){if(r._loop){for(e=0;e<s.length;++e)if(t=ae.previousItem(s,e),!s[e]._view.skip&&t._view.skip){s=s.slice(e).concat(s.slice(0,e)),u=a;break}u&&s.push(s[0])}for(o.save(),o.lineCap=i.borderCapStyle||c.borderCapStyle,o.setLineDash&&o.setLineDash(i.borderDash||c.borderDash),o.lineDashOffset=Re(i.borderDashOffset,c.borderDashOffset),o.lineJoin=i.borderJoinStyle||c.borderJoinStyle,o.lineWidth=Re(i.borderWidth,c.borderWidth),o.strokeStyle=i.borderColor||l.defaultColor,o.beginPath(),(n=s[0]._view).skip||(o.moveTo(n.x,n.y),d=0),e=1;e<s.length;++e)n=s[e]._view,t=-1===d?ae.previousItem(s,e):s[d],n.skip||(d!==e-1&&!a||-1===d?o.moveTo(n.x,n.y):ae.canvas.lineTo(o,t._view,n),d=e);u&&o.closePath(),o.stroke(),o.restore()}}}),Oe=ae.valueOrDefault,Ne=Z.global.defaultColor;function Le(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}function Ie(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius}Z._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Ne,borderColor:Ne,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Pe=fe.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:Le,inXRange:Le,inYRange:Ie,getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,r=t.pointStyle,i=t.rotation,o=t.radius,a=t.x,s=t.y,l=Z.global,c=l.defaultColor;t.skip||(void 0===e||ae.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||c,n.lineWidth=Oe(t.borderWidth,l.elements.point.borderWidth),n.fillStyle=t.backgroundColor||c,ae.canvas.drawPoint(n,r,o,a,s,i))}}),Fe=Z.global.defaultColor;function Be(e){return e&&void 0!==e.width}function Ye(e){var t,n,r,i,o;return Be(e)?(o=e.width/2,t=e.x-o,n=e.x+o,r=Math.min(e.y,e.base),i=Math.max(e.y,e.base)):(o=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),r=e.y-o,i=e.y+o),{left:t,top:r,right:n,bottom:i}}function He(e,t,n){return e===t?n:e===n?t:e}function Ue(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=He(t,"left","right")):e.base<e.y&&(t=He(t,"bottom","top")),n[t]=!0,n):n}function ze(e,t,n){var r,i,o,a,s=e.borderWidth,l=Ue(e);return ae.isObject(s)?(r=+s.top||0,i=+s.right||0,o=+s.bottom||0,a=+s.left||0):r=i=o=a=+s||0,{t:l.top||r<0?0:r>n?n:r,r:l.right||i<0?0:i>t?t:i,b:l.bottom||o<0?0:o>n?n:o,l:l.left||a<0?0:a>t?t:a}}function je(e){var t=Ye(e),n=t.right-t.left,r=t.bottom-t.top,i=ze(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b}}}function Ve(e,t,n){var r=null===t,i=null===n,o=!(!e||r&&i)&&Ye(e);return o&&(r||t>=o.left&&t<=o.right)&&(i||n>=o.top&&n<=o.bottom)}Z._set("global",{elements:{rectangle:{backgroundColor:Fe,borderColor:Fe,borderSkipped:"bottom",borderWidth:0}}});var Ge=fe.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=je(t),r=n.outer,i=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(r.x,r.y,r.w,r.h),r.w===i.w&&r.h===i.h||(e.save(),e.beginPath(),e.rect(r.x,r.y,r.w,r.h),e.clip(),e.fillStyle=t.borderColor,e.rect(i.x,i.y,i.w,i.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Ve(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return Be(n)?Ve(n,e,null):Ve(n,null,t)},inXRange:function(e){return Ve(this._view,e,null)},inYRange:function(e){return Ve(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return Be(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return Be(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),We={},qe=Ae,$e=De,Ke=Pe,Qe=Ge;We.Arc=qe,We.Line=$e,We.Point=Ke,We.Rectangle=Qe;var Xe=ae._deprecated,Ze=ae.valueOrDefault;function Je(e,t){var n,r,i,o,a=e._length;for(i=1,o=t.length;i<o;++i)a=Math.min(a,Math.abs(t[i]-t[i-1]));for(i=0,o=e.getTicks().length;i<o;++i)r=e.getPixelForTick(i),a=i>0?Math.min(a,Math.abs(r-n)):a,n=r;return a}function et(e,t,n){var r,i,o=n.barThickness,a=t.stackCount,s=t.pixels[e],l=ae.isNullOrUndef(o)?Je(t.scale,t.pixels):-1;return ae.isNullOrUndef(o)?(r=l*n.categoryPercentage,i=n.barPercentage):(r=o*a,i=1),{chunk:r/a,ratio:i,start:s-r/2}}function tt(e,t,n){var r,i=t.pixels,o=i[e],a=e>0?i[e-1]:null,s=e<i.length-1?i[e+1]:null,l=n.categoryPercentage;return null===a&&(a=o-(null===s?t.end-t.start:s-o)),null===s&&(s=o+o-a),r=o-(o-Math.min(a,s))/2*l,{chunk:Math.abs(s-a)/2*l/t.stackCount,ratio:n.barPercentage,start:r}}Z._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),Z._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var nt=Se.extend({dataElementType:We.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,n=this;Se.prototype.initialize.apply(n,arguments),(e=n.getMeta()).stack=n.getDataset().stack,e.bar=!0,t=n._getIndexScale().options,Xe("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Xe("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Xe("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Xe("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Xe("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,n,r=this,i=r.getMeta().data;for(r._ruler=r.getRuler(),t=0,n=i.length;t<n;++t)r.updateElement(i[t],t,e)},updateElement:function(e,t,n){var r=this,i=r.getMeta(),o=r.getDataset(),a=r._resolveDataElementOptions(e,t);e._xScale=r.getScaleForId(i.xAxisID),e._yScale=r.getScaleForId(i.yAxisID),e._datasetIndex=r.index,e._index=t,e._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:o.label,label:r.chart.data.labels[t]},ae.isArray(o.data[t])&&(e._model.borderSkipped=null),r._updateElementGeometry(e,t,n,a),e.pivot()},_updateElementGeometry:function(e,t,n,r){var i=this,o=e._model,a=i._getValueScale(),s=a.getBasePixel(),l=a.isHorizontal(),c=i._ruler||i.getRuler(),d=i.calculateBarValuePixels(i.index,t,r),u=i.calculateBarIndexPixels(i.index,t,c,r);o.horizontal=l,o.base=n?s:d.base,o.x=l?n?s:d.head:u.center,o.y=l?u.center:n?s:d.head,o.height=l?u.size:void 0,o.width=l?void 0:u.size},_getStacks:function(e){var t,n,r=this,i=r._getIndexScale(),o=i._getMatchingVisibleMetas(r._type),a=i.options.stacked,s=o.length,l=[];for(t=0;t<s&&(n=o[t],(!1===a||-1===l.indexOf(n.stack)||void 0===a&&void 0===n.stack)&&l.push(n.stack),n.index!==e);++t);return l},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),r=void 0!==t?n.indexOf(t):-1;return-1===r?n.length-1:r},getRuler:function(){var e,t,n=this,r=n._getIndexScale(),i=[];for(e=0,t=n.getMeta().data.length;e<t;++e)i.push(r.getPixelForValue(null,e,n.index));return{pixels:i,start:r._startPixel,end:r._endPixel,stackCount:n.getStackCount(),scale:r}},calculateBarValuePixels:function(e,t,n){var r,i,o,a,s,l,c,d=this,u=d.chart,h=d._getValueScale(),p=h.isHorizontal(),f=u.data.datasets,m=h._getMatchingVisibleMetas(d._type),_=h._parseValue(f[e].data[t]),g=n.minBarLength,b=h.options.stacked,v=d.getMeta().stack,y=void 0===_.start?0:_.max>=0&&_.min>=0?_.min:_.max,E=void 0===_.start?_.end:_.max>=0&&_.min>=0?_.max-_.min:_.min-_.max,w=m.length;if(b||void 0===b&&void 0!==v)for(r=0;r<w&&(i=m[r]).index!==e;++r)i.stack===v&&(o=void 0===(c=h._parseValue(f[i.index].data[t])).start?c.end:c.min>=0&&c.max>=0?c.max:c.min,(_.min<0&&o<0||_.max>=0&&o>0)&&(y+=o));return a=h.getPixelForValue(y),l=(s=h.getPixelForValue(y+E))-a,void 0!==g&&Math.abs(l)<g&&(l=g,s=E>=0&&!p||E<0&&p?a-g:a+g),{size:l,base:a,head:s,center:s+l/2}},calculateBarIndexPixels:function(e,t,n,r){var i=this,o="flex"===r.barThickness?tt(t,n,r):et(t,n,r),a=i.getStackIndex(e,i.getMeta().stack),s=o.start+o.chunk*a+o.chunk/2,l=Math.min(Ze(r.maxBarThickness,1/0),o.chunk*o.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}},draw:function(){var e=this,t=e.chart,n=e._getValueScale(),r=e.getMeta().data,i=e.getDataset(),o=r.length,a=0;for(ae.canvas.clipArea(t.ctx,t.chartArea);a<o;++a){var s=n._parseValue(i.data[a]);isNaN(s.min)||isNaN(s.max)||r[a].draw()}ae.canvas.unclipArea(t.ctx)},_resolveDataElementOptions:function(){var e=this,t=ae.extend({},Se.prototype._resolveDataElementOptions.apply(e,arguments)),n=e._getIndexScale().options,r=e._getValueScale().options;return t.barPercentage=Ze(n.barPercentage,t.barPercentage),t.barThickness=Ze(n.barThickness,t.barThickness),t.categoryPercentage=Ze(n.categoryPercentage,t.categoryPercentage),t.maxBarThickness=Ze(n.maxBarThickness,t.maxBarThickness),t.minBarLength=Ze(r.minBarLength,t.minBarLength),t}}),rt=ae.valueOrDefault,it=ae.options.resolve;Z._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",r=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+r.r+")"}}}});var ot=Se.extend({dataElementType:We.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta().data;ae.each(n,(function(n,r){t.updateElement(n,r,e)}))},updateElement:function(e,t,n){var r=this,i=r.getMeta(),o=e.custom||{},a=r.getScaleForId(i.xAxisID),s=r.getScaleForId(i.yAxisID),l=r._resolveDataElementOptions(e,t),c=r.getDataset().data[t],d=r.index,u=n?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof c?c:NaN,t,d),h=n?s.getBasePixel():s.getPixelForValue(c,t,d);e._xScale=a,e._yScale=s,e._options=l,e._datasetIndex=d,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:o.skip||isNaN(u)||isNaN(h),x:u,y:h},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,r=ae.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=rt(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=rt(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=rt(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,r=n.chart,i=n.getDataset(),o=e.custom||{},a=i.data[t]||{},s=Se.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:r,dataIndex:t,dataset:i,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=ae.extend({},s)),s.radius=it([o.radius,a.r,n._config.radius,r.options.elements.point.radius],l,t),s}}),at=ae.valueOrDefault,st=Math.PI,lt=2*st,ct=st/2;Z._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,n,r,i=document.createElement("ul"),o=e.data,a=o.datasets,s=o.labels;if(i.setAttribute("class",e.id+"-legend"),a.length)for(t=0,n=a[0].data.length;t<n;++t)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[t],s[t]&&r.appendChild(document.createTextNode(s[t]));return i.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(n,r){var i=e.getDatasetMeta(0),o=i.controller.getStyle(r);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(e,t){var n,r,i,o=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(i=a.getDatasetMeta(n)).data[o]&&(i.data[o].hidden=!i.data[o].hidden);a.update()}},cutoutPercentage:50,rotation:-ct,circumference:lt,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],r=": "+t.datasets[e.datasetIndex].data[e.index];return ae.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}});var dt=Se.extend({dataElementType:We.Arc,linkScales:ae.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,r,i,o=this,a=o.chart,s=a.chartArea,l=a.options,c=1,d=1,u=0,h=0,p=o.getMeta(),f=p.data,m=l.cutoutPercentage/100||0,_=l.circumference,g=o._getRingWeight(o.index);if(_<lt){var b=l.rotation%lt,v=(b+=b>=st?-lt:b<-st?lt:0)+_,y=Math.cos(b),E=Math.sin(b),w=Math.cos(v),S=Math.sin(v),T=b<=0&&v>=0||v>=lt,k=b<=ct&&v>=ct||v>=lt+ct,C=b<=-ct&&v>=-ct||v>=st+ct,x=b===-st||v>=st?-1:Math.min(y,y*m,w,w*m),A=C?-1:Math.min(E,E*m,S,S*m),R=T?1:Math.max(y,y*m,w,w*m),M=k?1:Math.max(E,E*m,S,S*m);c=(R-x)/2,d=(M-A)/2,u=-(R+x)/2,h=-(M+A)/2}for(r=0,i=f.length;r<i;++r)f[r]._options=o._resolveDataElementOptions(f[r],r);for(a.borderWidth=o.getMaxBorderWidth(),t=(s.right-s.left-a.borderWidth)/c,n=(s.bottom-s.top-a.borderWidth)/d,a.outerRadius=Math.max(Math.min(t,n)/2,0),a.innerRadius=Math.max(a.outerRadius*m,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(o._getVisibleDatasetWeightTotal()||1),a.offsetX=u*a.outerRadius,a.offsetY=h*a.outerRadius,p.total=o.calculateTotal(),o.outerRadius=a.outerRadius-a.radiusLength*o._getRingWeightOffset(o.index),o.innerRadius=Math.max(o.outerRadius-a.radiusLength*g,0),r=0,i=f.length;r<i;++r)o.updateElement(f[r],r,e)},updateElement:function(e,t,n){var r=this,i=r.chart,o=i.chartArea,a=i.options,s=a.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,d=a.rotation,u=a.rotation,h=r.getDataset(),p=n&&s.animateRotate||e.hidden?0:r.calculateCircumference(h.data[t])*(a.circumference/lt),f=n&&s.animateScale?0:r.innerRadius,m=n&&s.animateScale?0:r.outerRadius,_=e._options||{};ae.extend(e,{_datasetIndex:r.index,_index:t,_model:{backgroundColor:_.backgroundColor,borderColor:_.borderColor,borderWidth:_.borderWidth,borderAlign:_.borderAlign,x:l+i.offsetX,y:c+i.offsetY,startAngle:d,endAngle:u,circumference:p,outerRadius:m,innerRadius:f,label:ae.valueAtIndexOrDefault(h.label,t,i.data.labels[t])}});var g=e._model;n&&s.animateRotate||(g.startAngle=0===t?a.rotation:r.getMeta().data[t-1]._model.endAngle,g.endAngle=g.startAngle+g.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),r=0;return ae.each(n.data,(function(n,i){e=t.data[i],isNaN(e)||n.hidden||(r+=Math.abs(e))})),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?lt*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,r,i,o,a,s,l,c=this,d=0,u=c.chart;if(!e)for(t=0,n=u.data.datasets.length;t<n;++t)if(u.isDatasetVisible(t)){e=(r=u.getDatasetMeta(t)).data,t!==c.index&&(o=r.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)i=e[t],o?(o._configure(),a=o._resolveDataElementOptions(i,t)):a=i._options,"inner"!==a.borderAlign&&(s=a.borderWidth,d=(l=a.hoverBorderWidth)>(d=s>d?s:d)?l:d);return d},setHoverStyle:function(e){var t=e._model,n=e._options,r=ae.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=at(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=at(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=at(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(at(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});Z._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),Z._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ut=nt.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),ht=ae.valueOrDefault,pt=ae.options.resolve,ft=ae.canvas._isPointInArea;function mt(e,t){var n=e&&e.options.ticks||{},r=n.reverse,i=void 0===n.min?t:0,o=void 0===n.max?t:0;return{start:r?o:i,end:r?i:o}}function _t(e,t,n){var r=n/2,i=mt(e,r),o=mt(t,r);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function gt(e){var t,n,r,i;return ae.isObject(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i}}Z._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var bt=Se.extend({datasetElementType:We.Line,dataElementType:We.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,n,r=this,i=r.getMeta(),o=i.dataset,a=i.data||[],s=r.chart.options,l=r._config,c=r._showLine=ht(l.showLine,s.showLines);for(r._xScale=r.getScaleForId(i.xAxisID),r._yScale=r.getScaleForId(i.yAxisID),c&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=r._yScale,o._datasetIndex=r.index,o._children=a,o._model=r._resolveDatasetElementOptions(o),o.pivot()),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e);for(c&&0!==o._model.tension&&r.updateBezierControlPoints(),t=0,n=a.length;t<n;++t)a[t].pivot()},updateElement:function(e,t,n){var r,i,o=this,a=o.getMeta(),s=e.custom||{},l=o.getDataset(),c=o.index,d=l.data[t],u=o._xScale,h=o._yScale,p=a.dataset._model,f=o._resolveDataElementOptions(e,t);r=u.getPixelForValue("object"==typeof d?d:NaN,t,c),i=n?h.getBasePixel():o.calculatePointY(d,t,c),e._xScale=u,e._yScale=h,e._options=f,e._datasetIndex=c,e._index=t,e._model={x:r,y:i,skip:s.skip||isNaN(r)||isNaN(i),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:ht(s.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,n=t._config,r=e.custom||{},i=t.chart.options,o=i.elements.line,a=Se.prototype._resolveDatasetElementOptions.apply(t,arguments);return a.spanGaps=ht(n.spanGaps,i.spanGaps),a.tension=ht(n.lineTension,o.tension),a.steppedLine=pt([r.steppedLine,n.steppedLine,o.stepped]),a.clip=gt(ht(n.clip,_t(t._xScale,t._yScale,a.borderWidth))),a},calculatePointY:function(e,t,n){var r,i,o,a,s,l,c,d=this,u=d.chart,h=d._yScale,p=0,f=0;if(h.options.stacked){for(s=+h.getRightValue(e),c=(l=u._getSortedVisibleDatasetMetas()).length,r=0;r<c&&(o=l[r]).index!==n;++r)i=u.data.datasets[o.index],"line"===o.type&&o.yAxisID===h.id&&((a=+h.getRightValue(i.data[t]))<0?f+=a||0:p+=a||0);return s<0?h.getPixelForValue(f+s):h.getPixelForValue(p+s)}return h.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,n,r,i=this,o=i.chart,a=i.getMeta(),s=a.dataset._model,l=o.chartArea,c=a.data||[];function d(e,t,n){return Math.max(Math.min(e,n),t)}if(s.spanGaps&&(c=c.filter((function(e){return!e._model.skip}))),"monotone"===s.cubicInterpolationMode)ae.splineCurveMonotone(c);else for(e=0,t=c.length;e<t;++e)n=c[e]._model,r=ae.splineCurve(ae.previousItem(c,e)._model,n,ae.nextItem(c,e)._model,s.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(o.options.elements.line.capBezierPoints)for(e=0,t=c.length;e<t;++e)n=c[e]._model,ft(n,l)&&(e>0&&ft(c[e-1]._model,l)&&(n.controlPointPreviousX=d(n.controlPointPreviousX,l.left,l.right),n.controlPointPreviousY=d(n.controlPointPreviousY,l.top,l.bottom)),e<c.length-1&&ft(c[e+1]._model,l)&&(n.controlPointNextX=d(n.controlPointNextX,l.left,l.right),n.controlPointNextY=d(n.controlPointNextY,l.top,l.bottom)))},draw:function(){var e,t=this,n=t.chart,r=t.getMeta(),i=r.data||[],o=n.chartArea,a=n.canvas,s=0,l=i.length;for(t._showLine&&(e=r.dataset._model.clip,ae.canvas.clipArea(n.ctx,{left:!1===e.left?0:o.left-e.left,right:!1===e.right?a.width:o.right+e.right,top:!1===e.top?0:o.top-e.top,bottom:!1===e.bottom?a.height:o.bottom+e.bottom}),r.dataset.draw(),ae.canvas.unclipArea(n.ctx));s<l;++s)i[s].draw(o)},setHoverStyle:function(e){var t=e._model,n=e._options,r=ae.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ht(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=ht(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=ht(n.hoverBorderWidth,n.borderWidth),t.radius=ht(n.hoverRadius,n.radius)}}),vt=ae.options.resolve;Z._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,n,r,i=document.createElement("ul"),o=e.data,a=o.datasets,s=o.labels;if(i.setAttribute("class",e.id+"-legend"),a.length)for(t=0,n=a[0].data.length;t<n;++t)(r=i.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[t],s[t]&&r.appendChild(document.createTextNode(s[t]));return i.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((function(n,r){var i=e.getDatasetMeta(0),o=i.controller.getStyle(r);return{text:n,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,hidden:isNaN(t.datasets[0].data[r])||i.data[r].hidden,index:r}})):[]}},onClick:function(e,t){var n,r,i,o=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(i=a.getDatasetMeta(n)).data[o].hidden=!i.data[o].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var yt=Se.extend({dataElementType:We.Arc,linkScales:ae.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,r,i=this,o=i.getDataset(),a=i.getMeta(),s=i.chart.options.startAngle||0,l=i._starts=[],c=i._angles=[],d=a.data;for(i._updateRadius(),a.count=i.countVisibleElements(),t=0,n=o.data.length;t<n;t++)l[t]=s,r=i._computeAngle(t),c[t]=r,s+=r;for(t=0,n=d.length;t<n;++t)d[t]._options=i._resolveDataElementOptions(d[t],t),i.updateElement(d[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,r=t.options,i=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(i/2,0),t.innerRadius=Math.max(r.cutoutPercentage?t.outerRadius/100*r.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var r=this,i=r.chart,o=r.getDataset(),a=i.options,s=a.animation,l=i.scale,c=i.data.labels,d=l.xCenter,u=l.yCenter,h=a.startAngle,p=e.hidden?0:l.getDistanceFromCenterForValue(o.data[t]),f=r._starts[t],m=f+(e.hidden?0:r._angles[t]),_=s.animateScale?0:l.getDistanceFromCenterForValue(o.data[t]),g=e._options||{};ae.extend(e,{_datasetIndex:r.index,_index:t,_scale:l,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:d,y:u,innerRadius:0,outerRadius:n?_:p,startAngle:n&&s.animateRotate?h:f,endAngle:n&&s.animateRotate?h:m,label:ae.valueAtIndexOrDefault(c,t,c[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return ae.each(t.data,(function(t,r){isNaN(e.data[r])||t.hidden||n++})),n},setHoverStyle:function(e){var t=e._model,n=e._options,r=ae.getHoverColor,i=ae.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=i(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=i(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=i(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,r=t.getDataset(),i=t.getMeta();if(isNaN(r.data[e])||i.data[e].hidden)return 0;var o={chart:t.chart,dataIndex:e,dataset:r,datasetIndex:t.index};return vt([t.chart.options.elements.arc.angle,2*Math.PI/n],o,e)}});Z._set("pie",ae.clone(Z.doughnut)),Z._set("pie",{cutoutPercentage:0});var Et=dt,wt=ae.valueOrDefault;Z._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var St=Se.extend({datasetElementType:We.Line,dataElementType:We.Point,linkScales:ae.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,r=this,i=r.getMeta(),o=i.dataset,a=i.data||[],s=r.chart.scale,l=r._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),o._scale=s,o._datasetIndex=r.index,o._children=a,o._loop=!0,o._model=r._resolveDatasetElementOptions(o),o.pivot(),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e);for(r.updateBezierControlPoints(),t=0,n=a.length;t<n;++t)a[t].pivot()},updateElement:function(e,t,n){var r=this,i=e.custom||{},o=r.getDataset(),a=r.chart.scale,s=a.getPointPositionForValue(t,o.data[t]),l=r._resolveDataElementOptions(e,t),c=r.getMeta().dataset._model,d=n?a.xCenter:s.x,u=n?a.yCenter:s.y;e._scale=a,e._options=l,e._datasetIndex=r.index,e._index=t,e._model={x:d,y:u,skip:i.skip||isNaN(d)||isNaN(u),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:wt(i.tension,c?c.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,n=e.chart.options,r=Se.prototype._resolveDatasetElementOptions.apply(e,arguments);return r.spanGaps=wt(t.spanGaps,n.spanGaps),r.tension=wt(t.lineTension,n.elements.line.tension),r},updateBezierControlPoints:function(){var e,t,n,r,i=this,o=i.getMeta(),a=i.chart.chartArea,s=o.data||[];function l(e,t,n){return Math.max(Math.min(e,n),t)}for(o.dataset._model.spanGaps&&(s=s.filter((function(e){return!e._model.skip}))),e=0,t=s.length;e<t;++e)n=s[e]._model,r=ae.splineCurve(ae.previousItem(s,e,!0)._model,n,ae.nextItem(s,e,!0)._model,n.tension),n.controlPointPreviousX=l(r.previous.x,a.left,a.right),n.controlPointPreviousY=l(r.previous.y,a.top,a.bottom),n.controlPointNextX=l(r.next.x,a.left,a.right),n.controlPointNextY=l(r.next.y,a.top,a.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,r=ae.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=wt(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=wt(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=wt(n.hoverBorderWidth,n.borderWidth),t.radius=wt(n.hoverRadius,n.radius)}});Z._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),Z._set("global",{datasets:{scatter:{showLine:!1}}});var Tt={bar:nt,bubble:ot,doughnut:dt,horizontalBar:ut,line:bt,polarArea:yt,pie:Et,radar:St,scatter:bt};function kt(e,t){return e.native?{x:e.x,y:e.y}:ae.getRelativePosition(e,t)}function Ct(e,t){var n,r,i,o,a,s,l=e._getSortedVisibleDatasetMetas();for(r=0,o=l.length;r<o;++r)for(i=0,a=(n=l[r].data).length;i<a;++i)(s=n[i])._view.skip||t(s)}function xt(e,t){var n=[];return Ct(e,(function(e){e.inRange(t.x,t.y)&&n.push(e)})),n}function At(e,t,n,r){var i=Number.POSITIVE_INFINITY,o=[];return Ct(e,(function(e){if(!n||e.inRange(t.x,t.y)){var a=e.getCenterPoint(),s=r(t,a);s<i?(o=[e],i=s):s===i&&o.push(e)}})),o}function Rt(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Mt(e,t,n){var r=kt(t,e);n.axis=n.axis||"x";var i=Rt(n.axis),o=n.intersect?xt(e,r):At(e,r,!1,i),a=[];return o.length?(e._getSortedVisibleDatasetMetas().forEach((function(e){var t=e.data[o[0]._index];t&&!t._view.skip&&a.push(t)})),a):[]}var Dt={modes:{single:function(e,t){var n=kt(t,e),r=[];return Ct(e,(function(e){if(e.inRange(n.x,n.y))return r.push(e),r})),r.slice(0,1)},label:Mt,index:Mt,dataset:function(e,t,n){var r=kt(t,e);n.axis=n.axis||"xy";var i=Rt(n.axis),o=n.intersect?xt(e,r):At(e,r,!1,i);return o.length>0&&(o=e.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(e,t){return Mt(e,t,{intersect:!1})},point:function(e,t){return xt(e,kt(t,e))},nearest:function(e,t,n){var r=kt(t,e);n.axis=n.axis||"xy";var i=Rt(n.axis);return At(e,r,n.intersect,i)},x:function(e,t,n){var r=kt(t,e),i=[],o=!1;return Ct(e,(function(e){e.inXRange(r.x)&&i.push(e),e.inRange(r.x,r.y)&&(o=!0)})),n.intersect&&!o&&(i=[]),i},y:function(e,t,n){var r=kt(t,e),i=[],o=!1;return Ct(e,(function(e){e.inYRange(r.y)&&i.push(e),e.inRange(r.x,r.y)&&(o=!0)})),n.intersect&&!o&&(i=[]),i}}},Ot=ae.extend;function Nt(e,t){return ae.where(e,(function(e){return e.pos===t}))}function Lt(e,t){return e.sort((function(e,n){var r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function It(e){var t,n,r,i=[];for(t=0,n=(e||[]).length;t<n;++t)r=e[t],i.push({index:t,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight});return i}function Pt(e,t){var n,r,i;for(n=0,r=e.length;n<r;++n)(i=e[n]).width=i.horizontal?i.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,i.height=i.horizontal&&t.hBoxMaxHeight}function Ft(e){var t=It(e),n=Lt(Nt(t,"left"),!0),r=Lt(Nt(t,"right")),i=Lt(Nt(t,"top"),!0),o=Lt(Nt(t,"bottom"));return{leftAndTop:n.concat(i),rightAndBottom:r.concat(o),chartArea:Nt(t,"chartArea"),vertical:n.concat(r),horizontal:i.concat(o)}}function Bt(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function Yt(e,t,n){var r,i,o=n.box,a=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?o.height:o.width,e[n.pos]+=n.size,o.getPadding){var s=o.getPadding();a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}if(r=t.outerWidth-Bt(a,e,"left","right"),i=t.outerHeight-Bt(a,e,"top","bottom"),r!==e.w||i!==e.h){e.w=r,e.h=i;var l=n.horizontal?[r,e.w]:[i,e.h];return!(l[0]===l[1]||isNaN(l[0])&&isNaN(l[1]))}}function Ht(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Ut(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function zt(e,t,n){var r,i,o,a,s,l,c=[];for(r=0,i=e.length;r<i;++r)(a=(o=e[r]).box).update(o.width||t.w,o.height||t.h,Ut(o.horizontal,t)),Yt(t,n,o)&&(l=!0,c.length&&(s=!0)),a.fullWidth||c.push(o);return s&&zt(c,t,n)||l}function jt(e,t,n){var r,i,o,a,s=n.padding,l=t.x,c=t.y;for(r=0,i=e.length;r<i;++r)a=(o=e[r]).box,o.horizontal?(a.left=a.fullWidth?s.left:t.left,a.right=a.fullWidth?n.outerWidth-s.right:t.left+t.w,a.top=c,a.bottom=c+a.height,a.width=a.right-a.left,c=a.bottom):(a.left=l,a.right=l+a.width,a.top=t.top,a.bottom=t.top+t.h,a.height=a.bottom-a.top,l=a.right);t.x=l,t.y=c}Z._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var Vt={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var r,i=["fullWidth","position","weight"],o=i.length,a=0;a<o;++a)r=i[a],n.hasOwnProperty(r)&&(t[r]=n[r])},update:function(e,t,n){if(e){var r=e.options.layout||{},i=ae.options.toPadding(r.padding),o=t-i.width,a=n-i.height,s=Ft(e.boxes),l=s.vertical,c=s.horizontal,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:o,vBoxMaxWidth:o/2/l.length,hBoxMaxHeight:a/2}),u=Ot({maxPadding:Ot({},i),w:o,h:a,x:i.left,y:i.top},i);Pt(l.concat(c),d),zt(l,u,d),zt(c,u,d)&&zt(l,u,d),Ht(u),jt(s.leftAndTop,u,d),u.x+=u.w,u.y+=u.h,jt(s.rightAndBottom,u,d),e.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h},ae.each(s.chartArea,(function(t){var n=t.box;Ot(n,e.chartArea),n.update(u.w,u.h)}))}}},Gt={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Wt="/*\r\n * DOM element rendering detection\r\n * https://davidwalsh.name/detect-node-insertion\r\n */\r\n@keyframes chartjs-render-animation {\r\n\tfrom { opacity: 0.99; }\r\n\tto { opacity: 1; }\r\n}\r\n\r\n.chartjs-render-monitor {\r\n\tanimation: chartjs-render-animation 0.001s;\r\n}\r\n\r\n/*\r\n * DOM element resizing detection\r\n * https://github.com/marcj/css-element-queries\r\n */\r\n.chartjs-size-monitor,\r\n.chartjs-size-monitor-expand,\r\n.chartjs-size-monitor-shrink {\r\n\tposition: absolute;\r\n\tdirection: ltr;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\toverflow: hidden;\r\n\tpointer-events: none;\r\n\tvisibility: hidden;\r\n\tz-index: -1;\r\n}\r\n\r\n.chartjs-size-monitor-expand > div {\r\n\tposition: absolute;\r\n\twidth: 1000000px;\r\n\theight: 1000000px;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n\r\n.chartjs-size-monitor-shrink > div {\r\n\tposition: absolute;\r\n\twidth: 200%;\r\n\theight: 200%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n}\r\n",qt=n(Object.freeze({__proto__:null,default:Wt})),$t="$chartjs",Kt="chartjs-",Qt=Kt+"size-monitor",Xt=Kt+"render-monitor",Zt=Kt+"render-animation",Jt=["animationstart","webkitAnimationStart"],en={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function tn(e,t){var n=ae.getStyle(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}function nn(e,t){var n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[$t]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===i||""===i){var o=tn(e,"width");void 0!==o&&(e.width=o)}if(null===r||""===r)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var a=tn(e,"height");void 0!==o&&(e.height=a)}return e}var rn=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};function on(e,t,n){e.addEventListener(t,n,rn)}function an(e,t,n){e.removeEventListener(t,n,rn)}function sn(e,t,n,r,i){return{type:e,chart:t,native:i||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function ln(e,t){var n=en[e.type]||e.type,r=ae.getRelativePosition(e,t);return sn(n,t,r.x,r.y,e)}function cn(e,t){var n=!1,r=[];return function(){r=Array.prototype.slice.call(arguments),t=t||this,n||(n=!0,ae.requestAnimFrame.call(window,(function(){n=!1,e.apply(t,r)})))}}function dn(e){var t=document.createElement("div");return t.className=e||"",t}function un(e){var t=1e6,n=dn(Qt),r=dn(Qt+"-expand"),i=dn(Qt+"-shrink");r.appendChild(dn()),i.appendChild(dn()),n.appendChild(r),n.appendChild(i),n._reset=function(){r.scrollLeft=t,r.scrollTop=t,i.scrollLeft=t,i.scrollTop=t};var o=function(){n._reset(),e()};return on(r,"scroll",o.bind(r,"expand")),on(i,"scroll",o.bind(i,"shrink")),n}function hn(e,t){var n=e[$t]||(e[$t]={}),r=n.renderProxy=function(e){e.animationName===Zt&&t()};ae.each(Jt,(function(t){on(e,t,r)})),n.reflow=!!e.offsetParent,e.classList.add(Xt)}function pn(e){var t=e[$t]||{},n=t.renderProxy;n&&(ae.each(Jt,(function(t){an(e,t,n)})),delete t.renderProxy),e.classList.remove(Xt)}function fn(e,t,n){var r=e[$t]||(e[$t]={}),i=r.resizer=un(cn((function(){if(r.resizer){var i=n.options.maintainAspectRatio&&e.parentNode,o=i?i.clientWidth:0;t(sn("resize",n)),i&&i.clientWidth<o&&n.canvas&&t(sn("resize",n))}})));hn(e,(function(){if(r.resizer){var t=e.parentNode;t&&t!==i.parentNode&&t.insertBefore(i,t.firstChild),i._reset()}}))}function mn(e){var t=e[$t]||{},n=t.resizer;delete t.resizer,pn(e),n&&n.parentNode&&n.parentNode.removeChild(n)}function _n(e,t){var n=e[$t]||(e[$t]={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var r=document.createElement("style");r.setAttribute("type","text/css"),r.appendChild(document.createTextNode(t)),e.appendChild(r)}}var gn={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;_n(t.host?t:document.head,qt)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),nn(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[$t]){var n=t[$t].initial;["height","width"].forEach((function(e){var r=n[e];ae.isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)})),ae.each(n.style||{},(function(e,n){t.style[n]=e})),t.width=t.width,delete t[$t]}},addEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var i=n[$t]||(n[$t]={});on(r,t,(i.proxies||(i.proxies={}))[e.id+"_"+t]=function(t){n(ln(t,e))})}else fn(r,n,e)},removeEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var i=((n[$t]||{}).proxies||{})[e.id+"_"+t];i&&an(r,t,i)}else mn(r)}};ae.addEvent=on,ae.removeEvent=an;var bn=gn._enabled?gn:Gt,vn=ae.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},bn);Z._set("global",{plugins:{}});var yn={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach((function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)})),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var r,i,o,a,s,l=this.descriptors(e),c=l.length;for(r=0;r<c;++r)if("function"==typeof(s=(o=(i=l[r]).plugin)[t])&&((a=[e].concat(n||[])).push(i.options),!1===s.apply(o,a)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],r=[],i=e&&e.config||{},o=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach((function(e){if(-1===n.indexOf(e)){var t=e.id,i=o[t];!1!==i&&(!0===i&&(i=ae.clone(Z.global.plugins[t])),n.push(e),r.push({plugin:e,options:i||{}}))}})),t.descriptors=r,t.id=this._cacheId,r},_invalidate:function(e){delete e.$plugins}},En={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=ae.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ae.merge(Object.create(null),[Z.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var n=this;n.defaults.hasOwnProperty(e)&&(n.defaults[e]=ae.extend(n.defaults[e],t))},addScalesToLayout:function(e){ae.each(e.scales,(function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,Vt.addBox(e,t)}))}},wn=ae.valueOrDefault,Sn=ae.rtl.getRtlAdapter;Z._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ae.noop,title:function(e,t){var n="",r=t.labels,i=r?r.length:0;if(e.length>0){var o=e[0];o.label?n=o.label:o.xLabel?n=o.xLabel:i>0&&o.index<i&&(n=r[o.index])}return n},afterTitle:ae.noop,beforeBody:ae.noop,beforeLabel:ae.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),ae.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ae.noop,afterBody:ae.noop,beforeFooter:ae.noop,footer:ae.noop,afterFooter:ae.noop}}});var Tn={average:function(e){if(!e.length)return!1;var t,n,r=0,i=0,o=0;for(t=0,n=e.length;t<n;++t){var a=e[t];if(a&&a.hasValue()){var s=a.tooltipPosition();r+=s.x,i+=s.y,++o}}return{x:r/o,y:i/o}},nearest:function(e,t){var n,r,i,o=t.x,a=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var l=e[n];if(l&&l.hasValue()){var c=l.getCenterPoint(),d=ae.distanceBetweenPoints(t,c);d<s&&(s=d,i=l)}}if(i){var u=i.tooltipPosition();o=u.x,a=u.y}return{x:o,y:a}}};function kn(e,t){return t&&(ae.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Cn(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function xn(e){var t=e._xScale,n=e._yScale||e._scale,r=e._index,i=e._datasetIndex,o=e._chart.getDatasetMeta(i).controller,a=o._getIndexScale(),s=o._getValueScale();return{xLabel:t?t.getLabelForIndex(r,i):"",yLabel:n?n.getLabelForIndex(r,i):"",label:a?""+a.getLabelForIndex(r,i):"",value:s?""+s.getLabelForIndex(r,i):"",index:r,datasetIndex:i,x:e._model.x,y:e._model.y}}function An(e){var t=Z.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:wn(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:wn(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:wn(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:wn(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:wn(e.titleFontStyle,t.defaultFontStyle),titleFontSize:wn(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:wn(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:wn(e.footerFontStyle,t.defaultFontStyle),footerFontSize:wn(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Rn(e,t){var n=e._chart.ctx,r=2*t.yPadding,i=0,o=t.body,a=o.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);a+=t.beforeBody.length+t.afterBody.length;var s=t.title.length,l=t.footer.length,c=t.titleFontSize,d=t.bodyFontSize,u=t.footerFontSize;r+=s*c,r+=s?(s-1)*t.titleSpacing:0,r+=s?t.titleMarginBottom:0,r+=a*d,r+=a?(a-1)*t.bodySpacing:0,r+=l?t.footerMarginTop:0,r+=l*u,r+=l?(l-1)*t.footerSpacing:0;var h=0,p=function(e){i=Math.max(i,n.measureText(e).width+h)};return n.font=ae.fontString(c,t._titleFontStyle,t._titleFontFamily),ae.each(t.title,p),n.font=ae.fontString(d,t._bodyFontStyle,t._bodyFontFamily),ae.each(t.beforeBody.concat(t.afterBody),p),h=t.displayColors?d+2:0,ae.each(o,(function(e){ae.each(e.before,p),ae.each(e.lines,p),ae.each(e.after,p)})),h=0,n.font=ae.fontString(u,t._footerFontStyle,t._footerFontFamily),ae.each(t.footer,p),{width:i+=2*t.xPadding,height:r}}function Mn(e,t){var n,r,i,o,a,s=e._model,l=e._chart,c=e._chart.chartArea,d="center",u="center";s.y<t.height?u="top":s.y>l.height-t.height&&(u="bottom");var h=(c.left+c.right)/2,p=(c.top+c.bottom)/2;"center"===u?(n=function(e){return e<=h},r=function(e){return e>h}):(n=function(e){return e<=t.width/2},r=function(e){return e>=l.width-t.width/2}),i=function(e){return e+t.width+s.caretSize+s.caretPadding>l.width},o=function(e){return e-t.width-s.caretSize-s.caretPadding<0},a=function(e){return e<=p?"top":"bottom"},n(s.x)?(d="left",i(s.x)&&(d="center",u=a(s.y))):r(s.x)&&(d="right",o(s.x)&&(d="center",u=a(s.y)));var f=e._options;return{xAlign:f.xAlign?f.xAlign:d,yAlign:f.yAlign?f.yAlign:u}}function Dn(e,t,n,r){var i=e.x,o=e.y,a=e.caretSize,s=e.caretPadding,l=e.cornerRadius,c=n.xAlign,d=n.yAlign,u=a+s,h=l+s;return"right"===c?i-=t.width:"center"===c&&((i-=t.width/2)+t.width>r.width&&(i=r.width-t.width),i<0&&(i=0)),"top"===d?o+=u:o-="bottom"===d?t.height+u:t.height/2,"center"===d?"left"===c?i+=u:"right"===c&&(i-=u):"left"===c?i-=h:"right"===c&&(i+=h),{x:i,y:o}}function On(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Nn(e){return kn([],Cn(e))}var Ln=fe.extend({initialize:function(){this._model=An(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options.callbacks,n=t.beforeTitle.apply(e,arguments),r=t.title.apply(e,arguments),i=t.afterTitle.apply(e,arguments),o=[];return o=kn(o,Cn(n)),o=kn(o,Cn(r)),o=kn(o,Cn(i))},getBeforeBody:function(){return Nn(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,r=n._options.callbacks,i=[];return ae.each(e,(function(e){var o={before:[],lines:[],after:[]};kn(o.before,Cn(r.beforeLabel.call(n,e,t))),kn(o.lines,r.label.call(n,e,t)),kn(o.after,Cn(r.afterLabel.call(n,e,t))),i.push(o)})),i},getAfterBody:function(){return Nn(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),r=t.footer.apply(e,arguments),i=t.afterFooter.apply(e,arguments),o=[];return o=kn(o,Cn(n)),o=kn(o,Cn(r)),o=kn(o,Cn(i))},update:function(e){var t,n,r=this,i=r._options,o=r._model,a=r._model=An(i),s=r._active,l=r._data,c={xAlign:o.xAlign,yAlign:o.yAlign},d={x:o.x,y:o.y},u={width:o.width,height:o.height},h={x:o.caretX,y:o.caretY};if(s.length){a.opacity=1;var p=[],f=[];h=Tn[i.position].call(r,s,r._eventPosition);var m=[];for(t=0,n=s.length;t<n;++t)m.push(xn(s[t]));i.filter&&(m=m.filter((function(e){return i.filter(e,l)}))),i.itemSort&&(m=m.sort((function(e,t){return i.itemSort(e,t,l)}))),ae.each(m,(function(e){p.push(i.callbacks.labelColor.call(r,e,r._chart)),f.push(i.callbacks.labelTextColor.call(r,e,r._chart))})),a.title=r.getTitle(m,l),a.beforeBody=r.getBeforeBody(m,l),a.body=r.getBody(m,l),a.afterBody=r.getAfterBody(m,l),a.footer=r.getFooter(m,l),a.x=h.x,a.y=h.y,a.caretPadding=i.caretPadding,a.labelColors=p,a.labelTextColors=f,a.dataPoints=m,d=Dn(a,u=Rn(this,a),c=Mn(this,u),r._chart)}else a.opacity=0;return a.xAlign=c.xAlign,a.yAlign=c.yAlign,a.x=d.x,a.y=d.y,a.width=u.width,a.height=u.height,a.caretX=h.x,a.caretY=h.y,r._model=a,e&&i.custom&&i.custom.call(r,a),r},drawCaret:function(e,t){var n=this._chart.ctx,r=this._view,i=this.getCaretPosition(e,t,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(e,t,n){var r,i,o,a,s,l,c=n.caretSize,d=n.cornerRadius,u=n.xAlign,h=n.yAlign,p=e.x,f=e.y,m=t.width,_=t.height;if("center"===h)s=f+_/2,"left"===u?(i=(r=p)-c,o=r,a=s+c,l=s-c):(i=(r=p+m)+c,o=r,a=s-c,l=s+c);else if("left"===u?(r=(i=p+d+c)-c,o=i+c):"right"===u?(r=(i=p+m-d-c)-c,o=i+c):(r=(i=n.caretX)-c,o=i+c),"top"===h)s=(a=f)-c,l=a;else{s=(a=f+_)+c,l=a;var g=o;o=r,r=g}return{x1:r,x2:i,x3:o,y1:a,y2:s,y3:l}},drawTitle:function(e,t,n){var r,i,o,a=t.title,s=a.length;if(s){var l=Sn(t.rtl,t.x,t.width);for(e.x=On(t,t._titleAlign),n.textAlign=l.textAlign(t._titleAlign),n.textBaseline="middle",r=t.titleFontSize,i=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=ae.fontString(r,t._titleFontStyle,t._titleFontFamily),o=0;o<s;++o)n.fillText(a[o],l.x(e.x),e.y+r/2),e.y+=r+i,o+1===s&&(e.y+=t.titleMarginBottom-i)}},drawBody:function(e,t,n){var r,i,o,a,s,l,c,d,u=t.bodyFontSize,h=t.bodySpacing,p=t._bodyAlign,f=t.body,m=t.displayColors,_=0,g=m?On(t,"left"):0,b=Sn(t.rtl,t.x,t.width),v=function(t){n.fillText(t,b.x(e.x+_),e.y+u/2),e.y+=u+h},y=b.textAlign(p);for(n.textAlign=p,n.textBaseline="middle",n.font=ae.fontString(u,t._bodyFontStyle,t._bodyFontFamily),e.x=On(t,y),n.fillStyle=t.bodyFontColor,ae.each(t.beforeBody,v),_=m&&"right"!==y?"center"===p?u/2+1:u+2:0,s=0,c=f.length;s<c;++s){for(r=f[s],i=t.labelTextColors[s],o=t.labelColors[s],n.fillStyle=i,ae.each(r.before,v),l=0,d=(a=r.lines).length;l<d;++l){if(m){var E=b.x(g);n.fillStyle=t.legendColorBackground,n.fillRect(b.leftForLtr(E,u),e.y,u,u),n.lineWidth=1,n.strokeStyle=o.borderColor,n.strokeRect(b.leftForLtr(E,u),e.y,u,u),n.fillStyle=o.backgroundColor,n.fillRect(b.leftForLtr(b.xPlus(E,1),u-2),e.y+1,u-2,u-2),n.fillStyle=i}v(a[l])}ae.each(r.after,v)}_=0,ae.each(t.afterBody,v),e.y-=h},drawFooter:function(e,t,n){var r,i,o=t.footer,a=o.length;if(a){var s=Sn(t.rtl,t.x,t.width);for(e.x=On(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=s.textAlign(t._footerAlign),n.textBaseline="middle",r=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=ae.fontString(r,t._footerFontStyle,t._footerFontFamily),i=0;i<a;++i)n.fillText(o[i],s.x(e.x),e.y+r/2),e.y+=r+t.footerSpacing}},drawBackground:function(e,t,n,r){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var i=t.xAlign,o=t.yAlign,a=e.x,s=e.y,l=r.width,c=r.height,d=t.cornerRadius;n.beginPath(),n.moveTo(a+d,s),"top"===o&&this.drawCaret(e,r),n.lineTo(a+l-d,s),n.quadraticCurveTo(a+l,s,a+l,s+d),"center"===o&&"right"===i&&this.drawCaret(e,r),n.lineTo(a+l,s+c-d),n.quadraticCurveTo(a+l,s+c,a+l-d,s+c),"bottom"===o&&this.drawCaret(e,r),n.lineTo(a+d,s+c),n.quadraticCurveTo(a,s+c,a,s+c-d),"center"===o&&"left"===i&&this.drawCaret(e,r),n.lineTo(a,s+d),n.quadraticCurveTo(a,s,a+d,s),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},r={x:t.x,y:t.y},i=Math.abs(t.opacity<.001)?0:t.opacity,o=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(r,t,e,n),r.y+=t.yPadding,ae.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),ae.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t=this,n=t._options,r=!1;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:(t._active=t._chart.getElementsAtEventForMode(e,n.mode,n),n.reverse&&t._active.reverse()),(r=!ae.arrayEquals(t._active,t._lastActive))&&(t._lastActive=t._active,(n.enabled||n.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),r}}),In=Tn,Pn=Ln;Pn.positioners=In;var Fn=ae.valueOrDefault;function Bn(){return ae.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,r){if("xAxes"===e||"yAxes"===e){var i,o,a,s=n[e].length;for(t[e]||(t[e]=[]),i=0;i<s;++i)a=n[e][i],o=Fn(a.type,"xAxes"===e?"category":"linear"),i>=t[e].length&&t[e].push({}),!t[e][i].type||a.type&&a.type!==t[e][i].type?ae.merge(t[e][i],[En.getScaleDefaults(o),a]):ae.merge(t[e][i],a)}else ae._merger(e,t,n,r)}})}function Yn(){return ae.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,r){var i=t[e]||Object.create(null),o=n[e];"scales"===e?t[e]=Bn(i,o):"scale"===e?t[e]=ae.merge(i,[En.getScaleDefaults(o.type),o]):ae._merger(e,t,n,r)}})}function Hn(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Yn(Z.global,Z[e.type],e.options||{}),e}function Un(e){var t=e.options;ae.each(e.scales,(function(t){Vt.removeBox(e,t)})),t=Yn(Z.global,Z[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function zn(e,t,n){var r,i=function(e){return e.id===r};do{r=t+n++}while(ae.findIndex(e,i)>=0);return r}function jn(e){return"top"===e||"bottom"===e}function Vn(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}Z._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Gn=function(e,t){return this.construct(e,t),this};ae.extend(Gn.prototype,{construct:function(e,t){var n=this;t=Hn(t);var r=vn.acquireContext(e,t),i=r&&r.canvas,o=i&&i.height,a=i&&i.width;n.id=ae.uid(),n.ctx=r,n.canvas=i,n.config=t,n.width=a,n.height=o,n.aspectRatio=o?a/o:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,Gn.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),r&&i?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return yn.notify(e,"beforeInit"),ae.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),yn.notify(e,"afterInit"),e},clear:function(){return ae.canvas.clear(this),this},stop:function(){return ge.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,r=t.canvas,i=n.maintainAspectRatio&&t.aspectRatio||null,o=Math.max(0,Math.floor(ae.getMaximumWidth(r))),a=Math.max(0,Math.floor(i?o/i:ae.getMaximumHeight(r)));if((t.width!==o||t.height!==a)&&(r.width=t.width=o,r.height=t.height=a,r.style.width=o+"px",r.style.height=a+"px",ae.retinaScale(t,n.devicePixelRatio),!e)){var s={width:o,height:a};yn.notify(t,"resize",[s]),n.onResize&&n.onResize(t,s),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;ae.each(t.xAxes,(function(e,n){e.id||(e.id=zn(t.xAxes,"x-axis-",n))})),ae.each(t.yAxes,(function(e,n){e.id||(e.id=zn(t.yAxes,"y-axis-",n))})),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},r=[],i=Object.keys(n).reduce((function(e,t){return e[t]=!1,e}),{});t.scales&&(r=r.concat((t.scales.xAxes||[]).map((function(e){return{options:e,dtype:"category",dposition:"bottom"}})),(t.scales.yAxes||[]).map((function(e){return{options:e,dtype:"linear",dposition:"left"}})))),t.scale&&r.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ae.each(r,(function(t){var r=t.options,o=r.id,a=Fn(r.type,t.dtype);jn(r.position)!==jn(t.dposition)&&(r.position=t.dposition),i[o]=!0;var s=null;if(o in n&&n[o].type===a)(s=n[o]).options=r,s.ctx=e.ctx,s.chart=e;else{var l=En.getScaleConstructor(a);if(!l)return;s=new l({id:o,type:a,options:r,ctx:e.ctx,chart:e}),n[s.id]=s}s.mergeTicksOptions(),t.isDefault&&(e.scale=s)})),ae.each(i,(function(e,t){e||delete n[t]})),e.scales=n,En.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,n=this,r=[],i=n.data.datasets;for(e=0,t=i.length;e<t;e++){var o=i[e],a=n.getDatasetMeta(e),s=o.type||n.config.type;if(a.type&&a.type!==s&&(n.destroyDatasetMeta(e),a=n.getDatasetMeta(e)),a.type=s,a.order=o.order||0,a.index=e,a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{var l=Tt[a.type];if(void 0===l)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(n,e),r.push(a.controller)}}return r},resetElements:function(){var e=this;ae.each(e.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,n,r=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),Un(r),yn._invalidate(r),!1!==yn.notify(r,"beforeUpdate")){r.tooltip._data=r.data;var i=r.buildOrUpdateControllers();for(t=0,n=r.data.datasets.length;t<n;t++)r.getDatasetMeta(t).controller.buildOrUpdateElements();r.updateLayout(),r.options.animation&&r.options.animation.duration&&ae.each(i,(function(e){e.reset()})),r.updateDatasets(),r.tooltip.initialize(),r.lastActive=[],yn.notify(r,"afterUpdate"),r._layers.sort(Vn("z","_idx")),r._bufferedRender?r._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:r.render(e)}},updateLayout:function(){var e=this;!1!==yn.notify(e,"beforeLayout")&&(Vt.update(this,this.width,this.height),e._layers=[],ae.each(e.boxes,(function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())}),e),e._layers.forEach((function(e,t){e._idx=t})),yn.notify(e,"afterScaleUpdate"),yn.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==yn.notify(e,"beforeDatasetsUpdate")){for(var t=0,n=e.data.datasets.length;t<n;++t)e.updateDataset(t);yn.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,n=t.getDatasetMeta(e),r={meta:n,index:e};!1!==yn.notify(t,"beforeDatasetUpdate",[r])&&(n.controller._update(),yn.notify(t,"afterDatasetUpdate",[r]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,r=Fn(e.duration,n&&n.duration),i=e.lazy;if(!1!==yn.notify(t,"beforeRender")){var o=function(e){yn.notify(t,"afterRender"),ae.callback(n&&n.onComplete,[e],t)};if(n&&r){var a=new _e({numSteps:r/16.66,easing:e.easing||n.easing,render:function(e,t){var n=ae.easing.effects[t.easing],r=t.currentStep,i=r/t.numSteps;e.draw(n(i),i,r)},onAnimationProgress:n.onProgress,onAnimationComplete:o});ge.addAnimation(t,a,r,i)}else t.draw(),o(new _e({numSteps:0,chart:t}));return t}},draw:function(e){var t,n,r=this;if(r.clear(),ae.isNullOrUndef(e)&&(e=1),r.transition(e),!(r.width<=0||r.height<=0)&&!1!==yn.notify(r,"beforeDraw",[e])){for(n=r._layers,t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(r.chartArea);for(r.drawDatasets(e);t<n.length;++t)n[t].draw(r.chartArea);r._drawTooltip(e),yn.notify(r,"afterDraw",[e])}},transition:function(e){for(var t=this,n=0,r=(t.data.datasets||[]).length;n<r;++n)t.isDatasetVisible(n)&&t.getDatasetMeta(n).controller.transition(e);t.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,n,r=this,i=[];for(t=0,n=(r.data.datasets||[]).length;t<n;++t)e&&!r.isDatasetVisible(t)||i.push(r.getDatasetMeta(t));return i.sort(Vn("order","index")),i},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,n,r=this;if(!1!==yn.notify(r,"beforeDatasetsDraw",[e])){for(n=(t=r._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)r.drawDataset(t[n],e);yn.notify(r,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n=this,r={meta:e,index:e.index,easingValue:t};!1!==yn.notify(n,"beforeDatasetDraw",[r])&&(e.controller.draw(t),yn.notify(n,"afterDatasetDraw",[r]))},_drawTooltip:function(e){var t=this,n=t.tooltip,r={tooltip:n,easingValue:e};!1!==yn.notify(t,"beforeTooltipDraw",[r])&&(n.draw(),yn.notify(t,"afterTooltipDraw",[r]))},getElementAtEvent:function(e){return Dt.modes.single(this,e)},getElementsAtEvent:function(e){return Dt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return Dt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var r=Dt.modes[t];return"function"==typeof r?r(this,e,n):[]},getDatasetAtEvent:function(e){return Dt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,n=t.data.datasets[e];n._meta||(n._meta={});var r=n._meta[t.id];return r||(r=n._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n.order||0,index:e}),r},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],r=n._meta&&n._meta[t];r&&(r.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,r=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);r&&(n.unbindEvents(),ae.canvas.clear(n),vn.releaseContext(n.ctx),n.canvas=null,n.ctx=null),yn.notify(n,"destroy"),delete Gn.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Pn({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};ae.each(e.options.events,(function(r){vn.addEventListener(e,r,n),t[r]=n})),e.options.responsive&&(n=function(){e.resize()},vn.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ae.each(t,(function(t,n){vn.removeEventListener(e,n,t)})))},updateHoverStyle:function(e,t,n){var r,i,o,a=n?"set":"remove";for(i=0,o=e.length;i<o;++i)(r=e[i])&&this.getDatasetMeta(r._datasetIndex).controller[a+"HoverStyle"](r);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==yn.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var r=t.handleEvent(e);n&&(r=n._start?n.handleEvent(e):r|n.handleEvent(e